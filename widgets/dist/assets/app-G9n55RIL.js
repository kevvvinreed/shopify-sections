function cU(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var uU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yP={exports:{}},rv={},_P={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=Symbol.for("react.element"),dU=Symbol.for("react.portal"),fU=Symbol.for("react.fragment"),hU=Symbol.for("react.strict_mode"),pU=Symbol.for("react.profiler"),mU=Symbol.for("react.provider"),gU=Symbol.for("react.context"),vU=Symbol.for("react.forward_ref"),yU=Symbol.for("react.suspense"),_U=Symbol.for("react.memo"),xU=Symbol.for("react.lazy"),aE=Symbol.iterator;function AU(n){return n===null||typeof n!="object"?null:(n=aE&&n[aE]||n["@@iterator"],typeof n=="function"?n:null)}var xP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AP=Object.assign,SP={};function Fu(n,e,t){this.props=n,this.context=e,this.refs=SP,this.updater=t||xP}Fu.prototype.isReactComponent={};Fu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Fu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wP(){}wP.prototype=Fu.prototype;function QA(n,e,t){this.props=n,this.context=e,this.refs=SP,this.updater=t||xP}var ZA=QA.prototype=new wP;ZA.constructor=QA;AP(ZA,Fu.prototype);ZA.isPureReactComponent=!0;var sE=Array.isArray,CP=Object.prototype.hasOwnProperty,$A={current:null},EP={key:!0,ref:!0,__self:!0,__source:!0};function MP(n,e,t){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)CP.call(e,r)&&!EP.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Zf,type:n,key:a,ref:s,props:i,_owner:$A.current}}function SU(n,e){return{$$typeof:Zf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function eS(n){return typeof n=="object"&&n!==null&&n.$$typeof===Zf}function wU(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var oE=/\/+/g;function fy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?wU(""+n.key):e.toString(36)}function Hm(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Zf:case dU:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+fy(s,0):r,sE(i)?(t="",n!=null&&(t=n.replace(oE,"$&/")+"/"),Hm(i,e,t,"",function(c){return c})):i!=null&&(eS(i)&&(i=SU(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(oE,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",sE(n))for(var o=0;o<n.length;o++){a=n[o];var l=r+fy(a,o);s+=Hm(a,e,t,l,i)}else if(l=AU(n),typeof l=="function")for(n=l.call(n),o=0;!(a=n.next()).done;)a=a.value,l=r+fy(a,o++),s+=Hm(a,e,t,l,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function wp(n,e,t){if(n==null)return n;var r=[],i=0;return Hm(n,r,"","",function(a){return e.call(t,a,i++)}),r}function CU(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var qi={current:null},Wm={transition:null},EU={ReactCurrentDispatcher:qi,ReactCurrentBatchConfig:Wm,ReactCurrentOwner:$A};jt.Children={map:wp,forEach:function(n,e,t){wp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return wp(n,function(){e++}),e},toArray:function(n){return wp(n,function(e){return e})||[]},only:function(n){if(!eS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};jt.Component=Fu;jt.Fragment=fU;jt.Profiler=pU;jt.PureComponent=QA;jt.StrictMode=hU;jt.Suspense=yU;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EU;jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=AP({},n.props),i=n.key,a=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=$A.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)CP.call(e,l)&&!EP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Zf,type:n.type,key:i,ref:a,props:r,_owner:s}};jt.createContext=function(n){return n={$$typeof:gU,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:mU,_context:n},n.Consumer=n};jt.createElement=MP;jt.createFactory=function(n){var e=MP.bind(null,n);return e.type=n,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(n){return{$$typeof:vU,render:n}};jt.isValidElement=eS;jt.lazy=function(n){return{$$typeof:xU,_payload:{_status:-1,_result:n},_init:CU}};jt.memo=function(n,e){return{$$typeof:_U,type:n,compare:e===void 0?null:e}};jt.startTransition=function(n){var e=Wm.transition;Wm.transition={};try{n()}finally{Wm.transition=e}};jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jt.useCallback=function(n,e){return qi.current.useCallback(n,e)};jt.useContext=function(n){return qi.current.useContext(n)};jt.useDebugValue=function(){};jt.useDeferredValue=function(n){return qi.current.useDeferredValue(n)};jt.useEffect=function(n,e){return qi.current.useEffect(n,e)};jt.useId=function(){return qi.current.useId()};jt.useImperativeHandle=function(n,e,t){return qi.current.useImperativeHandle(n,e,t)};jt.useInsertionEffect=function(n,e){return qi.current.useInsertionEffect(n,e)};jt.useLayoutEffect=function(n,e){return qi.current.useLayoutEffect(n,e)};jt.useMemo=function(n,e){return qi.current.useMemo(n,e)};jt.useReducer=function(n,e,t){return qi.current.useReducer(n,e,t)};jt.useRef=function(n){return qi.current.useRef(n)};jt.useState=function(n){return qi.current.useState(n)};jt.useSyncExternalStore=function(n,e,t){return qi.current.useSyncExternalStore(n,e,t)};jt.useTransition=function(){return qi.current.useTransition()};jt.version="18.2.0";_P.exports=jt;var k=_P.exports;const Wd=YA(k),MU=cU({__proto__:null,default:Wd},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TU=k,bU=Symbol.for("react.element"),PU=Symbol.for("react.fragment"),RU=Object.prototype.hasOwnProperty,IU=TU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FU={key:!0,ref:!0,__self:!0,__source:!0};function TP(n,e,t){var r,i={},a=null,s=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)RU.call(e,r)&&!FU.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bU,type:n,key:a,ref:s,props:i,_owner:IU.current}}rv.Fragment=PU;rv.jsx=TP;rv.jsxs=TP;yP.exports=rv;var ue=yP.exports;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ol="160",BU={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},LU={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bP=0,H_=1,PP=2,DU=3,RP=0,av=1,Xd=2,fa=3,Wa=0,Xi=1,Yr=2,UU=2,xs=0,yl=1,W_=2,X_=3,j_=4,IP=5,Qs=100,FP=101,BP=102,J_=103,q_=104,LP=200,DP=201,UP=202,OP=203,dg=204,fg=205,kP=206,NP=207,zP=208,VP=209,GP=210,HP=211,WP=212,XP=213,jP=214,JP=0,qP=1,KP=2,uf=3,YP=4,QP=5,ZP=6,$P=7,$f=0,e2=1,t2=2,ka=0,n2=1,i2=2,r2=3,tS=4,a2=5,s2=6,K_="attached",o2="detached",sv=300,Xa=301,go=302,lu=303,df=304,Bu=306,vo=1e3,mi=1001,cu=1002,En=1003,ff=1004,OU=1004,Yc=1005,kU=1005,fn=1006,ov=1007,NU=1007,ja=1008,zU=1008,Na=1009,l2=1010,c2=1011,lv=1012,nS=1013,ps=1014,gi=1015,Ii=1016,iS=1017,rS=1018,ao=1020,u2=1021,Ri=1023,d2=1024,f2=1025,so=1026,Tl=1027,aS=1028,sS=1029,h2=1030,oS=1031,lS=1033,Xm=33776,jm=33777,Jm=33778,qm=33779,Y_=35840,Q_=35841,Z_=35842,$_=35843,cS=36196,ex=37492,tx=37496,nx=37808,ix=37809,rx=37810,ax=37811,sx=37812,ox=37813,lx=37814,cx=37815,ux=37816,dx=37817,fx=37818,hx=37819,px=37820,mx=37821,Km=36492,gx=36494,vx=36495,p2=36283,yx=36284,_x=36285,xx=36286,m2=2200,g2=2201,v2=2202,uu=2300,bl=2301,Ym=2302,ll=2400,cl=2401,hf=2402,cv=2500,uS=2501,y2=0,dS=1,hg=2,fS=3e3,oo=3001,_2=3200,x2=3201,Co=0,A2=1,Ar="",$n="srgb",Ja="srgb-linear",uv="display-p3",eh="display-p3-linear",pf="linear",pn="srgb",mf="rec709",gf="p3",VU=0,tl=7680,GU=7681,HU=7682,WU=7683,XU=34055,jU=34056,JU=5386,qU=512,KU=513,YU=514,QU=515,ZU=516,$U=517,eO=518,Ax=519,S2=512,w2=513,C2=514,hS=515,E2=516,M2=517,T2=518,b2=519,vf=35044,tO=35048,nO=35040,iO=35045,rO=35049,aO=35041,sO=35046,oO=35050,lO=35042,cO="100",Sx="300 es",pg=1035,va=2e3,du=2001;class Ts{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lE=1234567;const _l=Math.PI/180,fu=180/Math.PI;function Er(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(wi[n&255]+wi[n>>8&255]+wi[n>>16&255]+wi[n>>24&255]+"-"+wi[e&255]+wi[e>>8&255]+"-"+wi[e>>16&15|64]+wi[e>>24&255]+"-"+wi[t&63|128]+wi[t>>8&255]+"-"+wi[t>>16&255]+wi[t>>24&255]+wi[r&255]+wi[r>>8&255]+wi[r>>16&255]+wi[r>>24&255]).toLowerCase()}function On(n,e,t){return Math.max(e,Math.min(t,n))}function pS(n,e){return(n%e+e)%e}function uO(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function dO(n,e,t){return n!==e?(t-n)/(e-n):0}function jd(n,e,t){return(1-t)*n+t*e}function fO(n,e,t,r){return jd(n,e,1-Math.exp(-t*r))}function hO(n,e=1){return e-Math.abs(pS(n,e*2)-e)}function pO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function mO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function gO(n,e){return n+Math.floor(Math.random()*(e-n+1))}function vO(n,e){return n+Math.random()*(e-n)}function yO(n){return n*(.5-Math.random())}function _O(n){n!==void 0&&(lE=n);let e=lE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function xO(n){return n*_l}function AO(n){return n*fu}function wx(n){return(n&n-1)===0&&n!==0}function SO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function mg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wO(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),c=a((e+r)/2),f=s((e+r)/2),p=a((e-r)/2),h=s((e-r)/2),m=a((r-e)/2),v=s((r-e)/2);switch(i){case"XYX":n.set(o*f,l*p,l*h,o*c);break;case"YZY":n.set(l*h,o*f,l*p,o*c);break;case"ZXZ":n.set(l*p,l*h,o*f,o*c);break;case"XZX":n.set(o*f,l*v,l*m,o*c);break;case"YXY":n.set(l*m,o*f,l*v,o*c);break;case"ZYZ":n.set(l*v,l*m,o*f,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function sr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Ua={DEG2RAD:_l,RAD2DEG:fu,generateUUID:Er,clamp:On,euclideanModulo:pS,mapLinear:uO,inverseLerp:dO,lerp:jd,damp:fO,pingpong:hO,smoothstep:pO,smootherstep:mO,randInt:gO,randFloat:vO,randFloatSpread:yO,seededRandom:_O,degToRad:xO,radToDeg:AO,isPowerOfTwo:wx,ceilPowerOfTwo:SO,floorPowerOfTwo:mg,setQuaternionFromProperEuler:wO,normalize:kt,denormalize:sr};class Me{constructor(e=0,t=0){Me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(e,t,r,i,a,s,o,l,c){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,c)}set(e,t,r,i,a,s,o,l,c){const f=this.elements;return f[0]=e,f[1]=i,f[2]=o,f[3]=t,f[4]=a,f[5]=l,f[6]=r,f[7]=s,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],c=r[1],f=r[4],p=r[7],h=r[2],m=r[5],v=r[8],x=i[0],_=i[3],g=i[6],A=i[1],S=i[4],C=i[7],T=i[2],M=i[5],b=i[8];return a[0]=s*x+o*A+l*T,a[3]=s*_+o*S+l*M,a[6]=s*g+o*C+l*b,a[1]=c*x+f*A+p*T,a[4]=c*_+f*S+p*M,a[7]=c*g+f*C+p*b,a[2]=h*x+m*A+v*T,a[5]=h*_+m*S+v*M,a[8]=h*g+m*C+v*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],f=e[8];return t*s*f-t*o*c-r*a*f+r*o*l+i*a*c-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],f=e[8],p=f*s-o*c,h=o*l-f*a,m=c*a-s*l,v=t*p+r*h+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=p*x,e[1]=(i*c-f*r)*x,e[2]=(o*r-i*s)*x,e[3]=h*x,e[4]=(f*t-i*l)*x,e[5]=(i*a-o*t)*x,e[6]=m*x,e[7]=(r*l-c*t)*x,e[8]=(s*t-r*a)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),c=Math.sin(a);return this.set(r*l,r*c,-r*(l*s+c*o)+s+e,-i*c,i*l,-i*(-c*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(hy.makeScale(e,t)),this}rotate(e){return this.premultiply(hy.makeRotation(-e)),this}translate(e,t){return this.premultiply(hy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const hy=new Vt;function P2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const CO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lc(n,e){return new CO[n](e)}function yf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function R2(){const n=yf("canvas");return n.style.display="block",n}const cE={};function Jd(n){n in cE||(cE[n]=!0,console.warn(n))}const uE=new Vt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),dE=new Vt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Cp={[Ja]:{transfer:pf,primaries:mf,toReference:n=>n,fromReference:n=>n},[$n]:{transfer:pn,primaries:mf,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[eh]:{transfer:pf,primaries:gf,toReference:n=>n.applyMatrix3(dE),fromReference:n=>n.applyMatrix3(uE)},[uv]:{transfer:pn,primaries:gf,toReference:n=>n.convertSRGBToLinear().applyMatrix3(dE),fromReference:n=>n.applyMatrix3(uE).convertLinearToSRGB()}},EO=new Set([Ja,eh]),ln={enabled:!0,_workingColorSpace:Ja,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!EO.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Cp[e].toReference,i=Cp[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Cp[n].primaries},getTransfer:function(n){return n===Ar?pf:Cp[n].transfer}};function Qc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function py(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let rc;class mS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{rc===void 0&&(rc=yf("canvas")),rc.width=e.width,rc.height=e.height;const r=rc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=rc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=yf("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Qc(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Qc(t[r]/255)*255):t[r]=Qc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let MO=0;class ul{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:MO++}),this.uuid=Er(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(my(i[s].image)):a.push(my(i[s]))}else a=my(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function my(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?mS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let TO=0;class Sn extends Ts{constructor(e=Sn.DEFAULT_IMAGE,t=Sn.DEFAULT_MAPPING,r=mi,i=mi,a=fn,s=ja,o=Ri,l=Na,c=Sn.DEFAULT_ANISOTROPY,f=Ar){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:TO++}),this.uuid=Er(),this.name="",this.source=new ul(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(Jd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===oo?$n:Ar),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vo:e.x=e.x-Math.floor(e.x);break;case mi:e.x=e.x<0?0:1;break;case cu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case vo:e.y=e.y-Math.floor(e.y);break;case mi:e.y=e.y<0?0:1;break;case cu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Jd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===$n?oo:fS}set encoding(e){Jd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===oo?$n:Ar}}Sn.DEFAULT_IMAGE=null;Sn.DEFAULT_MAPPING=sv;Sn.DEFAULT_ANISOTROPY=1;class cn{constructor(e=0,t=0,r=0,i=1){cn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,c=l[0],f=l[4],p=l[8],h=l[1],m=l[5],v=l[9],x=l[2],_=l[6],g=l[10];if(Math.abs(f-h)<.01&&Math.abs(p-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(f+h)<.1&&Math.abs(p+x)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,C=(m+1)/2,T=(g+1)/2,M=(f+h)/4,b=(p+x)/4,L=(v+_)/4;return S>C&&S>T?S<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(S),i=M/r,a=b/r):C>T?C<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(C),r=M/i,a=L/i):T<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(T),r=b/a,i=L/a),this.set(r,i,a,t),this}let A=Math.sqrt((_-v)*(_-v)+(p-x)*(p-x)+(h-f)*(h-f));return Math.abs(A)<.001&&(A=1),this.x=(_-v)/A,this.y=(p-x)/A,this.z=(h-f)/A,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class I2 extends Ts{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new cn(0,0,e,t),this.scissorTest=!1,this.viewport=new cn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Jd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===oo?$n:Ar),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Sn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ul(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ji extends I2{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class dv extends Sn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bO extends Ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new dv(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class gS extends Sn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PO extends Ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new gS(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class RO extends Ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=a.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ni{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],c=r[i+1],f=r[i+2],p=r[i+3];const h=a[s+0],m=a[s+1],v=a[s+2],x=a[s+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p;return}if(o===1){e[t+0]=h,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(p!==x||l!==h||c!==m||f!==v){let _=1-o;const g=l*h+c*m+f*v+p*x,A=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const T=Math.sqrt(S),M=Math.atan2(T,g*A);_=Math.sin(_*M)/T,o=Math.sin(o*M)/T}const C=o*A;if(l=l*_+h*C,c=c*_+m*C,f=f*_+v*C,p=p*_+x*C,_===1-o){const T=1/Math.sqrt(l*l+c*c+f*f+p*p);l*=T,c*=T,f*=T,p*=T}}e[t]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],c=r[i+2],f=r[i+3],p=a[s],h=a[s+1],m=a[s+2],v=a[s+3];return e[t]=o*v+f*p+l*m-c*h,e[t+1]=l*v+f*h+c*p-o*m,e[t+2]=c*v+f*m+o*h-l*p,e[t+3]=f*v-o*p-l*h-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,c=o(r/2),f=o(i/2),p=o(a/2),h=l(r/2),m=l(i/2),v=l(a/2);switch(s){case"XYZ":this._x=h*f*p+c*m*v,this._y=c*m*p-h*f*v,this._z=c*f*v+h*m*p,this._w=c*f*p-h*m*v;break;case"YXZ":this._x=h*f*p+c*m*v,this._y=c*m*p-h*f*v,this._z=c*f*v-h*m*p,this._w=c*f*p+h*m*v;break;case"ZXY":this._x=h*f*p-c*m*v,this._y=c*m*p+h*f*v,this._z=c*f*v+h*m*p,this._w=c*f*p-h*m*v;break;case"ZYX":this._x=h*f*p-c*m*v,this._y=c*m*p+h*f*v,this._z=c*f*v-h*m*p,this._w=c*f*p+h*m*v;break;case"YZX":this._x=h*f*p+c*m*v,this._y=c*m*p+h*f*v,this._z=c*f*v-h*m*p,this._w=c*f*p-h*m*v;break;case"XZY":this._x=h*f*p-c*m*v,this._y=c*m*p-h*f*v,this._z=c*f*v+h*m*p,this._w=c*f*p+h*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],c=t[2],f=t[6],p=t[10],h=r+o+p;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(f-l)*m,this._y=(a-c)*m,this._z=(s-i)*m}else if(r>o&&r>p){const m=2*Math.sqrt(1+r-o-p);this._w=(f-l)/m,this._x=.25*m,this._y=(i+s)/m,this._z=(a+c)/m}else if(o>p){const m=2*Math.sqrt(1+o-r-p);this._w=(a-c)/m,this._x=(i+s)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+p-r-o);this._w=(s-i)/m,this._x=(a+c)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(On(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,c=t._z,f=t._w;return this._x=r*f+s*o+i*c-a*l,this._y=i*f+s*l+a*o-r*c,this._z=a*f+s*c+r*l-i*o,this._w=s*f-r*o-i*l-a*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-t;return this._w=m*s+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*a+t*this._z,this.normalize(),this}const c=Math.sqrt(l),f=Math.atan2(c,o),p=Math.sin((1-t)*f)/c,h=Math.sin(t*f)/c;return this._w=s*p+this._w*h,this._x=r*p+this._x*h,this._y=i*p+this._y*h,this._z=a*p+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,r=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(fE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,c=2*(s*i-o*r),f=2*(o*t-a*i),p=2*(a*r-s*t);return this.x=t+l*c+s*p-o*f,this.y=r+l*f+o*c-a*p,this.z=i+l*p+a*f-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return gy.copy(this).projectOnVector(e),this.sub(gy)}reflect(e){return this.sub(gy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(On(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gy=new z,fE=new ni;class fi{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(la.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(la.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=la.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,la):la.fromBufferAttribute(a,s),la.applyMatrix4(e.matrixWorld),this.expandByPoint(la);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ep.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Ep.copy(r.boundingBox)),Ep.applyMatrix4(e.matrixWorld),this.union(Ep)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,la),la.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dd),Mp.subVectors(this.max,dd),ac.subVectors(e.a,dd),sc.subVectors(e.b,dd),oc.subVectors(e.c,dd),Os.subVectors(sc,ac),ks.subVectors(oc,sc),Wo.subVectors(ac,oc);let t=[0,-Os.z,Os.y,0,-ks.z,ks.y,0,-Wo.z,Wo.y,Os.z,0,-Os.x,ks.z,0,-ks.x,Wo.z,0,-Wo.x,-Os.y,Os.x,0,-ks.y,ks.x,0,-Wo.y,Wo.x,0];return!vy(t,ac,sc,oc,Mp)||(t=[1,0,0,0,1,0,0,0,1],!vy(t,ac,sc,oc,Mp))?!1:(Tp.crossVectors(Os,ks),t=[Tp.x,Tp.y,Tp.z],vy(t,ac,sc,oc,Mp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,la).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(la).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rs=[new z,new z,new z,new z,new z,new z,new z,new z],la=new z,Ep=new fi,ac=new z,sc=new z,oc=new z,Os=new z,ks=new z,Wo=new z,dd=new z,Mp=new z,Tp=new z,Xo=new z;function vy(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){Xo.fromArray(n,a);const o=i.x*Math.abs(Xo.x)+i.y*Math.abs(Xo.y)+i.z*Math.abs(Xo.z),l=e.dot(Xo),c=t.dot(Xo),f=r.dot(Xo);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>o)return!1}return!0}const IO=new fi,fd=new z,yy=new z;class hi{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):IO.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fd.subVectors(e,this.center);const t=fd.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(fd,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fd.copy(e.center).add(yy)),this.expandByPoint(fd.copy(e.center).sub(yy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const as=new z,_y=new z,bp=new z,Ns=new z,xy=new z,Pp=new z,Ay=new z;class Lu{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,as)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=as.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(as.copy(this.origin).addScaledVector(this.direction,t),as.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){_y.copy(e).add(t).multiplyScalar(.5),bp.copy(t).sub(e).normalize(),Ns.copy(this.origin).sub(_y);const a=e.distanceTo(t)*.5,s=-this.direction.dot(bp),o=Ns.dot(this.direction),l=-Ns.dot(bp),c=Ns.lengthSq(),f=Math.abs(1-s*s);let p,h,m,v;if(f>0)if(p=s*l-o,h=s*o-l,v=a*f,p>=0)if(h>=-v)if(h<=v){const x=1/f;p*=x,h*=x,m=p*(p+s*h+2*o)+h*(s*p+h+2*l)+c}else h=a,p=Math.max(0,-(s*h+o)),m=-p*p+h*(h+2*l)+c;else h=-a,p=Math.max(0,-(s*h+o)),m=-p*p+h*(h+2*l)+c;else h<=-v?(p=Math.max(0,-(-s*a+o)),h=p>0?-a:Math.min(Math.max(-a,-l),a),m=-p*p+h*(h+2*l)+c):h<=v?(p=0,h=Math.min(Math.max(-a,-l),a),m=h*(h+2*l)+c):(p=Math.max(0,-(s*a+o)),h=p>0?a:Math.min(Math.max(-a,-l),a),m=-p*p+h*(h+2*l)+c);else h=s>0?-a:a,p=Math.max(0,-(s*h+o)),m=-p*p+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(_y).addScaledVector(bp,h),m}intersectSphere(e,t){as.subVectors(e.center,this.origin);const r=as.dot(this.direction),i=as.dot(as)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const c=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),f>=0?(a=(e.min.y-h.y)*f,s=(e.max.y-h.y)*f):(a=(e.max.y-h.y)*f,s=(e.min.y-h.y)*f),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),p>=0?(o=(e.min.z-h.z)*p,l=(e.max.z-h.z)*p):(o=(e.max.z-h.z)*p,l=(e.min.z-h.z)*p),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,as)!==null}intersectTriangle(e,t,r,i,a){xy.subVectors(t,e),Pp.subVectors(r,e),Ay.crossVectors(xy,Pp);let s=this.direction.dot(Ay),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Ns.subVectors(this.origin,e);const l=o*this.direction.dot(Pp.crossVectors(Ns,Pp));if(l<0)return null;const c=o*this.direction.dot(xy.cross(Ns));if(c<0||l+c>s)return null;const f=-o*Ns.dot(Ay);return f<0?null:this.at(f/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class vt{constructor(e,t,r,i,a,s,o,l,c,f,p,h,m,v,x,_){vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,c,f,p,h,m,v,x,_)}set(e,t,r,i,a,s,o,l,c,f,p,h,m,v,x,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=a,g[5]=s,g[9]=o,g[13]=l,g[2]=c,g[6]=f,g[10]=p,g[14]=h,g[3]=m,g[7]=v,g[11]=x,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/lc.setFromMatrixColumn(e,0).length(),a=1/lc.setFromMatrixColumn(e,1).length(),s=1/lc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),f=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const h=s*f,m=s*p,v=o*f,x=o*p;t[0]=l*f,t[4]=-l*p,t[8]=c,t[1]=m+v*c,t[5]=h-x*c,t[9]=-o*l,t[2]=x-h*c,t[6]=v+m*c,t[10]=s*l}else if(e.order==="YXZ"){const h=l*f,m=l*p,v=c*f,x=c*p;t[0]=h+x*o,t[4]=v*o-m,t[8]=s*c,t[1]=s*p,t[5]=s*f,t[9]=-o,t[2]=m*o-v,t[6]=x+h*o,t[10]=s*l}else if(e.order==="ZXY"){const h=l*f,m=l*p,v=c*f,x=c*p;t[0]=h-x*o,t[4]=-s*p,t[8]=v+m*o,t[1]=m+v*o,t[5]=s*f,t[9]=x-h*o,t[2]=-s*c,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const h=s*f,m=s*p,v=o*f,x=o*p;t[0]=l*f,t[4]=v*c-m,t[8]=h*c+x,t[1]=l*p,t[5]=x*c+h,t[9]=m*c-v,t[2]=-c,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const h=s*l,m=s*c,v=o*l,x=o*c;t[0]=l*f,t[4]=x-h*p,t[8]=v*p+m,t[1]=p,t[5]=s*f,t[9]=-o*f,t[2]=-c*f,t[6]=m*p+v,t[10]=h-x*p}else if(e.order==="XZY"){const h=s*l,m=s*c,v=o*l,x=o*c;t[0]=l*f,t[4]=-p,t[8]=c*f,t[1]=h*p+x,t[5]=s*f,t[9]=m*p-v,t[2]=v*p-m,t[6]=o*f,t[10]=x*p+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(FO,e,BO)}lookAt(e,t,r){const i=this.elements;return yr.subVectors(e,t),yr.lengthSq()===0&&(yr.z=1),yr.normalize(),zs.crossVectors(r,yr),zs.lengthSq()===0&&(Math.abs(r.z)===1?yr.x+=1e-4:yr.z+=1e-4,yr.normalize(),zs.crossVectors(r,yr)),zs.normalize(),Rp.crossVectors(yr,zs),i[0]=zs.x,i[4]=Rp.x,i[8]=yr.x,i[1]=zs.y,i[5]=Rp.y,i[9]=yr.y,i[2]=zs.z,i[6]=Rp.z,i[10]=yr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],c=r[12],f=r[1],p=r[5],h=r[9],m=r[13],v=r[2],x=r[6],_=r[10],g=r[14],A=r[3],S=r[7],C=r[11],T=r[15],M=i[0],b=i[4],L=i[8],R=i[12],F=i[1],O=i[5],X=i[9],ne=i[13],W=i[2],Z=i[6],ie=i[10],he=i[14],Y=i[3],re=i[7],te=i[11],de=i[15];return a[0]=s*M+o*F+l*W+c*Y,a[4]=s*b+o*O+l*Z+c*re,a[8]=s*L+o*X+l*ie+c*te,a[12]=s*R+o*ne+l*he+c*de,a[1]=f*M+p*F+h*W+m*Y,a[5]=f*b+p*O+h*Z+m*re,a[9]=f*L+p*X+h*ie+m*te,a[13]=f*R+p*ne+h*he+m*de,a[2]=v*M+x*F+_*W+g*Y,a[6]=v*b+x*O+_*Z+g*re,a[10]=v*L+x*X+_*ie+g*te,a[14]=v*R+x*ne+_*he+g*de,a[3]=A*M+S*F+C*W+T*Y,a[7]=A*b+S*O+C*Z+T*re,a[11]=A*L+S*X+C*ie+T*te,a[15]=A*R+S*ne+C*he+T*de,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],c=e[13],f=e[2],p=e[6],h=e[10],m=e[14],v=e[3],x=e[7],_=e[11],g=e[15];return v*(+a*l*p-i*c*p-a*o*h+r*c*h+i*o*m-r*l*m)+x*(+t*l*m-t*c*h+a*s*h-i*s*m+i*c*f-a*l*f)+_*(+t*c*p-t*o*m-a*s*p+r*s*m+a*o*f-r*c*f)+g*(-i*o*f-t*l*p+t*o*h+i*s*p-r*s*h+r*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],m=e[11],v=e[12],x=e[13],_=e[14],g=e[15],A=p*_*c-x*h*c+x*l*m-o*_*m-p*l*g+o*h*g,S=v*h*c-f*_*c-v*l*m+s*_*m+f*l*g-s*h*g,C=f*x*c-v*p*c+v*o*m-s*x*m-f*o*g+s*p*g,T=v*p*l-f*x*l-v*o*h+s*x*h+f*o*_-s*p*_,M=t*A+r*S+i*C+a*T;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/M;return e[0]=A*b,e[1]=(x*h*a-p*_*a-x*i*m+r*_*m+p*i*g-r*h*g)*b,e[2]=(o*_*a-x*l*a+x*i*c-r*_*c-o*i*g+r*l*g)*b,e[3]=(p*l*a-o*h*a-p*i*c+r*h*c+o*i*m-r*l*m)*b,e[4]=S*b,e[5]=(f*_*a-v*h*a+v*i*m-t*_*m-f*i*g+t*h*g)*b,e[6]=(v*l*a-s*_*a-v*i*c+t*_*c+s*i*g-t*l*g)*b,e[7]=(s*h*a-f*l*a+f*i*c-t*h*c-s*i*m+t*l*m)*b,e[8]=C*b,e[9]=(v*p*a-f*x*a-v*r*m+t*x*m+f*r*g-t*p*g)*b,e[10]=(s*x*a-v*o*a+v*r*c-t*x*c-s*r*g+t*o*g)*b,e[11]=(f*o*a-s*p*a-f*r*c+t*p*c+s*r*m-t*o*m)*b,e[12]=T*b,e[13]=(f*x*i-v*p*i+v*r*h-t*x*h-f*r*_+t*p*_)*b,e[14]=(v*o*i-s*x*i-v*r*l+t*x*l+s*r*_-t*o*_)*b,e[15]=(s*p*i-f*o*i+f*r*l-t*p*l-s*r*h+t*o*h)*b,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,c=a*s,f=a*o;return this.set(c*s+r,c*o-i*l,c*l+i*o,0,c*o+i*l,f*o+r,f*l-i*s,0,c*l-i*o,f*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,c=a+a,f=s+s,p=o+o,h=a*c,m=a*f,v=a*p,x=s*f,_=s*p,g=o*p,A=l*c,S=l*f,C=l*p,T=r.x,M=r.y,b=r.z;return i[0]=(1-(x+g))*T,i[1]=(m+C)*T,i[2]=(v-S)*T,i[3]=0,i[4]=(m-C)*M,i[5]=(1-(h+g))*M,i[6]=(_+A)*M,i[7]=0,i[8]=(v+S)*b,i[9]=(_-A)*b,i[10]=(1-(h+x))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=lc.set(i[0],i[1],i[2]).length();const s=lc.set(i[4],i[5],i[6]).length(),o=lc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],ca.copy(this);const c=1/a,f=1/s,p=1/o;return ca.elements[0]*=c,ca.elements[1]*=c,ca.elements[2]*=c,ca.elements[4]*=f,ca.elements[5]*=f,ca.elements[6]*=f,ca.elements[8]*=p,ca.elements[9]*=p,ca.elements[10]*=p,t.setFromRotationMatrix(ca),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=va){const l=this.elements,c=2*a/(t-e),f=2*a/(r-i),p=(t+e)/(t-e),h=(r+i)/(r-i);let m,v;if(o===va)m=-(s+a)/(s-a),v=-2*s*a/(s-a);else if(o===du)m=-s/(s-a),v=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=f,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=va){const l=this.elements,c=1/(t-e),f=1/(r-i),p=1/(s-a),h=(t+e)*c,m=(r+i)*f;let v,x;if(o===va)v=(s+a)*p,x=-2*p;else if(o===du)v=a*p,x=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const lc=new z,ca=new vt,FO=new z(0,0,0),BO=new z(1,1,1),zs=new z,Rp=new z,yr=new z,hE=new vt,pE=new ni;class th{constructor(e=0,t=0,r=0,i=th.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],c=i[5],f=i[9],p=i[2],h=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(On(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-On(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(On(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-p,m),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-On(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(On(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-On(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return hE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hE,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pE.setFromEuler(this),this.setFromQuaternion(pE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}th.DEFAULT_ORDER="XYZ";class xl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let LO=0;const mE=new z,cc=new ni,ss=new vt,Ip=new z,hd=new z,DO=new z,UO=new ni,gE=new z(1,0,0),vE=new z(0,1,0),yE=new z(0,0,1),OO={type:"added"},kO={type:"removed"};class Qt extends Ts{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:LO++}),this.uuid=Er(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qt.DEFAULT_UP.clone();const e=new z,t=new th,r=new ni,i=new z(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new vt},normalMatrix:{value:new Vt}}),this.matrix=new vt,this.matrixWorld=new vt,this.matrixAutoUpdate=Qt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return cc.setFromAxisAngle(e,t),this.quaternion.multiply(cc),this}rotateOnWorldAxis(e,t){return cc.setFromAxisAngle(e,t),this.quaternion.premultiply(cc),this}rotateX(e){return this.rotateOnAxis(gE,e)}rotateY(e){return this.rotateOnAxis(vE,e)}rotateZ(e){return this.rotateOnAxis(yE,e)}translateOnAxis(e,t){return mE.copy(e).applyQuaternion(this.quaternion),this.position.add(mE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gE,e)}translateY(e){return this.translateOnAxis(vE,e)}translateZ(e){return this.translateOnAxis(yE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ss.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Ip.copy(e):Ip.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),hd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ss.lookAt(hd,Ip,this.up):ss.lookAt(Ip,hd,this.up),this.quaternion.setFromRotationMatrix(ss),i&&(ss.extractRotation(i.matrixWorld),cc.setFromRotationMatrix(ss),this.quaternion.premultiply(cc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(OO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(kO)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ss.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ss.multiply(e.parent.matrixWorld)),e.applyMatrix4(ss),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hd,e,DO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hd,UO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const a=t[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++){const o=i[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const p=l[c];a(e.shapes,p)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),c=s(e.textures),f=s(e.images),p=s(e.shapes),h=s(e.skeletons),m=s(e.animations),v=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function s(o){const l=[];for(const c in o){const f=o[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Qt.DEFAULT_UP=new z(0,1,0);Qt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ua=new z,os=new z,Sy=new z,ls=new z,uc=new z,dc=new z,_E=new z,wy=new z,Cy=new z,Ey=new z;let Fp=!1;class rr{constructor(e=new z,t=new z,r=new z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ua.subVectors(e,t),i.cross(ua);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){ua.subVectors(i,t),os.subVectors(r,t),Sy.subVectors(e,t);const s=ua.dot(ua),o=ua.dot(os),l=ua.dot(Sy),c=os.dot(os),f=os.dot(Sy),p=s*c-o*o;if(p===0)return a.set(0,0,0),null;const h=1/p,m=(c*l-o*f)*h,v=(s*f-o*l)*h;return a.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ls)===null?!1:ls.x>=0&&ls.y>=0&&ls.x+ls.y<=1}static getUV(e,t,r,i,a,s,o,l){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),this.getInterpolation(e,t,r,i,a,s,o,l)}static getInterpolation(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,ls)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,ls.x),l.addScaledVector(s,ls.y),l.addScaledVector(o,ls.z),l)}static isFrontFacing(e,t,r,i){return ua.subVectors(r,t),os.subVectors(e,t),ua.cross(os).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ua.subVectors(this.c,this.b),os.subVectors(this.a,this.b),ua.cross(os).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),rr.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}getInterpolation(e,t,r,i,a){return rr.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return rr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;uc.subVectors(i,r),dc.subVectors(a,r),wy.subVectors(e,r);const l=uc.dot(wy),c=dc.dot(wy);if(l<=0&&c<=0)return t.copy(r);Cy.subVectors(e,i);const f=uc.dot(Cy),p=dc.dot(Cy);if(f>=0&&p<=f)return t.copy(i);const h=l*p-f*c;if(h<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(r).addScaledVector(uc,s);Ey.subVectors(e,a);const m=uc.dot(Ey),v=dc.dot(Ey);if(v>=0&&m<=v)return t.copy(a);const x=m*c-l*v;if(x<=0&&c>=0&&v<=0)return o=c/(c-v),t.copy(r).addScaledVector(dc,o);const _=f*v-m*p;if(_<=0&&p-f>=0&&m-v>=0)return _E.subVectors(a,i),o=(p-f)/(p-f+(m-v)),t.copy(i).addScaledVector(_E,o);const g=1/(_+x+h);return s=x*g,o=h*g,t.copy(r).addScaledVector(uc,s).addScaledVector(dc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const F2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vs={h:0,s:0,l:0},Bp={h:0,s:0,l:0};function My(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Oe{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$n){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ln.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=ln.workingColorSpace){return this.r=e,this.g=t,this.b=r,ln.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=ln.workingColorSpace){if(e=pS(e,1),t=On(t,0,1),r=On(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=My(s,a,e+1/3),this.g=My(s,a,e),this.b=My(s,a,e-1/3)}return ln.toWorkingColorSpace(this,i),this}setStyle(e,t=$n){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$n){const r=F2[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qc(e.r),this.g=Qc(e.g),this.b=Qc(e.b),this}copyLinearToSRGB(e){return this.r=py(e.r),this.g=py(e.g),this.b=py(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$n){return ln.fromWorkingColorSpace(Ci.copy(this),e),Math.round(On(Ci.r*255,0,255))*65536+Math.round(On(Ci.g*255,0,255))*256+Math.round(On(Ci.b*255,0,255))}getHexString(e=$n){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ln.workingColorSpace){ln.fromWorkingColorSpace(Ci.copy(this),t);const r=Ci.r,i=Ci.g,a=Ci.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,c;const f=(o+s)/2;if(o===s)l=0,c=0;else{const p=s-o;switch(c=f<=.5?p/(s+o):p/(2-s-o),s){case r:l=(i-a)/p+(i<a?6:0);break;case i:l=(a-r)/p+2;break;case a:l=(r-i)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,t=ln.workingColorSpace){return ln.fromWorkingColorSpace(Ci.copy(this),t),e.r=Ci.r,e.g=Ci.g,e.b=Ci.b,e}getStyle(e=$n){ln.fromWorkingColorSpace(Ci.copy(this),e);const t=Ci.r,r=Ci.g,i=Ci.b;return e!==$n?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Vs),this.setHSL(Vs.h+e,Vs.s+t,Vs.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Vs),e.getHSL(Bp);const r=jd(Vs.h,Bp.h,t),i=jd(Vs.s,Bp.s,t),a=jd(Vs.l,Bp.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ci=new Oe;Oe.NAMES=F2;let NO=0;class Kn extends Ts{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:NO++}),this.uuid=Er(),this.name="",this.type="Material",this.blending=yl,this.side=Wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dg,this.blendDst=fg,this.blendEquation=Qs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Oe(0,0,0),this.blendAlpha=0,this.depthFunc=uf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ax,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tl,this.stencilZFail=tl,this.stencilZPass=tl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==yl&&(r.blending=this.blending),this.side!==Wa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==dg&&(r.blendSrc=this.blendSrc),this.blendDst!==fg&&(r.blendDst=this.blendDst),this.blendEquation!==Qs&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==uf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ax&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==tl&&(r.stencilFail=this.stencilFail),this.stencilZFail!==tl&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==tl&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Sr extends Kn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hs=zO();function zO(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,f=0;for(;!(c&8388608);)c<<=1,f-=8388608;c&=-8388609,f+=947912704,a[l]=c|f}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function nr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=On(n,-65504,65504),hs.floatView[0]=n;const e=hs.uint32View[0],t=e>>23&511;return hs.baseTable[t]+((e&8388607)>>hs.shiftTable[t])}function kd(n){const e=n>>10;return hs.uint32View[0]=hs.mantissaTable[hs.offsetTable[e]+(n&1023)]+hs.exponentTable[e],hs.floatView[0]}const dl={toHalfFloat:nr,fromHalfFloat:kd},jn=new z,Lp=new Me;class Zt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=vf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=gi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Lp.fromBufferAttribute(this,t),Lp.applyMatrix3(e),this.setXY(t,Lp.x,Lp.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix3(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix4(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.applyNormalMatrix(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)jn.fromBufferAttribute(this,t),jn.transformDirection(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=sr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=kt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),a=kt(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==vf&&(e.usage=this.usage),e}}class VO extends Zt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class GO extends Zt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class HO extends Zt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class WO extends Zt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class vS extends Zt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class XO extends Zt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class yS extends Zt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class jO extends Zt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=kd(this.array[e*this.itemSize]);return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=nr(t),this}getY(e){let t=kd(this.array[e*this.itemSize+1]);return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=nr(t),this}getZ(e){let t=kd(this.array[e*this.itemSize+2]);return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=nr(t),this}getW(e){let t=kd(this.array[e*this.itemSize+3]);return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=nr(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(r),this.array[e+2]=nr(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),a=kt(a,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(r),this.array[e+2]=nr(i),this.array[e+3]=nr(a),this}}class ut extends Zt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class JO extends Zt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let qO=0;const Gr=new vt,Ty=new Qt,fc=new z,_r=new fi,pd=new fi,ci=new z;class Ft extends Ts{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qO++}),this.uuid=Er(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(P2(e)?yS:vS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Vt().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gr.makeRotationFromQuaternion(e),this.applyMatrix4(Gr),this}rotateX(e){return Gr.makeRotationX(e),this.applyMatrix4(Gr),this}rotateY(e){return Gr.makeRotationY(e),this.applyMatrix4(Gr),this}rotateZ(e){return Gr.makeRotationZ(e),this.applyMatrix4(Gr),this}translate(e,t,r){return Gr.makeTranslation(e,t,r),this.applyMatrix4(Gr),this}scale(e,t,r){return Gr.makeScale(e,t,r),this.applyMatrix4(Gr),this}lookAt(e){return Ty.lookAt(e),Ty.updateMatrix(),this.applyMatrix4(Ty.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fc).negate(),this.translate(fc.x,fc.y,fc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];_r.setFromBufferAttribute(a),this.morphTargetsRelative?(ci.addVectors(this.boundingBox.min,_r.min),this.boundingBox.expandByPoint(ci),ci.addVectors(this.boundingBox.max,_r.max),this.boundingBox.expandByPoint(ci)):(this.boundingBox.expandByPoint(_r.min),this.boundingBox.expandByPoint(_r.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){const r=this.boundingSphere.center;if(_r.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];pd.setFromBufferAttribute(o),this.morphTargetsRelative?(ci.addVectors(_r.min,pd.min),_r.expandByPoint(ci),ci.addVectors(_r.max,pd.max),_r.expandByPoint(ci)):(_r.expandByPoint(pd.min),_r.expandByPoint(pd.max))}_r.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)ci.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(ci));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let c=0,f=o.count;c<f;c++)ci.fromBufferAttribute(o,c),l&&(fc.fromBufferAttribute(e,c),ci.add(fc)),i=Math.max(i,r.distanceToSquared(ci))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,s=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zt(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],f=[];for(let F=0;F<o;F++)c[F]=new z,f[F]=new z;const p=new z,h=new z,m=new z,v=new Me,x=new Me,_=new Me,g=new z,A=new z;function S(F,O,X){p.fromArray(i,F*3),h.fromArray(i,O*3),m.fromArray(i,X*3),v.fromArray(s,F*2),x.fromArray(s,O*2),_.fromArray(s,X*2),h.sub(p),m.sub(p),x.sub(v),_.sub(v);const ne=1/(x.x*_.y-_.x*x.y);isFinite(ne)&&(g.copy(h).multiplyScalar(_.y).addScaledVector(m,-x.y).multiplyScalar(ne),A.copy(m).multiplyScalar(x.x).addScaledVector(h,-_.x).multiplyScalar(ne),c[F].add(g),c[O].add(g),c[X].add(g),f[F].add(A),f[O].add(A),f[X].add(A))}let C=this.groups;C.length===0&&(C=[{start:0,count:r.length}]);for(let F=0,O=C.length;F<O;++F){const X=C[F],ne=X.start,W=X.count;for(let Z=ne,ie=ne+W;Z<ie;Z+=3)S(r[Z+0],r[Z+1],r[Z+2])}const T=new z,M=new z,b=new z,L=new z;function R(F){b.fromArray(a,F*3),L.copy(b);const O=c[F];T.copy(O),T.sub(b.multiplyScalar(b.dot(O))).normalize(),M.crossVectors(L,O);const ne=M.dot(f[F])<0?-1:1;l[F*4]=T.x,l[F*4+1]=T.y,l[F*4+2]=T.z,l[F*4+3]=ne}for(let F=0,O=C.length;F<O;++F){const X=C[F],ne=X.start,W=X.count;for(let Z=ne,ie=ne+W;Z<ie;Z+=3)R(r[Z+0]),R(r[Z+1]),R(r[Z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Zt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new z,a=new z,s=new z,o=new z,l=new z,c=new z,f=new z,p=new z;if(e)for(let h=0,m=e.count;h<m;h+=3){const v=e.getX(h+0),x=e.getX(h+1),_=e.getX(h+2);i.fromBufferAttribute(t,v),a.fromBufferAttribute(t,x),s.fromBufferAttribute(t,_),f.subVectors(s,a),p.subVectors(i,a),f.cross(p),o.fromBufferAttribute(r,v),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,_),o.add(f),l.add(f),c.add(f),r.setXYZ(v,o.x,o.y,o.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,m=t.count;h<m;h+=3)i.fromBufferAttribute(t,h+0),a.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),f.subVectors(s,a),p.subVectors(i,a),f.cross(p),r.setXYZ(h+0,f.x,f.y,f.z),r.setXYZ(h+1,f.x,f.y,f.z),r.setXYZ(h+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ci.fromBufferAttribute(e,t),ci.normalize(),e.setXYZ(t,ci.x,ci.y,ci.z)}toNonIndexed(){function e(o,l){const c=o.array,f=o.itemSize,p=o.normalized,h=new c.constructor(l.length*f);let m=0,v=0;for(let x=0,_=l.length;x<_;x++){o.isInterleavedBufferAttribute?m=l[x]*o.data.stride+o.offset:m=l[x]*f;for(let g=0;g<f;g++)h[v++]=c[m++]}return new Zt(h,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ft,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);t.setAttribute(o,c)}const a=this.morphAttributes;for(const o in a){const l=[],c=a[o];for(let f=0,p=c.length;f<p;f++){const h=c[f],m=e(h,r);l.push(m)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const c=s[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let p=0,h=c.length;p<h;p++){const m=c[p];f.push(m.toJSON(e.data))}f.length>0&&(i[l]=f,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const f=i[c];this.setAttribute(c,f.clone(t))}const a=e.morphAttributes;for(const c in a){const f=[],p=a[c];for(let h=0,m=p.length;h<m;h++)f.push(p[h].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,f=s.length;c<f;c++){const p=s[c];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xE=new vt,jo=new Lu,Dp=new hi,AE=new z,hc=new z,pc=new z,mc=new z,by=new z,Up=new z,Op=new Me,kp=new Me,Np=new Me,SE=new z,wE=new z,CE=new z,zp=new z,Vp=new z;class kn extends Qt{constructor(e=new Ft,t=new Sr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){Up.set(0,0,0);for(let l=0,c=a.length;l<c;l++){const f=o[l],p=a[l];f!==0&&(by.fromBufferAttribute(p,e),s?Up.addScaledVector(by,f):Up.addScaledVector(by.sub(t),f))}t.add(Up)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Dp.copy(r.boundingSphere),Dp.applyMatrix4(a),jo.copy(e.ray).recast(e.near),!(Dp.containsPoint(jo.origin)===!1&&(jo.intersectSphere(Dp,AE)===null||jo.origin.distanceToSquared(AE)>(e.far-e.near)**2))&&(xE.copy(a).invert(),jo.copy(e.ray).applyMatrix4(xE),!(r.boundingBox!==null&&jo.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,jo)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,c=a.attributes.uv,f=a.attributes.uv1,p=a.attributes.normal,h=a.groups,m=a.drawRange;if(o!==null)if(Array.isArray(s))for(let v=0,x=h.length;v<x;v++){const _=h[v],g=s[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(o.count,Math.min(_.start+_.count,m.start+m.count));for(let C=A,T=S;C<T;C+=3){const M=o.getX(C),b=o.getX(C+1),L=o.getX(C+2);i=Gp(this,g,e,r,c,f,p,M,b,L),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(o.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const A=o.getX(_),S=o.getX(_+1),C=o.getX(_+2);i=Gp(this,s,e,r,c,f,p,A,S,C),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,x=h.length;v<x;v++){const _=h[v],g=s[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let C=A,T=S;C<T;C+=3){const M=C,b=C+1,L=C+2;i=Gp(this,g,e,r,c,f,p,M,b,L),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const A=_,S=_+1,C=_+2;i=Gp(this,s,e,r,c,f,p,A,S,C),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function KO(n,e,t,r,i,a,s,o){let l;if(e.side===Xi?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===Wa,o),l===null)return null;Vp.copy(o),Vp.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Vp);return c<t.near||c>t.far?null:{distance:c,point:Vp.clone(),object:n}}function Gp(n,e,t,r,i,a,s,o,l,c){n.getVertexPosition(o,hc),n.getVertexPosition(l,pc),n.getVertexPosition(c,mc);const f=KO(n,e,t,r,hc,pc,mc,zp);if(f){i&&(Op.fromBufferAttribute(i,o),kp.fromBufferAttribute(i,l),Np.fromBufferAttribute(i,c),f.uv=rr.getInterpolation(zp,hc,pc,mc,Op,kp,Np,new Me)),a&&(Op.fromBufferAttribute(a,o),kp.fromBufferAttribute(a,l),Np.fromBufferAttribute(a,c),f.uv1=rr.getInterpolation(zp,hc,pc,mc,Op,kp,Np,new Me),f.uv2=f.uv1),s&&(SE.fromBufferAttribute(s,o),wE.fromBufferAttribute(s,l),CE.fromBufferAttribute(s,c),f.normal=rr.getInterpolation(zp,hc,pc,mc,SE,wE,CE,new z),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const p={a:o,b:l,c,normal:new z,materialIndex:0};rr.getNormal(hc,pc,mc,p.normal),f.face=p}return f}class kl extends Ft{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],c=[],f=[],p=[];let h=0,m=0;v("z","y","x",-1,-1,r,t,e,s,a,0),v("z","y","x",1,-1,r,t,-e,s,a,1),v("x","z","y",1,1,e,r,t,i,s,2),v("x","z","y",1,-1,e,r,-t,i,s,3),v("x","y","z",1,-1,e,t,r,i,a,4),v("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(p,2));function v(x,_,g,A,S,C,T,M,b,L,R){const F=C/b,O=T/L,X=C/2,ne=T/2,W=M/2,Z=b+1,ie=L+1;let he=0,Y=0;const re=new z;for(let te=0;te<ie;te++){const de=te*O-ne;for(let fe=0;fe<Z;fe++){const ae=fe*F-X;re[x]=ae*A,re[_]=de*S,re[g]=W,c.push(re.x,re.y,re.z),re[x]=0,re[_]=0,re[g]=M>0?1:-1,f.push(re.x,re.y,re.z),p.push(fe/b),p.push(1-te/L),he+=1}}for(let te=0;te<L;te++)for(let de=0;de<b;de++){const fe=h+de+Z*te,ae=h+de+Z*(te+1),_e=h+(de+1)+Z*(te+1),Pe=h+(de+1)+Z*te;l.push(fe,ae,Pe),l.push(ae,_e,Pe),Y+=6}o.addGroup(m,Y,R),m+=Y,h+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Vi(n){const e={};for(let t=0;t<n.length;t++){const r=hu(n[t]);for(const i in r)e[i]=r[i]}return e}function YO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function B2(n){return n.getRenderTarget()===null?n.outputColorSpace:ln.workingColorSpace}const _S={clone:hu,merge:Vi};var QO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ZO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fr extends Kn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=QO,this.fragmentShader=ZO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hu(e.uniforms),this.uniformsGroups=YO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class nh extends Qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vt,this.projectionMatrix=new vt,this.projectionMatrixInverse=new vt,this.coordinateSystem=va}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ei extends nh{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_l*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fu*2*Math.atan(Math.tan(_l*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_l*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const gc=-90,vc=1;class L2 extends Qt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ei(gc,vc,e,t);i.layers=this.layers,this.add(i);const a=new ei(gc,vc,e,t);a.layers=this.layers,this.add(a);const s=new ei(gc,vc,e,t);s.layers=this.layers,this.add(s);const o=new ei(gc,vc,e,t);o.layers=this.layers,this.add(o);const l=new ei(gc,vc,e,t);l.layers=this.layers,this.add(l);const c=new ei(gc,vc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,l]=t;for(const c of t)this.remove(c);if(e===va)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===du)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,c,f]=this.children,p=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(t,f),e.setRenderTarget(p,h,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class ih extends Sn{constructor(e,t,r,i,a,s,o,l,c,f){e=e!==void 0?e:[],t=t!==void 0?t:Xa,super(e,t,r,i,a,s,o,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xS extends Ji{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Jd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===oo?$n:Ar),this.texture=new ih(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:fn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new kl(5,5,5),a=new fr({name:"CubemapFromEquirect",uniforms:hu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Xi,blending:xs});a.uniforms.tEquirect.value=t;const s=new kn(i,a),o=t.minFilter;return t.minFilter===ja&&(t.minFilter=fn),new L2(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}const Py=new z,$O=new z,e3=new Vt;class Js{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Py.subVectors(r,t).cross($O.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Py),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||e3.getNormalMatrix(e),i=this.coplanarPoint(Py).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Jo=new hi,Hp=new z;class rh{constructor(e=new Js,t=new Js,r=new Js,i=new Js,a=new Js,s=new Js){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=va){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],f=i[5],p=i[6],h=i[7],m=i[8],v=i[9],x=i[10],_=i[11],g=i[12],A=i[13],S=i[14],C=i[15];if(r[0].setComponents(l-a,h-c,_-m,C-g).normalize(),r[1].setComponents(l+a,h+c,_+m,C+g).normalize(),r[2].setComponents(l+s,h+f,_+v,C+A).normalize(),r[3].setComponents(l-s,h-f,_-v,C-A).normalize(),r[4].setComponents(l-o,h-p,_-x,C-S).normalize(),t===va)r[5].setComponents(l+o,h+p,_+x,C+S).normalize();else if(t===du)r[5].setComponents(o,p,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Jo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Jo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Jo)}intersectsSprite(e){return Jo.center.set(0,0,0),Jo.radius=.7071067811865476,Jo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jo)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Hp.x=i.normal.x>0?e.max.x:e.min.x,Hp.y=i.normal.y>0?e.max.y:e.min.y,Hp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Hp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function D2(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function t3(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,f){const p=c.array,h=c.usage,m=p.byteLength,v=n.createBuffer();n.bindBuffer(f,v),n.bufferData(f,p,h),c.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(p instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)x=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:v,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:m}}function a(c,f,p){const h=f.array,m=f._updateRange,v=f.updateRanges;if(n.bindBuffer(p,c),m.count===-1&&v.length===0&&n.bufferSubData(p,0,h),v.length!==0){for(let x=0,_=v.length;x<_;x++){const g=v[x];t?n.bufferSubData(p,g.start*h.BYTES_PER_ELEMENT,h,g.start,g.count):n.bufferSubData(p,g.start*h.BYTES_PER_ELEMENT,h.subarray(g.start,g.start+g.count))}f.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(p,m.offset*h.BYTES_PER_ELEMENT,h,m.offset,m.count):n.bufferSubData(p,m.offset*h.BYTES_PER_ELEMENT,h.subarray(m.offset,m.offset+m.count)),m.count=-1),f.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f&&(n.deleteBuffer(f.buffer),r.delete(c))}function l(c,f){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const p=r.get(c);if(p===void 0)r.set(c,i(c,f));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(p.buffer,c,f),p.version=c.version}}return{get:s,remove:o,update:l}}class Du extends Ft{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),c=o+1,f=l+1,p=e/o,h=t/l,m=[],v=[],x=[],_=[];for(let g=0;g<f;g++){const A=g*h-s;for(let S=0;S<c;S++){const C=S*p-a;v.push(C,-A,0),x.push(0,0,1),_.push(S/o),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let A=0;A<o;A++){const S=A+c*g,C=A+c*(g+1),T=A+1+c*(g+1),M=A+1+c*g;m.push(S,C,M),m.push(C,T,M)}this.setIndex(m),this.setAttribute("position",new ut(v,3)),this.setAttribute("normal",new ut(x,3)),this.setAttribute("uv",new ut(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Du(e.width,e.height,e.widthSegments,e.heightSegments)}}var n3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,i3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,r3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,a3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,s3=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,o3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,l3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,c3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,u3=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,d3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,f3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,h3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,p3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,m3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,g3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,v3=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,y3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,x3=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A3=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,S3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,w3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,C3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,E3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,M3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,T3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,b3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,P3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,R3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,I3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,F3="gl_FragColor = linearToOutputTexel( gl_FragColor );",B3=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,L3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,D3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,O3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,k3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,N3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,z3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,V3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,G3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,H3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,W3=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,X3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,j3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,J3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,q3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,K3=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Y3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Q3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Z3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ek=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,tk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,nk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ik=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,rk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ak=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,sk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ok=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,lk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ck=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,uk=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hk=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,pk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,mk=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,gk=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,vk=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,yk=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,_k=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,xk=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ak=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Sk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ck=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ek=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Mk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Tk=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,bk=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Pk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Rk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ik=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Fk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Bk=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Lk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Dk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Uk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ok=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,kk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Nk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,zk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Vk=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Gk=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Hk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Wk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Xk=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,jk=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jk=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Kk=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Yk=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Qk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Zk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$k=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,eN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const tN=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,nN=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rN=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sN=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oN=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,lN=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,cN=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,uN=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,dN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fN=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hN=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pN=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mN=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gN=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vN=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_N=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,xN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,SN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,MN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,RN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IN=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ot={alphahash_fragment:n3,alphahash_pars_fragment:i3,alphamap_fragment:r3,alphamap_pars_fragment:a3,alphatest_fragment:s3,alphatest_pars_fragment:o3,aomap_fragment:l3,aomap_pars_fragment:c3,batching_pars_vertex:u3,batching_vertex:d3,begin_vertex:f3,beginnormal_vertex:h3,bsdfs:p3,iridescence_fragment:m3,bumpmap_pars_fragment:g3,clipping_planes_fragment:v3,clipping_planes_pars_fragment:y3,clipping_planes_pars_vertex:_3,clipping_planes_vertex:x3,color_fragment:A3,color_pars_fragment:S3,color_pars_vertex:w3,color_vertex:C3,common:E3,cube_uv_reflection_fragment:M3,defaultnormal_vertex:T3,displacementmap_pars_vertex:b3,displacementmap_vertex:P3,emissivemap_fragment:R3,emissivemap_pars_fragment:I3,colorspace_fragment:F3,colorspace_pars_fragment:B3,envmap_fragment:L3,envmap_common_pars_fragment:D3,envmap_pars_fragment:U3,envmap_pars_vertex:O3,envmap_physical_pars_fragment:K3,envmap_vertex:k3,fog_vertex:N3,fog_pars_vertex:z3,fog_fragment:V3,fog_pars_fragment:G3,gradientmap_pars_fragment:H3,lightmap_fragment:W3,lightmap_pars_fragment:X3,lights_lambert_fragment:j3,lights_lambert_pars_fragment:J3,lights_pars_begin:q3,lights_toon_fragment:Y3,lights_toon_pars_fragment:Q3,lights_phong_fragment:Z3,lights_phong_pars_fragment:$3,lights_physical_fragment:ek,lights_physical_pars_fragment:tk,lights_fragment_begin:nk,lights_fragment_maps:ik,lights_fragment_end:rk,logdepthbuf_fragment:ak,logdepthbuf_pars_fragment:sk,logdepthbuf_pars_vertex:ok,logdepthbuf_vertex:lk,map_fragment:ck,map_pars_fragment:uk,map_particle_fragment:dk,map_particle_pars_fragment:fk,metalnessmap_fragment:hk,metalnessmap_pars_fragment:pk,morphcolor_vertex:mk,morphnormal_vertex:gk,morphtarget_pars_vertex:vk,morphtarget_vertex:yk,normal_fragment_begin:_k,normal_fragment_maps:xk,normal_pars_fragment:Ak,normal_pars_vertex:Sk,normal_vertex:wk,normalmap_pars_fragment:Ck,clearcoat_normal_fragment_begin:Ek,clearcoat_normal_fragment_maps:Mk,clearcoat_pars_fragment:Tk,iridescence_pars_fragment:bk,opaque_fragment:Pk,packing:Rk,premultiplied_alpha_fragment:Ik,project_vertex:Fk,dithering_fragment:Bk,dithering_pars_fragment:Lk,roughnessmap_fragment:Dk,roughnessmap_pars_fragment:Uk,shadowmap_pars_fragment:Ok,shadowmap_pars_vertex:kk,shadowmap_vertex:Nk,shadowmask_pars_fragment:zk,skinbase_vertex:Vk,skinning_pars_vertex:Gk,skinning_vertex:Hk,skinnormal_vertex:Wk,specularmap_fragment:Xk,specularmap_pars_fragment:jk,tonemapping_fragment:Jk,tonemapping_pars_fragment:qk,transmission_fragment:Kk,transmission_pars_fragment:Yk,uv_pars_fragment:Qk,uv_pars_vertex:Zk,uv_vertex:$k,worldpos_vertex:eN,background_vert:tN,background_frag:nN,backgroundCube_vert:iN,backgroundCube_frag:rN,cube_vert:aN,cube_frag:sN,depth_vert:oN,depth_frag:lN,distanceRGBA_vert:cN,distanceRGBA_frag:uN,equirect_vert:dN,equirect_frag:fN,linedashed_vert:hN,linedashed_frag:pN,meshbasic_vert:mN,meshbasic_frag:gN,meshlambert_vert:vN,meshlambert_frag:yN,meshmatcap_vert:_N,meshmatcap_frag:xN,meshnormal_vert:AN,meshnormal_frag:SN,meshphong_vert:wN,meshphong_frag:CN,meshphysical_vert:EN,meshphysical_frag:MN,meshtoon_vert:TN,meshtoon_frag:bN,points_vert:PN,points_frag:RN,shadow_vert:IN,shadow_frag:FN,sprite_vert:BN,sprite_frag:LN},We={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}}},pa={basic:{uniforms:Vi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:Ot.meshbasic_vert,fragmentShader:Ot.meshbasic_frag},lambert:{uniforms:Vi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Ot.meshlambert_vert,fragmentShader:Ot.meshlambert_frag},phong:{uniforms:Vi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:Ot.meshphong_vert,fragmentShader:Ot.meshphong_frag},standard:{uniforms:Vi([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag},toon:{uniforms:Vi([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Ot.meshtoon_vert,fragmentShader:Ot.meshtoon_frag},matcap:{uniforms:Vi([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:Ot.meshmatcap_vert,fragmentShader:Ot.meshmatcap_frag},points:{uniforms:Vi([We.points,We.fog]),vertexShader:Ot.points_vert,fragmentShader:Ot.points_frag},dashed:{uniforms:Vi([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ot.linedashed_vert,fragmentShader:Ot.linedashed_frag},depth:{uniforms:Vi([We.common,We.displacementmap]),vertexShader:Ot.depth_vert,fragmentShader:Ot.depth_frag},normal:{uniforms:Vi([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:Ot.meshnormal_vert,fragmentShader:Ot.meshnormal_frag},sprite:{uniforms:Vi([We.sprite,We.fog]),vertexShader:Ot.sprite_vert,fragmentShader:Ot.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ot.background_vert,fragmentShader:Ot.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ot.backgroundCube_vert,fragmentShader:Ot.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ot.cube_vert,fragmentShader:Ot.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ot.equirect_vert,fragmentShader:Ot.equirect_frag},distanceRGBA:{uniforms:Vi([We.common,We.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ot.distanceRGBA_vert,fragmentShader:Ot.distanceRGBA_frag},shadow:{uniforms:Vi([We.lights,We.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:Ot.shadow_vert,fragmentShader:Ot.shadow_frag}};pa.physical={uniforms:Vi([pa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt},anisotropyVector:{value:new Me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vt}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag};const Wp={r:0,b:0,g:0};function DN(n,e,t,r,i,a,s){const o=new Oe(0);let l=a===!0?0:1,c,f,p=null,h=0,m=null;function v(_,g){let A=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?x(o,l):S&&S.isColor&&(x(S,1),A=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?r.buffers.color.setClear(0,0,0,1,s):C==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Bu)?(f===void 0&&(f=new kn(new kl(1,1,1),new fr({name:"BackgroundCubeMaterial",uniforms:hu(pa.backgroundCube.uniforms),vertexShader:pa.backgroundCube.vertexShader,fragmentShader:pa.backgroundCube.fragmentShader,side:Xi,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(T,M,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=S,f.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=ln.getTransfer(S.colorSpace)!==pn,(p!==S||h!==S.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,p=S,h=S.version,m=n.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new kn(new Du(2,2),new fr({name:"BackgroundMaterial",uniforms:hu(pa.background.uniforms),vertexShader:pa.background.vertexShader,fragmentShader:pa.background.fragmentShader,side:Wa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=ln.getTransfer(S.colorSpace)!==pn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(p!==S||h!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,p=S,h=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function x(_,g){_.getRGB(Wp,B2(n)),r.buffers.color.setClear(Wp.r,Wp.g,Wp.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(_,g=1){o.set(_),l=g,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,x(o,l)},render:v}}function UN(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},l=_(null);let c=l,f=!1;function p(W,Z,ie,he,Y){let re=!1;if(s){const te=x(he,ie,Z);c!==te&&(c=te,m(c.object)),re=g(W,he,ie,Y),re&&A(W,he,ie,Y)}else{const te=Z.wireframe===!0;(c.geometry!==he.id||c.program!==ie.id||c.wireframe!==te)&&(c.geometry=he.id,c.program=ie.id,c.wireframe=te,re=!0)}Y!==null&&t.update(Y,n.ELEMENT_ARRAY_BUFFER),(re||f)&&(f=!1,L(W,Z,ie,he),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Y).buffer))}function h(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function m(W){return r.isWebGL2?n.bindVertexArray(W):a.bindVertexArrayOES(W)}function v(W){return r.isWebGL2?n.deleteVertexArray(W):a.deleteVertexArrayOES(W)}function x(W,Z,ie){const he=ie.wireframe===!0;let Y=o[W.id];Y===void 0&&(Y={},o[W.id]=Y);let re=Y[Z.id];re===void 0&&(re={},Y[Z.id]=re);let te=re[he];return te===void 0&&(te=_(h()),re[he]=te),te}function _(W){const Z=[],ie=[],he=[];for(let Y=0;Y<i;Y++)Z[Y]=0,ie[Y]=0,he[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:ie,attributeDivisors:he,object:W,attributes:{},index:null}}function g(W,Z,ie,he){const Y=c.attributes,re=Z.attributes;let te=0;const de=ie.getAttributes();for(const fe in de)if(de[fe].location>=0){const _e=Y[fe];let Pe=re[fe];if(Pe===void 0&&(fe==="instanceMatrix"&&W.instanceMatrix&&(Pe=W.instanceMatrix),fe==="instanceColor"&&W.instanceColor&&(Pe=W.instanceColor)),_e===void 0||_e.attribute!==Pe||Pe&&_e.data!==Pe.data)return!0;te++}return c.attributesNum!==te||c.index!==he}function A(W,Z,ie,he){const Y={},re=Z.attributes;let te=0;const de=ie.getAttributes();for(const fe in de)if(de[fe].location>=0){let _e=re[fe];_e===void 0&&(fe==="instanceMatrix"&&W.instanceMatrix&&(_e=W.instanceMatrix),fe==="instanceColor"&&W.instanceColor&&(_e=W.instanceColor));const Pe={};Pe.attribute=_e,_e&&_e.data&&(Pe.data=_e.data),Y[fe]=Pe,te++}c.attributes=Y,c.attributesNum=te,c.index=he}function S(){const W=c.newAttributes;for(let Z=0,ie=W.length;Z<ie;Z++)W[Z]=0}function C(W){T(W,0)}function T(W,Z){const ie=c.newAttributes,he=c.enabledAttributes,Y=c.attributeDivisors;ie[W]=1,he[W]===0&&(n.enableVertexAttribArray(W),he[W]=1),Y[W]!==Z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,Z),Y[W]=Z)}function M(){const W=c.newAttributes,Z=c.enabledAttributes;for(let ie=0,he=Z.length;ie<he;ie++)Z[ie]!==W[ie]&&(n.disableVertexAttribArray(ie),Z[ie]=0)}function b(W,Z,ie,he,Y,re,te){te===!0?n.vertexAttribIPointer(W,Z,ie,Y,re):n.vertexAttribPointer(W,Z,ie,he,Y,re)}function L(W,Z,ie,he){if(r.isWebGL2===!1&&(W.isInstancedMesh||he.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const Y=he.attributes,re=ie.getAttributes(),te=Z.defaultAttributeValues;for(const de in re){const fe=re[de];if(fe.location>=0){let ae=Y[de];if(ae===void 0&&(de==="instanceMatrix"&&W.instanceMatrix&&(ae=W.instanceMatrix),de==="instanceColor"&&W.instanceColor&&(ae=W.instanceColor)),ae!==void 0){const _e=ae.normalized,Pe=ae.itemSize,Ie=t.get(ae);if(Ie===void 0)continue;const ke=Ie.buffer,ct=Ie.type,xt=Ie.bytesPerElement,nt=r.isWebGL2===!0&&(ct===n.INT||ct===n.UNSIGNED_INT||ae.gpuType===nS);if(ae.isInterleavedBufferAttribute){const dt=ae.data,J=dt.stride,Fe=ae.offset;if(dt.isInstancedInterleavedBuffer){for(let xe=0;xe<fe.locationSize;xe++)T(fe.location+xe,dt.meshPerAttribute);W.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let xe=0;xe<fe.locationSize;xe++)C(fe.location+xe);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let xe=0;xe<fe.locationSize;xe++)b(fe.location+xe,Pe/fe.locationSize,ct,_e,J*xt,(Fe+Pe/fe.locationSize*xe)*xt,nt)}else{if(ae.isInstancedBufferAttribute){for(let dt=0;dt<fe.locationSize;dt++)T(fe.location+dt,ae.meshPerAttribute);W.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let dt=0;dt<fe.locationSize;dt++)C(fe.location+dt);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let dt=0;dt<fe.locationSize;dt++)b(fe.location+dt,Pe/fe.locationSize,ct,_e,Pe*xt,Pe/fe.locationSize*dt*xt,nt)}}else if(te!==void 0){const _e=te[de];if(_e!==void 0)switch(_e.length){case 2:n.vertexAttrib2fv(fe.location,_e);break;case 3:n.vertexAttrib3fv(fe.location,_e);break;case 4:n.vertexAttrib4fv(fe.location,_e);break;default:n.vertexAttrib1fv(fe.location,_e)}}}}M()}function R(){X();for(const W in o){const Z=o[W];for(const ie in Z){const he=Z[ie];for(const Y in he)v(he[Y].object),delete he[Y];delete Z[ie]}delete o[W]}}function F(W){if(o[W.id]===void 0)return;const Z=o[W.id];for(const ie in Z){const he=Z[ie];for(const Y in he)v(he[Y].object),delete he[Y];delete Z[ie]}delete o[W.id]}function O(W){for(const Z in o){const ie=o[Z];if(ie[W.id]===void 0)continue;const he=ie[W.id];for(const Y in he)v(he[Y].object),delete he[Y];delete ie[W.id]}}function X(){ne(),f=!0,c!==l&&(c=l,m(c.object))}function ne(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:X,resetDefaultState:ne,dispose:R,releaseStatesOfGeometry:F,releaseStatesOfProgram:O,initAttributes:S,enableAttribute:C,disableUnusedAttributes:M}}function ON(n,e,t,r){const i=r.isWebGL2;let a;function s(f){a=f}function o(f,p){n.drawArrays(a,f,p),t.update(p,a,1)}function l(f,p,h){if(h===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](a,f,p,h),t.update(p,a,h)}function c(f,p,h){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<h;v++)this.render(f[v],p[v]);else{m.multiDrawArraysWEBGL(a,f,0,p,0,h);let v=0;for(let x=0;x<h;x++)v+=p[x];t.update(v,a,1)}}this.setMode=s,this.render=o,this.renderInstances=l,this.renderMultiDraw=c}function kN(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(b){if(b==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=s||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=h>0,C=s||e.has("OES_texture_float"),T=S&&C,M=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:v,maxAttributes:x,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:A,vertexTextures:S,floatFragmentTextures:C,floatVertexTextures:T,maxSamples:M}}function NN(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new Js,o=new Vt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,h){const m=p.length!==0||h||r!==0||i;return i=h,r=p.length,m},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,h){t=f(p,h,0)},this.setState=function(p,h,m){const v=p.clippingPlanes,x=p.clipIntersection,_=p.clipShadows,g=n.get(p);if(!i||v===null||v.length===0||a&&!_)a?f(null):c();else{const A=a?0:r,S=A*4;let C=g.clippingState||null;l.value=C,C=f(v,h,S,m);for(let T=0;T!==S;++T)C[T]=t[T];g.clippingState=C,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(p,h,m,v){const x=p!==null?p.length:0;let _=null;if(x!==0){if(_=l.value,v!==!0||_===null){const g=m+x*4,A=h.matrixWorldInverse;o.getNormalMatrix(A),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,C=m;S!==x;++S,C+=4)s.copy(p[S]).applyMatrix4(A,o),s.normal.toArray(_,C),_[C+3]=s.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function zN(n){let e=new WeakMap;function t(s,o){return o===lu?s.mapping=Xa:o===df&&(s.mapping=go),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===lu||o===df)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new xS(l.height/2);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",i),t(c.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class Uu extends nh{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,s=a+c*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Dc=4,EE=[.125,.215,.35,.446,.526,.582],sl=20,Ry=new Uu,ME=new Oe;let Iy=null,Fy=0,By=0;const nl=(1+Math.sqrt(5))/2,yc=1/nl,TE=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,nl,yc),new z(0,nl,-yc),new z(yc,0,nl),new z(-yc,0,nl),new z(nl,yc,0),new z(-nl,yc,0)];class Cx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Iy=this._renderer.getRenderTarget(),Fy=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=PE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Iy,Fy,By),e.scissorTest=!1,Xp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xa||e.mapping===go?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Iy=this._renderer.getRenderTarget(),Fy=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:fn,minFilter:fn,generateMipmaps:!1,type:Ii,format:Ri,colorSpace:Ja,depthBuffer:!1},i=bE(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bE(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=VN(a)),this._blurMaterial=GN(a,e,t)}return i}_compileMaterial(e){const t=new kn(this._lodPlanes[0],e);this._renderer.compile(t,Ry)}_sceneToCubeUV(e,t,r,i){const o=new ei(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,h=f.toneMapping;f.getClearColor(ME),f.toneMapping=ka,f.autoClear=!1;const m=new Sr({name:"PMREM.Background",side:Xi,depthWrite:!1,depthTest:!1}),v=new kn(new kl,m);let x=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,x=!0):(m.color.copy(ME),x=!0);for(let g=0;g<6;g++){const A=g%3;A===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):A===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const S=this._cubeSize;Xp(i,A*S,g>2?S:0,S,S),f.setRenderTarget(i),x&&f.render(v,o),f.render(e,o)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=h,f.autoClear=p,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Xa||e.mapping===go;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=RE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=PE());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new kn(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;Xp(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,Ry)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=TE[(i-1)%TE.length];this._blur(e,i-1,i,a,s)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new kn(this._lodPlanes[i],c),h=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*sl-1),x=a/v,_=isFinite(a)?1+Math.floor(f*x):sl;_>sl&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${sl}`);const g=[];let A=0;for(let b=0;b<sl;++b){const L=b/x,R=Math.exp(-L*L/2);g.push(R),b===0?A+=R:b<_&&(A+=2*R)}for(let b=0;b<g.length;b++)g[b]=g[b]/A;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=g,h.latitudinal.value=s==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:S}=this;h.dTheta.value=v,h.mipInt.value=S-r;const C=this._sizeLods[i],T=3*C*(i>S-Dc?i-S+Dc:0),M=4*(this._cubeSize-C);Xp(t,T,M,3*C,2*C),l.setRenderTarget(t),l.render(p,Ry)}}function VN(n){const e=[],t=[],r=[];let i=n;const a=n-Dc+1+EE.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let l=1/o;s>n-Dc?l=EE[s-n+Dc-1]:s===0&&(l=0),r.push(l);const c=1/(o-2),f=-c,p=1+c,h=[f,f,p,f,p,p,f,f,p,p,f,p],m=6,v=6,x=3,_=2,g=1,A=new Float32Array(x*v*m),S=new Float32Array(_*v*m),C=new Float32Array(g*v*m);for(let M=0;M<m;M++){const b=M%3*2/3-1,L=M>2?0:-1,R=[b,L,0,b+2/3,L,0,b+2/3,L+1,0,b,L,0,b+2/3,L+1,0,b,L+1,0];A.set(R,x*v*M),S.set(h,_*v*M);const F=[M,M,M,M,M,M];C.set(F,g*v*M)}const T=new Ft;T.setAttribute("position",new Zt(A,x)),T.setAttribute("uv",new Zt(S,_)),T.setAttribute("faceIndex",new Zt(C,g)),e.push(T),i>Dc&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function bE(n,e,t){const r=new Ji(n,e,t);return r.texture.mapping=Bu,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xp(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function GN(n,e,t){const r=new Float32Array(sl),i=new z(0,1,0);return new fr({name:"SphericalGaussianBlur",defines:{n:sl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xs,depthTest:!1,depthWrite:!1})}function PE(){return new fr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xs,depthTest:!1,depthWrite:!1})}function RE(){return new fr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xs,depthTest:!1,depthWrite:!1})}function AS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function HN(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===lu||l===df,f=l===Xa||l===go;if(c||f)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let p=e.get(o);return t===null&&(t=new Cx(n)),p=c?t.fromEquirectangular(o,p):t.fromCubemap(o,p),e.set(o,p),p.texture}else{if(e.has(o))return e.get(o).texture;{const p=o.image;if(c&&p&&p.height>0||f&&p&&i(p)){t===null&&(t=new Cx(n));const h=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,h),o.addEventListener("dispose",a),h.texture}else return null}}}return o}function i(o){let l=0;const c=6;for(let f=0;f<c;f++)o[f]!==void 0&&l++;return l===c}function a(o){const l=o.target;l.removeEventListener("dispose",a);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function WN(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function XN(n,e,t,r){const i={},a=new WeakMap;function s(p){const h=p.target;h.index!==null&&e.remove(h.index);for(const v in h.attributes)e.remove(h.attributes[v]);for(const v in h.morphAttributes){const x=h.morphAttributes[v];for(let _=0,g=x.length;_<g;_++)e.remove(x[_])}h.removeEventListener("dispose",s),delete i[h.id];const m=a.get(h);m&&(e.remove(m),a.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(p,h){return i[h.id]===!0||(h.addEventListener("dispose",s),i[h.id]=!0,t.memory.geometries++),h}function l(p){const h=p.attributes;for(const v in h)e.update(h[v],n.ARRAY_BUFFER);const m=p.morphAttributes;for(const v in m){const x=m[v];for(let _=0,g=x.length;_<g;_++)e.update(x[_],n.ARRAY_BUFFER)}}function c(p){const h=[],m=p.index,v=p.attributes.position;let x=0;if(m!==null){const A=m.array;x=m.version;for(let S=0,C=A.length;S<C;S+=3){const T=A[S+0],M=A[S+1],b=A[S+2];h.push(T,M,M,b,b,T)}}else if(v!==void 0){const A=v.array;x=v.version;for(let S=0,C=A.length/3-1;S<C;S+=3){const T=S+0,M=S+1,b=S+2;h.push(T,M,M,b,b,T)}}else return;const _=new(P2(h)?yS:vS)(h,1);_.version=x;const g=a.get(p);g&&e.remove(g),a.set(p,_)}function f(p){const h=a.get(p);if(h){const m=p.index;m!==null&&h.version<m.version&&c(p)}else c(p);return a.get(p)}return{get:o,update:l,getWireframeAttribute:f}}function jN(n,e,t,r){const i=r.isWebGL2;let a;function s(m){a=m}let o,l;function c(m){o=m.type,l=m.bytesPerElement}function f(m,v){n.drawElements(a,v,o,m*l),t.update(v,a,1)}function p(m,v,x){if(x===0)return;let _,g;if(i)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](a,v,o,m*l,x),t.update(v,a,x)}function h(m,v,x){if(x===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<x;g++)this.render(m[g]/l,v[g]);else{_.multiDrawElementsWEBGL(a,v,0,o,m,0,x);let g=0;for(let A=0;A<x;A++)g+=v[A];t.update(g,a,1)}}this.setMode=s,this.setIndex=c,this.render=f,this.renderInstances=p,this.renderMultiDraw=h}function JN(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function qN(n,e){return n[0]-e[0]}function KN(n,e){return Math.abs(e[1])-Math.abs(n[1])}function YN(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,s=new cn,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,f,p){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,x=v!==void 0?v.length:0;let _=a.get(f);if(_===void 0||_.count!==x){let Z=function(){ne.dispose(),a.delete(f),f.removeEventListener("dispose",Z)};var m=Z;_!==void 0&&_.texture.dispose();const S=f.morphAttributes.position!==void 0,C=f.morphAttributes.normal!==void 0,T=f.morphAttributes.color!==void 0,M=f.morphAttributes.position||[],b=f.morphAttributes.normal||[],L=f.morphAttributes.color||[];let R=0;S===!0&&(R=1),C===!0&&(R=2),T===!0&&(R=3);let F=f.attributes.position.count*R,O=1;F>e.maxTextureSize&&(O=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const X=new Float32Array(F*O*4*x),ne=new dv(X,F,O,x);ne.type=gi,ne.needsUpdate=!0;const W=R*4;for(let ie=0;ie<x;ie++){const he=M[ie],Y=b[ie],re=L[ie],te=F*O*4*ie;for(let de=0;de<he.count;de++){const fe=de*W;S===!0&&(s.fromBufferAttribute(he,de),X[te+fe+0]=s.x,X[te+fe+1]=s.y,X[te+fe+2]=s.z,X[te+fe+3]=0),C===!0&&(s.fromBufferAttribute(Y,de),X[te+fe+4]=s.x,X[te+fe+5]=s.y,X[te+fe+6]=s.z,X[te+fe+7]=0),T===!0&&(s.fromBufferAttribute(re,de),X[te+fe+8]=s.x,X[te+fe+9]=s.y,X[te+fe+10]=s.z,X[te+fe+11]=re.itemSize===4?s.w:1)}}_={count:x,texture:ne,size:new Me(F,O)},a.set(f,_),f.addEventListener("dispose",Z)}let g=0;for(let S=0;S<h.length;S++)g+=h[S];const A=f.morphTargetsRelative?1:1-g;p.getUniforms().setValue(n,"morphTargetBaseInfluence",A),p.getUniforms().setValue(n,"morphTargetInfluences",h),p.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=h===void 0?0:h.length;let x=r[f.id];if(x===void 0||x.length!==v){x=[];for(let C=0;C<v;C++)x[C]=[C,0];r[f.id]=x}for(let C=0;C<v;C++){const T=x[C];T[0]=C,T[1]=h[C]}x.sort(KN);for(let C=0;C<8;C++)C<v&&x[C][1]?(o[C][0]=x[C][0],o[C][1]=x[C][1]):(o[C][0]=Number.MAX_SAFE_INTEGER,o[C][1]=0);o.sort(qN);const _=f.morphAttributes.position,g=f.morphAttributes.normal;let A=0;for(let C=0;C<8;C++){const T=o[C],M=T[0],b=T[1];M!==Number.MAX_SAFE_INTEGER&&b?(_&&f.getAttribute("morphTarget"+C)!==_[M]&&f.setAttribute("morphTarget"+C,_[M]),g&&f.getAttribute("morphNormal"+C)!==g[M]&&f.setAttribute("morphNormal"+C,g[M]),i[C]=b,A+=b):(_&&f.hasAttribute("morphTarget"+C)===!0&&f.deleteAttribute("morphTarget"+C),g&&f.hasAttribute("morphNormal"+C)===!0&&f.deleteAttribute("morphNormal"+C),i[C]=0)}const S=f.morphTargetsRelative?1:1-A;p.getUniforms().setValue(n,"morphTargetBaseInfluence",S),p.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function QN(n,e,t,r){let i=new WeakMap;function a(l){const c=r.render.frame,f=l.geometry,p=e.get(l,f);if(i.get(p)!==c&&(e.update(p),i.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return p}function s(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:a,dispose:s}}class SS extends Sn{constructor(e,t,r,i,a,s,o,l,c,f){if(f=f!==void 0?f:so,f!==so&&f!==Tl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===so&&(r=ps),r===void 0&&f===Tl&&(r=ao),super(null,i,a,s,o,l,f,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:En,this.minFilter=l!==void 0?l:En,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const U2=new Sn,O2=new SS(1,1);O2.compareFunction=hS;const k2=new dv,N2=new gS,z2=new ih,IE=[],FE=[],BE=new Float32Array(16),LE=new Float32Array(9),DE=new Float32Array(4);function Ou(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=IE[i];if(a===void 0&&(a=new Float32Array(i),IE[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function ii(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ri(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function fv(n,e){let t=FE[e];t===void 0&&(t=new Int32Array(e),FE[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function ZN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $N(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2fv(this.addr,e),ri(t,e)}}function ez(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ii(t,e))return;n.uniform3fv(this.addr,e),ri(t,e)}}function tz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4fv(this.addr,e),ri(t,e)}}function nz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ii(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,r))return;DE.set(r),n.uniformMatrix2fv(this.addr,!1,DE),ri(t,r)}}function iz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ii(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,r))return;LE.set(r),n.uniformMatrix3fv(this.addr,!1,LE),ri(t,r)}}function rz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ii(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,r))return;BE.set(r),n.uniformMatrix4fv(this.addr,!1,BE),ri(t,r)}}function az(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function sz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2iv(this.addr,e),ri(t,e)}}function oz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3iv(this.addr,e),ri(t,e)}}function lz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4iv(this.addr,e),ri(t,e)}}function cz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function uz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2uiv(this.addr,e),ri(t,e)}}function dz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3uiv(this.addr,e),ri(t,e)}}function fz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4uiv(this.addr,e),ri(t,e)}}function hz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const a=this.type===n.SAMPLER_2D_SHADOW?O2:U2;t.setTexture2D(e||a,i)}function pz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||N2,i)}function mz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||z2,i)}function gz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||k2,i)}function vz(n){switch(n){case 5126:return ZN;case 35664:return $N;case 35665:return ez;case 35666:return tz;case 35674:return nz;case 35675:return iz;case 35676:return rz;case 5124:case 35670:return az;case 35667:case 35671:return sz;case 35668:case 35672:return oz;case 35669:case 35673:return lz;case 5125:return cz;case 36294:return uz;case 36295:return dz;case 36296:return fz;case 35678:case 36198:case 36298:case 36306:case 35682:return hz;case 35679:case 36299:case 36307:return pz;case 35680:case 36300:case 36308:case 36293:return mz;case 36289:case 36303:case 36311:case 36292:return gz}}function yz(n,e){n.uniform1fv(this.addr,e)}function _z(n,e){const t=Ou(e,this.size,2);n.uniform2fv(this.addr,t)}function xz(n,e){const t=Ou(e,this.size,3);n.uniform3fv(this.addr,t)}function Az(n,e){const t=Ou(e,this.size,4);n.uniform4fv(this.addr,t)}function Sz(n,e){const t=Ou(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function wz(n,e){const t=Ou(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Cz(n,e){const t=Ou(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Ez(n,e){n.uniform1iv(this.addr,e)}function Mz(n,e){n.uniform2iv(this.addr,e)}function Tz(n,e){n.uniform3iv(this.addr,e)}function bz(n,e){n.uniform4iv(this.addr,e)}function Pz(n,e){n.uniform1uiv(this.addr,e)}function Rz(n,e){n.uniform2uiv(this.addr,e)}function Iz(n,e){n.uniform3uiv(this.addr,e)}function Fz(n,e){n.uniform4uiv(this.addr,e)}function Bz(n,e,t){const r=this.cache,i=e.length,a=fv(t,i);ii(r,a)||(n.uniform1iv(this.addr,a),ri(r,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||U2,a[s])}function Lz(n,e,t){const r=this.cache,i=e.length,a=fv(t,i);ii(r,a)||(n.uniform1iv(this.addr,a),ri(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||N2,a[s])}function Dz(n,e,t){const r=this.cache,i=e.length,a=fv(t,i);ii(r,a)||(n.uniform1iv(this.addr,a),ri(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||z2,a[s])}function Uz(n,e,t){const r=this.cache,i=e.length,a=fv(t,i);ii(r,a)||(n.uniform1iv(this.addr,a),ri(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||k2,a[s])}function Oz(n){switch(n){case 5126:return yz;case 35664:return _z;case 35665:return xz;case 35666:return Az;case 35674:return Sz;case 35675:return wz;case 35676:return Cz;case 5124:case 35670:return Ez;case 35667:case 35671:return Mz;case 35668:case 35672:return Tz;case 35669:case 35673:return bz;case 5125:return Pz;case 36294:return Rz;case 36295:return Iz;case 36296:return Fz;case 35678:case 36198:case 36298:case 36306:case 35682:return Bz;case 35679:case 36299:case 36307:return Lz;case 35680:case 36300:case 36308:case 36293:return Dz;case 36289:case 36303:case 36311:case 36292:return Uz}}class kz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=vz(t.type)}}class Nz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Oz(t.type)}}class zz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const Ly=/(\w+)(\])?(\[|\.)?/g;function UE(n,e){n.seq.push(e),n.map[e.id]=e}function Vz(n,e,t){const r=n.name,i=r.length;for(Ly.lastIndex=0;;){const a=Ly.exec(r),s=Ly.lastIndex;let o=a[1];const l=a[2]==="]",c=a[3];if(l&&(o=o|0),c===void 0||c==="["&&s+2===i){UE(t,c===void 0?new kz(o,n,e):new Nz(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new zz(o),UE(t,p)),t=p}}}class Qm{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);Vz(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function OE(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Gz=37297;let Hz=0;function Wz(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}function Xz(n){const e=ln.getPrimaries(ln.workingColorSpace),t=ln.getPrimaries(n);let r;switch(e===t?r="":e===gf&&t===mf?r="LinearDisplayP3ToLinearSRGB":e===mf&&t===gf&&(r="LinearSRGBToLinearDisplayP3"),n){case Ja:case eh:return[r,"LinearTransferOETF"];case $n:case uv:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function kE(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+Wz(n.getShaderSource(e),s)}else return i}function jz(n,e){const t=Xz(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Jz(n,e){let t;switch(e){case n2:t="Linear";break;case i2:t="Reinhard";break;case r2:t="OptimizedCineon";break;case tS:t="ACESFilmic";break;case s2:t="AgX";break;case a2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function qz(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Uc).join(`
`)}function Kz(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Uc).join(`
`)}function Yz(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Qz(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Uc(n){return n!==""}function NE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Zz=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ex(n){return n.replace(Zz,eV)}const $z=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function eV(n,e){let t=Ot[e];if(t===void 0){const r=$z.get(e);if(r!==void 0)t=Ot[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Ex(t)}const tV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function VE(n){return n.replace(tV,nV)}function nV(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function GE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function iV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===av?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Xd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===fa&&(e="SHADOWMAP_TYPE_VSM"),e}function rV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Xa:case go:e="ENVMAP_TYPE_CUBE";break;case Bu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function aV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case go:e="ENVMAP_MODE_REFRACTION";break}return e}function sV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $f:e="ENVMAP_BLENDING_MULTIPLY";break;case e2:e="ENVMAP_BLENDING_MIX";break;case t2:e="ENVMAP_BLENDING_ADD";break}return e}function oV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function lV(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=iV(t),c=rV(t),f=aV(t),p=sV(t),h=oV(t),m=t.isWebGL2?"":qz(t),v=Kz(t),x=Yz(a),_=i.createProgram();let g,A,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Uc).join(`
`),g.length>0&&(g+=`
`),A=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Uc).join(`
`),A.length>0&&(A+=`
`)):(g=[GE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Uc).join(`
`),A=[m,GE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ka?"#define TONE_MAPPING":"",t.toneMapping!==ka?Ot.tonemapping_pars_fragment:"",t.toneMapping!==ka?Jz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ot.colorspace_pars_fragment,jz("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Uc).join(`
`)),s=Ex(s),s=NE(s,t),s=zE(s,t),o=Ex(o),o=NE(o,t),o=zE(o,t),s=VE(s),o=VE(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,A=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Sx?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Sx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const C=S+g+s,T=S+A+o,M=OE(i,i.VERTEX_SHADER,C),b=OE(i,i.FRAGMENT_SHADER,T);i.attachShader(_,M),i.attachShader(_,b),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function L(X){if(n.debug.checkShaderErrors){const ne=i.getProgramInfoLog(_).trim(),W=i.getShaderInfoLog(M).trim(),Z=i.getShaderInfoLog(b).trim();let ie=!0,he=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(ie=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,M,b);else{const Y=kE(i,M,"vertex"),re=kE(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Program Info Log: `+ne+`
`+Y+`
`+re)}else ne!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ne):(W===""||Z==="")&&(he=!1);he&&(X.diagnostics={runnable:ie,programLog:ne,vertexShader:{log:W,prefix:g},fragmentShader:{log:Z,prefix:A}})}i.deleteShader(M),i.deleteShader(b),R=new Qm(i,_),F=Qz(i,_)}let R;this.getUniforms=function(){return R===void 0&&L(this),R};let F;this.getAttributes=function(){return F===void 0&&L(this),F};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=i.getProgramParameter(_,Gz)),O},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Hz++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=b,this}let cV=0;class uV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new dV(e),t.set(e,r)),r}}class dV{constructor(e){this.id=cV++,this.code=e,this.usedTimes=0}}function fV(n,e,t,r,i,a,s){const o=new xl,l=new uV,c=[],f=i.isWebGL2,p=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(R){return R===0?"uv":`uv${R}`}function _(R,F,O,X,ne){const W=X.fog,Z=ne.geometry,ie=R.isMeshStandardMaterial?X.environment:null,he=(R.isMeshStandardMaterial?t:e).get(R.envMap||ie),Y=he&&he.mapping===Bu?he.image.height:null,re=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const te=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,de=te!==void 0?te.length:0;let fe=0;Z.morphAttributes.position!==void 0&&(fe=1),Z.morphAttributes.normal!==void 0&&(fe=2),Z.morphAttributes.color!==void 0&&(fe=3);let ae,_e,Pe,Ie;if(re){const Hn=pa[re];ae=Hn.vertexShader,_e=Hn.fragmentShader}else ae=R.vertexShader,_e=R.fragmentShader,l.update(R),Pe=l.getVertexShaderID(R),Ie=l.getFragmentShaderID(R);const ke=n.getRenderTarget(),ct=ne.isInstancedMesh===!0,xt=ne.isBatchedMesh===!0,nt=!!R.map,dt=!!R.matcap,J=!!he,Fe=!!R.aoMap,xe=!!R.lightMap,De=!!R.bumpMap,Ae=!!R.normalMap,ot=!!R.displacementMap,je=!!R.emissiveMap,N=!!R.metalnessMap,D=!!R.roughnessMap,se=R.anisotropy>0,Se=R.clearcoat>0,Te=R.iridescence>0,we=R.sheen>0,Be=R.transmission>0,be=se&&!!R.anisotropyMap,Ee=Se&&!!R.clearcoatMap,Ve=Se&&!!R.clearcoatNormalMap,ht=Se&&!!R.clearcoatRoughnessMap,Ce=Te&&!!R.iridescenceMap,it=Te&&!!R.iridescenceThicknessMap,ze=we&&!!R.sheenColorMap,lt=we&&!!R.sheenRoughnessMap,Qe=!!R.specularMap,$e=!!R.specularColorMap,Ct=!!R.specularIntensityMap,Tt=Be&&!!R.transmissionMap,Ut=Be&&!!R.thicknessMap,Bt=!!R.gradientMap,ce=!!R.alphaMap,Q=R.alphaTest>0,Je=!!R.alphaHash,qe=!!R.extensions,At=!!Z.attributes.uv1,gt=!!Z.attributes.uv2,rn=!!Z.attributes.uv3;let nn=ka;return R.toneMapped&&(ke===null||ke.isXRRenderTarget===!0)&&(nn=n.toneMapping),{isWebGL2:f,shaderID:re,shaderType:R.type,shaderName:R.name,vertexShader:ae,fragmentShader:_e,defines:R.defines,customVertexShaderID:Pe,customFragmentShaderID:Ie,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:xt,instancing:ct,instancingColor:ct&&ne.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:ke===null?n.outputColorSpace:ke.isXRRenderTarget===!0?ke.texture.colorSpace:Ja,map:nt,matcap:dt,envMap:J,envMapMode:J&&he.mapping,envMapCubeUVHeight:Y,aoMap:Fe,lightMap:xe,bumpMap:De,normalMap:Ae,displacementMap:h&&ot,emissiveMap:je,normalMapObjectSpace:Ae&&R.normalMapType===A2,normalMapTangentSpace:Ae&&R.normalMapType===Co,metalnessMap:N,roughnessMap:D,anisotropy:se,anisotropyMap:be,clearcoat:Se,clearcoatMap:Ee,clearcoatNormalMap:Ve,clearcoatRoughnessMap:ht,iridescence:Te,iridescenceMap:Ce,iridescenceThicknessMap:it,sheen:we,sheenColorMap:ze,sheenRoughnessMap:lt,specularMap:Qe,specularColorMap:$e,specularIntensityMap:Ct,transmission:Be,transmissionMap:Tt,thicknessMap:Ut,gradientMap:Bt,opaque:R.transparent===!1&&R.blending===yl,alphaMap:ce,alphaTest:Q,alphaHash:Je,combine:R.combine,mapUv:nt&&x(R.map.channel),aoMapUv:Fe&&x(R.aoMap.channel),lightMapUv:xe&&x(R.lightMap.channel),bumpMapUv:De&&x(R.bumpMap.channel),normalMapUv:Ae&&x(R.normalMap.channel),displacementMapUv:ot&&x(R.displacementMap.channel),emissiveMapUv:je&&x(R.emissiveMap.channel),metalnessMapUv:N&&x(R.metalnessMap.channel),roughnessMapUv:D&&x(R.roughnessMap.channel),anisotropyMapUv:be&&x(R.anisotropyMap.channel),clearcoatMapUv:Ee&&x(R.clearcoatMap.channel),clearcoatNormalMapUv:Ve&&x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&x(R.iridescenceMap.channel),iridescenceThicknessMapUv:it&&x(R.iridescenceThicknessMap.channel),sheenColorMapUv:ze&&x(R.sheenColorMap.channel),sheenRoughnessMapUv:lt&&x(R.sheenRoughnessMap.channel),specularMapUv:Qe&&x(R.specularMap.channel),specularColorMapUv:$e&&x(R.specularColorMap.channel),specularIntensityMapUv:Ct&&x(R.specularIntensityMap.channel),transmissionMapUv:Tt&&x(R.transmissionMap.channel),thicknessMapUv:Ut&&x(R.thicknessMap.channel),alphaMapUv:ce&&x(R.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ae||se),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,vertexUv1s:At,vertexUv2s:gt,vertexUv3s:rn,pointsUvs:ne.isPoints===!0&&!!Z.attributes.uv&&(nt||ce),fog:!!W,useFog:R.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:ne.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:de,morphTextureStride:fe,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:nn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:nt&&R.map.isVideoTexture===!0&&ln.getTransfer(R.map.colorSpace)===pn,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Yr,flipSided:R.side===Xi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:qe&&R.extensions.derivatives===!0,extensionFragDepth:qe&&R.extensions.fragDepth===!0,extensionDrawBuffers:qe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:qe&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:qe&&R.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const F=[];if(R.shaderID?F.push(R.shaderID):(F.push(R.customVertexShaderID),F.push(R.customFragmentShaderID)),R.defines!==void 0)for(const O in R.defines)F.push(O),F.push(R.defines[O]);return R.isRawShaderMaterial===!1&&(A(F,R),S(F,R),F.push(n.outputColorSpace)),F.push(R.customProgramCacheKey),F.join()}function A(R,F){R.push(F.precision),R.push(F.outputColorSpace),R.push(F.envMapMode),R.push(F.envMapCubeUVHeight),R.push(F.mapUv),R.push(F.alphaMapUv),R.push(F.lightMapUv),R.push(F.aoMapUv),R.push(F.bumpMapUv),R.push(F.normalMapUv),R.push(F.displacementMapUv),R.push(F.emissiveMapUv),R.push(F.metalnessMapUv),R.push(F.roughnessMapUv),R.push(F.anisotropyMapUv),R.push(F.clearcoatMapUv),R.push(F.clearcoatNormalMapUv),R.push(F.clearcoatRoughnessMapUv),R.push(F.iridescenceMapUv),R.push(F.iridescenceThicknessMapUv),R.push(F.sheenColorMapUv),R.push(F.sheenRoughnessMapUv),R.push(F.specularMapUv),R.push(F.specularColorMapUv),R.push(F.specularIntensityMapUv),R.push(F.transmissionMapUv),R.push(F.thicknessMapUv),R.push(F.combine),R.push(F.fogExp2),R.push(F.sizeAttenuation),R.push(F.morphTargetsCount),R.push(F.morphAttributeCount),R.push(F.numDirLights),R.push(F.numPointLights),R.push(F.numSpotLights),R.push(F.numSpotLightMaps),R.push(F.numHemiLights),R.push(F.numRectAreaLights),R.push(F.numDirLightShadows),R.push(F.numPointLightShadows),R.push(F.numSpotLightShadows),R.push(F.numSpotLightShadowsWithMaps),R.push(F.numLightProbes),R.push(F.shadowMapType),R.push(F.toneMapping),R.push(F.numClippingPlanes),R.push(F.numClipIntersection),R.push(F.depthPacking)}function S(R,F){o.disableAll(),F.isWebGL2&&o.enable(0),F.supportsVertexTextures&&o.enable(1),F.instancing&&o.enable(2),F.instancingColor&&o.enable(3),F.matcap&&o.enable(4),F.envMap&&o.enable(5),F.normalMapObjectSpace&&o.enable(6),F.normalMapTangentSpace&&o.enable(7),F.clearcoat&&o.enable(8),F.iridescence&&o.enable(9),F.alphaTest&&o.enable(10),F.vertexColors&&o.enable(11),F.vertexAlphas&&o.enable(12),F.vertexUv1s&&o.enable(13),F.vertexUv2s&&o.enable(14),F.vertexUv3s&&o.enable(15),F.vertexTangents&&o.enable(16),F.anisotropy&&o.enable(17),F.alphaHash&&o.enable(18),F.batching&&o.enable(19),R.push(o.mask),o.disableAll(),F.fog&&o.enable(0),F.useFog&&o.enable(1),F.flatShading&&o.enable(2),F.logarithmicDepthBuffer&&o.enable(3),F.skinning&&o.enable(4),F.morphTargets&&o.enable(5),F.morphNormals&&o.enable(6),F.morphColors&&o.enable(7),F.premultipliedAlpha&&o.enable(8),F.shadowMapEnabled&&o.enable(9),F.useLegacyLights&&o.enable(10),F.doubleSided&&o.enable(11),F.flipSided&&o.enable(12),F.useDepthPacking&&o.enable(13),F.dithering&&o.enable(14),F.transmission&&o.enable(15),F.sheen&&o.enable(16),F.opaque&&o.enable(17),F.pointsUvs&&o.enable(18),F.decodeVideoTexture&&o.enable(19),R.push(o.mask)}function C(R){const F=v[R.type];let O;if(F){const X=pa[F];O=_S.clone(X.uniforms)}else O=R.uniforms;return O}function T(R,F){let O;for(let X=0,ne=c.length;X<ne;X++){const W=c[X];if(W.cacheKey===F){O=W,++O.usedTimes;break}}return O===void 0&&(O=new lV(n,F,R,a),c.push(O)),O}function M(R){if(--R.usedTimes===0){const F=c.indexOf(R);c[F]=c[c.length-1],c.pop(),R.destroy()}}function b(R){l.remove(R)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:C,acquireProgram:T,releaseProgram:M,releaseShaderCache:b,programs:c,dispose:L}}function hV(){let n=new WeakMap;function e(a){let s=n.get(a);return s===void 0&&(s={},n.set(a,s)),s}function t(a){n.delete(a)}function r(a,s,o){n.get(a)[s]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function pV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function HE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function WE(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(p,h,m,v,x,_){let g=n[e];return g===void 0?(g={id:p.id,object:p,geometry:h,material:m,groupOrder:v,renderOrder:p.renderOrder,z:x,group:_},n[e]=g):(g.id=p.id,g.object=p,g.geometry=h,g.material=m,g.groupOrder=v,g.renderOrder=p.renderOrder,g.z=x,g.group=_),e++,g}function o(p,h,m,v,x,_){const g=s(p,h,m,v,x,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(p,h,m,v,x,_){const g=s(p,h,m,v,x,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(p,h){t.length>1&&t.sort(p||pV),r.length>1&&r.sort(h||HE),i.length>1&&i.sort(h||HE)}function f(){for(let p=e,h=n.length;p<h;p++){const m=n[p];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:f,sort:c}}function mV(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new WE,n.set(r,[s])):i>=a.length?(s=new WE,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function gV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Oe};break;case"SpotLight":t={position:new z,direction:new z,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function vV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let yV=0;function _V(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function xV(n,e){const t=new gV,r=vV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new z);const a=new z,s=new vt,o=new vt;function l(f,p){let h=0,m=0,v=0;for(let X=0;X<9;X++)i.probe[X].set(0,0,0);let x=0,_=0,g=0,A=0,S=0,C=0,T=0,M=0,b=0,L=0,R=0;f.sort(_V);const F=p===!0?Math.PI:1;for(let X=0,ne=f.length;X<ne;X++){const W=f[X],Z=W.color,ie=W.intensity,he=W.distance,Y=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)h+=Z.r*ie*F,m+=Z.g*ie*F,v+=Z.b*ie*F;else if(W.isLightProbe){for(let re=0;re<9;re++)i.probe[re].addScaledVector(W.sh.coefficients[re],ie);R++}else if(W.isDirectionalLight){const re=t.get(W);if(re.color.copy(W.color).multiplyScalar(W.intensity*F),W.castShadow){const te=W.shadow,de=r.get(W);de.shadowBias=te.bias,de.shadowNormalBias=te.normalBias,de.shadowRadius=te.radius,de.shadowMapSize=te.mapSize,i.directionalShadow[x]=de,i.directionalShadowMap[x]=Y,i.directionalShadowMatrix[x]=W.shadow.matrix,C++}i.directional[x]=re,x++}else if(W.isSpotLight){const re=t.get(W);re.position.setFromMatrixPosition(W.matrixWorld),re.color.copy(Z).multiplyScalar(ie*F),re.distance=he,re.coneCos=Math.cos(W.angle),re.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),re.decay=W.decay,i.spot[g]=re;const te=W.shadow;if(W.map&&(i.spotLightMap[b]=W.map,b++,te.updateMatrices(W),W.castShadow&&L++),i.spotLightMatrix[g]=te.matrix,W.castShadow){const de=r.get(W);de.shadowBias=te.bias,de.shadowNormalBias=te.normalBias,de.shadowRadius=te.radius,de.shadowMapSize=te.mapSize,i.spotShadow[g]=de,i.spotShadowMap[g]=Y,M++}g++}else if(W.isRectAreaLight){const re=t.get(W);re.color.copy(Z).multiplyScalar(ie),re.halfWidth.set(W.width*.5,0,0),re.halfHeight.set(0,W.height*.5,0),i.rectArea[A]=re,A++}else if(W.isPointLight){const re=t.get(W);if(re.color.copy(W.color).multiplyScalar(W.intensity*F),re.distance=W.distance,re.decay=W.decay,W.castShadow){const te=W.shadow,de=r.get(W);de.shadowBias=te.bias,de.shadowNormalBias=te.normalBias,de.shadowRadius=te.radius,de.shadowMapSize=te.mapSize,de.shadowCameraNear=te.camera.near,de.shadowCameraFar=te.camera.far,i.pointShadow[_]=de,i.pointShadowMap[_]=Y,i.pointShadowMatrix[_]=W.shadow.matrix,T++}i.point[_]=re,_++}else if(W.isHemisphereLight){const re=t.get(W);re.skyColor.copy(W.color).multiplyScalar(ie*F),re.groundColor.copy(W.groundColor).multiplyScalar(ie*F),i.hemi[S]=re,S++}}A>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=We.LTC_FLOAT_1,i.rectAreaLTC2=We.LTC_FLOAT_2):(i.rectAreaLTC1=We.LTC_HALF_1,i.rectAreaLTC2=We.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=We.LTC_FLOAT_1,i.rectAreaLTC2=We.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=We.LTC_HALF_1,i.rectAreaLTC2=We.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=m,i.ambient[2]=v;const O=i.hash;(O.directionalLength!==x||O.pointLength!==_||O.spotLength!==g||O.rectAreaLength!==A||O.hemiLength!==S||O.numDirectionalShadows!==C||O.numPointShadows!==T||O.numSpotShadows!==M||O.numSpotMaps!==b||O.numLightProbes!==R)&&(i.directional.length=x,i.spot.length=g,i.rectArea.length=A,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=M+b-L,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=R,O.directionalLength=x,O.pointLength=_,O.spotLength=g,O.rectAreaLength=A,O.hemiLength=S,O.numDirectionalShadows=C,O.numPointShadows=T,O.numSpotShadows=M,O.numSpotMaps=b,O.numLightProbes=R,i.version=yV++)}function c(f,p){let h=0,m=0,v=0,x=0,_=0;const g=p.matrixWorldInverse;for(let A=0,S=f.length;A<S;A++){const C=f[A];if(C.isDirectionalLight){const T=i.directional[h];T.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(g),h++}else if(C.isSpotLight){const T=i.spot[v];T.position.setFromMatrixPosition(C.matrixWorld),T.position.applyMatrix4(g),T.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(g),v++}else if(C.isRectAreaLight){const T=i.rectArea[x];T.position.setFromMatrixPosition(C.matrixWorld),T.position.applyMatrix4(g),o.identity(),s.copy(C.matrixWorld),s.premultiply(g),o.extractRotation(s),T.halfWidth.set(C.width*.5,0,0),T.halfHeight.set(0,C.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),x++}else if(C.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(C.matrixWorld),T.position.applyMatrix4(g),m++}else if(C.isHemisphereLight){const T=i.hemi[_];T.direction.setFromMatrixPosition(C.matrixWorld),T.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:i}}function XE(n,e){const t=new xV(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(p){r.push(p)}function o(p){i.push(p)}function l(p){t.setup(r,p)}function c(p){t.setupView(r,p)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function AV(n,e){let t=new WeakMap;function r(a,s=0){const o=t.get(a);let l;return o===void 0?(l=new XE(n,e),t.set(a,[l])):s>=o.length?(l=new XE(n,e),o.push(l)):l=o[s],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class hv extends Kn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wS extends Kn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const SV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function CV(n,e,t){let r=new rh;const i=new Me,a=new Me,s=new cn,o=new hv({depthPacking:x2}),l=new wS,c={},f=t.maxTextureSize,p={[Wa]:Xi,[Xi]:Wa,[Yr]:Yr},h=new fr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:SV,fragmentShader:wV}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const v=new Ft;v.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new kn(v,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=av;let g=this.type;this.render=function(M,b,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||M.length===0)return;const R=n.getRenderTarget(),F=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),X=n.state;X.setBlending(xs),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const ne=g!==fa&&this.type===fa,W=g===fa&&this.type!==fa;for(let Z=0,ie=M.length;Z<ie;Z++){const he=M[Z],Y=he.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;i.copy(Y.mapSize);const re=Y.getFrameExtents();if(i.multiply(re),a.copy(Y.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(a.x=Math.floor(f/re.x),i.x=a.x*re.x,Y.mapSize.x=a.x),i.y>f&&(a.y=Math.floor(f/re.y),i.y=a.y*re.y,Y.mapSize.y=a.y)),Y.map===null||ne===!0||W===!0){const de=this.type!==fa?{minFilter:En,magFilter:En}:{};Y.map!==null&&Y.map.dispose(),Y.map=new Ji(i.x,i.y,de),Y.map.texture.name=he.name+".shadowMap",Y.camera.updateProjectionMatrix()}n.setRenderTarget(Y.map),n.clear();const te=Y.getViewportCount();for(let de=0;de<te;de++){const fe=Y.getViewport(de);s.set(a.x*fe.x,a.y*fe.y,a.x*fe.z,a.y*fe.w),X.viewport(s),Y.updateMatrices(he,de),r=Y.getFrustum(),C(b,L,Y.camera,he,this.type)}Y.isPointLightShadow!==!0&&this.type===fa&&A(Y,L),Y.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(R,F,O)};function A(M,b){const L=e.update(x);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Ji(i.x,i.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(b,null,L,h,x,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(b,null,L,m,x,null)}function S(M,b,L,R){let F=null;const O=L.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(O!==void 0)F=O;else if(F=L.isPointLight===!0?l:o,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const X=F.uuid,ne=b.uuid;let W=c[X];W===void 0&&(W={},c[X]=W);let Z=W[ne];Z===void 0&&(Z=F.clone(),W[ne]=Z,b.addEventListener("dispose",T)),F=Z}if(F.visible=b.visible,F.wireframe=b.wireframe,R===fa?F.side=b.shadowSide!==null?b.shadowSide:b.side:F.side=b.shadowSide!==null?b.shadowSide:p[b.side],F.alphaMap=b.alphaMap,F.alphaTest=b.alphaTest,F.map=b.map,F.clipShadows=b.clipShadows,F.clippingPlanes=b.clippingPlanes,F.clipIntersection=b.clipIntersection,F.displacementMap=b.displacementMap,F.displacementScale=b.displacementScale,F.displacementBias=b.displacementBias,F.wireframeLinewidth=b.wireframeLinewidth,F.linewidth=b.linewidth,L.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const X=n.properties.get(F);X.light=L}return F}function C(M,b,L,R,F){if(M.visible===!1)return;if(M.layers.test(b.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&F===fa)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,M.matrixWorld);const ne=e.update(M),W=M.material;if(Array.isArray(W)){const Z=ne.groups;for(let ie=0,he=Z.length;ie<he;ie++){const Y=Z[ie],re=W[Y.materialIndex];if(re&&re.visible){const te=S(M,re,R,F);M.onBeforeShadow(n,M,b,L,ne,te,Y),n.renderBufferDirect(L,null,ne,te,M,Y),M.onAfterShadow(n,M,b,L,ne,te,Y)}}}else if(W.visible){const Z=S(M,W,R,F);M.onBeforeShadow(n,M,b,L,ne,Z,null),n.renderBufferDirect(L,null,ne,Z,M,null),M.onAfterShadow(n,M,b,L,ne,Z,null)}}const X=M.children;for(let ne=0,W=X.length;ne<W;ne++)C(X[ne],b,L,R,F)}function T(M){M.target.removeEventListener("dispose",T);for(const L in c){const R=c[L],F=M.target.uuid;F in R&&(R[F].dispose(),delete R[F])}}}function EV(n,e,t){const r=t.isWebGL2;function i(){let Q=!1;const Je=new cn;let qe=null;const At=new cn(0,0,0,0);return{setMask:function(gt){qe!==gt&&!Q&&(n.colorMask(gt,gt,gt,gt),qe=gt)},setLocked:function(gt){Q=gt},setClear:function(gt,rn,nn,Tn,Hn){Hn===!0&&(gt*=Tn,rn*=Tn,nn*=Tn),Je.set(gt,rn,nn,Tn),At.equals(Je)===!1&&(n.clearColor(gt,rn,nn,Tn),At.copy(Je))},reset:function(){Q=!1,qe=null,At.set(-1,0,0,0)}}}function a(){let Q=!1,Je=null,qe=null,At=null;return{setTest:function(gt){gt?xt(n.DEPTH_TEST):nt(n.DEPTH_TEST)},setMask:function(gt){Je!==gt&&!Q&&(n.depthMask(gt),Je=gt)},setFunc:function(gt){if(qe!==gt){switch(gt){case JP:n.depthFunc(n.NEVER);break;case qP:n.depthFunc(n.ALWAYS);break;case KP:n.depthFunc(n.LESS);break;case uf:n.depthFunc(n.LEQUAL);break;case YP:n.depthFunc(n.EQUAL);break;case QP:n.depthFunc(n.GEQUAL);break;case ZP:n.depthFunc(n.GREATER);break;case $P:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}qe=gt}},setLocked:function(gt){Q=gt},setClear:function(gt){At!==gt&&(n.clearDepth(gt),At=gt)},reset:function(){Q=!1,Je=null,qe=null,At=null}}}function s(){let Q=!1,Je=null,qe=null,At=null,gt=null,rn=null,nn=null,Tn=null,Hn=null;return{setTest:function(an){Q||(an?xt(n.STENCIL_TEST):nt(n.STENCIL_TEST))},setMask:function(an){Je!==an&&!Q&&(n.stencilMask(an),Je=an)},setFunc:function(an,Qn,Qi){(qe!==an||At!==Qn||gt!==Qi)&&(n.stencilFunc(an,Qn,Qi),qe=an,At=Qn,gt=Qi)},setOp:function(an,Qn,Qi){(rn!==an||nn!==Qn||Tn!==Qi)&&(n.stencilOp(an,Qn,Qi),rn=an,nn=Qn,Tn=Qi)},setLocked:function(an){Q=an},setClear:function(an){Hn!==an&&(n.clearStencil(an),Hn=an)},reset:function(){Q=!1,Je=null,qe=null,At=null,gt=null,rn=null,nn=null,Tn=null,Hn=null}}}const o=new i,l=new a,c=new s,f=new WeakMap,p=new WeakMap;let h={},m={},v=new WeakMap,x=[],_=null,g=!1,A=null,S=null,C=null,T=null,M=null,b=null,L=null,R=new Oe(0,0,0),F=0,O=!1,X=null,ne=null,W=null,Z=null,ie=null;const he=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,re=0;const te=n.getParameter(n.VERSION);te.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(te)[1]),Y=re>=1):te.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),Y=re>=2);let de=null,fe={};const ae=n.getParameter(n.SCISSOR_BOX),_e=n.getParameter(n.VIEWPORT),Pe=new cn().fromArray(ae),Ie=new cn().fromArray(_e);function ke(Q,Je,qe,At){const gt=new Uint8Array(4),rn=n.createTexture();n.bindTexture(Q,rn),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let nn=0;nn<qe;nn++)r&&(Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY)?n.texImage3D(Je,0,n.RGBA,1,1,At,0,n.RGBA,n.UNSIGNED_BYTE,gt):n.texImage2D(Je+nn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,gt);return rn}const ct={};ct[n.TEXTURE_2D]=ke(n.TEXTURE_2D,n.TEXTURE_2D,1),ct[n.TEXTURE_CUBE_MAP]=ke(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ct[n.TEXTURE_2D_ARRAY]=ke(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ct[n.TEXTURE_3D]=ke(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),xt(n.DEPTH_TEST),l.setFunc(uf),je(!1),N(H_),xt(n.CULL_FACE),Ae(xs);function xt(Q){h[Q]!==!0&&(n.enable(Q),h[Q]=!0)}function nt(Q){h[Q]!==!1&&(n.disable(Q),h[Q]=!1)}function dt(Q,Je){return m[Q]!==Je?(n.bindFramebuffer(Q,Je),m[Q]=Je,r&&(Q===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Je),Q===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Je)),!0):!1}function J(Q,Je){let qe=x,At=!1;if(Q)if(qe=v.get(Je),qe===void 0&&(qe=[],v.set(Je,qe)),Q.isWebGLMultipleRenderTargets){const gt=Q.texture;if(qe.length!==gt.length||qe[0]!==n.COLOR_ATTACHMENT0){for(let rn=0,nn=gt.length;rn<nn;rn++)qe[rn]=n.COLOR_ATTACHMENT0+rn;qe.length=gt.length,At=!0}}else qe[0]!==n.COLOR_ATTACHMENT0&&(qe[0]=n.COLOR_ATTACHMENT0,At=!0);else qe[0]!==n.BACK&&(qe[0]=n.BACK,At=!0);At&&(t.isWebGL2?n.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function Fe(Q){return _!==Q?(n.useProgram(Q),_=Q,!0):!1}const xe={[Qs]:n.FUNC_ADD,[FP]:n.FUNC_SUBTRACT,[BP]:n.FUNC_REVERSE_SUBTRACT};if(r)xe[J_]=n.MIN,xe[q_]=n.MAX;else{const Q=e.get("EXT_blend_minmax");Q!==null&&(xe[J_]=Q.MIN_EXT,xe[q_]=Q.MAX_EXT)}const De={[LP]:n.ZERO,[DP]:n.ONE,[UP]:n.SRC_COLOR,[dg]:n.SRC_ALPHA,[GP]:n.SRC_ALPHA_SATURATE,[zP]:n.DST_COLOR,[kP]:n.DST_ALPHA,[OP]:n.ONE_MINUS_SRC_COLOR,[fg]:n.ONE_MINUS_SRC_ALPHA,[VP]:n.ONE_MINUS_DST_COLOR,[NP]:n.ONE_MINUS_DST_ALPHA,[HP]:n.CONSTANT_COLOR,[WP]:n.ONE_MINUS_CONSTANT_COLOR,[XP]:n.CONSTANT_ALPHA,[jP]:n.ONE_MINUS_CONSTANT_ALPHA};function Ae(Q,Je,qe,At,gt,rn,nn,Tn,Hn,an){if(Q===xs){g===!0&&(nt(n.BLEND),g=!1);return}if(g===!1&&(xt(n.BLEND),g=!0),Q!==IP){if(Q!==A||an!==O){if((S!==Qs||M!==Qs)&&(n.blendEquation(n.FUNC_ADD),S=Qs,M=Qs),an)switch(Q){case yl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case W_:n.blendFunc(n.ONE,n.ONE);break;case X_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case yl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case W_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case X_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}C=null,T=null,b=null,L=null,R.set(0,0,0),F=0,A=Q,O=an}return}gt=gt||Je,rn=rn||qe,nn=nn||At,(Je!==S||gt!==M)&&(n.blendEquationSeparate(xe[Je],xe[gt]),S=Je,M=gt),(qe!==C||At!==T||rn!==b||nn!==L)&&(n.blendFuncSeparate(De[qe],De[At],De[rn],De[nn]),C=qe,T=At,b=rn,L=nn),(Tn.equals(R)===!1||Hn!==F)&&(n.blendColor(Tn.r,Tn.g,Tn.b,Hn),R.copy(Tn),F=Hn),A=Q,O=!1}function ot(Q,Je){Q.side===Yr?nt(n.CULL_FACE):xt(n.CULL_FACE);let qe=Q.side===Xi;Je&&(qe=!qe),je(qe),Q.blending===yl&&Q.transparent===!1?Ae(xs):Ae(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),o.setMask(Q.colorWrite);const At=Q.stencilWrite;c.setTest(At),At&&(c.setMask(Q.stencilWriteMask),c.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),c.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),se(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?xt(n.SAMPLE_ALPHA_TO_COVERAGE):nt(n.SAMPLE_ALPHA_TO_COVERAGE)}function je(Q){X!==Q&&(Q?n.frontFace(n.CW):n.frontFace(n.CCW),X=Q)}function N(Q){Q!==bP?(xt(n.CULL_FACE),Q!==ne&&(Q===H_?n.cullFace(n.BACK):Q===PP?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):nt(n.CULL_FACE),ne=Q}function D(Q){Q!==W&&(Y&&n.lineWidth(Q),W=Q)}function se(Q,Je,qe){Q?(xt(n.POLYGON_OFFSET_FILL),(Z!==Je||ie!==qe)&&(n.polygonOffset(Je,qe),Z=Je,ie=qe)):nt(n.POLYGON_OFFSET_FILL)}function Se(Q){Q?xt(n.SCISSOR_TEST):nt(n.SCISSOR_TEST)}function Te(Q){Q===void 0&&(Q=n.TEXTURE0+he-1),de!==Q&&(n.activeTexture(Q),de=Q)}function we(Q,Je,qe){qe===void 0&&(de===null?qe=n.TEXTURE0+he-1:qe=de);let At=fe[qe];At===void 0&&(At={type:void 0,texture:void 0},fe[qe]=At),(At.type!==Q||At.texture!==Je)&&(de!==qe&&(n.activeTexture(qe),de=qe),n.bindTexture(Q,Je||ct[Q]),At.type=Q,At.texture=Je)}function Be(){const Q=fe[de];Q!==void 0&&Q.type!==void 0&&(n.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ee(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ve(){try{n.texSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ht(){try{n.texSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ce(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function it(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ze(){try{n.texStorage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function lt(){try{n.texStorage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Qe(){try{n.texImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function $e(){try{n.texImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ct(Q){Pe.equals(Q)===!1&&(n.scissor(Q.x,Q.y,Q.z,Q.w),Pe.copy(Q))}function Tt(Q){Ie.equals(Q)===!1&&(n.viewport(Q.x,Q.y,Q.z,Q.w),Ie.copy(Q))}function Ut(Q,Je){let qe=p.get(Je);qe===void 0&&(qe=new WeakMap,p.set(Je,qe));let At=qe.get(Q);At===void 0&&(At=n.getUniformBlockIndex(Je,Q.name),qe.set(Q,At))}function Bt(Q,Je){const At=p.get(Je).get(Q);f.get(Je)!==At&&(n.uniformBlockBinding(Je,At,Q.__bindingPointIndex),f.set(Je,At))}function ce(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},de=null,fe={},m={},v=new WeakMap,x=[],_=null,g=!1,A=null,S=null,C=null,T=null,M=null,b=null,L=null,R=new Oe(0,0,0),F=0,O=!1,X=null,ne=null,W=null,Z=null,ie=null,Pe.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:xt,disable:nt,bindFramebuffer:dt,drawBuffers:J,useProgram:Fe,setBlending:Ae,setMaterial:ot,setFlipSided:je,setCullFace:N,setLineWidth:D,setPolygonOffset:se,setScissorTest:Se,activeTexture:Te,bindTexture:we,unbindTexture:Be,compressedTexImage2D:be,compressedTexImage3D:Ee,texImage2D:Qe,texImage3D:$e,updateUBOMapping:Ut,uniformBlockBinding:Bt,texStorage2D:ze,texStorage3D:lt,texSubImage2D:Ve,texSubImage3D:ht,compressedTexSubImage2D:Ce,compressedTexSubImage3D:it,scissor:Ct,viewport:Tt,reset:ce}}function MV(n,e,t,r,i,a,s){const o=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let p;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(N,D){return m?new OffscreenCanvas(N,D):yf("canvas")}function x(N,D,se,Se){let Te=1;if((N.width>Se||N.height>Se)&&(Te=Se/Math.max(N.width,N.height)),Te<1||D===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const we=D?mg:Math.floor,Be=we(Te*N.width),be=we(Te*N.height);p===void 0&&(p=v(Be,be));const Ee=se?v(Be,be):p;return Ee.width=Be,Ee.height=be,Ee.getContext("2d").drawImage(N,0,0,Be,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Be+"x"+be+")."),Ee}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function _(N){return wx(N.width)&&wx(N.height)}function g(N){return o?!1:N.wrapS!==mi||N.wrapT!==mi||N.minFilter!==En&&N.minFilter!==fn}function A(N,D){return N.generateMipmaps&&D&&N.minFilter!==En&&N.minFilter!==fn}function S(N){n.generateMipmap(N)}function C(N,D,se,Se,Te=!1){if(o===!1)return D;if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let we=D;if(D===n.RED&&(se===n.FLOAT&&(we=n.R32F),se===n.HALF_FLOAT&&(we=n.R16F),se===n.UNSIGNED_BYTE&&(we=n.R8)),D===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(we=n.R8UI),se===n.UNSIGNED_SHORT&&(we=n.R16UI),se===n.UNSIGNED_INT&&(we=n.R32UI),se===n.BYTE&&(we=n.R8I),se===n.SHORT&&(we=n.R16I),se===n.INT&&(we=n.R32I)),D===n.RG&&(se===n.FLOAT&&(we=n.RG32F),se===n.HALF_FLOAT&&(we=n.RG16F),se===n.UNSIGNED_BYTE&&(we=n.RG8)),D===n.RGBA){const Be=Te?pf:ln.getTransfer(Se);se===n.FLOAT&&(we=n.RGBA32F),se===n.HALF_FLOAT&&(we=n.RGBA16F),se===n.UNSIGNED_BYTE&&(we=Be===pn?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function T(N,D,se){return A(N,se)===!0||N.isFramebufferTexture&&N.minFilter!==En&&N.minFilter!==fn?Math.log2(Math.max(D.width,D.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?D.mipmaps.length:1}function M(N){return N===En||N===ff||N===Yc?n.NEAREST:n.LINEAR}function b(N){const D=N.target;D.removeEventListener("dispose",b),R(D),D.isVideoTexture&&f.delete(D)}function L(N){const D=N.target;D.removeEventListener("dispose",L),O(D)}function R(N){const D=r.get(N);if(D.__webglInit===void 0)return;const se=N.source,Se=h.get(se);if(Se){const Te=Se[D.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&F(N),Object.keys(Se).length===0&&h.delete(se)}r.remove(N)}function F(N){const D=r.get(N);n.deleteTexture(D.__webglTexture);const se=N.source,Se=h.get(se);delete Se[D.__cacheKey],s.memory.textures--}function O(N){const D=N.texture,se=r.get(N),Se=r.get(D);if(Se.__webglTexture!==void 0&&(n.deleteTexture(Se.__webglTexture),s.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(se.__webglFramebuffer[Te]))for(let we=0;we<se.__webglFramebuffer[Te].length;we++)n.deleteFramebuffer(se.__webglFramebuffer[Te][we]);else n.deleteFramebuffer(se.__webglFramebuffer[Te]);se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[Te])}else{if(Array.isArray(se.__webglFramebuffer))for(let Te=0;Te<se.__webglFramebuffer.length;Te++)n.deleteFramebuffer(se.__webglFramebuffer[Te]);else n.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Te=0;Te<se.__webglColorRenderbuffer.length;Te++)se.__webglColorRenderbuffer[Te]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[Te]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Te=0,we=D.length;Te<we;Te++){const Be=r.get(D[Te]);Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),s.memory.textures--),r.remove(D[Te])}r.remove(D),r.remove(N)}let X=0;function ne(){X=0}function W(){const N=X;return N>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+i.maxTextures),X+=1,N}function Z(N){const D=[];return D.push(N.wrapS),D.push(N.wrapT),D.push(N.wrapR||0),D.push(N.magFilter),D.push(N.minFilter),D.push(N.anisotropy),D.push(N.internalFormat),D.push(N.format),D.push(N.type),D.push(N.generateMipmaps),D.push(N.premultiplyAlpha),D.push(N.flipY),D.push(N.unpackAlignment),D.push(N.colorSpace),D.join()}function ie(N,D){const se=r.get(N);if(N.isVideoTexture&&ot(N),N.isRenderTargetTexture===!1&&N.version>0&&se.__version!==N.version){const Se=N.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Pe(se,N,D);return}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+D)}function he(N,D){const se=r.get(N);if(N.version>0&&se.__version!==N.version){Pe(se,N,D);return}t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+D)}function Y(N,D){const se=r.get(N);if(N.version>0&&se.__version!==N.version){Pe(se,N,D);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+D)}function re(N,D){const se=r.get(N);if(N.version>0&&se.__version!==N.version){Ie(se,N,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+D)}const te={[vo]:n.REPEAT,[mi]:n.CLAMP_TO_EDGE,[cu]:n.MIRRORED_REPEAT},de={[En]:n.NEAREST,[ff]:n.NEAREST_MIPMAP_NEAREST,[Yc]:n.NEAREST_MIPMAP_LINEAR,[fn]:n.LINEAR,[ov]:n.LINEAR_MIPMAP_NEAREST,[ja]:n.LINEAR_MIPMAP_LINEAR},fe={[S2]:n.NEVER,[b2]:n.ALWAYS,[w2]:n.LESS,[hS]:n.LEQUAL,[C2]:n.EQUAL,[T2]:n.GEQUAL,[E2]:n.GREATER,[M2]:n.NOTEQUAL};function ae(N,D,se){if(se?(n.texParameteri(N,n.TEXTURE_WRAP_S,te[D.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,te[D.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,te[D.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,de[D.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,de[D.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(D.wrapS!==mi||D.wrapT!==mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,M(D.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,M(D.minFilter)),D.minFilter!==En&&D.minFilter!==fn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),D.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,fe[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===En||D.minFilter!==Yc&&D.minFilter!==ja||D.type===gi&&e.has("OES_texture_float_linear")===!1||o===!1&&D.type===Ii&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||r.get(D).__currentAnisotropy)&&(n.texParameterf(N,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy)}}function _e(N,D){let se=!1;N.__webglInit===void 0&&(N.__webglInit=!0,D.addEventListener("dispose",b));const Se=D.source;let Te=h.get(Se);Te===void 0&&(Te={},h.set(Se,Te));const we=Z(D);if(we!==N.__cacheKey){Te[we]===void 0&&(Te[we]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,se=!0),Te[we].usedTimes++;const Be=Te[N.__cacheKey];Be!==void 0&&(Te[N.__cacheKey].usedTimes--,Be.usedTimes===0&&F(D)),N.__cacheKey=we,N.__webglTexture=Te[we].texture}return se}function Pe(N,D,se){let Se=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(Se=n.TEXTURE_3D);const Te=_e(N,D),we=D.source;t.bindTexture(Se,N.__webglTexture,n.TEXTURE0+se);const Be=r.get(we);if(we.version!==Be.__version||Te===!0){t.activeTexture(n.TEXTURE0+se);const be=ln.getPrimaries(ln.workingColorSpace),Ee=D.colorSpace===Ar?null:ln.getPrimaries(D.colorSpace),Ve=D.colorSpace===Ar||be===Ee?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);const ht=g(D)&&_(D.image)===!1;let Ce=x(D.image,ht,!1,i.maxTextureSize);Ce=je(D,Ce);const it=_(Ce)||o,ze=a.convert(D.format,D.colorSpace);let lt=a.convert(D.type),Qe=C(D.internalFormat,ze,lt,D.colorSpace,D.isVideoTexture);ae(Se,D,it);let $e;const Ct=D.mipmaps,Tt=o&&D.isVideoTexture!==!0&&Qe!==cS,Ut=Be.__version===void 0||Te===!0,Bt=T(D,Ce,it);if(D.isDepthTexture)Qe=n.DEPTH_COMPONENT,o?D.type===gi?Qe=n.DEPTH_COMPONENT32F:D.type===ps?Qe=n.DEPTH_COMPONENT24:D.type===ao?Qe=n.DEPTH24_STENCIL8:Qe=n.DEPTH_COMPONENT16:D.type===gi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===so&&Qe===n.DEPTH_COMPONENT&&D.type!==lv&&D.type!==ps&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=ps,lt=a.convert(D.type)),D.format===Tl&&Qe===n.DEPTH_COMPONENT&&(Qe=n.DEPTH_STENCIL,D.type!==ao&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=ao,lt=a.convert(D.type))),Ut&&(Tt?t.texStorage2D(n.TEXTURE_2D,1,Qe,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,Qe,Ce.width,Ce.height,0,ze,lt,null));else if(D.isDataTexture)if(Ct.length>0&&it){Tt&&Ut&&t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ct[0].width,Ct[0].height);for(let ce=0,Q=Ct.length;ce<Q;ce++)$e=Ct[ce],Tt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,$e.width,$e.height,ze,lt,$e.data):t.texImage2D(n.TEXTURE_2D,ce,Qe,$e.width,$e.height,0,ze,lt,$e.data);D.generateMipmaps=!1}else Tt?(Ut&&t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ce.width,Ce.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ce.width,Ce.height,ze,lt,Ce.data)):t.texImage2D(n.TEXTURE_2D,0,Qe,Ce.width,Ce.height,0,ze,lt,Ce.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Tt&&Ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Bt,Qe,Ct[0].width,Ct[0].height,Ce.depth);for(let ce=0,Q=Ct.length;ce<Q;ce++)$e=Ct[ce],D.format!==Ri?ze!==null?Tt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,$e.width,$e.height,Ce.depth,ze,$e.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,Qe,$e.width,$e.height,Ce.depth,0,$e.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,$e.width,$e.height,Ce.depth,ze,lt,$e.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,Qe,$e.width,$e.height,Ce.depth,0,ze,lt,$e.data)}else{Tt&&Ut&&t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ct[0].width,Ct[0].height);for(let ce=0,Q=Ct.length;ce<Q;ce++)$e=Ct[ce],D.format!==Ri?ze!==null?Tt?t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,$e.width,$e.height,ze,$e.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,Qe,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,$e.width,$e.height,ze,lt,$e.data):t.texImage2D(n.TEXTURE_2D,ce,Qe,$e.width,$e.height,0,ze,lt,$e.data)}else if(D.isDataArrayTexture)Tt?(Ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Bt,Qe,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,ze,lt,Ce.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Qe,Ce.width,Ce.height,Ce.depth,0,ze,lt,Ce.data);else if(D.isData3DTexture)Tt?(Ut&&t.texStorage3D(n.TEXTURE_3D,Bt,Qe,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,ze,lt,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,Qe,Ce.width,Ce.height,Ce.depth,0,ze,lt,Ce.data);else if(D.isFramebufferTexture){if(Ut)if(Tt)t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ce.width,Ce.height);else{let ce=Ce.width,Q=Ce.height;for(let Je=0;Je<Bt;Je++)t.texImage2D(n.TEXTURE_2D,Je,Qe,ce,Q,0,ze,lt,null),ce>>=1,Q>>=1}}else if(Ct.length>0&&it){Tt&&Ut&&t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ct[0].width,Ct[0].height);for(let ce=0,Q=Ct.length;ce<Q;ce++)$e=Ct[ce],Tt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,ze,lt,$e):t.texImage2D(n.TEXTURE_2D,ce,Qe,ze,lt,$e);D.generateMipmaps=!1}else Tt?(Ut&&t.texStorage2D(n.TEXTURE_2D,Bt,Qe,Ce.width,Ce.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ze,lt,Ce)):t.texImage2D(n.TEXTURE_2D,0,Qe,ze,lt,Ce);A(D,it)&&S(Se),Be.__version=we.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function Ie(N,D,se){if(D.image.length!==6)return;const Se=_e(N,D),Te=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+se);const we=r.get(Te);if(Te.version!==we.__version||Se===!0){t.activeTexture(n.TEXTURE0+se);const Be=ln.getPrimaries(ln.workingColorSpace),be=D.colorSpace===Ar?null:ln.getPrimaries(D.colorSpace),Ee=D.colorSpace===Ar||Be===be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ee);const Ve=D.isCompressedTexture||D.image[0].isCompressedTexture,ht=D.image[0]&&D.image[0].isDataTexture,Ce=[];for(let ce=0;ce<6;ce++)!Ve&&!ht?Ce[ce]=x(D.image[ce],!1,!0,i.maxCubemapSize):Ce[ce]=ht?D.image[ce].image:D.image[ce],Ce[ce]=je(D,Ce[ce]);const it=Ce[0],ze=_(it)||o,lt=a.convert(D.format,D.colorSpace),Qe=a.convert(D.type),$e=C(D.internalFormat,lt,Qe,D.colorSpace),Ct=o&&D.isVideoTexture!==!0,Tt=we.__version===void 0||Se===!0;let Ut=T(D,it,ze);ae(n.TEXTURE_CUBE_MAP,D,ze);let Bt;if(Ve){Ct&&Tt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ut,$e,it.width,it.height);for(let ce=0;ce<6;ce++){Bt=Ce[ce].mipmaps;for(let Q=0;Q<Bt.length;Q++){const Je=Bt[Q];D.format!==Ri?lt!==null?Ct?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q,0,0,Je.width,Je.height,lt,Je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q,$e,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ct?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q,0,0,Je.width,Je.height,lt,Qe,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q,$e,Je.width,Je.height,0,lt,Qe,Je.data)}}}else{Bt=D.mipmaps,Ct&&Tt&&(Bt.length>0&&Ut++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ut,$e,Ce[0].width,Ce[0].height));for(let ce=0;ce<6;ce++)if(ht){Ct?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,Ce[ce].width,Ce[ce].height,lt,Qe,Ce[ce].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,$e,Ce[ce].width,Ce[ce].height,0,lt,Qe,Ce[ce].data);for(let Q=0;Q<Bt.length;Q++){const qe=Bt[Q].image[ce].image;Ct?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q+1,0,0,qe.width,qe.height,lt,Qe,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q+1,$e,qe.width,qe.height,0,lt,Qe,qe.data)}}else{Ct?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,lt,Qe,Ce[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,$e,lt,Qe,Ce[ce]);for(let Q=0;Q<Bt.length;Q++){const Je=Bt[Q];Ct?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q+1,0,0,lt,Qe,Je.image[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Q+1,$e,lt,Qe,Je.image[ce])}}}A(D,ze)&&S(n.TEXTURE_CUBE_MAP),we.__version=Te.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function ke(N,D,se,Se,Te,we){const Be=a.convert(se.format,se.colorSpace),be=a.convert(se.type),Ee=C(se.internalFormat,Be,be,se.colorSpace);if(!r.get(D).__hasExternalTextures){const ht=Math.max(1,D.width>>we),Ce=Math.max(1,D.height>>we);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,we,Ee,ht,Ce,D.depth,0,Be,be,null):t.texImage2D(Te,we,Ee,ht,Ce,0,Be,be,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),Ae(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,Te,r.get(se).__webglTexture,0,De(D)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,Te,r.get(se).__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ct(N,D,se){if(n.bindRenderbuffer(n.RENDERBUFFER,N),D.depthBuffer&&!D.stencilBuffer){let Se=o===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(se||Ae(D)){const Te=D.depthTexture;Te&&Te.isDepthTexture&&(Te.type===gi?Se=n.DEPTH_COMPONENT32F:Te.type===ps&&(Se=n.DEPTH_COMPONENT24));const we=De(D);Ae(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,we,Se,D.width,D.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,we,Se,D.width,D.height)}else n.renderbufferStorage(n.RENDERBUFFER,Se,D.width,D.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(D.depthBuffer&&D.stencilBuffer){const Se=De(D);se&&Ae(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,n.DEPTH24_STENCIL8,D.width,D.height):Ae(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Se,n.DEPTH24_STENCIL8,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const Se=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let Te=0;Te<Se.length;Te++){const we=Se[Te],Be=a.convert(we.format,we.colorSpace),be=a.convert(we.type),Ee=C(we.internalFormat,Be,be,we.colorSpace),Ve=De(D);se&&Ae(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ve,Ee,D.width,D.height):Ae(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ve,Ee,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xt(N,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),ie(D.depthTexture,0);const Se=r.get(D.depthTexture).__webglTexture,Te=De(D);if(D.depthTexture.format===so)Ae(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(D.depthTexture.format===Tl)Ae(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function nt(N){const D=r.get(N),se=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!D.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");xt(D.__webglFramebuffer,N)}else if(se){D.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[Se]),D.__webglDepthbuffer[Se]=n.createRenderbuffer(),ct(D.__webglDepthbuffer[Se],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),ct(D.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function dt(N,D,se){const Se=r.get(N);D!==void 0&&ke(Se.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&nt(N)}function J(N){const D=N.texture,se=r.get(N),Se=r.get(D);N.addEventListener("dispose",L),N.isWebGLMultipleRenderTargets!==!0&&(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=D.version,s.memory.textures++);const Te=N.isWebGLCubeRenderTarget===!0,we=N.isWebGLMultipleRenderTargets===!0,Be=_(N)||o;if(Te){se.__webglFramebuffer=[];for(let be=0;be<6;be++)if(o&&D.mipmaps&&D.mipmaps.length>0){se.__webglFramebuffer[be]=[];for(let Ee=0;Ee<D.mipmaps.length;Ee++)se.__webglFramebuffer[be][Ee]=n.createFramebuffer()}else se.__webglFramebuffer[be]=n.createFramebuffer()}else{if(o&&D.mipmaps&&D.mipmaps.length>0){se.__webglFramebuffer=[];for(let be=0;be<D.mipmaps.length;be++)se.__webglFramebuffer[be]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(we)if(i.drawBuffers){const be=N.texture;for(let Ee=0,Ve=be.length;Ee<Ve;Ee++){const ht=r.get(be[Ee]);ht.__webglTexture===void 0&&(ht.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&N.samples>0&&Ae(N)===!1){const be=we?D:[D];se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Ee=0;Ee<be.length;Ee++){const Ve=be[Ee];se.__webglColorRenderbuffer[Ee]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Ee]);const ht=a.convert(Ve.format,Ve.colorSpace),Ce=a.convert(Ve.type),it=C(Ve.internalFormat,ht,Ce,Ve.colorSpace,N.isXRRenderTarget===!0),ze=De(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,ze,it,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,se.__webglColorRenderbuffer[Ee])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),ct(se.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Te){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),ae(n.TEXTURE_CUBE_MAP,D,Be);for(let be=0;be<6;be++)if(o&&D.mipmaps&&D.mipmaps.length>0)for(let Ee=0;Ee<D.mipmaps.length;Ee++)ke(se.__webglFramebuffer[be][Ee],N,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,Ee);else ke(se.__webglFramebuffer[be],N,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0);A(D,Be)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){const be=N.texture;for(let Ee=0,Ve=be.length;Ee<Ve;Ee++){const ht=be[Ee],Ce=r.get(ht);t.bindTexture(n.TEXTURE_2D,Ce.__webglTexture),ae(n.TEXTURE_2D,ht,Be),ke(se.__webglFramebuffer,N,ht,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,0),A(ht,Be)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let be=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(o?be=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(be,Se.__webglTexture),ae(be,D,Be),o&&D.mipmaps&&D.mipmaps.length>0)for(let Ee=0;Ee<D.mipmaps.length;Ee++)ke(se.__webglFramebuffer[Ee],N,D,n.COLOR_ATTACHMENT0,be,Ee);else ke(se.__webglFramebuffer,N,D,n.COLOR_ATTACHMENT0,be,0);A(D,Be)&&S(be),t.unbindTexture()}N.depthBuffer&&nt(N)}function Fe(N){const D=_(N)||o,se=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Se=0,Te=se.length;Se<Te;Se++){const we=se[Se];if(A(we,D)){const Be=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,be=r.get(we).__webglTexture;t.bindTexture(Be,be),S(Be),t.unbindTexture()}}}function xe(N){if(o&&N.samples>0&&Ae(N)===!1){const D=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],se=N.width,Se=N.height;let Te=n.COLOR_BUFFER_BIT;const we=[],Be=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,be=r.get(N),Ee=N.isWebGLMultipleRenderTargets===!0;if(Ee)for(let Ve=0;Ve<D.length;Ve++)t.bindFramebuffer(n.FRAMEBUFFER,be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,be.__webglFramebuffer);for(let Ve=0;Ve<D.length;Ve++){we.push(n.COLOR_ATTACHMENT0+Ve),N.depthBuffer&&we.push(Be);const ht=be.__ignoreDepthValues!==void 0?be.__ignoreDepthValues:!1;if(ht===!1&&(N.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),Ee&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,be.__webglColorRenderbuffer[Ve]),ht===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Be]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Be])),Ee){const Ce=r.get(D[Ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ce,0)}n.blitFramebuffer(0,0,se,Se,0,0,se,Se,Te,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ee)for(let Ve=0;Ve<D.length;Ve++){t.bindFramebuffer(n.FRAMEBUFFER,be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,be.__webglColorRenderbuffer[Ve]);const ht=r.get(D[Ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,ht,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,be.__webglMultisampledFramebuffer)}}function De(N){return Math.min(i.maxSamples,N.samples)}function Ae(N){const D=r.get(N);return o&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function ot(N){const D=s.render.frame;f.get(N)!==D&&(f.set(N,D),N.update())}function je(N,D){const se=N.colorSpace,Se=N.format,Te=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===pg||se!==Ja&&se!==Ar&&(ln.getTransfer(se)===pn?o===!1?e.has("EXT_sRGB")===!0&&Se===Ri?(N.format=pg,N.minFilter=fn,N.generateMipmaps=!1):D=mS.sRGBToLinear(D):(Se!==Ri||Te!==Na)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),D}this.allocateTextureUnit=W,this.resetTextureUnits=ne,this.setTexture2D=ie,this.setTexture2DArray=he,this.setTexture3D=Y,this.setTextureCube=re,this.rebindTextures=dt,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=nt,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=Ae}function V2(n,e,t){const r=t.isWebGL2;function i(a,s=Ar){let o;const l=ln.getTransfer(s);if(a===Na)return n.UNSIGNED_BYTE;if(a===iS)return n.UNSIGNED_SHORT_4_4_4_4;if(a===rS)return n.UNSIGNED_SHORT_5_5_5_1;if(a===l2)return n.BYTE;if(a===c2)return n.SHORT;if(a===lv)return n.UNSIGNED_SHORT;if(a===nS)return n.INT;if(a===ps)return n.UNSIGNED_INT;if(a===gi)return n.FLOAT;if(a===Ii)return r?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===u2)return n.ALPHA;if(a===Ri)return n.RGBA;if(a===d2)return n.LUMINANCE;if(a===f2)return n.LUMINANCE_ALPHA;if(a===so)return n.DEPTH_COMPONENT;if(a===Tl)return n.DEPTH_STENCIL;if(a===pg)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===aS)return n.RED;if(a===sS)return n.RED_INTEGER;if(a===h2)return n.RG;if(a===oS)return n.RG_INTEGER;if(a===lS)return n.RGBA_INTEGER;if(a===Xm||a===jm||a===Jm||a===qm)if(l===pn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===Xm)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===jm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Jm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===qm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===Xm)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===jm)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Jm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===qm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===Y_||a===Q_||a===Z_||a===$_)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===Y_)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===Q_)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===Z_)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===$_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===cS)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===ex||a===tx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===ex)return l===pn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===tx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===nx||a===ix||a===rx||a===ax||a===sx||a===ox||a===lx||a===cx||a===ux||a===dx||a===fx||a===hx||a===px||a===mx)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===nx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===ix)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===rx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===ax)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===sx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===ox)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===lx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===cx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===ux)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===dx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===fx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===hx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===px)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===mx)return l===pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===Km||a===gx||a===vx)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===Km)return l===pn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===gx)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===vx)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===p2||a===yx||a===_x||a===xx)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(a===Km)return o.COMPRESSED_RED_RGTC1_EXT;if(a===yx)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===_x)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===xx)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===ao?r?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:i}}class G2 extends ei{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ms extends Qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const TV={type:"move"};class Dy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ms,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ms,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ms,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,r),g=this._getHandJoint(c,x);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const f=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],h=f.position.distanceTo(p.position),m=.02,v=.005;c.inputState.pinching&&h>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(TV)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new ms;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class bV extends Ts{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,c=null,f=null,p=null,h=null,m=null,v=null;const x=t.getContextAttributes();let _=null,g=null;const A=[],S=[],C=new Me;let T=null;const M=new ei;M.layers.enable(1),M.viewport=new cn;const b=new ei;b.layers.enable(2),b.viewport=new cn;const L=[M,b],R=new G2;R.layers.enable(1),R.layers.enable(2);let F=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let _e=A[ae];return _e===void 0&&(_e=new Dy,A[ae]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ae){let _e=A[ae];return _e===void 0&&(_e=new Dy,A[ae]=_e),_e.getGripSpace()},this.getHand=function(ae){let _e=A[ae];return _e===void 0&&(_e=new Dy,A[ae]=_e),_e.getHandSpace()};function X(ae){const _e=S.indexOf(ae.inputSource);if(_e===-1)return;const Pe=A[_e];Pe!==void 0&&(Pe.update(ae.inputSource,ae.frame,c||s),Pe.dispatchEvent({type:ae.type,data:ae.inputSource}))}function ne(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",ne),i.removeEventListener("inputsourceschange",W);for(let ae=0;ae<A.length;ae++){const _e=S[ae];_e!==null&&(S[ae]=null,A[ae].disconnect(_e))}F=null,O=null,e.setRenderTarget(_),m=null,h=null,p=null,i=null,g=null,fe.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){a=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){o=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ae){if(i=ae,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",ne),i.addEventListener("inputsourceschange",W),x.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(C),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const _e={antialias:i.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};m=new XRWebGLLayer(i,t,_e),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new Ji(m.framebufferWidth,m.framebufferHeight,{format:Ri,type:Na,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let _e=null,Pe=null,Ie=null;x.depth&&(Ie=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,_e=x.stencil?Tl:so,Pe=x.stencil?ao:ps);const ke={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:a};p=new XRWebGLBinding(i,t),h=p.createProjectionLayer(ke),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),g=new Ji(h.textureWidth,h.textureHeight,{format:Ri,type:Na,depthTexture:new SS(h.textureWidth,h.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const ct=e.properties.get(g);ct.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await i.requestReferenceSpace(o),fe.setContext(i),fe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function W(ae){for(let _e=0;_e<ae.removed.length;_e++){const Pe=ae.removed[_e],Ie=S.indexOf(Pe);Ie>=0&&(S[Ie]=null,A[Ie].disconnect(Pe))}for(let _e=0;_e<ae.added.length;_e++){const Pe=ae.added[_e];let Ie=S.indexOf(Pe);if(Ie===-1){for(let ct=0;ct<A.length;ct++)if(ct>=S.length){S.push(Pe),Ie=ct;break}else if(S[ct]===null){S[ct]=Pe,Ie=ct;break}if(Ie===-1)break}const ke=A[Ie];ke&&ke.connect(Pe)}}const Z=new z,ie=new z;function he(ae,_e,Pe){Z.setFromMatrixPosition(_e.matrixWorld),ie.setFromMatrixPosition(Pe.matrixWorld);const Ie=Z.distanceTo(ie),ke=_e.projectionMatrix.elements,ct=Pe.projectionMatrix.elements,xt=ke[14]/(ke[10]-1),nt=ke[14]/(ke[10]+1),dt=(ke[9]+1)/ke[5],J=(ke[9]-1)/ke[5],Fe=(ke[8]-1)/ke[0],xe=(ct[8]+1)/ct[0],De=xt*Fe,Ae=xt*xe,ot=Ie/(-Fe+xe),je=ot*-Fe;_e.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(je),ae.translateZ(ot),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert();const N=xt+ot,D=nt+ot,se=De-je,Se=Ae+(Ie-je),Te=dt*nt/D*N,we=J*nt/D*N;ae.projectionMatrix.makePerspective(se,Se,Te,we,N,D),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}function Y(ae,_e){_e===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(_e.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(i===null)return;R.near=b.near=M.near=ae.near,R.far=b.far=M.far=ae.far,(F!==R.near||O!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),F=R.near,O=R.far);const _e=ae.parent,Pe=R.cameras;Y(R,_e);for(let Ie=0;Ie<Pe.length;Ie++)Y(Pe[Ie],_e);Pe.length===2?he(R,M,b):R.projectionMatrix.copy(M.projectionMatrix),re(ae,R,_e)};function re(ae,_e,Pe){Pe===null?ae.matrix.copy(_e.matrixWorld):(ae.matrix.copy(Pe.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(_e.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(_e.projectionMatrix),ae.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=fu*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(ae){l=ae,h!==null&&(h.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)};let te=null;function de(ae,_e){if(f=_e.getViewerPose(c||s),v=_e,f!==null){const Pe=f.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Ie=!1;Pe.length!==R.cameras.length&&(R.cameras.length=0,Ie=!0);for(let ke=0;ke<Pe.length;ke++){const ct=Pe[ke];let xt=null;if(m!==null)xt=m.getViewport(ct);else{const dt=p.getViewSubImage(h,ct);xt=dt.viewport,ke===0&&(e.setRenderTargetTextures(g,dt.colorTexture,h.ignoreDepthValues?void 0:dt.depthStencilTexture),e.setRenderTarget(g))}let nt=L[ke];nt===void 0&&(nt=new ei,nt.layers.enable(ke),nt.viewport=new cn,L[ke]=nt),nt.matrix.fromArray(ct.transform.matrix),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale),nt.projectionMatrix.fromArray(ct.projectionMatrix),nt.projectionMatrixInverse.copy(nt.projectionMatrix).invert(),nt.viewport.set(xt.x,xt.y,xt.width,xt.height),ke===0&&(R.matrix.copy(nt.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Ie===!0&&R.cameras.push(nt)}}for(let Pe=0;Pe<A.length;Pe++){const Ie=S[Pe],ke=A[Pe];Ie!==null&&ke!==void 0&&ke.update(Ie,_e,c||s)}te&&te(ae,_e),_e.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:_e}),v=null}const fe=new D2;fe.setAnimationLoop(de),this.setAnimationLoop=function(ae){te=ae},this.dispose=function(){}}}function PV(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,B2(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,A,S,C){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(_,g):g.isMeshToonMaterial?(a(_,g),p(_,g)):g.isMeshPhongMaterial?(a(_,g),f(_,g)):g.isMeshStandardMaterial?(a(_,g),h(_,g),g.isMeshPhysicalMaterial&&m(_,g,C)):g.isMeshMatcapMaterial?(a(_,g),v(_,g)):g.isMeshDepthMaterial?a(_,g):g.isMeshDistanceMaterial?(a(_,g),x(_,g)):g.isMeshNormalMaterial?a(_,g):g.isLineBasicMaterial?(s(_,g),g.isLineDashedMaterial&&o(_,g)):g.isPointsMaterial?l(_,g,A,S):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Xi&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Xi&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const A=e.get(g).envMap;if(A&&(_.envMap.value=A,_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function s(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function o(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,A,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*A,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function f(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function p(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function h(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,A){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Xi&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function x(_,g){const A=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function RV(n,e,t,r){let i={},a={},s=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,S){const C=S.program;r.uniformBlockBinding(A,C)}function c(A,S){let C=i[A.id];C===void 0&&(v(A),C=f(A),i[A.id]=C,A.addEventListener("dispose",_));const T=S.program;r.updateUBOMapping(A,T);const M=e.render.frame;a[A.id]!==M&&(h(A),a[A.id]=M)}function f(A){const S=p();A.__bindingPointIndex=S;const C=n.createBuffer(),T=A.__size,M=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,T,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,C),C}function p(){for(let A=0;A<o;A++)if(s.indexOf(A)===-1)return s.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(A){const S=i[A.id],C=A.uniforms,T=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let M=0,b=C.length;M<b;M++){const L=Array.isArray(C[M])?C[M]:[C[M]];for(let R=0,F=L.length;R<F;R++){const O=L[R];if(m(O,M,R,T)===!0){const X=O.__offset,ne=Array.isArray(O.value)?O.value:[O.value];let W=0;for(let Z=0;Z<ne.length;Z++){const ie=ne[Z],he=x(ie);typeof ie=="number"||typeof ie=="boolean"?(O.__data[0]=ie,n.bufferSubData(n.UNIFORM_BUFFER,X+W,O.__data)):ie.isMatrix3?(O.__data[0]=ie.elements[0],O.__data[1]=ie.elements[1],O.__data[2]=ie.elements[2],O.__data[3]=0,O.__data[4]=ie.elements[3],O.__data[5]=ie.elements[4],O.__data[6]=ie.elements[5],O.__data[7]=0,O.__data[8]=ie.elements[6],O.__data[9]=ie.elements[7],O.__data[10]=ie.elements[8],O.__data[11]=0):(ie.toArray(O.__data,W),W+=he.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,X,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,S,C,T){const M=A.value,b=S+"_"+C;if(T[b]===void 0)return typeof M=="number"||typeof M=="boolean"?T[b]=M:T[b]=M.clone(),!0;{const L=T[b];if(typeof M=="number"||typeof M=="boolean"){if(L!==M)return T[b]=M,!0}else if(L.equals(M)===!1)return L.copy(M),!0}return!1}function v(A){const S=A.uniforms;let C=0;const T=16;for(let b=0,L=S.length;b<L;b++){const R=Array.isArray(S[b])?S[b]:[S[b]];for(let F=0,O=R.length;F<O;F++){const X=R[F],ne=Array.isArray(X.value)?X.value:[X.value];for(let W=0,Z=ne.length;W<Z;W++){const ie=ne[W],he=x(ie),Y=C%T;Y!==0&&T-Y<he.boundary&&(C+=T-Y),X.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=C,C+=he.storage}}}const M=C%T;return M>0&&(C+=T-M),A.__size=C,A.__cache={},this}function x(A){const S={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function _(A){const S=A.target;S.removeEventListener("dispose",_);const C=s.indexOf(S.__bindingPointIndex);s.splice(C,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete a[S.id]}function g(){for(const A in i)n.deleteBuffer(i[A]);s=[],i={},a={}}return{bind:l,update:c,dispose:g}}class CS{constructor(e={}){const{canvas:t=R2(),context:r=null,depth:i=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=s;const m=new Uint32Array(4),v=new Int32Array(4);let x=null,_=null;const g=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=$n,this._useLegacyLights=!1,this.toneMapping=ka,this.toneMappingExposure=1;const S=this;let C=!1,T=0,M=0,b=null,L=-1,R=null;const F=new cn,O=new cn;let X=null;const ne=new Oe(0);let W=0,Z=t.width,ie=t.height,he=1,Y=null,re=null;const te=new cn(0,0,Z,ie),de=new cn(0,0,Z,ie);let fe=!1;const ae=new rh;let _e=!1,Pe=!1,Ie=null;const ke=new vt,ct=new Me,xt=new z,nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function dt(){return b===null?he:1}let J=r;function Fe(I,V){for(let G=0;G<I.length;G++){const q=I[G],j=t.getContext(q,V);if(j!==null)return j}return null}try{const I={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ol}`),t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",Q,!1),t.addEventListener("webglcontextcreationerror",Je,!1),J===null){const V=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&V.shift(),J=Fe(V,I),J===null)throw Fe(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&J instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let xe,De,Ae,ot,je,N,D,se,Se,Te,we,Be,be,Ee,Ve,ht,Ce,it,ze,lt,Qe,$e,Ct,Tt;function Ut(){xe=new WN(J),De=new kN(J,xe,e),xe.init(De),$e=new V2(J,xe,De),Ae=new EV(J,xe,De),ot=new JN(J),je=new hV,N=new MV(J,xe,Ae,je,De,$e,ot),D=new zN(S),se=new HN(S),Se=new t3(J,De),Ct=new UN(J,xe,Se,De),Te=new XN(J,Se,ot,Ct),we=new QN(J,Te,Se,ot),ze=new YN(J,De,N),ht=new NN(je),Be=new fV(S,D,se,xe,De,Ct,ht),be=new PV(S,je),Ee=new mV,Ve=new AV(xe,De),it=new DN(S,D,se,Ae,we,h,l),Ce=new CV(S,we,De),Tt=new RV(J,ot,De,Ae),lt=new ON(J,xe,ot,De),Qe=new jN(J,xe,ot,De),ot.programs=Be.programs,S.capabilities=De,S.extensions=xe,S.properties=je,S.renderLists=Ee,S.shadowMap=Ce,S.state=Ae,S.info=ot}Ut();const Bt=new bV(S,J);this.xr=Bt,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const I=xe.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=xe.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(I){I!==void 0&&(he=I,this.setSize(Z,ie,!1))},this.getSize=function(I){return I.set(Z,ie)},this.setSize=function(I,V,G=!0){if(Bt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=I,ie=V,t.width=Math.floor(I*he),t.height=Math.floor(V*he),G===!0&&(t.style.width=I+"px",t.style.height=V+"px"),this.setViewport(0,0,I,V)},this.getDrawingBufferSize=function(I){return I.set(Z*he,ie*he).floor()},this.setDrawingBufferSize=function(I,V,G){Z=I,ie=V,he=G,t.width=Math.floor(I*G),t.height=Math.floor(V*G),this.setViewport(0,0,I,V)},this.getCurrentViewport=function(I){return I.copy(F)},this.getViewport=function(I){return I.copy(te)},this.setViewport=function(I,V,G,q){I.isVector4?te.set(I.x,I.y,I.z,I.w):te.set(I,V,G,q),Ae.viewport(F.copy(te).multiplyScalar(he).floor())},this.getScissor=function(I){return I.copy(de)},this.setScissor=function(I,V,G,q){I.isVector4?de.set(I.x,I.y,I.z,I.w):de.set(I,V,G,q),Ae.scissor(O.copy(de).multiplyScalar(he).floor())},this.getScissorTest=function(){return fe},this.setScissorTest=function(I){Ae.setScissorTest(fe=I)},this.setOpaqueSort=function(I){Y=I},this.setTransparentSort=function(I){re=I},this.getClearColor=function(I){return I.copy(it.getClearColor())},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(I=!0,V=!0,G=!0){let q=0;if(I){let j=!1;if(b!==null){const le=b.texture.format;j=le===lS||le===oS||le===sS}if(j){const le=b.texture.type,pe=le===Na||le===ps||le===lv||le===ao||le===iS||le===rS,ve=it.getClearColor(),ge=it.getClearAlpha(),et=ve.r,Re=ve.g,Le=ve.b;pe?(m[0]=et,m[1]=Re,m[2]=Le,m[3]=ge,J.clearBufferuiv(J.COLOR,0,m)):(v[0]=et,v[1]=Re,v[2]=Le,v[3]=ge,J.clearBufferiv(J.COLOR,0,v))}else q|=J.COLOR_BUFFER_BIT}V&&(q|=J.DEPTH_BUFFER_BIT),G&&(q|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",Q,!1),t.removeEventListener("webglcontextcreationerror",Je,!1),Ee.dispose(),Ve.dispose(),je.dispose(),D.dispose(),se.dispose(),we.dispose(),Ct.dispose(),Tt.dispose(),Be.dispose(),Bt.dispose(),Bt.removeEventListener("sessionstart",Hn),Bt.removeEventListener("sessionend",an),Ie&&(Ie.dispose(),Ie=null),Qn.stop()};function ce(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const I=ot.autoReset,V=Ce.enabled,G=Ce.autoUpdate,q=Ce.needsUpdate,j=Ce.type;Ut(),ot.autoReset=I,Ce.enabled=V,Ce.autoUpdate=G,Ce.needsUpdate=q,Ce.type=j}function Je(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function qe(I){const V=I.target;V.removeEventListener("dispose",qe),At(V)}function At(I){gt(I),je.remove(I)}function gt(I){const V=je.get(I).programs;V!==void 0&&(V.forEach(function(G){Be.releaseProgram(G)}),I.isShaderMaterial&&Be.releaseShaderCache(I))}this.renderBufferDirect=function(I,V,G,q,j,le){V===null&&(V=nt);const pe=j.isMesh&&j.matrixWorld.determinant()<0,ve=B(I,V,G,q,j);Ae.setMaterial(q,pe);let ge=G.index,et=1;if(q.wireframe===!0){if(ge=Te.getWireframeAttribute(G),ge===void 0)return;et=2}const Re=G.drawRange,Le=G.attributes.position;let rt=Re.start*et,mt=(Re.start+Re.count)*et;le!==null&&(rt=Math.max(rt,le.start*et),mt=Math.min(mt,(le.start+le.count)*et)),ge!==null?(rt=Math.max(rt,0),mt=Math.min(mt,ge.count)):Le!=null&&(rt=Math.max(rt,0),mt=Math.min(mt,Le.count));const yt=mt-rt;if(yt<0||yt===1/0)return;Ct.setup(j,q,ve,G,ge);let bt,tt=lt;if(ge!==null&&(bt=Se.get(ge),tt=Qe,tt.setIndex(bt)),j.isMesh)q.wireframe===!0?(Ae.setLineWidth(q.wireframeLinewidth*dt()),tt.setMode(J.LINES)):tt.setMode(J.TRIANGLES);else if(j.isLine){let Ge=q.linewidth;Ge===void 0&&(Ge=1),Ae.setLineWidth(Ge*dt()),j.isLineSegments?tt.setMode(J.LINES):j.isLineLoop?tt.setMode(J.LINE_LOOP):tt.setMode(J.LINE_STRIP)}else j.isPoints?tt.setMode(J.POINTS):j.isSprite&&tt.setMode(J.TRIANGLES);if(j.isBatchedMesh)tt.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else if(j.isInstancedMesh)tt.renderInstances(rt,yt,j.count);else if(G.isInstancedBufferGeometry){const Ge=G._maxInstanceCount!==void 0?G._maxInstanceCount:1/0,Gt=Math.min(G.instanceCount,Ge);tt.renderInstances(rt,yt,Gt)}else tt.render(rt,yt)};function rn(I,V,G){I.transparent===!0&&I.side===Yr&&I.forceSinglePass===!1?(I.side=Xi,I.needsUpdate=!0,Lt(I,V,G),I.side=Wa,I.needsUpdate=!0,Lt(I,V,G),I.side=Yr):Lt(I,V,G)}this.compile=function(I,V,G=null){G===null&&(G=I),_=Ve.get(G),_.init(),A.push(_),G.traverseVisible(function(j){j.isLight&&j.layers.test(V.layers)&&(_.pushLight(j),j.castShadow&&_.pushShadow(j))}),I!==G&&I.traverseVisible(function(j){j.isLight&&j.layers.test(V.layers)&&(_.pushLight(j),j.castShadow&&_.pushShadow(j))}),_.setupLights(S._useLegacyLights);const q=new Set;return I.traverse(function(j){const le=j.material;if(le)if(Array.isArray(le))for(let pe=0;pe<le.length;pe++){const ve=le[pe];rn(ve,G,j),q.add(ve)}else rn(le,G,j),q.add(le)}),A.pop(),_=null,q},this.compileAsync=function(I,V,G=null){const q=this.compile(I,V,G);return new Promise(j=>{function le(){if(q.forEach(function(pe){je.get(pe).currentProgram.isReady()&&q.delete(pe)}),q.size===0){j(I);return}setTimeout(le,10)}xe.get("KHR_parallel_shader_compile")!==null?le():setTimeout(le,10)})};let nn=null;function Tn(I){nn&&nn(I)}function Hn(){Qn.stop()}function an(){Qn.start()}const Qn=new D2;Qn.setAnimationLoop(Tn),typeof self<"u"&&Qn.setContext(self),this.setAnimationLoop=function(I){nn=I,Bt.setAnimationLoop(I),I===null?Qn.stop():Qn.start()},Bt.addEventListener("sessionstart",Hn),Bt.addEventListener("sessionend",an),this.render=function(I,V){if(V!==void 0&&V.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),V.parent===null&&V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),Bt.enabled===!0&&Bt.isPresenting===!0&&(Bt.cameraAutoUpdate===!0&&Bt.updateCamera(V),V=Bt.getCamera()),I.isScene===!0&&I.onBeforeRender(S,I,V,b),_=Ve.get(I,A.length),_.init(),A.push(_),ke.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),ae.setFromProjectionMatrix(ke),Pe=this.localClippingEnabled,_e=ht.init(this.clippingPlanes,Pe),x=Ee.get(I,g.length),x.init(),g.push(x),Qi(I,V,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(Y,re),this.info.render.frame++,_e===!0&&ht.beginShadows();const G=_.state.shadowsArray;if(Ce.render(G,I,V),_e===!0&&ht.endShadows(),this.info.autoReset===!0&&this.info.reset(),it.render(x,I),_.setupLights(S._useLegacyLights),V.isArrayCamera){const q=V.cameras;for(let j=0,le=q.length;j<le;j++){const pe=q[j];wa(x,I,pe,pe.viewport)}}else wa(x,I,V);b!==null&&(N.updateMultisampleRenderTarget(b),N.updateRenderTargetMipmap(b)),I.isScene===!0&&I.onAfterRender(S,I,V),Ct.resetDefaultState(),L=-1,R=null,A.pop(),A.length>0?_=A[A.length-1]:_=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function Qi(I,V,G,q){if(I.visible===!1)return;if(I.layers.test(V.layers)){if(I.isGroup)G=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(V);else if(I.isLight)_.pushLight(I),I.castShadow&&_.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||ae.intersectsSprite(I)){q&&xt.setFromMatrixPosition(I.matrixWorld).applyMatrix4(ke);const pe=we.update(I),ve=I.material;ve.visible&&x.push(I,pe,ve,G,xt.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||ae.intersectsObject(I))){const pe=we.update(I),ve=I.material;if(q&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),xt.copy(I.boundingSphere.center)):(pe.boundingSphere===null&&pe.computeBoundingSphere(),xt.copy(pe.boundingSphere.center)),xt.applyMatrix4(I.matrixWorld).applyMatrix4(ke)),Array.isArray(ve)){const ge=pe.groups;for(let et=0,Re=ge.length;et<Re;et++){const Le=ge[et],rt=ve[Le.materialIndex];rt&&rt.visible&&x.push(I,pe,rt,G,xt.z,Le)}}else ve.visible&&x.push(I,pe,ve,G,xt.z,null)}}const le=I.children;for(let pe=0,ve=le.length;pe<ve;pe++)Qi(le[pe],V,G,q)}function wa(I,V,G,q){const j=I.opaque,le=I.transmissive,pe=I.transparent;_.setupLightsView(G),_e===!0&&ht.setGlobalState(S.clippingPlanes,G),le.length>0&&Bo(j,le,V,G),q&&Ae.viewport(F.copy(q)),j.length>0&&Fr(j,V,G),le.length>0&&Fr(le,V,G),pe.length>0&&Fr(pe,V,G),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Bo(I,V,G,q){if((G.isScene===!0?G.overrideMaterial:null)!==null)return;const le=De.isWebGL2;Ie===null&&(Ie=new Ji(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")?Ii:Na,minFilter:ja,samples:le?4:0})),S.getDrawingBufferSize(ct),le?Ie.setSize(ct.x,ct.y):Ie.setSize(mg(ct.x),mg(ct.y));const pe=S.getRenderTarget();S.setRenderTarget(Ie),S.getClearColor(ne),W=S.getClearAlpha(),W<1&&S.setClearColor(16777215,.5),S.clear();const ve=S.toneMapping;S.toneMapping=ka,Fr(I,G,q),N.updateMultisampleRenderTarget(Ie),N.updateRenderTargetMipmap(Ie);let ge=!1;for(let et=0,Re=V.length;et<Re;et++){const Le=V[et],rt=Le.object,mt=Le.geometry,yt=Le.material,bt=Le.group;if(yt.side===Yr&&rt.layers.test(q.layers)){const tt=yt.side;yt.side=Xi,yt.needsUpdate=!0,Zi(rt,G,q,mt,yt,bt),yt.side=tt,yt.needsUpdate=!0,ge=!0}}ge===!0&&(N.updateMultisampleRenderTarget(Ie),N.updateRenderTargetMipmap(Ie)),S.setRenderTarget(pe),S.setClearColor(ne,W),S.toneMapping=ve}function Fr(I,V,G){const q=V.isScene===!0?V.overrideMaterial:null;for(let j=0,le=I.length;j<le;j++){const pe=I[j],ve=pe.object,ge=pe.geometry,et=q===null?pe.material:q,Re=pe.group;ve.layers.test(G.layers)&&Zi(ve,V,G,ge,et,Re)}}function Zi(I,V,G,q,j,le){I.onBeforeRender(S,V,G,q,j,le),I.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),j.onBeforeRender(S,V,G,q,I,le),j.transparent===!0&&j.side===Yr&&j.forceSinglePass===!1?(j.side=Xi,j.needsUpdate=!0,S.renderBufferDirect(G,V,q,j,I,le),j.side=Wa,j.needsUpdate=!0,S.renderBufferDirect(G,V,q,j,I,le),j.side=Yr):S.renderBufferDirect(G,V,q,j,I,le),I.onAfterRender(S,V,G,q,j,le)}function Lt(I,V,G){V.isScene!==!0&&(V=nt);const q=je.get(I),j=_.state.lights,le=_.state.shadowsArray,pe=j.state.version,ve=Be.getParameters(I,j.state,le,V,G),ge=Be.getProgramCacheKey(ve);let et=q.programs;q.environment=I.isMeshStandardMaterial?V.environment:null,q.fog=V.fog,q.envMap=(I.isMeshStandardMaterial?se:D).get(I.envMap||q.environment),et===void 0&&(I.addEventListener("dispose",qe),et=new Map,q.programs=et);let Re=et.get(ge);if(Re!==void 0){if(q.currentProgram===Re&&q.lightsStateVersion===pe)return Xl(I,ve),Re}else ve.uniforms=Be.getUniforms(I),I.onBuild(G,ve,S),I.onBeforeCompile(ve,S),Re=Be.acquireProgram(ve,ge),et.set(ge,Re),q.uniforms=ve.uniforms;const Le=q.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(Le.clippingPlanes=ht.uniform),Xl(I,ve),q.needsLights=K(I),q.lightsStateVersion=pe,q.needsLights&&(Le.ambientLightColor.value=j.state.ambient,Le.lightProbe.value=j.state.probe,Le.directionalLights.value=j.state.directional,Le.directionalLightShadows.value=j.state.directionalShadow,Le.spotLights.value=j.state.spot,Le.spotLightShadows.value=j.state.spotShadow,Le.rectAreaLights.value=j.state.rectArea,Le.ltc_1.value=j.state.rectAreaLTC1,Le.ltc_2.value=j.state.rectAreaLTC2,Le.pointLights.value=j.state.point,Le.pointLightShadows.value=j.state.pointShadow,Le.hemisphereLights.value=j.state.hemi,Le.directionalShadowMap.value=j.state.directionalShadowMap,Le.directionalShadowMatrix.value=j.state.directionalShadowMatrix,Le.spotShadowMap.value=j.state.spotShadowMap,Le.spotLightMatrix.value=j.state.spotLightMatrix,Le.spotLightMap.value=j.state.spotLightMap,Le.pointShadowMap.value=j.state.pointShadowMap,Le.pointShadowMatrix.value=j.state.pointShadowMatrix),q.currentProgram=Re,q.uniformsList=null,Re}function Lo(I){if(I.uniformsList===null){const V=I.currentProgram.getUniforms();I.uniformsList=Qm.seqWithValue(V.seq,I.uniforms)}return I.uniformsList}function Xl(I,V){const G=je.get(I);G.outputColorSpace=V.outputColorSpace,G.batching=V.batching,G.instancing=V.instancing,G.instancingColor=V.instancingColor,G.skinning=V.skinning,G.morphTargets=V.morphTargets,G.morphNormals=V.morphNormals,G.morphColors=V.morphColors,G.morphTargetsCount=V.morphTargetsCount,G.numClippingPlanes=V.numClippingPlanes,G.numIntersection=V.numClipIntersection,G.vertexAlphas=V.vertexAlphas,G.vertexTangents=V.vertexTangents,G.toneMapping=V.toneMapping}function B(I,V,G,q,j){V.isScene!==!0&&(V=nt),N.resetTextureUnits();const le=V.fog,pe=q.isMeshStandardMaterial?V.environment:null,ve=b===null?S.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:Ja,ge=(q.isMeshStandardMaterial?se:D).get(q.envMap||pe),et=q.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,Re=!!G.attributes.tangent&&(!!q.normalMap||q.anisotropy>0),Le=!!G.morphAttributes.position,rt=!!G.morphAttributes.normal,mt=!!G.morphAttributes.color;let yt=ka;q.toneMapped&&(b===null||b.isXRRenderTarget===!0)&&(yt=S.toneMapping);const bt=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,tt=bt!==void 0?bt.length:0,Ge=je.get(q),Gt=_.state.lights;if(_e===!0&&(Pe===!0||I!==R)){const Dt=I===R&&q.id===L;ht.setState(q,I,Dt)}let wt=!1;q.version===Ge.__version?(Ge.needsLights&&Ge.lightsStateVersion!==Gt.state.version||Ge.outputColorSpace!==ve||j.isBatchedMesh&&Ge.batching===!1||!j.isBatchedMesh&&Ge.batching===!0||j.isInstancedMesh&&Ge.instancing===!1||!j.isInstancedMesh&&Ge.instancing===!0||j.isSkinnedMesh&&Ge.skinning===!1||!j.isSkinnedMesh&&Ge.skinning===!0||j.isInstancedMesh&&Ge.instancingColor===!0&&j.instanceColor===null||j.isInstancedMesh&&Ge.instancingColor===!1&&j.instanceColor!==null||Ge.envMap!==ge||q.fog===!0&&Ge.fog!==le||Ge.numClippingPlanes!==void 0&&(Ge.numClippingPlanes!==ht.numPlanes||Ge.numIntersection!==ht.numIntersection)||Ge.vertexAlphas!==et||Ge.vertexTangents!==Re||Ge.morphTargets!==Le||Ge.morphNormals!==rt||Ge.morphColors!==mt||Ge.toneMapping!==yt||De.isWebGL2===!0&&Ge.morphTargetsCount!==tt)&&(wt=!0):(wt=!0,Ge.__version=q.version);let Et=Ge.currentProgram;wt===!0&&(Et=Lt(q,V,j));let on=!1,Ln=!1,wn=!1;const qt=Et.getUniforms(),Wt=Ge.uniforms;if(Ae.useProgram(Et.program)&&(on=!0,Ln=!0,wn=!0),q.id!==L&&(L=q.id,Ln=!0),on||R!==I){qt.setValue(J,"projectionMatrix",I.projectionMatrix),qt.setValue(J,"viewMatrix",I.matrixWorldInverse);const Dt=qt.map.cameraPosition;Dt!==void 0&&Dt.setValue(J,xt.setFromMatrixPosition(I.matrixWorld)),De.logarithmicDepthBuffer&&qt.setValue(J,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&qt.setValue(J,"isOrthographic",I.isOrthographicCamera===!0),R!==I&&(R=I,Ln=!0,wn=!0)}if(j.isSkinnedMesh){qt.setOptional(J,j,"bindMatrix"),qt.setOptional(J,j,"bindMatrixInverse");const Dt=j.skeleton;Dt&&(De.floatVertexTextures?(Dt.boneTexture===null&&Dt.computeBoneTexture(),qt.setValue(J,"boneTexture",Dt.boneTexture,N)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}j.isBatchedMesh&&(qt.setOptional(J,j,"batchingTexture"),qt.setValue(J,"batchingTexture",j._matricesTexture,N));const bn=G.morphAttributes;if((bn.position!==void 0||bn.normal!==void 0||bn.color!==void 0&&De.isWebGL2===!0)&&ze.update(j,G,Et),(Ln||Ge.receiveShadow!==j.receiveShadow)&&(Ge.receiveShadow=j.receiveShadow,qt.setValue(J,"receiveShadow",j.receiveShadow)),q.isMeshGouraudMaterial&&q.envMap!==null&&(Wt.envMap.value=ge,Wt.flipEnvMap.value=ge.isCubeTexture&&ge.isRenderTargetTexture===!1?-1:1),Ln&&(qt.setValue(J,"toneMappingExposure",S.toneMappingExposure),Ge.needsLights&&U(Wt,wn),le&&q.fog===!0&&be.refreshFogUniforms(Wt,le),be.refreshMaterialUniforms(Wt,q,he,ie,Ie),Qm.upload(J,Lo(Ge),Wt,N)),q.isShaderMaterial&&q.uniformsNeedUpdate===!0&&(Qm.upload(J,Lo(Ge),Wt,N),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&qt.setValue(J,"center",j.center),qt.setValue(J,"modelViewMatrix",j.modelViewMatrix),qt.setValue(J,"normalMatrix",j.normalMatrix),qt.setValue(J,"modelMatrix",j.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const Dt=q.uniformsGroups;for(let Xt=0,hn=Dt.length;Xt<hn;Xt++)if(De.isWebGL2){const Br=Dt[Xt];Tt.update(Br,Et),Tt.bind(Br,Et)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Et}function U(I,V){I.ambientLightColor.needsUpdate=V,I.lightProbe.needsUpdate=V,I.directionalLights.needsUpdate=V,I.directionalLightShadows.needsUpdate=V,I.pointLights.needsUpdate=V,I.pointLightShadows.needsUpdate=V,I.spotLights.needsUpdate=V,I.spotLightShadows.needsUpdate=V,I.rectAreaLights.needsUpdate=V,I.hemisphereLights.needsUpdate=V}function K(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(I,V,G){je.get(I.texture).__webglTexture=V,je.get(I.depthTexture).__webglTexture=G;const q=je.get(I);q.__hasExternalTextures=!0,q.__hasExternalTextures&&(q.__autoAllocateDepthBuffer=G===void 0,q.__autoAllocateDepthBuffer||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,V){const G=je.get(I);G.__webglFramebuffer=V,G.__useDefaultFramebuffer=V===void 0},this.setRenderTarget=function(I,V=0,G=0){b=I,T=V,M=G;let q=!0,j=null,le=!1,pe=!1;if(I){const ge=je.get(I);ge.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(J.FRAMEBUFFER,null),q=!1):ge.__webglFramebuffer===void 0?N.setupRenderTarget(I):ge.__hasExternalTextures&&N.rebindTextures(I,je.get(I.texture).__webglTexture,je.get(I.depthTexture).__webglTexture);const et=I.texture;(et.isData3DTexture||et.isDataArrayTexture||et.isCompressedArrayTexture)&&(pe=!0);const Re=je.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(Array.isArray(Re[V])?j=Re[V][G]:j=Re[V],le=!0):De.isWebGL2&&I.samples>0&&N.useMultisampledRTT(I)===!1?j=je.get(I).__webglMultisampledFramebuffer:Array.isArray(Re)?j=Re[G]:j=Re,F.copy(I.viewport),O.copy(I.scissor),X=I.scissorTest}else F.copy(te).multiplyScalar(he).floor(),O.copy(de).multiplyScalar(he).floor(),X=fe;if(Ae.bindFramebuffer(J.FRAMEBUFFER,j)&&De.drawBuffers&&q&&Ae.drawBuffers(I,j),Ae.viewport(F),Ae.scissor(O),Ae.setScissorTest(X),le){const ge=je.get(I.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+V,ge.__webglTexture,G)}else if(pe){const ge=je.get(I.texture),et=V||0;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,ge.__webglTexture,G||0,et)}L=-1},this.readRenderTargetPixels=function(I,V,G,q,j,le,pe){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ve=je.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&pe!==void 0&&(ve=ve[pe]),ve){Ae.bindFramebuffer(J.FRAMEBUFFER,ve);try{const ge=I.texture,et=ge.format,Re=ge.type;if(et!==Ri&&$e.convert(et)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Le=Re===Ii&&(xe.has("EXT_color_buffer_half_float")||De.isWebGL2&&xe.has("EXT_color_buffer_float"));if(Re!==Na&&$e.convert(Re)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Re===gi&&(De.isWebGL2||xe.has("OES_texture_float")||xe.has("WEBGL_color_buffer_float")))&&!Le){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}V>=0&&V<=I.width-q&&G>=0&&G<=I.height-j&&J.readPixels(V,G,q,j,$e.convert(et),$e.convert(Re),le)}finally{const ge=b!==null?je.get(b).__webglFramebuffer:null;Ae.bindFramebuffer(J.FRAMEBUFFER,ge)}}},this.copyFramebufferToTexture=function(I,V,G=0){const q=Math.pow(2,-G),j=Math.floor(V.image.width*q),le=Math.floor(V.image.height*q);N.setTexture2D(V,0),J.copyTexSubImage2D(J.TEXTURE_2D,G,0,0,I.x,I.y,j,le),Ae.unbindTexture()},this.copyTextureToTexture=function(I,V,G,q=0){const j=V.image.width,le=V.image.height,pe=$e.convert(G.format),ve=$e.convert(G.type);N.setTexture2D(G,0),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,G.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,G.unpackAlignment),V.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,q,I.x,I.y,j,le,pe,ve,V.image.data):V.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,q,I.x,I.y,V.mipmaps[0].width,V.mipmaps[0].height,pe,V.mipmaps[0].data):J.texSubImage2D(J.TEXTURE_2D,q,I.x,I.y,pe,ve,V.image),q===0&&G.generateMipmaps&&J.generateMipmap(J.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(I,V,G,q,j=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const le=I.max.x-I.min.x+1,pe=I.max.y-I.min.y+1,ve=I.max.z-I.min.z+1,ge=$e.convert(q.format),et=$e.convert(q.type);let Re;if(q.isData3DTexture)N.setTexture3D(q,0),Re=J.TEXTURE_3D;else if(q.isDataArrayTexture||q.isCompressedArrayTexture)N.setTexture2DArray(q,0),Re=J.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,q.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,q.unpackAlignment);const Le=J.getParameter(J.UNPACK_ROW_LENGTH),rt=J.getParameter(J.UNPACK_IMAGE_HEIGHT),mt=J.getParameter(J.UNPACK_SKIP_PIXELS),yt=J.getParameter(J.UNPACK_SKIP_ROWS),bt=J.getParameter(J.UNPACK_SKIP_IMAGES),tt=G.isCompressedTexture?G.mipmaps[j]:G.image;J.pixelStorei(J.UNPACK_ROW_LENGTH,tt.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,tt.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,I.min.x),J.pixelStorei(J.UNPACK_SKIP_ROWS,I.min.y),J.pixelStorei(J.UNPACK_SKIP_IMAGES,I.min.z),G.isDataTexture||G.isData3DTexture?J.texSubImage3D(Re,j,V.x,V.y,V.z,le,pe,ve,ge,et,tt.data):G.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(Re,j,V.x,V.y,V.z,le,pe,ve,ge,tt.data)):J.texSubImage3D(Re,j,V.x,V.y,V.z,le,pe,ve,ge,et,tt),J.pixelStorei(J.UNPACK_ROW_LENGTH,Le),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,rt),J.pixelStorei(J.UNPACK_SKIP_PIXELS,mt),J.pixelStorei(J.UNPACK_SKIP_ROWS,yt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,bt),j===0&&q.generateMipmaps&&J.generateMipmap(Re),Ae.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?N.setTextureCube(I,0):I.isData3DTexture?N.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?N.setTexture2DArray(I,0):N.setTexture2D(I,0),Ae.unbindTexture()},this.resetState=function(){T=0,M=0,b=null,Ae.reset(),Ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return va}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===uv?"display-p3":"srgb",t.unpackColorSpace=ln.workingColorSpace===eh?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===$n?oo:fS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===oo?$n:Ja}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class H2 extends CS{}H2.prototype.isWebGL1Renderer=!0;class pv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Oe(e),this.density=t}clone(){return new pv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class mv{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Oe(e),this.near=t,this.far=r}clone(){return new mv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class _f extends Qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class ah{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=vf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Er()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Er()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Er()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zi=new z;class yo{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sr(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),a=kt(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ES extends Kn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _c;const md=new z,xc=new z,Ac=new z,Sc=new Me,gd=new Me,W2=new vt,jp=new z,vd=new z,Jp=new z,jE=new Me,Uy=new Me,JE=new Me;class X2 extends Qt{constructor(e=new ES){if(super(),this.isSprite=!0,this.type="Sprite",_c===void 0){_c=new Ft;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ah(t,5);_c.setIndex([0,1,2,0,2,3]),_c.setAttribute("position",new yo(r,3,0,!1)),_c.setAttribute("uv",new yo(r,2,3,!1))}this.geometry=_c,this.material=e,this.center=new Me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xc.setFromMatrixScale(this.matrixWorld),W2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ac.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xc.multiplyScalar(-Ac.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;qp(jp.set(-.5,-.5,0),Ac,s,xc,i,a),qp(vd.set(.5,-.5,0),Ac,s,xc,i,a),qp(Jp.set(.5,.5,0),Ac,s,xc,i,a),jE.set(0,0),Uy.set(1,0),JE.set(1,1);let o=e.ray.intersectTriangle(jp,vd,Jp,!1,md);if(o===null&&(qp(vd.set(-.5,.5,0),Ac,s,xc,i,a),Uy.set(0,1),o=e.ray.intersectTriangle(jp,Jp,vd,!1,md),o===null))return;const l=e.ray.origin.distanceTo(md);l<e.near||l>e.far||t.push({distance:l,point:md.clone(),uv:rr.getInterpolation(md,jp,vd,Jp,jE,Uy,JE,new Me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function qp(n,e,t,r,i,a){Sc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(gd.x=a*Sc.x-i*Sc.y,gd.y=i*Sc.x+a*Sc.y):gd.copy(Sc),n.copy(e),n.x+=gd.x,n.y+=gd.y,n.applyMatrix4(W2)}const Kp=new z,qE=new z;class j2 extends Qt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Kp.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Kp);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Kp.setFromMatrixPosition(e.matrixWorld),qE.setFromMatrixPosition(this.matrixWorld);const r=Kp.distanceTo(qE)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const KE=new z,YE=new cn,QE=new cn,IV=new z,ZE=new vt,Yp=new z,Oy=new hi,$E=new vt,ky=new Lu;class MS extends kn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=K_,this.bindMatrix=new vt,this.bindMatrixInverse=new vt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new fi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Yp),this.boundingBox.expandByPoint(Yp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new hi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Yp),this.boundingSphere.expandByPoint(Yp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Oy.copy(this.boundingSphere),Oy.applyMatrix4(i),e.ray.intersectsSphere(Oy)!==!1&&($E.copy(i).invert(),ky.copy(e.ray).applyMatrix4($E),!(this.boundingBox!==null&&ky.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,ky)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new cn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===K_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===o2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;YE.fromBufferAttribute(i.attributes.skinIndex,e),QE.fromBufferAttribute(i.attributes.skinWeight,e),KE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=QE.getComponent(a);if(s!==0){const o=YE.getComponent(a);ZE.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(IV.copy(KE).applyMatrix4(ZE),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class gv extends Qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Al extends Sn{constructor(e=null,t=1,r=1,i,a,s,o,l,c=En,f=En,p,h){super(null,s,o,l,c,f,i,a,p,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eM=new vt,FV=new vt;class sh{constructor(e=[],t=[]){this.uuid=Er(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new vt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new vt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:FV;eM.multiplyMatrices(o,t[a]),eM.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new sh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Al(t,e,e,Ri,gi);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new gv),this.bones.push(s),this.boneInverses.push(new vt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class pu extends Zt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const wc=new vt,tM=new vt,Qp=[],nM=new fi,BV=new vt,yd=new kn,_d=new hi;class TS extends kn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new pu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,BV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new fi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,wc),nM.copy(e.boundingBox).applyMatrix4(wc),this.boundingBox.union(nM)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new hi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,wc),_d.copy(e.boundingSphere).applyMatrix4(wc),this.boundingSphere.union(_d)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(yd.geometry=this.geometry,yd.material=this.material,yd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_d.copy(this.boundingSphere),_d.applyMatrix4(r),e.ray.intersectsSphere(_d)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,wc),tM.multiplyMatrices(r,wc),yd.matrixWorld=tM,yd.raycast(e,Qp);for(let s=0,o=Qp.length;s<o;s++){const l=Qp[s];l.instanceId=a,l.object=this,t.push(l)}Qp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new pu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function LV(n,e){return n.z-e.z}function DV(n,e){return e.z-n.z}class UV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t}reset(){this.list.length=0,this.index=0}}const Cc="batchId",Gs=new vt,iM=new vt,OV=new vt,rM=new vt,Ny=new rh,Zp=new fi,qo=new hi,xd=new z,zy=new UV,Ei=new kn,$p=[];function kV(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class J2 extends kn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Ft,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Al(t,e,e,Ri,gi);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:c,itemSize:f,normalized:p}=l,h=new c.constructor(r*f),m=new l.constructor(h,f,p);m.setUsage(l.usage),t.setAttribute(o,m)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Zt(o,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Cc,new Zt(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Cc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Cc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Cc)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fi);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Gs),this.getBoundingBoxAt(i,Zp).applyMatrix4(Gs),t.union(Zp))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hi);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Gs),this.getBoundingSphereAt(i,qo).applyMatrix4(Gs),t.union(qo))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const s=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(a=s[s.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const c=e.getIndex(),f=c!==null;if(f&&(r===-1?i.indexCount=c.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,h=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;p.push(!0),h.push(!0);const x=this._geometryCount;this._geometryCount++,OV.toArray(v,x*16),m.needsUpdate=!0,s.push(i),o.push({start:f?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new fi,sphereInitialized:!1,sphere:new hi});const _=this.geometry.getAttribute(Cc);for(let g=0;g<i.vertexCount;g++)_.setX(i.vertexStart+g,x);return _.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=t.getIndex(),o=this._reservedRanges[e];if(i&&s.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.vertexCount;for(const m in r.attributes){if(m===Cc)continue;const v=t.getAttribute(m),x=r.getAttribute(m);kV(v,x,l);const _=v.itemSize;for(let g=v.count,A=c;g<A;g++){const S=l+g;for(let C=0;C<_;C++)x.setComponent(S,C,0)}x.needsUpdate=!0}if(i){const m=o.indexStart;for(let v=0;v<s.count;v++)a.setX(m+v,l+s.getX(v));for(let v=s.count,x=o.indexCount;v<x;v++)a.setX(m+v,l);a.needsUpdate=!0}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],h=t.getAttribute("position");return p.count=i?s.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.box,s=this.geometry;if(i.boxInitialized===!1){a.makeEmpty();const o=s.index,l=s.attributes.position,c=this._drawRanges[e];for(let f=c.start,p=c.start+c.count;f<p;f++){let h=f;o&&(h=o.getX(h)),a.expandByPoint(xd.fromBufferAttribute(l,h))}i.boxInitialized=!0}return t.copy(a),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,Zp),Zp.getCenter(a.center);const o=s.index,l=s.attributes.position,c=this._drawRanges[e];let f=0;for(let p=c.start,h=c.start+c.count;p<h;p++){let m=p;o&&(m=o.getX(m)),xd.fromBufferAttribute(l,m),f=Math.max(f,a.center.distanceToSquared(xd))}a.radius=Math.sqrt(f),i.sphereInitialized=!0}return t.copy(a),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(t.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,a=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,l=this.geometry;Ei.material=this.material,Ei.geometry.index=l.index,Ei.geometry.attributes=l.attributes,Ei.geometry.boundingBox===null&&(Ei.geometry.boundingBox=new fi),Ei.geometry.boundingSphere===null&&(Ei.geometry.boundingSphere=new hi);for(let c=0;c<s;c++){if(!r[c]||!i[c])continue;const f=a[c];Ei.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(c,Ei.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,Ei.geometry.boundingBox),this.getBoundingSphereAt(c,Ei.geometry.boundingSphere),Ei.raycast(e,$p);for(let p=0,h=$p.length;p<h;p++){const m=$p[p];m.object=this,m.batchId=c,t.push(m)}$p.length=0}Ei.material=null,Ei.geometry.index=null,Ei.geometry.attributes={},Ei.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,h=this.perObjectFrustumCulled;h&&(rM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),Ny.setFromProjectionMatrix(rM,e.isWebGPURenderer?du:va));let m=0;if(this.sortObjects){iM.copy(this.matrixWorld).invert(),xd.setFromMatrixPosition(r.matrixWorld).applyMatrix4(iM);for(let _=0,g=l.length;_<g;_++)if(l[_]){this.getMatrixAt(_,Gs),this.getBoundingSphereAt(_,qo).applyMatrix4(Gs);let A=!1;if(h&&(A=!Ny.intersectsSphere(qo)),!A){const S=xd.distanceTo(qo.center);zy.push(p[_],S)}}const v=zy.list,x=this.customSort;x===null?v.sort(a.transparent?DV:LV):x.call(this,v,r);for(let _=0,g=v.length;_<g;_++){const A=v[_];c[m]=A.start*o,f[m]=A.count,m++}zy.reset()}else for(let v=0,x=l.length;v<x;v++)if(l[v]){let _=!1;if(h&&(this.getMatrixAt(v,Gs),this.getBoundingSphereAt(v,qo).applyMatrix4(Gs),_=!Ny.intersectsSphere(qo)),!_){const g=p[v];c[m]=g.start*o,f[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Li extends Kn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aM=new z,sM=new z,oM=new vt,Vy=new Lu,em=new hi;class Ss extends Qt{constructor(e=new Ft,t=new Li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)aM.fromBufferAttribute(t,i-1),sM.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=aM.distanceTo(sM);e.setAttribute("lineDistance",new ut(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),em.copy(r.boundingSphere),em.applyMatrix4(i),em.radius+=a,e.ray.intersectsSphere(em)===!1)return;oM.copy(i).invert(),Vy.copy(e.ray).applyMatrix4(oM);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new z,f=new z,p=new z,h=new z,m=this.isLineSegments?2:1,v=r.index,_=r.attributes.position;if(v!==null){const g=Math.max(0,s.start),A=Math.min(v.count,s.start+s.count);for(let S=g,C=A-1;S<C;S+=m){const T=v.getX(S),M=v.getX(S+1);if(c.fromBufferAttribute(_,T),f.fromBufferAttribute(_,M),Vy.distanceSqToSegment(c,f,h,p)>l)continue;h.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(h);L<e.near||L>e.far||t.push({distance:L,point:p.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,s.start),A=Math.min(_.count,s.start+s.count);for(let S=g,C=A-1;S<C;S+=m){if(c.fromBufferAttribute(_,S),f.fromBufferAttribute(_,S+1),Vy.distanceSqToSegment(c,f,h,p)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}const lM=new z,cM=new z;class xa extends Ss{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)lM.fromBufferAttribute(t,i),cM.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+lM.distanceTo(cM);e.setAttribute("lineDistance",new ut(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bS extends Ss{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class vv extends Kn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const uM=new vt,Mx=new Lu,tm=new hi,nm=new z;class PS extends Qt{constructor(e=new Ft,t=new vv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),tm.copy(r.boundingSphere),tm.applyMatrix4(i),tm.radius+=a,e.ray.intersectsSphere(tm)===!1)return;uM.copy(i).invert(),Mx.copy(e.ray).applyMatrix4(uM);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=r.index,p=r.attributes.position;if(c!==null){const h=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let v=h,x=m;v<x;v++){const _=c.getX(v);nm.fromBufferAttribute(p,_),dM(nm,_,l,i,e,t,this)}}else{const h=Math.max(0,s.start),m=Math.min(p.count,s.start+s.count);for(let v=h,x=m;v<x;v++)nm.fromBufferAttribute(p,v),dM(nm,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function dM(n,e,t,r,i,a,s){const o=Mx.distanceSqToPoint(n);if(o<t){const l=new z;Mx.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:s})}}class NV extends Sn{constructor(e,t,r,i,a,s,o,l,c){super(e,t,r,i,a,s,o,l,c),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:fn,this.magFilter=a!==void 0?a:fn,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class zV extends Sn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=En,this.minFilter=En,this.generateMipmaps=!1,this.needsUpdate=!0}}class yv extends Sn{constructor(e,t,r,i,a,s,o,l,c,f,p,h){super(null,s,o,l,c,f,i,a,p,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class VV extends yv{constructor(e,t,r,i,a,s){super(e,t,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=mi}}class GV extends yv{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Xa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class HV extends Sn{constructor(e,t,r,i,a,s,o,l,c){super(e,t,r,i,a,s,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Aa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,l=a-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=r[i]-s,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const f=r[i],h=r[i+1]-f,m=(s-f)/h;return(i+m)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=t||(s.isVector2?new Me:new z);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new z,i=[],a=[],s=[],o=new z,l=new vt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new z)}a[0]=new z,s[0]=new z;let c=Number.MAX_VALUE;const f=Math.abs(i[0].x),p=Math.abs(i[0].y),h=Math.abs(i[0].z);f<=c&&(c=f,r.set(1,0,0)),p<=c&&(c=p,r.set(0,1,0)),h<=c&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let m=1;m<=e;m++){if(a[m]=a[m-1].clone(),s[m]=s[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON){o.normalize();const v=Math.acos(On(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(o,v))}s[m].crossVectors(i[m],a[m])}if(t===!0){let m=Math.acos(On(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(m=-m);for(let v=1;v<=e;v++)a[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),s[v].crossVectors(i[v],a[v])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _v extends Aa{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const r=t||new Me,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),h=l-this.aX,m=c-this.aY;l=h*f-m*p+this.aX,c=h*p+m*f+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class q2 extends _v{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function RS(){let n=0,e=0,t=0,r=0;function i(a,s,o,l){n=a,e=o,t=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,c){i(s,o,c*(o-a),c*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,c,f,p){let h=(s-a)/c-(o-a)/(c+f)+(o-s)/f,m=(o-s)/f-(l-s)/(f+p)+(l-o)/p;h*=f,m*=f,i(s,o,h,m)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const im=new z,Gy=new RS,Hy=new RS,Wy=new RS;class K2 extends Aa{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new z){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let c,f;this.closed||o>0?c=i[(o-1)%a]:(im.subVectors(i[0],i[1]).add(i[0]),c=im);const p=i[o%a],h=i[(o+1)%a];if(this.closed||o+2<a?f=i[(o+2)%a]:(im.subVectors(i[a-1],i[a-2]).add(i[a-1]),f=im),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m),_=Math.pow(h.distanceToSquared(f),m);x<1e-4&&(x=1),v<1e-4&&(v=x),_<1e-4&&(_=x),Gy.initNonuniformCatmullRom(c.x,p.x,h.x,f.x,v,x,_),Hy.initNonuniformCatmullRom(c.y,p.y,h.y,f.y,v,x,_),Wy.initNonuniformCatmullRom(c.z,p.z,h.z,f.z,v,x,_)}else this.curveType==="catmullrom"&&(Gy.initCatmullRom(c.x,p.x,h.x,f.x,this.tension),Hy.initCatmullRom(c.y,p.y,h.y,f.y,this.tension),Wy.initCatmullRom(c.z,p.z,h.z,f.z,this.tension));return r.set(Gy.calc(l),Hy.calc(l),Wy.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function fM(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+a+s)*l+(-3*t+3*r-2*a-s)*o+a*n+t}function WV(n,e){const t=1-n;return t*t*e}function XV(n,e){return 2*(1-n)*n*e}function jV(n,e){return n*n*e}function qd(n,e,t,r){return WV(n,e)+XV(n,t)+jV(n,r)}function JV(n,e){const t=1-n;return t*t*t*e}function qV(n,e){const t=1-n;return 3*t*t*n*e}function KV(n,e){return 3*(1-n)*n*n*e}function YV(n,e){return n*n*n*e}function Kd(n,e,t,r,i){return JV(n,e)+qV(n,t)+KV(n,r)+YV(n,i)}class IS extends Aa{constructor(e=new Me,t=new Me,r=new Me,i=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Me){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Kd(e,i.x,a.x,s.x,o.x),Kd(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Y2 extends Aa{constructor(e=new z,t=new z,r=new z,i=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new z){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Kd(e,i.x,a.x,s.x,o.x),Kd(e,i.y,a.y,s.y,o.y),Kd(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class FS extends Aa{constructor(e=new Me,t=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Me){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Q2 extends Aa{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BS extends Aa{constructor(e=new Me,t=new Me,r=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Me){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(qd(e,i.x,a.x,s.x),qd(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LS extends Aa{constructor(e=new z,t=new z,r=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new z){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(qd(e,i.x,a.x,s.x),qd(e,i.y,a.y,s.y),qd(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DS extends Aa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Me){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],c=i[s],f=i[s>i.length-2?i.length-1:s+1],p=i[s>i.length-3?i.length-1:s+2];return r.set(fM(o,l.x,c.x,f.x,p.x),fM(o,l.y,c.y,f.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Me().fromArray(i))}return this}}var gg=Object.freeze({__proto__:null,ArcCurve:q2,CatmullRomCurve3:K2,CubicBezierCurve:IS,CubicBezierCurve3:Y2,EllipseCurve:_v,LineCurve:FS,LineCurve3:Q2,QuadraticBezierCurve:BS,QuadraticBezierCurve3:LS,SplineCurve:DS});class Z2 extends Aa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new gg[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),c=l===0?0:1-s/l;return o.getPointAt(c,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let c=0;c<l.length;c++){const f=l[c];r&&r.equals(f)||(t.push(f),r=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new gg[i.type]().fromJSON(i))}return this}}class xf extends Z2{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new FS(this.currentPoint.clone(),new Me(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new BS(this.currentPoint.clone(),new Me(e,t),new Me(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new IS(this.currentPoint.clone(),new Me(e,t),new Me(r,i),new Me(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new DS(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,r,i,a,s,o,l),this}absellipse(e,t,r,i,a,s,o,l){const c=new _v(e,t,r,i,a,s,o,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class oh extends Ft{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=On(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],c=[],f=1/t,p=new z,h=new Me,m=new z,v=new z,x=new z;let _=0,g=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let A=0;A<=t;A++){const S=r+A*f*i,C=Math.sin(S),T=Math.cos(S);for(let M=0;M<=e.length-1;M++){p.x=e[M].x*C,p.y=e[M].y,p.z=e[M].x*T,s.push(p.x,p.y,p.z),h.x=A/t,h.y=M/(e.length-1),o.push(h.x,h.y);const b=l[3*M+0]*C,L=l[3*M+1],R=l[3*M+0]*T;c.push(b,L,R)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const C=S+A*e.length,T=C,M=C+e.length,b=C+e.length+1,L=C+1;a.push(T,M,L),a.push(b,L,M)}this.setIndex(a),this.setAttribute("position",new ut(s,3)),this.setAttribute("uv",new ut(o,2)),this.setAttribute("normal",new ut(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oh(e.points,e.segments,e.phiStart,e.phiLength)}}class xv extends oh{constructor(e=1,t=1,r=4,i=8){const a=new xf;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new xv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Av extends Ft{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],l=[],c=new z,f=new Me;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,h=3;p<=t;p++,h+=3){const m=r+p/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),s.push(c.x,c.y,c.z),o.push(0,0,1),f.x=(s[h]/e+1)/2,f.y=(s[h+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new ut(s,3)),this.setAttribute("normal",new ut(o,3)),this.setAttribute("uv",new ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Av(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ku extends Ft{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),a=Math.floor(a);const f=[],p=[],h=[],m=[];let v=0;const x=[],_=r/2;let g=0;A(),s===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(h,3)),this.setAttribute("uv",new ut(m,2));function A(){const C=new z,T=new z;let M=0;const b=(t-e)/r;for(let L=0;L<=a;L++){const R=[],F=L/a,O=F*(t-e)+e;for(let X=0;X<=i;X++){const ne=X/i,W=ne*l+o,Z=Math.sin(W),ie=Math.cos(W);T.x=O*Z,T.y=-F*r+_,T.z=O*ie,p.push(T.x,T.y,T.z),C.set(Z,b,ie).normalize(),h.push(C.x,C.y,C.z),m.push(ne,1-F),R.push(v++)}x.push(R)}for(let L=0;L<i;L++)for(let R=0;R<a;R++){const F=x[R][L],O=x[R+1][L],X=x[R+1][L+1],ne=x[R][L+1];f.push(F,O,ne),f.push(O,X,ne),M+=6}c.addGroup(g,M,0),g+=M}function S(C){const T=v,M=new Me,b=new z;let L=0;const R=C===!0?e:t,F=C===!0?1:-1;for(let X=1;X<=i;X++)p.push(0,_*F,0),h.push(0,F,0),m.push(.5,.5),v++;const O=v;for(let X=0;X<=i;X++){const W=X/i*l+o,Z=Math.cos(W),ie=Math.sin(W);b.x=R*ie,b.y=_*F,b.z=R*Z,p.push(b.x,b.y,b.z),h.push(0,F,0),M.x=Z*.5+.5,M.y=ie*.5*F+.5,m.push(M.x,M.y),v++}for(let X=0;X<i;X++){const ne=T+X,W=O+X;C===!0?f.push(W,W+1,ne):f.push(W+1,W,ne),L+=3}c.addGroup(g,L,C===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sv extends ku{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Sv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Eo extends Ft{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),c(r),f(),this.setAttribute("position",new ut(a,3)),this.setAttribute("normal",new ut(a.slice(),3)),this.setAttribute("uv",new ut(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(A){const S=new z,C=new z,T=new z;for(let M=0;M<t.length;M+=3)m(t[M+0],S),m(t[M+1],C),m(t[M+2],T),l(S,C,T,A)}function l(A,S,C,T){const M=T+1,b=[];for(let L=0;L<=M;L++){b[L]=[];const R=A.clone().lerp(C,L/M),F=S.clone().lerp(C,L/M),O=M-L;for(let X=0;X<=O;X++)X===0&&L===M?b[L][X]=R:b[L][X]=R.clone().lerp(F,X/O)}for(let L=0;L<M;L++)for(let R=0;R<2*(M-L)-1;R++){const F=Math.floor(R/2);R%2===0?(h(b[L][F+1]),h(b[L+1][F]),h(b[L][F])):(h(b[L][F+1]),h(b[L+1][F+1]),h(b[L+1][F]))}}function c(A){const S=new z;for(let C=0;C<a.length;C+=3)S.x=a[C+0],S.y=a[C+1],S.z=a[C+2],S.normalize().multiplyScalar(A),a[C+0]=S.x,a[C+1]=S.y,a[C+2]=S.z}function f(){const A=new z;for(let S=0;S<a.length;S+=3){A.x=a[S+0],A.y=a[S+1],A.z=a[S+2];const C=_(A)/2/Math.PI+.5,T=g(A)/Math.PI+.5;s.push(C,1-T)}v(),p()}function p(){for(let A=0;A<s.length;A+=6){const S=s[A+0],C=s[A+2],T=s[A+4],M=Math.max(S,C,T),b=Math.min(S,C,T);M>.9&&b<.1&&(S<.2&&(s[A+0]+=1),C<.2&&(s[A+2]+=1),T<.2&&(s[A+4]+=1))}}function h(A){a.push(A.x,A.y,A.z)}function m(A,S){const C=A*3;S.x=e[C+0],S.y=e[C+1],S.z=e[C+2]}function v(){const A=new z,S=new z,C=new z,T=new z,M=new Me,b=new Me,L=new Me;for(let R=0,F=0;R<a.length;R+=9,F+=6){A.set(a[R+0],a[R+1],a[R+2]),S.set(a[R+3],a[R+4],a[R+5]),C.set(a[R+6],a[R+7],a[R+8]),M.set(s[F+0],s[F+1]),b.set(s[F+2],s[F+3]),L.set(s[F+4],s[F+5]),T.copy(A).add(S).add(C).divideScalar(3);const O=_(T);x(M,F+0,A,O),x(b,F+2,S,O),x(L,F+4,C,O)}}function x(A,S,C,T){T<0&&A.x===1&&(s[S]=A.x-1),C.x===0&&C.z===0&&(s[S]=T/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function g(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eo(e.vertices,e.indices,e.radius,e.details)}}class wv extends Eo{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wv(e.radius,e.detail)}}const rm=new z,am=new z,Xy=new z,sm=new rr;class $2 extends Ft{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(_l*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,c=[0,0,0],f=["a","b","c"],p=new Array(3),h={},m=[];for(let v=0;v<l;v+=3){s?(c[0]=s.getX(v),c[1]=s.getX(v+1),c[2]=s.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:x,b:_,c:g}=sm;if(x.fromBufferAttribute(o,c[0]),_.fromBufferAttribute(o,c[1]),g.fromBufferAttribute(o,c[2]),sm.getNormal(Xy),p[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,p[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,p[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let A=0;A<3;A++){const S=(A+1)%3,C=p[A],T=p[S],M=sm[f[A]],b=sm[f[S]],L=`${C}_${T}`,R=`${T}_${C}`;R in h&&h[R]?(Xy.dot(h[R].normal)<=a&&(m.push(M.x,M.y,M.z),m.push(b.x,b.y,b.z)),h[R]=null):L in h||(h[L]={index0:c[A],index1:c[S],normal:Xy.clone()})}}for(const v in h)if(h[v]){const{index0:x,index1:_}=h[v];rm.fromBufferAttribute(o,x),am.fromBufferAttribute(o,_),m.push(rm.x,rm.y,rm.z),m.push(am.x,am.y,am.z)}this.setAttribute("position",new ut(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Sl extends xf{constructor(e){super(e),this.uuid=Er(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new xf().fromJSON(i))}return this}}const QV={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=eR(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,f,p,h,m;if(r&&(a=nG(n,e,a,t)),n.length>80*t){o=c=n[0],l=f=n[1];for(let v=t;v<i;v+=t)p=n[v],h=n[v+1],p<o&&(o=p),h<l&&(l=h),p>c&&(c=p),h>f&&(f=h);m=Math.max(c-o,f-l),m=m!==0?32767/m:0}return Af(a,s,t,o,l,m,0),s}};function eR(n,e,t,r,i){let a,s;if(i===hG(n,e,t,r)>0)for(a=e;a<t;a+=r)s=hM(a,n[a],n[a+1],s);else for(a=t-r;a>=e;a-=r)s=hM(a,n[a],n[a+1],s);return s&&Cv(s,s.next)&&(wf(s),s=s.next),s}function Pl(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Cv(t,t.next)||In(t.prev,t,t.next)===0)){if(wf(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Af(n,e,t,r,i,a,s){if(!n)return;!s&&a&&oG(n,r,i,a);let o=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,a?$V(n,r,i,a):ZV(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),wf(n),n=c.next,o=c.next;continue}if(n=c,n===o){s?s===1?(n=eG(Pl(n),e,t),Af(n,e,t,r,i,a,2)):s===2&&tG(n,e,t,r,i,a):Af(Pl(n),e,t,r,i,a,1);break}}}function ZV(n){const e=n.prev,t=n,r=n.next;if(In(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,l=t.y,c=r.y,f=i<a?i<s?i:s:a<s?a:s,p=o<l?o<c?o:c:l<c?l:c,h=i>a?i>s?i:s:a>s?a:s,m=o>l?o>c?o:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=p&&v.y<=m&&Oc(i,o,a,l,s,c,v.x,v.y)&&In(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function $V(n,e,t,r){const i=n.prev,a=n,s=n.next;if(In(i,a,s)>=0)return!1;const o=i.x,l=a.x,c=s.x,f=i.y,p=a.y,h=s.y,m=o<l?o<c?o:c:l<c?l:c,v=f<p?f<h?f:h:p<h?p:h,x=o>l?o>c?o:c:l>c?l:c,_=f>p?f>h?f:h:p>h?p:h,g=Tx(m,v,e,t,r),A=Tx(x,_,e,t,r);let S=n.prevZ,C=n.nextZ;for(;S&&S.z>=g&&C&&C.z<=A;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=_&&S!==i&&S!==s&&Oc(o,f,l,p,c,h,S.x,S.y)&&In(S.prev,S,S.next)>=0||(S=S.prevZ,C.x>=m&&C.x<=x&&C.y>=v&&C.y<=_&&C!==i&&C!==s&&Oc(o,f,l,p,c,h,C.x,C.y)&&In(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=_&&S!==i&&S!==s&&Oc(o,f,l,p,c,h,S.x,S.y)&&In(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=A;){if(C.x>=m&&C.x<=x&&C.y>=v&&C.y<=_&&C!==i&&C!==s&&Oc(o,f,l,p,c,h,C.x,C.y)&&In(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function eG(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!Cv(i,a)&&tR(i,r,r.next,a)&&Sf(i,a)&&Sf(a,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(a.i/t|0),wf(r),wf(r.next),r=n=a),r=r.next}while(r!==n);return Pl(r)}function tG(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&uG(s,o)){let l=nR(s,o);s=Pl(s,s.next),l=Pl(l,l.next),Af(s,e,t,r,i,a,0),Af(l,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function nG(n,e,t,r){const i=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:n.length,c=eR(n,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(cG(c));for(i.sort(iG),a=0;a<i.length;a++)t=rG(i[a],t);return t}function iG(n,e){return n.x-e.x}function rG(n,e){const t=aG(n,e);if(!t)return e;const r=nR(t,n);return Pl(r,r.next),Pl(t,t.next)}function aG(n,e){let t=e,r=-1/0,i;const a=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const h=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=a&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===a))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,c=i.y;let f=1/0,p;t=i;do a>=t.x&&t.x>=l&&a!==t.x&&Oc(s<c?a:r,s,l,c,s<c?r:a,s,t.x,t.y)&&(p=Math.abs(s-t.y)/(a-t.x),Sf(t,n)&&(p<f||p===f&&(t.x>i.x||t.x===i.x&&sG(i,t)))&&(i=t,f=p)),t=t.next;while(t!==o);return i}function sG(n,e){return In(n.prev,n,e.prev)<0&&In(e.next,n,n.next)<0}function oG(n,e,t,r){let i=n;do i.z===0&&(i.z=Tx(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,lG(i)}function lG(n){let e,t,r,i,a,s,o,l,c=1;do{for(t=n,n=null,a=null,s=0;t;){for(s++,r=t,o=0,e=0;e<c&&(o++,r=r.nextZ,!!r);e++);for(l=c;o>0||l>0&&r;)o!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,c*=2}while(s>1);return n}function Tx(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function cG(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Oc(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function uG(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!dG(n,e)&&(Sf(n,e)&&Sf(e,n)&&fG(n,e)&&(In(n.prev,n,e.prev)||In(n,e.prev,e))||Cv(n,e)&&In(n.prev,n,n.next)>0&&In(e.prev,e,e.next)>0)}function In(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Cv(n,e){return n.x===e.x&&n.y===e.y}function tR(n,e,t,r){const i=lm(In(n,e,t)),a=lm(In(n,e,r)),s=lm(In(t,r,n)),o=lm(In(t,r,e));return!!(i!==a&&s!==o||i===0&&om(n,t,e)||a===0&&om(n,r,e)||s===0&&om(t,n,r)||o===0&&om(t,e,r))}function om(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function lm(n){return n>0?1:n<0?-1:0}function dG(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&tR(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Sf(n,e){return In(n.prev,n,n.next)<0?In(n,e,n.next)>=0&&In(n,n.prev,e)>=0:In(n,e,n.prev)<0||In(n,n.next,e)<0}function fG(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function nR(n,e){const t=new bx(n.i,n.x,n.y),r=new bx(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function hM(n,e,t,r){const i=new bx(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function bx(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hG(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class za{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return za.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];pM(e),mM(r,e);let s=e.length;t.forEach(pM);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,mM(r,t[l]);const o=QV.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function pM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function mM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ev extends Ft{constructor(e=new Sl([new Me(.5,.5),new Me(-.5,.5),new Me(-.5,-.5),new Me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];s(c)}this.setAttribute("position",new ut(i,3)),this.setAttribute("uv",new ut(a,2)),this.computeVertexNormals();function s(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:pG;let S,C=!1,T,M,b,L;g&&(S=g.getSpacedPoints(f),C=!0,h=!1,T=g.computeFrenetFrames(f,!1),M=new z,b=new z,L=new z),h||(_=0,m=0,v=0,x=0);const R=o.extractPoints(c);let F=R.shape;const O=R.holes;if(!za.isClockWise(F)){F=F.reverse();for(let J=0,Fe=O.length;J<Fe;J++){const xe=O[J];za.isClockWise(xe)&&(O[J]=xe.reverse())}}const ne=za.triangulateShape(F,O),W=F;for(let J=0,Fe=O.length;J<Fe;J++){const xe=O[J];F=F.concat(xe)}function Z(J,Fe,xe){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),J.clone().addScaledVector(Fe,xe)}const ie=F.length,he=ne.length;function Y(J,Fe,xe){let De,Ae,ot;const je=J.x-Fe.x,N=J.y-Fe.y,D=xe.x-J.x,se=xe.y-J.y,Se=je*je+N*N,Te=je*se-N*D;if(Math.abs(Te)>Number.EPSILON){const we=Math.sqrt(Se),Be=Math.sqrt(D*D+se*se),be=Fe.x-N/we,Ee=Fe.y+je/we,Ve=xe.x-se/Be,ht=xe.y+D/Be,Ce=((Ve-be)*se-(ht-Ee)*D)/(je*se-N*D);De=be+je*Ce-J.x,Ae=Ee+N*Ce-J.y;const it=De*De+Ae*Ae;if(it<=2)return new Me(De,Ae);ot=Math.sqrt(it/2)}else{let we=!1;je>Number.EPSILON?D>Number.EPSILON&&(we=!0):je<-Number.EPSILON?D<-Number.EPSILON&&(we=!0):Math.sign(N)===Math.sign(se)&&(we=!0),we?(De=-N,Ae=je,ot=Math.sqrt(Se)):(De=je,Ae=N,ot=Math.sqrt(Se/2))}return new Me(De/ot,Ae/ot)}const re=[];for(let J=0,Fe=W.length,xe=Fe-1,De=J+1;J<Fe;J++,xe++,De++)xe===Fe&&(xe=0),De===Fe&&(De=0),re[J]=Y(W[J],W[xe],W[De]);const te=[];let de,fe=re.concat();for(let J=0,Fe=O.length;J<Fe;J++){const xe=O[J];de=[];for(let De=0,Ae=xe.length,ot=Ae-1,je=De+1;De<Ae;De++,ot++,je++)ot===Ae&&(ot=0),je===Ae&&(je=0),de[De]=Y(xe[De],xe[ot],xe[je]);te.push(de),fe=fe.concat(de)}for(let J=0;J<_;J++){const Fe=J/_,xe=m*Math.cos(Fe*Math.PI/2),De=v*Math.sin(Fe*Math.PI/2)+x;for(let Ae=0,ot=W.length;Ae<ot;Ae++){const je=Z(W[Ae],re[Ae],De);ke(je.x,je.y,-xe)}for(let Ae=0,ot=O.length;Ae<ot;Ae++){const je=O[Ae];de=te[Ae];for(let N=0,D=je.length;N<D;N++){const se=Z(je[N],de[N],De);ke(se.x,se.y,-xe)}}}const ae=v+x;for(let J=0;J<ie;J++){const Fe=h?Z(F[J],fe[J],ae):F[J];C?(b.copy(T.normals[0]).multiplyScalar(Fe.x),M.copy(T.binormals[0]).multiplyScalar(Fe.y),L.copy(S[0]).add(b).add(M),ke(L.x,L.y,L.z)):ke(Fe.x,Fe.y,0)}for(let J=1;J<=f;J++)for(let Fe=0;Fe<ie;Fe++){const xe=h?Z(F[Fe],fe[Fe],ae):F[Fe];C?(b.copy(T.normals[J]).multiplyScalar(xe.x),M.copy(T.binormals[J]).multiplyScalar(xe.y),L.copy(S[J]).add(b).add(M),ke(L.x,L.y,L.z)):ke(xe.x,xe.y,p/f*J)}for(let J=_-1;J>=0;J--){const Fe=J/_,xe=m*Math.cos(Fe*Math.PI/2),De=v*Math.sin(Fe*Math.PI/2)+x;for(let Ae=0,ot=W.length;Ae<ot;Ae++){const je=Z(W[Ae],re[Ae],De);ke(je.x,je.y,p+xe)}for(let Ae=0,ot=O.length;Ae<ot;Ae++){const je=O[Ae];de=te[Ae];for(let N=0,D=je.length;N<D;N++){const se=Z(je[N],de[N],De);C?ke(se.x,se.y+S[f-1].y,S[f-1].x+xe):ke(se.x,se.y,p+xe)}}}_e(),Pe();function _e(){const J=i.length/3;if(h){let Fe=0,xe=ie*Fe;for(let De=0;De<he;De++){const Ae=ne[De];ct(Ae[2]+xe,Ae[1]+xe,Ae[0]+xe)}Fe=f+_*2,xe=ie*Fe;for(let De=0;De<he;De++){const Ae=ne[De];ct(Ae[0]+xe,Ae[1]+xe,Ae[2]+xe)}}else{for(let Fe=0;Fe<he;Fe++){const xe=ne[Fe];ct(xe[2],xe[1],xe[0])}for(let Fe=0;Fe<he;Fe++){const xe=ne[Fe];ct(xe[0]+ie*f,xe[1]+ie*f,xe[2]+ie*f)}}r.addGroup(J,i.length/3-J,0)}function Pe(){const J=i.length/3;let Fe=0;Ie(W,Fe),Fe+=W.length;for(let xe=0,De=O.length;xe<De;xe++){const Ae=O[xe];Ie(Ae,Fe),Fe+=Ae.length}r.addGroup(J,i.length/3-J,1)}function Ie(J,Fe){let xe=J.length;for(;--xe>=0;){const De=xe;let Ae=xe-1;Ae<0&&(Ae=J.length-1);for(let ot=0,je=f+_*2;ot<je;ot++){const N=ie*ot,D=ie*(ot+1),se=Fe+De+N,Se=Fe+Ae+N,Te=Fe+Ae+D,we=Fe+De+D;xt(se,Se,Te,we)}}}function ke(J,Fe,xe){l.push(J),l.push(Fe),l.push(xe)}function ct(J,Fe,xe){nt(J),nt(Fe),nt(xe);const De=i.length/3,Ae=A.generateTopUV(r,i,De-3,De-2,De-1);dt(Ae[0]),dt(Ae[1]),dt(Ae[2])}function xt(J,Fe,xe,De){nt(J),nt(Fe),nt(De),nt(Fe),nt(xe),nt(De);const Ae=i.length/3,ot=A.generateSideWallUV(r,i,Ae-6,Ae-3,Ae-2,Ae-1);dt(ot[0]),dt(ot[1]),dt(ot[3]),dt(ot[1]),dt(ot[2]),dt(ot[3])}function nt(J){i.push(l[J*3+0]),i.push(l[J*3+1]),i.push(l[J*3+2])}function dt(J){a.push(J.x),a.push(J.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return mG(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new gg[i.type]().fromJSON(i)),new Ev(r,e.options)}}const pG={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],l=e[r*3+1],c=e[i*3],f=e[i*3+1];return[new Me(a,s),new Me(o,l),new Me(c,f)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[r*3],f=e[r*3+1],p=e[r*3+2],h=e[i*3],m=e[i*3+1],v=e[i*3+2],x=e[a*3],_=e[a*3+1],g=e[a*3+2];return Math.abs(o-f)<Math.abs(s-c)?[new Me(s,1-l),new Me(c,1-p),new Me(h,1-v),new Me(x,1-g)]:[new Me(o,1-l),new Me(f,1-p),new Me(m,1-v),new Me(_,1-g)]}};function mG(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class lh extends Eo{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lh(e.radius,e.detail)}}class ch extends Eo{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ch(e.radius,e.detail)}}class Mv extends Ft{constructor(e=.5,t=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],c=[],f=[];let p=e;const h=(t-e)/i,m=new z,v=new Me;for(let x=0;x<=i;x++){for(let _=0;_<=r;_++){const g=a+_/r*s;m.x=p*Math.cos(g),m.y=p*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y)}p+=h}for(let x=0;x<i;x++){const _=x*(r+1);for(let g=0;g<r;g++){const A=g+_,S=A,C=A+r+1,T=A+r+2,M=A+1;o.push(S,C,M),o.push(C,T,M)}}this.setIndex(o),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Tv extends Ft{constructor(e=new Sl([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(o,l,f),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new ut(i,3)),this.setAttribute("normal",new ut(a,3)),this.setAttribute("uv",new ut(s,2));function c(f){const p=i.length/3,h=f.extractPoints(t);let m=h.shape;const v=h.holes;za.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const A=v[_];za.isClockWise(A)===!0&&(v[_]=A.reverse())}const x=za.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const A=v[_];m=m.concat(A)}for(let _=0,g=m.length;_<g;_++){const A=m[_];i.push(A.x,A.y,0),a.push(0,0,1),s.push(A.x,A.y)}for(let _=0,g=x.length;_<g;_++){const A=x[_],S=A[0]+p,C=A[1]+p,T=A[2]+p;r.push(S,C,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return gG(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new Tv(r,e.curveSegments)}}function gG(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class uh extends Ft{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let c=0;const f=[],p=new z,h=new z,m=[],v=[],x=[],_=[];for(let g=0;g<=r;g++){const A=[],S=g/r;let C=0;g===0&&s===0?C=.5/t:g===r&&l===Math.PI&&(C=-.5/t);for(let T=0;T<=t;T++){const M=T/t;p.x=-e*Math.cos(i+M*a)*Math.sin(s+S*o),p.y=e*Math.cos(s+S*o),p.z=e*Math.sin(i+M*a)*Math.sin(s+S*o),v.push(p.x,p.y,p.z),h.copy(p).normalize(),x.push(h.x,h.y,h.z),_.push(M+C,1-S),A.push(c++)}f.push(A)}for(let g=0;g<r;g++)for(let A=0;A<t;A++){const S=f[g][A+1],C=f[g][A],T=f[g+1][A],M=f[g+1][A+1];(g!==0||s>0)&&m.push(S,C,M),(g!==r-1||l<Math.PI)&&m.push(C,T,M)}this.setIndex(m),this.setAttribute("position",new ut(v,3)),this.setAttribute("normal",new ut(x,3)),this.setAttribute("uv",new ut(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class bv extends Eo{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bv(e.radius,e.detail)}}class Pv extends Ft{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],c=[],f=new z,p=new z,h=new z;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const x=v/i*a,_=m/r*Math.PI*2;p.x=(e+t*Math.cos(_))*Math.cos(x),p.y=(e+t*Math.cos(_))*Math.sin(x),p.z=t*Math.sin(_),o.push(p.x,p.y,p.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),h.subVectors(p,f).normalize(),l.push(h.x,h.y,h.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const x=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,A=(i+1)*m+v;s.push(x,_,A),s.push(_,g,A)}this.setIndex(s),this.setAttribute("position",new ut(o,3)),this.setAttribute("normal",new ut(l,3)),this.setAttribute("uv",new ut(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Rv extends Ft{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],c=[],f=[],p=new z,h=new z,m=new z,v=new z,x=new z,_=new z,g=new z;for(let S=0;S<=r;++S){const C=S/r*a*Math.PI*2;A(C,a,s,e,m),A(C+.01,a,s,e,v),_.subVectors(v,m),g.addVectors(v,m),x.crossVectors(_,g),g.crossVectors(x,_),x.normalize(),g.normalize();for(let T=0;T<=i;++T){const M=T/i*Math.PI*2,b=-t*Math.cos(M),L=t*Math.sin(M);p.x=m.x+(b*g.x+L*x.x),p.y=m.y+(b*g.y+L*x.y),p.z=m.z+(b*g.z+L*x.z),l.push(p.x,p.y,p.z),h.subVectors(p,m).normalize(),c.push(h.x,h.y,h.z),f.push(S/r),f.push(T/i)}}for(let S=1;S<=r;S++)for(let C=1;C<=i;C++){const T=(i+1)*(S-1)+(C-1),M=(i+1)*S+(C-1),b=(i+1)*S+C,L=(i+1)*(S-1)+C;o.push(T,M,L),o.push(M,b,L)}this.setIndex(o),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(f,2));function A(S,C,T,M,b){const L=Math.cos(S),R=Math.sin(S),F=T/C*S,O=Math.cos(F);b.x=M*(2+O)*.5*L,b.y=M*(2+O)*R*.5,b.z=M*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Iv extends Ft{constructor(e=new LS(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new z,l=new z,c=new Me;let f=new z;const p=[],h=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(h,3)),this.setAttribute("uv",new ut(m,2));function x(){for(let S=0;S<t;S++)_(S);_(a===!1?t:0),A(),g()}function _(S){f=e.getPointAt(S/t,f);const C=s.normals[S],T=s.binormals[S];for(let M=0;M<=i;M++){const b=M/i*Math.PI*2,L=Math.sin(b),R=-Math.cos(b);l.x=R*C.x+L*T.x,l.y=R*C.y+L*T.y,l.z=R*C.z+L*T.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=f.x+r*l.x,o.y=f.y+r*l.y,o.z=f.z+r*l.z,p.push(o.x,o.y,o.z)}}function g(){for(let S=1;S<=t;S++)for(let C=1;C<=i;C++){const T=(i+1)*(S-1)+(C-1),M=(i+1)*S+(C-1),b=(i+1)*S+C,L=(i+1)*(S-1)+C;v.push(T,M,L),v.push(M,b,L)}}function A(){for(let S=0;S<=t;S++)for(let C=0;C<=i;C++)c.x=S/t,c.y=C/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Iv(new gg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class iR extends Ft{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new z,a=new z;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,f=l.length;c<f;++c){const p=l[c],h=p.start,m=p.count;for(let v=h,x=h+m;v<x;v+=3)for(let _=0;_<3;_++){const g=o.getX(v+_),A=o.getX(v+(_+1)%3);i.fromBufferAttribute(s,g),a.fromBufferAttribute(s,A),gM(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let c=0;c<3;c++){const f=3*o+c,p=3*o+(c+1)%3;i.fromBufferAttribute(s,f),a.fromBufferAttribute(s,p),gM(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function gM(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var vM=Object.freeze({__proto__:null,BoxGeometry:kl,CapsuleGeometry:xv,CircleGeometry:Av,ConeGeometry:Sv,CylinderGeometry:ku,DodecahedronGeometry:wv,EdgesGeometry:$2,ExtrudeGeometry:Ev,IcosahedronGeometry:lh,LatheGeometry:oh,OctahedronGeometry:ch,PlaneGeometry:Du,PolyhedronGeometry:Eo,RingGeometry:Mv,ShapeGeometry:Tv,SphereGeometry:uh,TetrahedronGeometry:bv,TorusGeometry:Pv,TorusKnotGeometry:Rv,TubeGeometry:Iv,WireframeGeometry:iR});class rR extends Kn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class aR extends fr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dh extends Kn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ya extends dh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return On(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sR extends Kn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oR extends Kn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lR extends Kn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class US extends Kn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cR extends Kn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Co,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uR extends Li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function fl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function dR(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function fR(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Px(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let l=0;l!==e;++l)i[s++]=n[o+l]}return i}function OS(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push.apply(t,s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}function vG(n,e,t,r,i=30){const a=n.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const c=a.tracks[l],f=c.getValueSize(),p=[],h=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){p.push(c.times[m]);for(let x=0;x<f;++x)h.push(c.values[m*f+x])}}p.length!==0&&(c.times=fl(p,c.times.constructor),c.values=fl(h,c.values.constructor),s.push(c))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function yG(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=t.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===o.name&&g.ValueTypeName===l});if(c===void 0)continue;let f=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let h=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const v=o.times.length-1;let x;if(a<=o.times[0]){const g=f,A=p-f;x=o.values.slice(g,A)}else if(a>=o.times[v]){const g=v*p+f,A=g+p-f;x=o.values.slice(g,A)}else{const g=o.createInterpolant(),A=f,S=p-f;g.evaluate(a),x=g.resultBuffer.slice(A,S)}l==="quaternion"&&new ni().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let g=0;g<_;++g){const A=g*m+h;if(l==="quaternion")ni.multiplyQuaternionsFlat(c.values,A,x,0,c.values,A);else{const S=m-h*2;for(let C=0;C<S;++C)c.values[A+C]-=x[C]}}}return n.blendMode=uS,n}const _G={convertArray:fl,isTypedArray:dR,getKeyframeOrder:fR,sortedArray:Px,flattenJSON:OS,subclip:vG,makeClipAdditive:yG};class Nu{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{i:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hR extends Nu{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ll,endingEnd:ll}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case cl:a=e,o=2*t-r;break;case hf:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case cl:s=e,l=2*r-t;break;case hf:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const c=(r-t)*.5,f=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-r),this._offsetPrev=a*f,this._offsetNext=s*f}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,f=this._offsetPrev,p=this._offsetNext,h=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),x=v*v,_=x*v,g=-h*_+2*h*x-h*v,A=(1+h)*_+(-1.5-2*h)*x+(-.5+h)*v+1,S=(-1-m)*_+(1.5+m)*x+.5*v,C=m*_-m*x;for(let T=0;T!==o;++T)a[T]=g*s[f+T]+A*s[c+T]+S*s[l+T]+C*s[p+T];return a}}class kS extends Nu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,f=(r-t)/(i-t),p=1-f;for(let h=0;h!==o;++h)a[h]=s[c+h]*p+s[l+h]*f;return a}}class pR extends Nu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Sa{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fl(t,this.TimeBufferType),this.values=fl(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:fl(e.times,Array),values:fl(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new pR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case uu:t=this.InterpolantFactoryMethodDiscrete;break;case bl:t=this.InterpolantFactoryMethodLinear;break;case Ym:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uu;case this.InterpolantFactoryMethodLinear:return bl;case this.InterpolantFactoryMethodSmooth:return Ym}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&dR(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Ym,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const c=e[o],f=e[o+1];if(c!==f&&(o!==1||c!==e[0]))if(i)l=!0;else{const p=o*r,h=p-r,m=p+r;for(let v=0;v!==r;++v){const x=t[p+v];if(x!==t[h+v]||x!==t[m+v]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const p=o*r,h=s*r;for(let m=0;m!==r;++m)t[h+m]=t[p+m]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,c=0;c!==r;++c)t[l+c]=t[o+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Sa.prototype.TimeBufferType=Float32Array;Sa.prototype.ValueBufferType=Float32Array;Sa.prototype.DefaultInterpolation=bl;class Nl extends Sa{}Nl.prototype.ValueTypeName="bool";Nl.prototype.ValueBufferType=Array;Nl.prototype.DefaultInterpolation=uu;Nl.prototype.InterpolantFactoryMethodLinear=void 0;Nl.prototype.InterpolantFactoryMethodSmooth=void 0;class NS extends Sa{}NS.prototype.ValueTypeName="color";class mu extends Sa{}mu.prototype.ValueTypeName="number";class mR extends Nu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let c=e*o;for(let f=c+o;c!==f;c+=4)ni.slerpFlat(a,0,s,c-o,s,c,l);return a}}class _o extends Sa{InterpolantFactoryMethodLinear(e){return new mR(this.times,this.values,this.getValueSize(),e)}}_o.prototype.ValueTypeName="quaternion";_o.prototype.DefaultInterpolation=bl;_o.prototype.InterpolantFactoryMethodSmooth=void 0;class zl extends Sa{}zl.prototype.ValueTypeName="string";zl.prototype.ValueBufferType=Array;zl.prototype.DefaultInterpolation=uu;zl.prototype.InterpolantFactoryMethodLinear=void 0;zl.prototype.InterpolantFactoryMethodSmooth=void 0;class gu extends Sa{}gu.prototype.ValueTypeName="vector";class vu{constructor(e,t=-1,r,i=cv){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Er(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(AG(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)t.push(Sa.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],c=[];l.push((o+a-1)%a,o,(o+1)%a),c.push(0,1,0);const f=fR(l);l=Px(l,1,f),c=Px(c,1,f),!i&&l[0]===0&&(l.push(a),c.push(c[0])),s.push(new mu(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],f=c.name.match(a);if(f&&f.length>1){const p=f[1];let h=i[p];h||(i[p]=h=[]),h.push(c)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,h,m,v,x){if(m.length!==0){const _=[],g=[];OS(m,_,g,v),_.length!==0&&x.push(new p(h,_,g))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const h=c[p].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let v;for(v=0;v<h.length;v++)if(h[v].morphTargets)for(let x=0;x<h[v].morphTargets.length;x++)m[h[v].morphTargets[x]]=-1;for(const x in m){const _=[],g=[];for(let A=0;A!==h[v].morphTargets.length;++A){const S=h[v];_.push(S.time),g.push(S.morphTarget===x?1:0)}i.push(new mu(".morphTargetInfluence["+x+"]",_,g))}l=m.length*s}else{const m=".bones["+t[p].name+"]";r(gu,m+".position",h,"pos",i),r(_o,m+".quaternion",h,"rot",i),r(gu,m+".scale",h,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xG(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mu;case"vector":case"vector2":case"vector3":case"vector4":return gu;case"color":return NS;case"quaternion":return _o;case"bool":case"boolean":return Nl;case"string":return zl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function AG(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xG(n.type);if(n.times===void 0){const t=[],r=[];OS(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const gs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class zS{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(f){o++,a===!1&&i.onStart!==void 0&&i.onStart(f,s,o),a=!0},this.itemEnd=function(f){s++,i.onProgress!==void 0&&i.onProgress(f,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,p){return c.push(f,p),this},this.removeHandler=function(f){const p=c.indexOf(f);return p!==-1&&c.splice(p,2),this},this.getHandler=function(f){for(let p=0,h=c.length;p<h;p+=2){const m=c[p],v=c[p+1];if(m.global&&(m.lastIndex=0),m.test(f))return v}return null}}}const gR=new zS;class Di{constructor(e){this.manager=e!==void 0?e:gR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Di.DEFAULT_MATERIAL_NAME="__DEFAULT";const cs={};class SG extends Error{constructor(e,t){super(e),this.response=t}}class Tr extends Di{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=gs.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(cs[e]!==void 0){cs[e].push({onLoad:t,onProgress:r,onError:i});return}cs[e]=[],cs[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const f=cs[e],p=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=h?parseInt(h):0,v=m!==0;let x=0;const _=new ReadableStream({start(g){A();function A(){p.read().then(({done:S,value:C})=>{if(S)g.close();else{x+=C.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let M=0,b=f.length;M<b;M++){const L=f[M];L.onProgress&&L.onProgress(T)}g.enqueue(C),A()}})}}});return new Response(_)}else throw new SG(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,o));case"json":return c.json();default:if(o===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),h=p&&p[1]?p[1].toLowerCase():void 0,m=new TextDecoder(h);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{gs.add(e,c);const f=cs[e];delete cs[e];for(let p=0,h=f.length;p<h;p++){const m=f[p];m.onLoad&&m.onLoad(c)}}).catch(c=>{const f=cs[e];if(f===void 0)throw this.manager.itemError(e),c;delete cs[e];for(let p=0,h=f.length;p<h;p++){const m=f[p];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class wG extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Tr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=vu.parse(e[r]);t.push(i)}return t}}class CG extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new yv,l=new Tr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let c=0;function f(p){l.load(e[p],function(h){const m=a.parse(h,!0);s[p]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(o.minFilter=fn),o.image=s,o.format=m.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let p=0,h=e.length;p<h;++p)f(p);else l.load(e,function(p){const h=a.parse(p,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let v=0;v<m;v++){s[v]={mipmaps:[]};for(let x=0;x<h.mipmapCount;x++)s[v].mipmaps.push(h.mipmaps[v*h.mipmapCount+x]),s[v].format=h.format,s[v].width=h.width,s[v].height=h.height}o.image=s}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=fn),o.format=h.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class Cf extends Di{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=gs.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=yf("img");function l(){f(),gs.add(e,this),t&&t(this),a.manager.itemEnd(e)}function c(p){f(),i&&i(p),a.manager.itemError(e),a.manager.itemEnd(e)}function f(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class vR extends Di{constructor(e){super(e)}load(e,t,r,i){const a=new ih;a.colorSpace=$n;const s=new Cf(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(c){s.load(e[c],function(f){a.images[c]=f,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return a}}class VS extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Al,o=new Tr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let c;try{c=a.parse(l)}catch(f){if(i!==void 0)i(f);else{console.error(f);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:mi,s.wrapT=c.wrapT!==void 0?c.wrapT:mi,s.magFilter=c.magFilter!==void 0?c.magFilter:fn,s.minFilter=c.minFilter!==void 0?c.minFilter:fn,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?s.colorSpace=c.colorSpace:c.encoding!==void 0&&(s.encoding=c.encoding),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=ja),c.mipmapCount===1&&(s.minFilter=fn),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,t&&t(s,c)},r,i),s}}class yR extends Di{constructor(e){super(e)}load(e,t,r,i){const a=new Sn,s=new Cf(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class Mo extends Qt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class _R extends Mo{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const jy=new vt,yM=new z,_M=new z;class GS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rh,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;yM.setFromMatrixPosition(e.matrixWorld),t.position.copy(yM),_M.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_M),t.updateMatrixWorld(),jy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jy),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(jy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EG extends GS{constructor(){super(new ei(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=fu*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class HS extends Mo{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new EG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const xM=new vt,Ad=new z,Jy=new z;class MG extends GS{constructor(){super(new ei(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new cn(2,1,1,1),new cn(0,1,1,1),new cn(3,1,1,1),new cn(1,1,1,1),new cn(3,0,1,1),new cn(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Ad.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ad),Jy.copy(r.position),Jy.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Jy),r.updateMatrixWorld(),i.makeTranslation(-Ad.x,-Ad.y,-Ad.z),xM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xM)}}class WS extends Mo{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new MG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class TG extends GS{constructor(){super(new Uu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XS extends Mo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.shadow=new TG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xR extends Mo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class AR extends Mo{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class SR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class wR extends Mo{constructor(e=new SR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Fv extends Di{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new Tr(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=Fv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Oe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Oe().setHex(s.value);break;case"v2":i.uniforms[a].value=new Me().fromArray(s.value);break;case"v3":i.uniforms[a].value=new z().fromArray(s.value);break;case"v4":i.uniforms[a].value=new cn().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Vt().fromArray(s.value);break;case"m4":i.uniforms[a].value=new vt().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Me().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:rR,SpriteMaterial:ES,RawShaderMaterial:aR,ShaderMaterial:fr,PointsMaterial:vv,MeshPhysicalMaterial:Ya,MeshStandardMaterial:dh,MeshPhongMaterial:sR,MeshToonMaterial:oR,MeshNormalMaterial:lR,MeshLambertMaterial:US,MeshDepthMaterial:hv,MeshDistanceMaterial:wS,MeshBasicMaterial:Sr,MeshMatcapMaterial:cR,LineDashedMaterial:uR,LineBasicMaterial:Li,Material:Kn};return new t[e]}}class Va{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class CR extends Ft{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ER extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Tr(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=a(m,_.buffer),A=Lc(_.type,g),S=new ah(A,_.stride);return S.uuid=_.uuid,t[v]=S,S}function a(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const s=e.isInstancedBufferGeometry?new CR:new Ft,o=e.data.index;if(o!==void 0){const m=Lc(o.type,o.array);s.setIndex(new Zt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);x=new yo(_,v.itemSize,v.offset,v.normalized)}else{const _=Lc(v.type,v.array),g=v.isInstancedBufferAttribute?pu:Zt;x=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),s.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],x=[];for(let _=0,g=v.length;_<g;_++){const A=v[_];let S;if(A.isInterleavedBufferAttribute){const C=i(e.data,A.data);S=new yo(C,A.itemSize,A.offset,A.normalized)}else{const C=Lc(A.type,A.array);S=new Zt(C,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),x.push(S)}s.morphAttributes[m]=x}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let m=0,v=p.length;m!==v;++m){const x=p[m];s.addGroup(x.start,x.count,x.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new z;h.center!==void 0&&m.fromArray(h.center),s.boundingSphere=new hi(m,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class bG extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?Va.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Tr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Va.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Tr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,a,l,o,r),f=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,f),t!==void 0){let p=!1;for(const h in s)if(s[h].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new Sl().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new sh().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new ER;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in vM?o=vM[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new Fv;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=vu.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return s(f)}else return l.data?{data:Lc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new zS(t);a=new Cf(l),a.setCrossOrigin(this.crossOrigin);for(let c=0,f=e.length;c<f;c++){const p=e[c],h=p.url;if(Array.isArray(h)){const m=[];for(let v=0,x=h.length;v<x;v++){const _=h[v],g=o(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Al(g.data,g.width,g.height)))}i[p.uuid]=new ul(m)}else{const m=o(p.url);i[p.uuid]=new ul(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:Lc(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new Cf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const f=[];for(let p=0,h=c.length;p<h;p++){const m=c[p],v=await a(m);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Al(v.data,v.width,v.height)))}r[l.uuid]=new ul(f)}else{const f=await a(l.url);r[l.uuid]=new ul(f)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let f;Array.isArray(c)?(f=new ih,c.length===6&&(f.needsUpdate=!0)):(c&&c.data?f=new Al:f=new Sn,c&&(f.needsUpdate=!0)),f.source=l,f.uuid=o.uuid,o.name!==void 0&&(f.name=o.name),o.mapping!==void 0&&(f.mapping=r(o.mapping,PG)),o.channel!==void 0&&(f.channel=o.channel),o.offset!==void 0&&f.offset.fromArray(o.offset),o.repeat!==void 0&&f.repeat.fromArray(o.repeat),o.center!==void 0&&f.center.fromArray(o.center),o.rotation!==void 0&&(f.rotation=o.rotation),o.wrap!==void 0&&(f.wrapS=r(o.wrap[0],AM),f.wrapT=r(o.wrap[1],AM)),o.format!==void 0&&(f.format=o.format),o.internalFormat!==void 0&&(f.internalFormat=o.internalFormat),o.type!==void 0&&(f.type=o.type),o.colorSpace!==void 0&&(f.colorSpace=o.colorSpace),o.encoding!==void 0&&(f.encoding=o.encoding),o.minFilter!==void 0&&(f.minFilter=r(o.minFilter,SM)),o.magFilter!==void 0&&(f.magFilter=r(o.magFilter,SM)),o.anisotropy!==void 0&&(f.anisotropy=o.anisotropy),o.flipY!==void 0&&(f.flipY=o.flipY),o.generateMipmaps!==void 0&&(f.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(f.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(f.compareFunction=o.compareFunction),o.userData!==void 0&&(f.userData=o.userData),i[o.uuid]=f}return i}parseObject(e,t,r,i,a){let s;function o(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let v=0,x=h.length;v<x;v++){const _=h[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let f,p;switch(e.type){case"Scene":s=new _f,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Oe(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new mv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new pv(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new ei(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Uu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new xR(e.color,e.intensity);break;case"DirectionalLight":s=new XS(e.color,e.intensity);break;case"PointLight":s=new WS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new AR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new HS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new _R(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new wR().fromJSON(e);break;case"SkinnedMesh":f=o(e.geometry),p=l(e.material),s=new MS(f,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":f=o(e.geometry),p=l(e.material),s=new kn(f,p);break;case"InstancedMesh":f=o(e.geometry),p=l(e.material);const h=e.count,m=e.instanceMatrix,v=e.instanceColor;s=new TS(f,p,h),s.instanceMatrix=new pu(new Float32Array(m.array),16),v!==void 0&&(s.instanceColor=new pu(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=o(e.geometry),p=l(e.material),s=new J2(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=f,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(x=>{const _=new fi;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const g=new hi;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:g}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":s=new j2;break;case"Line":s=new Ss(o(e.geometry),l(e.material));break;case"LineLoop":s=new bS(o(e.geometry),l(e.material));break;case"LineSegments":s=new xa(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new PS(o(e.geometry),l(e.material));break;case"Sprite":s=new X2(l(e.material));break;case"Group":s=new ms;break;case"Bone":s=new gv;break;default:s=new Qt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)s.add(this.parseObject(h[m],t,r,i,a))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const v=h[m];s.animations.push(a[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const v=h[m],x=s.getObjectByProperty("uuid",v.object);x!==void 0&&s.addLevel(x,v.distance,v.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const PG={UVMapping:sv,CubeReflectionMapping:Xa,CubeRefractionMapping:go,EquirectangularReflectionMapping:lu,EquirectangularRefractionMapping:df,CubeUVReflectionMapping:Bu},AM={RepeatWrapping:vo,ClampToEdgeWrapping:mi,MirroredRepeatWrapping:cu},SM={NearestFilter:En,NearestMipmapNearestFilter:ff,NearestMipmapLinearFilter:Yc,LinearFilter:fn,LinearMipmapNearestFilter:ov,LinearMipmapLinearFilter:ja};class MR extends Di{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=gs.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(c=>{t&&t(c),a.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){return gs.add(e,c),t&&t(c),a.manager.itemEnd(e),c}).catch(function(c){i&&i(c),gs.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});gs.add(e,l),a.manager.itemStart(e)}}let cm;class jS{static getContext(){return cm===void 0&&(cm=new(window.AudioContext||window.webkitAudioContext)),cm}static setContext(e){cm=e}}class RG extends Di{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Tr(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);jS.getContext().decodeAudioData(c,function(p){t(p)}).catch(o)}catch(c){o(c)}},r,i);function o(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const wM=new vt,CM=new vt,Ko=new vt;class IG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ei,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ei,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ko.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(_l*t.fov*.5)/t.zoom;let o,l;CM.elements[12]=-i,wM.elements[12]=i,o=-s*t.aspect+a,l=s*t.aspect+a,Ko.elements[0]=2*t.near/(l-o),Ko.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Ko),o=-s*t.aspect-a,l=s*t.aspect-a,Ko.elements[0]=2*t.near/(l-o),Ko.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Ko)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(CM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wM)}}class JS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=EM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function EM(){return(typeof performance>"u"?Date:performance).now()}const Yo=new z,MM=new ni,FG=new z,Qo=new z;class BG extends Qt{constructor(){super(),this.type="AudioListener",this.context=jS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new JS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yo,MM,FG),Qo.set(0,0,-1).applyQuaternion(MM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yo.x,i),t.positionY.linearRampToValueAtTime(Yo.y,i),t.positionZ.linearRampToValueAtTime(Yo.z,i),t.forwardX.linearRampToValueAtTime(Qo.x,i),t.forwardY.linearRampToValueAtTime(Qo.y,i),t.forwardZ.linearRampToValueAtTime(Qo.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Yo.x,Yo.y,Yo.z),t.setOrientation(Qo.x,Qo.y,Qo.z,r.x,r.y,r.z)}}class TR extends Qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Zo=new z,TM=new ni,LG=new z,$o=new z;class DG extends TR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zo,TM,LG),$o.set(0,0,1).applyQuaternion(TM);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zo.x,r),t.positionY.linearRampToValueAtTime(Zo.y,r),t.positionZ.linearRampToValueAtTime(Zo.z,r),t.orientationX.linearRampToValueAtTime($o.x,r),t.orientationY.linearRampToValueAtTime($o.y,r),t.orientationZ.linearRampToValueAtTime($o.z,r)}else t.setPosition(Zo.x,Zo.y,Zo.z),t.setOrientation($o.x,$o.y,$o.z)}}class UG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class bR{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){ni.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;ni.multiplyQuaternionsFlat(e,s,e,t,e,r),ni.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const qS="\\[\\]\\.:\\/",OG=new RegExp("["+qS+"]","g"),KS="[^"+qS+"]",kG="[^"+qS.replace("\\.","")+"]",NG=/((?:WC+[\/:])*)/.source.replace("WC",KS),zG=/(WCOD+)?/.source.replace("WCOD",kG),VG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KS),GG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KS),HG=new RegExp("^"+NG+zG+VG+GG+"$"),WG=["material","materials","bones","map"];class XG{constructor(e,t,r){const i=r||Kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Kt{constructor(e,t,r){this.path=t,this.parsedPath=r||Kt.parseTrackName(t),this.node=Kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Kt.Composite(e,t,r):new Kt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OG,"")}static parseTrackName(e){const t=HG.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);WG.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=Kt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[i];if(s===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kt.Composite=XG;Kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Kt.prototype.GetterByBindingType=[Kt.prototype._getValue_direct,Kt.prototype._getValue_array,Kt.prototype._getValue_arrayElement,Kt.prototype._getValue_toArray];Kt.prototype.SetterByBindingTypeAndVersioning=[[Kt.prototype._setValue_direct,Kt.prototype._setValue_direct_setNeedsUpdate,Kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_array,Kt.prototype._setValue_array_setNeedsUpdate,Kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_arrayElement,Kt.prototype._setValue_arrayElement_setNeedsUpdate,Kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_fromArray,Kt.prototype._setValue_fromArray_setNeedsUpdate,Kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class jG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Er(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,c=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const h=arguments[f],m=h.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(h);for(let x=0,_=s;x!==_;++x)a[x].push(new Kt(h,r[x],i[x]))}else if(v<c){o=e[v];const x=--c,_=e[x];t[_.uuid]=v,e[v]=_,t[m]=x,e[x]=h;for(let g=0,A=s;g!==A;++g){const S=a[g],C=S[x];let T=S[v];S[v]=C,T===void 0&&(T=new Kt(h,r[g],i[g])),S[x]=T}}else e[v]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],c=l.uuid,f=t[c];if(f!==void 0&&f>=a){const p=a++,h=e[p];t[h.uuid]=f,e[f]=h,t[c]=p,e[p]=l;for(let m=0,v=i;m!==v;++m){const x=r[m],_=x[p],g=x[f];x[f]=_,x[p]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],f=c.uuid,p=t[f];if(p!==void 0)if(delete t[f],p<a){const h=--a,m=e[h],v=--s,x=e[v];t[m.uuid]=p,e[p]=m,t[x.uuid]=h,e[h]=x,e.pop();for(let _=0,g=i;_!==g;++_){const A=r[_],S=A[h],C=A[v];A[p]=S,A[h]=C,A.pop()}}else{const h=--s,m=e[h];h>0&&(t[m.uuid]=p),e[p]=m,e.pop();for(let v=0,x=i;v!==x;++v){const _=r[v];_[p]=_[h],_.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,f=this.nCachedObjects_,p=new Array(c);i=a.length,r[e]=i,s.push(e),o.push(t),a.push(p);for(let h=f,m=l.length;h!==m;++h){const v=l[h];p[h]=new Kt(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],c=e[o];t[c]=r,s[r]=l,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class PR{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),l={endingStart:ll,endingEnd:ll};for(let c=0;c!==s;++c){const f=a[c].createInterpolant(null);o[c]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=g2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=a,l[1]=a+r,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case uS:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(s),c[f].accumulateAdditive(o);break;case cv:default:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(s),c[f].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===v2;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===m2){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=cl,i.endingEnd=cl):(e?i.endingStart=this.zeroSlopeAtStart?cl:ll:i.endingStart=hf,t?i.endingEnd=this.zeroSlopeAtEnd?cl:ll:i.endingEnd=hf)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=t,o[1]=a+e,l[1]=r,this}}const JG=new Float32Array(1);class qG extends Ts{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let f=c[l];f===void 0&&(f={},c[l]=f);for(let p=0;p!==a;++p){const h=i[p],m=h.name;let v=f[m];if(v!==void 0)++v.referenceCount,s[p]=v;else{if(v=s[p],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[p].binding.parsedPath;v=new bR(Kt.create(r,m,x),h.ValueTypeName,h.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),s[p]=v}o[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,c=l[l.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,l[f]=c,l.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete p[h],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new kS(new Float32Array(2),new Float32Array(2),1,JG),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?vu.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let c=null;if(r===void 0&&(s!==null?r=s.blendMode:r=cv),l!==void 0){const p=l.actionByRoot[a];if(p!==void 0&&p.blendMode===r)return p;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const f=new PR(this,s,t,r);return this._bindAction(f,c),this._addInactiveAction(f,o,a),f}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?vu.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const c=s[o];this._deactivateAction(c);const f=c._cacheIndex,p=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class YS{constructor(e){this.value=e}clone(){return new YS(this.value.clone===void 0?this.value:this.value.clone())}}let KG=0;class YG extends Ts{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:KG++}),this.name="",this.usage=vf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class QG extends ah{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ZG{constructor(e,t,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class QS{constructor(e,t,r=0,i=1/0){this.ray=new Lu(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new xl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Rx(e,this,r,t),r.sort(bM),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)Rx(e[i],this,r,t);return r.sort(bM),r}}function bM(n,e){return n.distance-e.distance}function Rx(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let a=0,s=i.length;a<s;a++)Rx(i[a],e,t,!0)}}class $G{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(On(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class e4{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const PM=new Me;class t4{constructor(e=new Me(1/0,1/0),t=new Me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=PM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,PM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const RM=new z,um=new z;class n4{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){RM.subVectors(e,this.start),um.subVectors(this.end,this.start);const r=um.dot(um);let a=um.dot(RM)/r;return t&&(a=On(a,0,1)),a}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const IM=new z;class i4 extends Qt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Ft,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const c=s/l*Math.PI*2,f=o/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}r.setAttribute("position",new ut(i,3));const a=new Li({fog:!1,toneMapped:!1});this.cone=new xa(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),IM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(IM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hs=new z,dm=new vt,qy=new vt;class r4 extends xa{constructor(e){const t=RR(e),r=new Ft,i=[],a=[],s=new Oe(0,0,1),o=new Oe(0,1,0);for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new ut(i,3)),r.setAttribute("color",new ut(a,3));const l=new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");qy.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(dm.multiplyMatrices(qy,o.matrixWorld),Hs.setFromMatrixPosition(dm),i.setXYZ(s,Hs.x,Hs.y,Hs.z),dm.multiplyMatrices(qy,o.parent.matrixWorld),Hs.setFromMatrixPosition(dm),i.setXYZ(s+1,Hs.x,Hs.y,Hs.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function RR(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,RR(n.children[t]));return e}class a4 extends kn{constructor(e,t,r){const i=new uh(t,4,2),a=new Sr({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const s4=new z,FM=new Oe,BM=new Oe;class o4 extends Qt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new ch(t);i.rotateY(Math.PI*.5),this.material=new Sr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new Zt(s,3)),this.add(new kn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");FM.copy(this.light.color),BM.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?FM:BM;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(s4.setFromMatrixPosition(this.light.matrixWorld).negate())}}class l4 extends xa{constructor(e=10,t=10,r=4473924,i=8947848){r=new Oe(r),i=new Oe(i);const a=t/2,s=e/t,o=e/2,l=[],c=[];for(let h=0,m=0,v=-o;h<=t;h++,v+=s){l.push(-o,0,v,o,0,v),l.push(v,0,-o,v,0,o);const x=h===a?r:i;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const f=new Ft;f.setAttribute("position",new ut(l,3)),f.setAttribute("color",new ut(c,3));const p=new Li({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class c4 extends xa{constructor(e=10,t=16,r=8,i=64,a=4473924,s=8947848){a=new Oe(a),s=new Oe(s);const o=[],l=[];if(t>1)for(let p=0;p<t;p++){const h=p/t*(Math.PI*2),m=Math.sin(h)*e,v=Math.cos(h)*e;o.push(0,0,0),o.push(m,0,v);const x=p&1?a:s;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let p=0;p<r;p++){const h=p&1?a:s,m=e-e/r*p;for(let v=0;v<i;v++){let x=v/i*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m;o.push(_,0,g),l.push(h.r,h.g,h.b),x=(v+1)/i*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m,o.push(_,0,g),l.push(h.r,h.g,h.b)}}const c=new Ft;c.setAttribute("position",new ut(o,3)),c.setAttribute("color",new ut(l,3));const f=new Li({vertexColors:!0,toneMapped:!1});super(c,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const LM=new z,fm=new z,DM=new z;class u4 extends Qt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Ft;i.setAttribute("position",new ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Li({fog:!1,toneMapped:!1});this.lightPlane=new Ss(i,a),this.add(this.lightPlane),i=new Ft,i.setAttribute("position",new ut([0,0,0,0,0,1],3)),this.targetLine=new Ss(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),LM.setFromMatrixPosition(this.light.matrixWorld),fm.setFromMatrixPosition(this.light.target.matrixWorld),DM.subVectors(fm,LM),this.lightPlane.lookAt(fm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fm),this.targetLine.scale.z=DM.length()}}const hm=new z,Un=new nh;class d4 extends xa{constructor(e){const t=new Ft,r=new Li({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(v,x){l(v),l(x)}function l(v){i.push(0,0,0),a.push(0,0,0),s[v]===void 0&&(s[v]=[]),s[v].push(i.length/3-1)}t.setAttribute("position",new ut(i,3)),t.setAttribute("color",new ut(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Oe(16755200),f=new Oe(16711680),p=new Oe(43775),h=new Oe(16777215),m=new Oe(3355443);this.setColors(c,f,p,h,m)}setColors(e,t,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Un.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vn("c",t,e,Un,0,0,-1),Vn("t",t,e,Un,0,0,1),Vn("n1",t,e,Un,-r,-i,-1),Vn("n2",t,e,Un,r,-i,-1),Vn("n3",t,e,Un,-r,i,-1),Vn("n4",t,e,Un,r,i,-1),Vn("f1",t,e,Un,-r,-i,1),Vn("f2",t,e,Un,r,-i,1),Vn("f3",t,e,Un,-r,i,1),Vn("f4",t,e,Un,r,i,1),Vn("u1",t,e,Un,r*.7,i*1.1,-1),Vn("u2",t,e,Un,-r*.7,i*1.1,-1),Vn("u3",t,e,Un,0,i*2,-1),Vn("cf1",t,e,Un,-r,0,1),Vn("cf2",t,e,Un,r,0,1),Vn("cf3",t,e,Un,0,-i,1),Vn("cf4",t,e,Un,0,i,1),Vn("cn1",t,e,Un,-r,0,-1),Vn("cn2",t,e,Un,r,0,-1),Vn("cn3",t,e,Un,0,-i,-1),Vn("cn4",t,e,Un,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vn(n,e,t,r,i,a,s){hm.set(i,a,s).unproject(r);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,f=o.length;c<f;c++)l.setXYZ(o[c],hm.x,hm.y,hm.z)}}const pm=new fi;class f4 extends xa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new Ft;a.setIndex(new Zt(r,1)),a.setAttribute("position",new Zt(i,3)),super(a,new Li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&pm.setFromObject(this.object),pm.isEmpty())return;const t=pm.min,r=pm.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=t.x,a[4]=r.y,a[5]=r.z,a[6]=t.x,a[7]=t.y,a[8]=r.z,a[9]=r.x,a[10]=t.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=t.z,a[15]=t.x,a[16]=r.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=r.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class h4 extends xa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Ft;a.setIndex(new Zt(r,1)),a.setAttribute("position",new ut(i,3)),super(a,new Li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class p4 extends Ss{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Ft;s.setAttribute("position",new ut(a,3)),s.computeBoundingSphere(),super(s,new Li({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ft;l.setAttribute("position",new ut(o,3)),l.computeBoundingSphere(),this.add(new kn(l,new Sr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const UM=new z;let mm,Ky;class m4 extends Qt{constructor(e=new z(0,0,1),t=new z(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",mm===void 0&&(mm=new Ft,mm.setAttribute("position",new ut([0,0,0,0,1,0],3)),Ky=new ku(0,.5,1,5,1),Ky.translate(0,-.5,0)),this.position.copy(t),this.line=new Ss(mm,new Li({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new kn(Ky,new Sr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{UM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(UM,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class g4 extends xa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ft;i.setAttribute("position",new ut(t,3)),i.setAttribute("color",new ut(r,3));const a=new Li({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new Oe,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class v4{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,s){return this.currentPath.bezierCurveTo(e,t,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const A=[];for(let S=0,C=g.length;S<C;S++){const T=g[S],M=new Sl;M.curves=T.curves,A.push(M)}return A}function r(g,A){const S=A.length;let C=!1;for(let T=S-1,M=0;M<S;T=M++){let b=A[T],L=A[M],R=L.x-b.x,F=L.y-b.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(b=A[M],R=-R,L=A[T],F=-F),g.y<b.y||g.y>L.y)continue;if(g.y===b.y){if(g.x===b.x)return!0}else{const O=F*(g.x-b.x)-R*(g.y-b.y);if(O===0)return!0;if(O<0)continue;C=!C}}else{if(g.y!==b.y)continue;if(L.x<=g.x&&g.x<=b.x||b.x<=g.x&&g.x<=L.x)return!0}}return C}const i=za.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const c=[];if(a.length===1)return o=a[0],l=new Sl,l.curves=o.curves,c.push(l),c;let f=!i(a[0].getPoints());f=e?!f:f;const p=[],h=[];let m=[],v=0,x;h[v]=void 0,m[v]=[];for(let g=0,A=a.length;g<A;g++)o=a[g],x=o.getPoints(),s=i(x),s=e?!s:s,s?(!f&&h[v]&&v++,h[v]={s:new Sl,p:x},h[v].s.curves=o.curves,f&&v++,m[v]=[]):m[v].push({h:o,p:x[0]});if(!h[0])return t(a);if(h.length>1){let g=!1,A=0;for(let S=0,C=h.length;S<C;S++)p[S]=[];for(let S=0,C=h.length;S<C;S++){const T=m[S];for(let M=0;M<T.length;M++){const b=T[M];let L=!0;for(let R=0;R<h.length;R++)r(b.p,h[R].p)&&(S!==R&&A++,L?(L=!1,p[R].push(b)):g=!0);L&&p[S].push(b)}}A>0&&g===!1&&(m=p)}let _;for(let g=0,A=h.length;g<A;g++){l=h[g].s,c.push(l),_=m[g];for(let S=0,C=_.length;S<C;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ol}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ol);const IR=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:tS,AddEquation:Qs,AddOperation:t2,AdditiveAnimationBlendMode:uS,AdditiveBlending:W_,AgXToneMapping:s2,AlphaFormat:u2,AlwaysCompare:b2,AlwaysDepth:qP,AlwaysStencilFunc:Ax,AmbientLight:xR,AnimationAction:PR,AnimationClip:vu,AnimationLoader:wG,AnimationMixer:qG,AnimationObjectGroup:jG,AnimationUtils:_G,ArcCurve:q2,ArrayCamera:G2,ArrowHelper:m4,AttachedBindMode:K_,Audio:TR,AudioAnalyser:UG,AudioContext:jS,AudioListener:BG,AudioLoader:RG,AxesHelper:g4,BackSide:Xi,BasicDepthPacking:_2,BasicShadowMap:RP,BatchedMesh:J2,Bone:gv,BooleanKeyframeTrack:Nl,Box2:t4,Box3:fi,Box3Helper:h4,BoxGeometry:kl,BoxHelper:f4,BufferAttribute:Zt,BufferGeometry:Ft,BufferGeometryLoader:ER,ByteType:l2,Cache:gs,Camera:nh,CameraHelper:d4,CanvasTexture:HV,CapsuleGeometry:xv,CatmullRomCurve3:K2,CineonToneMapping:r2,CircleGeometry:Av,ClampToEdgeWrapping:mi,Clock:JS,Color:Oe,ColorKeyframeTrack:NS,ColorManagement:ln,CompressedArrayTexture:VV,CompressedCubeTexture:GV,CompressedTexture:yv,CompressedTextureLoader:CG,ConeGeometry:Sv,ConstantAlphaFactor:XP,ConstantColorFactor:HP,CubeCamera:L2,CubeReflectionMapping:Xa,CubeRefractionMapping:go,CubeTexture:ih,CubeTextureLoader:vR,CubeUVReflectionMapping:Bu,CubicBezierCurve:IS,CubicBezierCurve3:Y2,CubicInterpolant:hR,CullFaceBack:H_,CullFaceFront:PP,CullFaceFrontBack:DU,CullFaceNone:bP,Curve:Aa,CurvePath:Z2,CustomBlending:IP,CustomToneMapping:a2,CylinderGeometry:ku,Cylindrical:e4,Data3DTexture:gS,DataArrayTexture:dv,DataTexture:Al,DataTextureLoader:VS,DataUtils:dl,DecrementStencilOp:WU,DecrementWrapStencilOp:jU,DefaultLoadingManager:gR,DepthFormat:so,DepthStencilFormat:Tl,DepthTexture:SS,DetachedBindMode:o2,DirectionalLight:XS,DirectionalLightHelper:u4,DiscreteInterpolant:pR,DisplayP3ColorSpace:uv,DodecahedronGeometry:wv,DoubleSide:Yr,DstAlphaFactor:kP,DstColorFactor:zP,DynamicCopyUsage:oO,DynamicDrawUsage:tO,DynamicReadUsage:rO,EdgesGeometry:$2,EllipseCurve:_v,EqualCompare:C2,EqualDepth:YP,EqualStencilFunc:YU,EquirectangularReflectionMapping:lu,EquirectangularRefractionMapping:df,Euler:th,EventDispatcher:Ts,ExtrudeGeometry:Ev,FileLoader:Tr,Float16BufferAttribute:jO,Float32BufferAttribute:ut,Float64BufferAttribute:JO,FloatType:gi,Fog:mv,FogExp2:pv,FramebufferTexture:zV,FrontSide:Wa,Frustum:rh,GLBufferAttribute:ZG,GLSL1:cO,GLSL3:Sx,GreaterCompare:E2,GreaterDepth:ZP,GreaterEqualCompare:T2,GreaterEqualDepth:QP,GreaterEqualStencilFunc:eO,GreaterStencilFunc:ZU,GridHelper:l4,Group:ms,HalfFloatType:Ii,HemisphereLight:_R,HemisphereLightHelper:o4,IcosahedronGeometry:lh,ImageBitmapLoader:MR,ImageLoader:Cf,ImageUtils:mS,IncrementStencilOp:HU,IncrementWrapStencilOp:XU,InstancedBufferAttribute:pu,InstancedBufferGeometry:CR,InstancedInterleavedBuffer:QG,InstancedMesh:TS,Int16BufferAttribute:WO,Int32BufferAttribute:XO,Int8BufferAttribute:VO,IntType:nS,InterleavedBuffer:ah,InterleavedBufferAttribute:yo,Interpolant:Nu,InterpolateDiscrete:uu,InterpolateLinear:bl,InterpolateSmooth:Ym,InvertStencilOp:JU,KeepStencilOp:tl,KeyframeTrack:Sa,LOD:j2,LatheGeometry:oh,Layers:xl,LessCompare:w2,LessDepth:KP,LessEqualCompare:hS,LessEqualDepth:uf,LessEqualStencilFunc:QU,LessStencilFunc:KU,Light:Mo,LightProbe:wR,Line:Ss,Line3:n4,LineBasicMaterial:Li,LineCurve:FS,LineCurve3:Q2,LineDashedMaterial:uR,LineLoop:bS,LineSegments:xa,LinearDisplayP3ColorSpace:eh,LinearEncoding:fS,LinearFilter:fn,LinearInterpolant:kS,LinearMipMapLinearFilter:zU,LinearMipMapNearestFilter:NU,LinearMipmapLinearFilter:ja,LinearMipmapNearestFilter:ov,LinearSRGBColorSpace:Ja,LinearToneMapping:n2,LinearTransfer:pf,Loader:Di,LoaderUtils:Va,LoadingManager:zS,LoopOnce:m2,LoopPingPong:v2,LoopRepeat:g2,LuminanceAlphaFormat:f2,LuminanceFormat:d2,MOUSE:BU,Material:Kn,MaterialLoader:Fv,MathUtils:Ua,Matrix3:Vt,Matrix4:vt,MaxEquation:q_,Mesh:kn,MeshBasicMaterial:Sr,MeshDepthMaterial:hv,MeshDistanceMaterial:wS,MeshLambertMaterial:US,MeshMatcapMaterial:cR,MeshNormalMaterial:lR,MeshPhongMaterial:sR,MeshPhysicalMaterial:Ya,MeshStandardMaterial:dh,MeshToonMaterial:oR,MinEquation:J_,MirroredRepeatWrapping:cu,MixOperation:e2,MultiplyBlending:j_,MultiplyOperation:$f,NearestFilter:En,NearestMipMapLinearFilter:kU,NearestMipMapNearestFilter:OU,NearestMipmapLinearFilter:Yc,NearestMipmapNearestFilter:ff,NeverCompare:S2,NeverDepth:JP,NeverStencilFunc:qU,NoBlending:xs,NoColorSpace:Ar,NoToneMapping:ka,NormalAnimationBlendMode:cv,NormalBlending:yl,NotEqualCompare:M2,NotEqualDepth:$P,NotEqualStencilFunc:$U,NumberKeyframeTrack:mu,Object3D:Qt,ObjectLoader:bG,ObjectSpaceNormalMap:A2,OctahedronGeometry:ch,OneFactor:DP,OneMinusConstantAlphaFactor:jP,OneMinusConstantColorFactor:WP,OneMinusDstAlphaFactor:NP,OneMinusDstColorFactor:VP,OneMinusSrcAlphaFactor:fg,OneMinusSrcColorFactor:OP,OrthographicCamera:Uu,P3Primaries:gf,PCFShadowMap:av,PCFSoftShadowMap:Xd,PMREMGenerator:Cx,Path:xf,PerspectiveCamera:ei,Plane:Js,PlaneGeometry:Du,PlaneHelper:p4,PointLight:WS,PointLightHelper:a4,Points:PS,PointsMaterial:vv,PolarGridHelper:c4,PolyhedronGeometry:Eo,PositionalAudio:DG,PropertyBinding:Kt,PropertyMixer:bR,QuadraticBezierCurve:BS,QuadraticBezierCurve3:LS,Quaternion:ni,QuaternionKeyframeTrack:_o,QuaternionLinearInterpolant:mR,RED_GREEN_RGTC2_Format:_x,RED_RGTC1_Format:p2,REVISION:Ol,RGBADepthPacking:x2,RGBAFormat:Ri,RGBAIntegerFormat:lS,RGBA_ASTC_10x10_Format:hx,RGBA_ASTC_10x5_Format:ux,RGBA_ASTC_10x6_Format:dx,RGBA_ASTC_10x8_Format:fx,RGBA_ASTC_12x10_Format:px,RGBA_ASTC_12x12_Format:mx,RGBA_ASTC_4x4_Format:nx,RGBA_ASTC_5x4_Format:ix,RGBA_ASTC_5x5_Format:rx,RGBA_ASTC_6x5_Format:ax,RGBA_ASTC_6x6_Format:sx,RGBA_ASTC_8x5_Format:ox,RGBA_ASTC_8x6_Format:lx,RGBA_ASTC_8x8_Format:cx,RGBA_BPTC_Format:Km,RGBA_ETC2_EAC_Format:tx,RGBA_PVRTC_2BPPV1_Format:$_,RGBA_PVRTC_4BPPV1_Format:Z_,RGBA_S3TC_DXT1_Format:jm,RGBA_S3TC_DXT3_Format:Jm,RGBA_S3TC_DXT5_Format:qm,RGB_BPTC_SIGNED_Format:gx,RGB_BPTC_UNSIGNED_Format:vx,RGB_ETC1_Format:cS,RGB_ETC2_Format:ex,RGB_PVRTC_2BPPV1_Format:Q_,RGB_PVRTC_4BPPV1_Format:Y_,RGB_S3TC_DXT1_Format:Xm,RGFormat:h2,RGIntegerFormat:oS,RawShaderMaterial:aR,Ray:Lu,Raycaster:QS,Rec709Primaries:mf,RectAreaLight:AR,RedFormat:aS,RedIntegerFormat:sS,ReinhardToneMapping:i2,RenderTarget:I2,RepeatWrapping:vo,ReplaceStencilOp:GU,ReverseSubtractEquation:BP,RingGeometry:Mv,SIGNED_RED_GREEN_RGTC2_Format:xx,SIGNED_RED_RGTC1_Format:yx,SRGBColorSpace:$n,SRGBTransfer:pn,Scene:_f,ShaderChunk:Ot,ShaderLib:pa,ShaderMaterial:fr,ShadowMaterial:rR,Shape:Sl,ShapeGeometry:Tv,ShapePath:v4,ShapeUtils:za,ShortType:c2,Skeleton:sh,SkeletonHelper:r4,SkinnedMesh:MS,Source:ul,Sphere:hi,SphereGeometry:uh,Spherical:$G,SphericalHarmonics3:SR,SplineCurve:DS,SpotLight:HS,SpotLightHelper:i4,Sprite:X2,SpriteMaterial:ES,SrcAlphaFactor:dg,SrcAlphaSaturateFactor:GP,SrcColorFactor:UP,StaticCopyUsage:sO,StaticDrawUsage:vf,StaticReadUsage:iO,StereoCamera:IG,StreamCopyUsage:lO,StreamDrawUsage:nO,StreamReadUsage:aO,StringKeyframeTrack:zl,SubtractEquation:FP,SubtractiveBlending:X_,TOUCH:LU,TangentSpaceNormalMap:Co,TetrahedronGeometry:bv,Texture:Sn,TextureLoader:yR,TorusGeometry:Pv,TorusKnotGeometry:Rv,Triangle:rr,TriangleFanDrawMode:hg,TriangleStripDrawMode:dS,TrianglesDrawMode:y2,TubeGeometry:Iv,TwoPassDoubleSide:UU,UVMapping:sv,Uint16BufferAttribute:vS,Uint32BufferAttribute:yS,Uint8BufferAttribute:GO,Uint8ClampedBufferAttribute:HO,Uniform:YS,UniformsGroup:YG,UniformsLib:We,UniformsUtils:_S,UnsignedByteType:Na,UnsignedInt248Type:ao,UnsignedIntType:ps,UnsignedShort4444Type:iS,UnsignedShort5551Type:rS,UnsignedShortType:lv,VSMShadowMap:fa,Vector2:Me,Vector3:z,Vector4:cn,VectorKeyframeTrack:gu,VideoTexture:NV,WebGL1Renderer:H2,WebGL3DRenderTarget:PO,WebGLArrayRenderTarget:bO,WebGLCoordinateSystem:va,WebGLCubeRenderTarget:xS,WebGLMultipleRenderTargets:RO,WebGLRenderTarget:Ji,WebGLRenderer:CS,WebGLUtils:V2,WebGPUCoordinateSystem:du,WireframeGeometry:iR,WrapAroundEnding:hf,ZeroCurvatureEnding:ll,ZeroFactor:LP,ZeroSlopeEnding:cl,ZeroStencilOp:VU,_SRGBAFormat:pg,createCanvasElement:R2,sRGBEncoding:oo},Symbol.toStringTag,{value:"Module"}));var FR={exports:{}},Vl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Vl.ConcurrentRoot=1;Vl.ContinuousEventPriority=4;Vl.DefaultEventPriority=16;Vl.DiscreteEventPriority=1;Vl.IdleEventPriority=536870912;Vl.LegacyRoot=0;FR.exports=Vl;var kc=FR.exports;function y4(n){let e;const t=new Set,r=(c,f)=>{const p=typeof c=="function"?c(e):c;if(p!==e){const h=e;e=f?p:Object.assign({},e,p),t.forEach(m=>m(e,h))}},i=()=>e,a=(c,f=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=f(e);function m(){const v=f(e);if(!p(h,v)){const x=h;c(h=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,f,p)=>f||p?a(c,f,p):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const _4=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),OM=_4?k.useEffect:k.useLayoutEffect;function BR(n){const e=typeof n=="function"?y4(n):n,t=(r=e.getState,i=Object.is)=>{const[,a]=k.useReducer(_=>_+1,0),s=e.getState(),o=k.useRef(s),l=k.useRef(r),c=k.useRef(i),f=k.useRef(!1),p=k.useRef();p.current===void 0&&(p.current=r(s));let h,m=!1;(o.current!==s||l.current!==r||c.current!==i||f.current)&&(h=r(s),m=!i(p.current,h)),OM(()=>{m&&(p.current=h),o.current=s,l.current=r,c.current=i,f.current=!1});const v=k.useRef(s);OM(()=>{const _=()=>{try{const A=e.getState(),S=l.current(A);c.current(p.current,S)||(o.current=A,p.current=S,a())}catch{f.current=!0,a()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const x=m?h:p.current;return k.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var LR={exports:{}},DR={exports:{}},UR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Y,re){var te=Y.length;Y.push(re);e:for(;0<te;){var de=te-1>>>1,fe=Y[de];if(0<i(fe,re))Y[de]=re,Y[te]=fe,te=de;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],te=Y.pop();if(te!==re){Y[0]=te;e:for(var de=0,fe=Y.length,ae=fe>>>1;de<ae;){var _e=2*(de+1)-1,Pe=Y[_e],Ie=_e+1,ke=Y[Ie];if(0>i(Pe,te))Ie<fe&&0>i(ke,Pe)?(Y[de]=ke,Y[Ie]=te,de=Ie):(Y[de]=Pe,Y[_e]=te,de=_e);else if(Ie<fe&&0>i(ke,te))Y[de]=ke,Y[Ie]=te,de=Ie;else break e}}return re}function i(Y,re){var te=Y.sortIndex-re.sortIndex;return te!==0?te:Y.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],c=[],f=1,p=null,h=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var re=t(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=Y)r(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(c)}}function C(Y){if(x=!1,S(Y),!v)if(t(l)!==null)v=!0,ie(T);else{var re=t(c);re!==null&&he(C,re.startTime-Y)}}function T(Y,re){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var te=h;try{for(S(re),p=t(l);p!==null&&(!(p.expirationTime>re)||Y&&!O());){var de=p.callback;if(typeof de=="function"){p.callback=null,h=p.priorityLevel;var fe=de(p.expirationTime<=re);re=n.unstable_now(),typeof fe=="function"?p.callback=fe:p===t(l)&&r(l),S(re)}else r(l);p=t(l)}if(p!==null)var ae=!0;else{var _e=t(c);_e!==null&&he(C,_e.startTime-re),ae=!1}return ae}finally{p=null,h=te,m=!1}}var M=!1,b=null,L=-1,R=5,F=-1;function O(){return!(n.unstable_now()-F<R)}function X(){if(b!==null){var Y=n.unstable_now();F=Y;var re=!0;try{re=b(!0,Y)}finally{re?ne():(M=!1,b=null)}}else M=!1}var ne;if(typeof A=="function")ne=function(){A(X)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=X,ne=function(){Z.postMessage(null)}}else ne=function(){_(X,0)};function ie(Y){b=Y,M||(M=!0,ne())}function he(Y,re){L=_(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ie(T))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var re=3;break;default:re=h}var te=h;h=re;try{return Y()}finally{h=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=h;h=Y;try{return re()}finally{h=te}},n.unstable_scheduleCallback=function(Y,re,te){var de=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,Y){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,Y={id:f++,callback:re,priorityLevel:Y,startTime:te,expirationTime:fe,sortIndex:-1},te>de?(Y.sortIndex=te,e(c,Y),t(l)===null&&Y===t(c)&&(x?(g(L),L=-1):x=!0,he(C,te-de))):(Y.sortIndex=fe,e(l,Y),v||m||(v=!0,ie(T))),Y},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Y){var re=h;return function(){var te=h;h=re;try{return Y.apply(this,arguments)}finally{h=te}}}})(UR);DR.exports=UR;var vg=DR.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4=function(e){var t={},r=k,i=vg,a=Object.assign;function s(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),T=Symbol.iterator;function M(u){return u===null||typeof u!="object"?null:(u=T&&u[T]||u["@@iterator"],typeof u=="function"?u:null)}function b(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case f:return"Fragment";case c:return"Portal";case h:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case x:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case A:return d=u.displayName||null,d!==null?d:b(u.type)||"Memo";case S:d=u._payload,u=u._init;try{return b(u(d))}catch{}}return null}function L(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(d);case 8:return d===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function R(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function F(u){if(R(u)!==u)throw Error(s(188))}function O(u){var d=u.alternate;if(!d){if(d=R(u),d===null)throw Error(s(188));return d!==u?null:u}for(var y=u,w=d;;){var E=y.return;if(E===null)break;var P=E.alternate;if(P===null){if(w=E.return,w!==null){y=w;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===y)return F(E),u;if(P===w)return F(E),d;P=P.sibling}throw Error(s(188))}if(y.return!==w.return)y=E,w=P;else{for(var H=!1,$=E.child;$;){if($===y){H=!0,y=E,w=P;break}if($===w){H=!0,w=E,y=P;break}$=$.sibling}if(!H){for($=P.child;$;){if($===y){H=!0,y=P,w=E;break}if($===w){H=!0,w=P,y=E;break}$=$.sibling}if(!H)throw Error(s(189))}}if(y.alternate!==w)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?u:d}function X(u){return u=O(u),u!==null?ne(u):null}function ne(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=ne(u);if(d!==null)return d;u=u.sibling}return null}function W(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=W(u);if(d!==null)return d}u=u.sibling}return null}var Z=Array.isArray,ie=e.getPublicInstance,he=e.getRootHostContext,Y=e.getChildHostContext,re=e.prepareForCommit,te=e.resetAfterCommit,de=e.createInstance,fe=e.appendInitialChild,ae=e.finalizeInitialChildren,_e=e.prepareUpdate,Pe=e.shouldSetTextContent,Ie=e.createTextInstance,ke=e.scheduleTimeout,ct=e.cancelTimeout,xt=e.noTimeout,nt=e.isPrimaryRenderer,dt=e.supportsMutation,J=e.supportsPersistence,Fe=e.supportsHydration,xe=e.getInstanceFromNode,De=e.preparePortalMount,Ae=e.getCurrentEventPriority,ot=e.detachDeletedInstance,je=e.supportsMicrotasks,N=e.scheduleMicrotask,D=e.supportsTestSelectors,se=e.findFiberRoot,Se=e.getBoundingRect,Te=e.getTextContent,we=e.isHiddenSubtree,Be=e.matchAccessibilityRole,be=e.setFocusIfFocusable,Ee=e.setupIntersectionObserver,Ve=e.appendChild,ht=e.appendChildToContainer,Ce=e.commitTextUpdate,it=e.commitMount,ze=e.commitUpdate,lt=e.insertBefore,Qe=e.insertInContainerBefore,$e=e.removeChild,Ct=e.removeChildFromContainer,Tt=e.resetTextContent,Ut=e.hideInstance,Bt=e.hideTextInstance,ce=e.unhideInstance,Q=e.unhideTextInstance,Je=e.clearContainer,qe=e.cloneInstance,At=e.createContainerChildSet,gt=e.appendChildToContainerChildSet,rn=e.finalizeContainerChildren,nn=e.replaceContainerChildren,Tn=e.cloneHiddenInstance,Hn=e.cloneHiddenTextInstance,an=e.canHydrateInstance,Qn=e.canHydrateTextInstance,Qi=e.canHydrateSuspenseInstance,wa=e.isSuspenseInstancePending,Bo=e.isSuspenseInstanceFallback,Fr=e.registerSuspenseInstanceRetry,Zi=e.getNextHydratableSibling,Lt=e.getFirstHydratableChild,Lo=e.getFirstHydratableChildWithinContainer,Xl=e.getFirstHydratableChildWithinSuspenseInstance,B=e.hydrateInstance,U=e.hydrateTextInstance,K=e.hydrateSuspenseInstance,I=e.getNextHydratableInstanceAfterSuspenseInstance,V=e.commitHydratedContainer,G=e.commitHydratedSuspenseInstance,q=e.clearSuspenseBoundary,j=e.clearSuspenseBoundaryFromContainer,le=e.shouldDeleteUnhydratedTailInstances,pe=e.didNotMatchHydratedContainerTextInstance,ve=e.didNotMatchHydratedTextInstance,ge;function et(u){if(ge===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);ge=d&&d[1]||""}return`
`+ge+u}var Re=!1;function Le(u,d){if(!u||Re)return"";Re=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ne){var w=Ne}Reflect.construct(u,[],d)}else{try{d.call()}catch(Ne){w=Ne}u.call(d.prototype)}else{try{throw Error()}catch(Ne){w=Ne}u()}}catch(Ne){if(Ne&&w&&typeof Ne.stack=="string"){for(var E=Ne.stack.split(`
`),P=w.stack.split(`
`),H=E.length-1,$=P.length-1;1<=H&&0<=$&&E[H]!==P[$];)$--;for(;1<=H&&0<=$;H--,$--)if(E[H]!==P[$]){if(H!==1||$!==1)do if(H--,$--,0>$||E[H]!==P[$]){var ye=`
`+E[H].replace(" at new "," at ");return u.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",u.displayName)),ye}while(1<=H&&0<=$);break}}}finally{Re=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?et(u):""}var rt=Object.prototype.hasOwnProperty,mt=[],yt=-1;function bt(u){return{current:u}}function tt(u){0>yt||(u.current=mt[yt],mt[yt]=null,yt--)}function Ge(u,d){yt++,mt[yt]=u.current,u.current=d}var Gt={},wt=bt(Gt),Et=bt(!1),on=Gt;function Ln(u,d){var y=u.type.contextTypes;if(!y)return Gt;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in y)E[P]=d[P];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function wn(u){return u=u.childContextTypes,u!=null}function qt(){tt(Et),tt(wt)}function Wt(u,d,y){if(wt.current!==Gt)throw Error(s(168));Ge(wt,d),Ge(Et,y)}function bn(u,d,y){var w=u.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return y;w=w.getChildContext();for(var E in w)if(!(E in d))throw Error(s(108,L(u)||"Unknown",E));return a({},y,w)}function Dt(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Gt,on=wt.current,Ge(wt,u),Ge(Et,Et.current),!0}function Xt(u,d,y){var w=u.stateNode;if(!w)throw Error(s(169));y?(u=bn(u,d,on),w.__reactInternalMemoizedMergedChildContext=u,tt(Et),tt(wt),Ge(wt,u)):tt(Et),Ge(Et,y)}var hn=Math.clz32?Math.clz32:Ca,Br=Math.log,Oi=Math.LN2;function Ca(u){return u>>>=0,u===0?32:31-(Br(u)/Oi|0)|0}var Ih=64,Fh=4194304;function ju(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Bh(u,d){var y=u.pendingLanes;if(y===0)return 0;var w=0,E=u.suspendedLanes,P=u.pingedLanes,H=y&268435455;if(H!==0){var $=H&~E;$!==0?w=ju($):(P&=H,P!==0&&(w=ju(P)))}else H=y&~E,H!==0?w=ju(H):P!==0&&(w=ju(P));if(w===0)return 0;if(d!==0&&d!==w&&!(d&E)&&(E=w&-w,P=d&-d,E>=P||E===16&&(P&4194240)!==0))return d;if(w&4&&(w|=y&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=w;0<d;)y=31-hn(d),E=1<<y,w|=u[y],d&=~E;return w}function AD(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SD(u,d){for(var y=u.suspendedLanes,w=u.pingedLanes,E=u.expirationTimes,P=u.pendingLanes;0<P;){var H=31-hn(P),$=1<<H,ye=E[H];ye===-1?(!($&y)||$&w)&&(E[H]=AD($,d)):ye<=d&&(u.expiredLanes|=$),P&=~$}}function l0(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function c0(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function Ju(u,d,y){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-hn(d),u[d]=y}function wD(u,d){var y=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<y;){var E=31-hn(y),P=1<<E;d[E]=0,w[E]=-1,u[E]=-1,y&=~P}}function u0(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var w=31-hn(y),E=1<<w;E&d|u[w]&d&&(u[w]|=d),y&=~E}}var $t=0;function bw(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var d0=i.unstable_scheduleCallback,Pw=i.unstable_cancelCallback,CD=i.unstable_shouldYield,ED=i.unstable_requestPaint,si=i.unstable_now,f0=i.unstable_ImmediatePriority,MD=i.unstable_UserBlockingPriority,h0=i.unstable_NormalPriority,TD=i.unstable_IdlePriority,Lh=null,Ea=null;function bD(u){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(Lh,u,void 0,(u.current.flags&128)===128)}catch{}}function PD(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Ma=typeof Object.is=="function"?Object.is:PD,Za=null,Dh=!1,p0=!1;function Rw(u){Za===null?Za=[u]:Za.push(u)}function RD(u){Dh=!0,Rw(u)}function Ta(){if(!p0&&Za!==null){p0=!0;var u=0,d=$t;try{var y=Za;for($t=1;u<y.length;u++){var w=y[u];do w=w(!0);while(w!==null)}Za=null,Dh=!1}catch(E){throw Za!==null&&(Za=Za.slice(u+1)),d0(f0,Ta),E}finally{$t=d,p0=!1}}return null}var ID=o.ReactCurrentBatchConfig;function Uh(u,d){if(Ma(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),w=Object.keys(d);if(y.length!==w.length)return!1;for(w=0;w<y.length;w++){var E=y[w];if(!rt.call(d,E)||!Ma(u[E],d[E]))return!1}return!0}function FD(u){switch(u.tag){case 5:return et(u.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return u=Le(u.type,!1),u;case 11:return u=Le(u.type.render,!1),u;case 1:return u=Le(u.type,!0),u;default:return""}}function sa(u,d){if(u&&u.defaultProps){d=a({},d),u=u.defaultProps;for(var y in u)d[y]===void 0&&(d[y]=u[y]);return d}return d}var Oh=bt(null),kh=null,jl=null,m0=null;function g0(){m0=jl=kh=null}function Iw(u,d,y){nt?(Ge(Oh,d._currentValue),d._currentValue=y):(Ge(Oh,d._currentValue2),d._currentValue2=y)}function v0(u){var d=Oh.current;tt(Oh),nt?u._currentValue=d:u._currentValue2=d}function y0(u,d,y){for(;u!==null;){var w=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),u===y)break;u=u.return}}function Jl(u,d){kh=u,m0=jl=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(gr=!0),u.firstContext=null)}function Lr(u){var d=nt?u._currentValue:u._currentValue2;if(m0!==u)if(u={context:u,memoizedValue:d,next:null},jl===null){if(kh===null)throw Error(s(308));jl=u,kh.dependencies={lanes:0,firstContext:u}}else jl=jl.next=u;return d}var ba=null,Ps=!1;function _0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fw(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function $a(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Rs(u,d){var y=u.updateQueue;y!==null&&(y=y.shared,Wn!==null&&u.mode&1&&!(Ht&2)?(u=y.interleaved,u===null?(d.next=d,ba===null?ba=[y]:ba.push(y)):(d.next=u.next,u.next=d),y.interleaved=d):(u=y.pending,u===null?d.next=d:(d.next=u.next,u.next=d),y.pending=d))}function Nh(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var w=d.lanes;w&=u.pendingLanes,y|=w,d.lanes=y,u0(u,y)}}function Bw(u,d){var y=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,y===w)){var E=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var H={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};P===null?E=P=H:P=P.next=H,y=y.next}while(y!==null);P===null?E=P=d:P=P.next=d}else E=P=d;y={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:w.shared,effects:w.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}function zh(u,d,y,w){var E=u.updateQueue;Ps=!1;var P=E.firstBaseUpdate,H=E.lastBaseUpdate,$=E.shared.pending;if($!==null){E.shared.pending=null;var ye=$,Ne=ye.next;ye.next=null,H===null?P=Ne:H.next=Ne,H=ye;var st=u.alternate;st!==null&&(st=st.updateQueue,$=st.lastBaseUpdate,$!==H&&($===null?st.firstBaseUpdate=Ne:$.next=Ne,st.lastBaseUpdate=ye))}if(P!==null){var Rt=E.baseState;H=0,st=Ne=ye=null,$=P;do{var _t=$.lane,dn=$.eventTime;if((w&_t)===_t){st!==null&&(st=st.next={eventTime:dn,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var pt=u,Si=$;switch(_t=d,dn=y,Si.tag){case 1:if(pt=Si.payload,typeof pt=="function"){Rt=pt.call(dn,Rt,_t);break e}Rt=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Si.payload,_t=typeof pt=="function"?pt.call(dn,Rt,_t):pt,_t==null)break e;Rt=a({},Rt,_t);break e;case 2:Ps=!0}}$.callback!==null&&$.lane!==0&&(u.flags|=64,_t=E.effects,_t===null?E.effects=[$]:_t.push($))}else dn={eventTime:dn,lane:_t,tag:$.tag,payload:$.payload,callback:$.callback,next:null},st===null?(Ne=st=dn,ye=Rt):st=st.next=dn,H|=_t;if($=$.next,$===null){if($=E.shared.pending,$===null)break;_t=$,$=_t.next,_t.next=null,E.lastBaseUpdate=_t,E.shared.pending=null}}while(!0);if(st===null&&(ye=Rt),E.baseState=ye,E.firstBaseUpdate=Ne,E.lastBaseUpdate=st,d=E.shared.interleaved,d!==null){E=d;do H|=E.lane,E=E.next;while(E!==d)}else P===null&&(E.shared.lanes=0);nc|=H,u.lanes=H,u.memoizedState=Rt}}function Lw(u,d,y){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var w=u[d],E=w.callback;if(E!==null){if(w.callback=null,w=y,typeof E!="function")throw Error(s(191,E));E.call(w)}}}var Dw=new r.Component().refs;function x0(u,d,y,w){d=u.memoizedState,y=y(w,d),y=y==null?d:a({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Vh={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,d,y){u=u._reactInternals;var w=Ni(),E=Bs(u),P=$a(w,E);P.payload=d,y!=null&&(P.callback=y),Rs(u,P),d=Nr(u,E,w),d!==null&&Nh(d,u,E)},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var w=Ni(),E=Bs(u),P=$a(w,E);P.tag=1,P.payload=d,y!=null&&(P.callback=y),Rs(u,P),d=Nr(u,E,w),d!==null&&Nh(d,u,E)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=Ni(),w=Bs(u),E=$a(y,w);E.tag=2,d!=null&&(E.callback=d),Rs(u,E),d=Nr(u,w,y),d!==null&&Nh(d,u,w)}};function Uw(u,d,y,w,E,P,H){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,P,H):d.prototype&&d.prototype.isPureReactComponent?!Uh(y,w)||!Uh(E,P):!0}function Ow(u,d,y){var w=!1,E=Gt,P=d.contextType;return typeof P=="object"&&P!==null?P=Lr(P):(E=wn(d)?on:wt.current,w=d.contextTypes,P=(w=w!=null)?Ln(u,E):Gt),d=new d(y,P),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Vh,u.stateNode=d,d._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=P),d}function kw(u,d,y,w){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,w),d.state!==u&&Vh.enqueueReplaceState(d,d.state,null)}function A0(u,d,y,w){var E=u.stateNode;E.props=y,E.state=u.memoizedState,E.refs=Dw,_0(u);var P=d.contextType;typeof P=="object"&&P!==null?E.context=Lr(P):(P=wn(d)?on:wt.current,E.context=Ln(u,P)),E.state=u.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(x0(u,d,P,y),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Vh.enqueueReplaceState(E,E.state,null),zh(u,y,E,w),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var ql=[],Kl=0,Gh=null,Hh=0,Dr=[],Ur=0,Do=null,es=1,ts="";function Uo(u,d){ql[Kl++]=Hh,ql[Kl++]=Gh,Gh=u,Hh=d}function Nw(u,d,y){Dr[Ur++]=es,Dr[Ur++]=ts,Dr[Ur++]=Do,Do=u;var w=es;u=ts;var E=32-hn(w)-1;w&=~(1<<E),y+=1;var P=32-hn(d)+E;if(30<P){var H=E-E%5;P=(w&(1<<H)-1).toString(32),w>>=H,E-=H,es=1<<32-hn(d)+E|y<<E|w,ts=P+u}else es=1<<P|y<<E|w,ts=u}function S0(u){u.return!==null&&(Uo(u,1),Nw(u,1,0))}function w0(u){for(;u===Gh;)Gh=ql[--Kl],ql[Kl]=null,Hh=ql[--Kl],ql[Kl]=null;for(;u===Do;)Do=Dr[--Ur],Dr[Ur]=null,ts=Dr[--Ur],Dr[Ur]=null,es=Dr[--Ur],Dr[Ur]=null}var pr=null,mr=null,Cn=!1,qu=!1,oa=null;function zw(u,d){var y=zr(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=u,d=u.deletions,d===null?(u.deletions=[y],u.flags|=16):d.push(y)}function Vw(u,d){switch(u.tag){case 5:return d=an(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,pr=u,mr=Lt(d),!0):!1;case 6:return d=Qn(d,u.pendingProps),d!==null?(u.stateNode=d,pr=u,mr=null,!0):!1;case 13:if(d=Qi(d),d!==null){var y=Do!==null?{id:es,overflow:ts}:null;return u.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=zr(18,null,null,0),y.stateNode=d,y.return=u,u.child=y,pr=u,mr=null,!0}return!1;default:return!1}}function C0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function E0(u){if(Cn){var d=mr;if(d){var y=d;if(!Vw(u,d)){if(C0(u))throw Error(s(418));d=Zi(y);var w=pr;d&&Vw(u,d)?zw(w,y):(u.flags=u.flags&-4097|2,Cn=!1,pr=u)}}else{if(C0(u))throw Error(s(418));u.flags=u.flags&-4097|2,Cn=!1,pr=u}}}function Gw(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;pr=u}function Ku(u){if(!Fe||u!==pr)return!1;if(!Cn)return Gw(u),Cn=!0,!1;if(u.tag!==3&&(u.tag!==5||le(u.type)&&!Pe(u.type,u.memoizedProps))){var d=mr;if(d){if(C0(u)){for(u=mr;u;)u=Zi(u);throw Error(s(418))}for(;d;)zw(u,d),d=Zi(d)}}if(Gw(u),u.tag===13){if(!Fe)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));mr=I(u)}else mr=pr?Zi(u.stateNode):null;return!0}function Yl(){Fe&&(mr=pr=null,qu=Cn=!1)}function M0(u){oa===null?oa=[u]:oa.push(u)}function Yu(u,d,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(s(309));var w=y.stateNode}if(!w)throw Error(s(147,u));var E=w,P=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===P?d.ref:(d=function(H){var $=E.refs;$===Dw&&($=E.refs={}),H===null?delete $[P]:$[P]=H},d._stringRef=P,d)}if(typeof u!="string")throw Error(s(284));if(!y._owner)throw Error(s(290,u))}return u}function Wh(u,d){throw u=Object.prototype.toString.call(d),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function Hw(u){var d=u._init;return d(u._payload)}function Ww(u){function d(oe,ee){if(u){var me=oe.deletions;me===null?(oe.deletions=[ee],oe.flags|=16):me.push(ee)}}function y(oe,ee){if(!u)return null;for(;ee!==null;)d(oe,ee),ee=ee.sibling;return null}function w(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function E(oe,ee){return oe=Ds(oe,ee),oe.index=0,oe.sibling=null,oe}function P(oe,ee,me){return oe.index=me,u?(me=oe.alternate,me!==null?(me=me.index,me<ee?(oe.flags|=2,ee):me):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function H(oe){return u&&oe.alternate===null&&(oe.flags|=2),oe}function $(oe,ee,me,Ze){return ee===null||ee.tag!==6?(ee=cy(me,oe.mode,Ze),ee.return=oe,ee):(ee=E(ee,me),ee.return=oe,ee)}function ye(oe,ee,me,Ze){var ft=me.type;return ft===f?st(oe,ee,me.props.children,Ze,me.key):ee!==null&&(ee.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&Hw(ft)===ee.type)?(Ze=E(ee,me.props),Ze.ref=Yu(oe,ee,me),Ze.return=oe,Ze):(Ze=Ap(me.type,me.key,me.props,null,oe.mode,Ze),Ze.ref=Yu(oe,ee,me),Ze.return=oe,Ze)}function Ne(oe,ee,me,Ze){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==me.containerInfo||ee.stateNode.implementation!==me.implementation?(ee=uy(me,oe.mode,Ze),ee.return=oe,ee):(ee=E(ee,me.children||[]),ee.return=oe,ee)}function st(oe,ee,me,Ze,ft){return ee===null||ee.tag!==7?(ee=Ho(me,oe.mode,Ze,ft),ee.return=oe,ee):(ee=E(ee,me),ee.return=oe,ee)}function Rt(oe,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=cy(""+ee,oe.mode,me),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return me=Ap(ee.type,ee.key,ee.props,null,oe.mode,me),me.ref=Yu(oe,null,ee),me.return=oe,me;case c:return ee=uy(ee,oe.mode,me),ee.return=oe,ee;case S:var Ze=ee._init;return Rt(oe,Ze(ee._payload),me)}if(Z(ee)||M(ee))return ee=Ho(ee,oe.mode,me,null),ee.return=oe,ee;Wh(oe,ee)}return null}function _t(oe,ee,me,Ze){var ft=ee!==null?ee.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return ft!==null?null:$(oe,ee,""+me,Ze);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===ft?ye(oe,ee,me,Ze):null;case c:return me.key===ft?Ne(oe,ee,me,Ze):null;case S:return ft=me._init,_t(oe,ee,ft(me._payload),Ze)}if(Z(me)||M(me))return ft!==null?null:st(oe,ee,me,Ze,null);Wh(oe,me)}return null}function dn(oe,ee,me,Ze,ft){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return oe=oe.get(me)||null,$(ee,oe,""+Ze,ft);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case l:return oe=oe.get(Ze.key===null?me:Ze.key)||null,ye(ee,oe,Ze,ft);case c:return oe=oe.get(Ze.key===null?me:Ze.key)||null,Ne(ee,oe,Ze,ft);case S:var Nt=Ze._init;return dn(oe,ee,me,Nt(Ze._payload),ft)}if(Z(Ze)||M(Ze))return oe=oe.get(me)||null,st(ee,oe,Ze,ft,null);Wh(ee,Ze)}return null}function pt(oe,ee,me,Ze){for(var ft=null,Nt=null,It=ee,en=ee=0,li=null;It!==null&&en<me.length;en++){It.index>en?(li=It,It=null):li=It.sibling;var tn=_t(oe,It,me[en],Ze);if(tn===null){It===null&&(It=li);break}u&&It&&tn.alternate===null&&d(oe,It),ee=P(tn,ee,en),Nt===null?ft=tn:Nt.sibling=tn,Nt=tn,It=li}if(en===me.length)return y(oe,It),Cn&&Uo(oe,en),ft;if(It===null){for(;en<me.length;en++)It=Rt(oe,me[en],Ze),It!==null&&(ee=P(It,ee,en),Nt===null?ft=It:Nt.sibling=It,Nt=It);return Cn&&Uo(oe,en),ft}for(It=w(oe,It);en<me.length;en++)li=dn(It,oe,en,me[en],Ze),li!==null&&(u&&li.alternate!==null&&It.delete(li.key===null?en:li.key),ee=P(li,ee,en),Nt===null?ft=li:Nt.sibling=li,Nt=li);return u&&It.forEach(function(Us){return d(oe,Us)}),Cn&&Uo(oe,en),ft}function Si(oe,ee,me,Ze){var ft=M(me);if(typeof ft!="function")throw Error(s(150));if(me=ft.call(me),me==null)throw Error(s(151));for(var Nt=ft=null,It=ee,en=ee=0,li=null,tn=me.next();It!==null&&!tn.done;en++,tn=me.next()){It.index>en?(li=It,It=null):li=It.sibling;var Us=_t(oe,It,tn.value,Ze);if(Us===null){It===null&&(It=li);break}u&&It&&Us.alternate===null&&d(oe,It),ee=P(Us,ee,en),Nt===null?ft=Us:Nt.sibling=Us,Nt=Us,It=li}if(tn.done)return y(oe,It),Cn&&Uo(oe,en),ft;if(It===null){for(;!tn.done;en++,tn=me.next())tn=Rt(oe,tn.value,Ze),tn!==null&&(ee=P(tn,ee,en),Nt===null?ft=tn:Nt.sibling=tn,Nt=tn);return Cn&&Uo(oe,en),ft}for(It=w(oe,It);!tn.done;en++,tn=me.next())tn=dn(It,oe,en,tn.value,Ze),tn!==null&&(u&&tn.alternate!==null&&It.delete(tn.key===null?en:tn.key),ee=P(tn,ee,en),Nt===null?ft=tn:Nt.sibling=tn,Nt=tn);return u&&It.forEach(function(lU){return d(oe,lU)}),Cn&&Uo(oe,en),ft}function Vr(oe,ee,me,Ze){if(typeof me=="object"&&me!==null&&me.type===f&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var ft=me.key,Nt=ee;Nt!==null;){if(Nt.key===ft){if(ft=me.type,ft===f){if(Nt.tag===7){y(oe,Nt.sibling),ee=E(Nt,me.props.children),ee.return=oe,oe=ee;break e}}else if(Nt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&Hw(ft)===Nt.type){y(oe,Nt.sibling),ee=E(Nt,me.props),ee.ref=Yu(oe,Nt,me),ee.return=oe,oe=ee;break e}y(oe,Nt);break}else d(oe,Nt);Nt=Nt.sibling}me.type===f?(ee=Ho(me.props.children,oe.mode,Ze,me.key),ee.return=oe,oe=ee):(Ze=Ap(me.type,me.key,me.props,null,oe.mode,Ze),Ze.ref=Yu(oe,ee,me),Ze.return=oe,oe=Ze)}return H(oe);case c:e:{for(Nt=me.key;ee!==null;){if(ee.key===Nt)if(ee.tag===4&&ee.stateNode.containerInfo===me.containerInfo&&ee.stateNode.implementation===me.implementation){y(oe,ee.sibling),ee=E(ee,me.children||[]),ee.return=oe,oe=ee;break e}else{y(oe,ee);break}else d(oe,ee);ee=ee.sibling}ee=uy(me,oe.mode,Ze),ee.return=oe,oe=ee}return H(oe);case S:return Nt=me._init,Vr(oe,ee,Nt(me._payload),Ze)}if(Z(me))return pt(oe,ee,me,Ze);if(M(me))return Si(oe,ee,me,Ze);Wh(oe,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ee!==null&&ee.tag===6?(y(oe,ee.sibling),ee=E(ee,me),ee.return=oe,oe=ee):(y(oe,ee),ee=cy(me,oe.mode,Ze),ee.return=oe,oe=ee),H(oe)):y(oe,ee)}return Vr}var Ql=Ww(!0),Xw=Ww(!1),Qu={},Or=bt(Qu),Zu=bt(Qu),Zl=bt(Qu);function Pa(u){if(u===Qu)throw Error(s(174));return u}function T0(u,d){Ge(Zl,d),Ge(Zu,u),Ge(Or,Qu),u=he(d),tt(Or),Ge(Or,u)}function $l(){tt(Or),tt(Zu),tt(Zl)}function jw(u){var d=Pa(Zl.current),y=Pa(Or.current);d=Y(y,u.type,d),y!==d&&(Ge(Zu,u),Ge(Or,d))}function b0(u){Zu.current===u&&(tt(Or),tt(Zu))}var Pn=bt(0);function Xh(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||wa(y)||Bo(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var P0=[];function R0(){for(var u=0;u<P0.length;u++){var d=P0[u];nt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}P0.length=0}var jh=o.ReactCurrentDispatcher,kr=o.ReactCurrentBatchConfig,ec=0,Dn=null,_i=null,oi=null,Jh=!1,$u=!1,ed=0,BD=0;function xi(){throw Error(s(321))}function I0(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!Ma(u[y],d[y]))return!1;return!0}function F0(u,d,y,w,E,P){if(ec=P,Dn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,jh.current=u===null||u.memoizedState===null?OD:kD,u=y(w,E),$u){P=0;do{if($u=!1,ed=0,25<=P)throw Error(s(301));P+=1,oi=_i=null,d.updateQueue=null,jh.current=ND,u=y(w,E)}while($u)}if(jh.current=Zh,d=_i!==null&&_i.next!==null,ec=0,oi=_i=Dn=null,Jh=!1,d)throw Error(s(300));return u}function B0(){var u=ed!==0;return ed=0,u}function ns(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Dn.memoizedState=oi=u:oi=oi.next=u,oi}function Ra(){if(_i===null){var u=Dn.alternate;u=u!==null?u.memoizedState:null}else u=_i.next;var d=oi===null?Dn.memoizedState:oi.next;if(d!==null)oi=d,_i=u;else{if(u===null)throw Error(s(310));_i=u,u={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},oi===null?Dn.memoizedState=oi=u:oi=oi.next=u}return oi}function Oo(u,d){return typeof d=="function"?d(u):d}function qh(u){var d=Ra(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=u;var w=_i,E=w.baseQueue,P=y.pending;if(P!==null){if(E!==null){var H=E.next;E.next=P.next,P.next=H}w.baseQueue=E=P,y.pending=null}if(E!==null){P=E.next,w=w.baseState;var $=H=null,ye=null,Ne=P;do{var st=Ne.lane;if((ec&st)===st)ye!==null&&(ye=ye.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),w=Ne.hasEagerState?Ne.eagerState:u(w,Ne.action);else{var Rt={lane:st,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};ye===null?($=ye=Rt,H=w):ye=ye.next=Rt,Dn.lanes|=st,nc|=st}Ne=Ne.next}while(Ne!==null&&Ne!==P);ye===null?H=w:ye.next=$,Ma(w,d.memoizedState)||(gr=!0),d.memoizedState=w,d.baseState=H,d.baseQueue=ye,y.lastRenderedState=w}if(u=y.interleaved,u!==null){E=u;do P=E.lane,Dn.lanes|=P,nc|=P,E=E.next;while(E!==u)}else E===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function Kh(u){var d=Ra(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=u;var w=y.dispatch,E=y.pending,P=d.memoizedState;if(E!==null){y.pending=null;var H=E=E.next;do P=u(P,H.action),H=H.next;while(H!==E);Ma(P,d.memoizedState)||(gr=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),y.lastRenderedState=P}return[P,w]}function Jw(){}function qw(u,d){var y=Dn,w=Ra(),E=d(),P=!Ma(w.memoizedState,E);if(P&&(w.memoizedState=E,gr=!0),w=w.queue,nd(Qw.bind(null,y,w,u),[u]),w.getSnapshot!==d||P||oi!==null&&oi.memoizedState.tag&1){if(y.flags|=2048,td(9,Yw.bind(null,y,w,E,d),void 0,null),Wn===null)throw Error(s(349));ec&30||Kw(y,d,E)}return E}function Kw(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=Dn.updateQueue,d===null?(d={lastEffect:null,stores:null},Dn.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function Yw(u,d,y,w){d.value=y,d.getSnapshot=w,Zw(d)&&Nr(u,1,-1)}function Qw(u,d,y){return y(function(){Zw(d)&&Nr(u,1,-1)})}function Zw(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!Ma(u,y)}catch{return!0}}function L0(u){var d=ns();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:u},d.queue=u,u=u.dispatch=UD.bind(null,Dn,u),[d.memoizedState,u]}function td(u,d,y,w){return u={tag:u,create:d,destroy:y,deps:w,next:null},d=Dn.updateQueue,d===null?(d={lastEffect:null,stores:null},Dn.updateQueue=d,d.lastEffect=u.next=u):(y=d.lastEffect,y===null?d.lastEffect=u.next=u:(w=y.next,y.next=u,u.next=w,d.lastEffect=u)),u}function $w(){return Ra().memoizedState}function Yh(u,d,y,w){var E=ns();Dn.flags|=u,E.memoizedState=td(1|d,y,void 0,w===void 0?null:w)}function Qh(u,d,y,w){var E=Ra();w=w===void 0?null:w;var P=void 0;if(_i!==null){var H=_i.memoizedState;if(P=H.destroy,w!==null&&I0(w,H.deps)){E.memoizedState=td(d,y,P,w);return}}Dn.flags|=u,E.memoizedState=td(1|d,y,P,w)}function D0(u,d){return Yh(8390656,8,u,d)}function nd(u,d){return Qh(2048,8,u,d)}function eC(u,d){return Qh(4,2,u,d)}function tC(u,d){return Qh(4,4,u,d)}function nC(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function iC(u,d,y){return y=y!=null?y.concat([u]):null,Qh(4,4,nC.bind(null,d,u),y)}function U0(){}function rC(u,d){var y=Ra();d=d===void 0?null:d;var w=y.memoizedState;return w!==null&&d!==null&&I0(d,w[1])?w[0]:(y.memoizedState=[u,d],u)}function aC(u,d){var y=Ra();d=d===void 0?null:d;var w=y.memoizedState;return w!==null&&d!==null&&I0(d,w[1])?w[0]:(u=u(),y.memoizedState=[u,d],u)}function LD(u,d){var y=$t;$t=y!==0&&4>y?y:4,u(!0);var w=kr.transition;kr.transition={};try{u(!1),d()}finally{$t=y,kr.transition=w}}function sC(){return Ra().memoizedState}function DD(u,d,y){var w=Bs(u);y={lane:w,action:y,hasEagerState:!1,eagerState:null,next:null},oC(u)?lC(d,y):(cC(u,d,y),y=Ni(),u=Nr(u,w,y),u!==null&&uC(u,d,w))}function UD(u,d,y){var w=Bs(u),E={lane:w,action:y,hasEagerState:!1,eagerState:null,next:null};if(oC(u))lC(d,E);else{cC(u,d,E);var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var H=d.lastRenderedState,$=P(H,y);if(E.hasEagerState=!0,E.eagerState=$,Ma($,H))return}catch{}finally{}y=Ni(),u=Nr(u,w,y),u!==null&&uC(u,d,w)}}function oC(u){var d=u.alternate;return u===Dn||d!==null&&d===Dn}function lC(u,d){$u=Jh=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function cC(u,d,y){Wn!==null&&u.mode&1&&!(Ht&2)?(u=d.interleaved,u===null?(y.next=y,ba===null?ba=[d]:ba.push(d)):(y.next=u.next,u.next=y),d.interleaved=y):(u=d.pending,u===null?y.next=y:(y.next=u.next,u.next=y),d.pending=y)}function uC(u,d,y){if(y&4194240){var w=d.lanes;w&=u.pendingLanes,y|=w,d.lanes=y,u0(u,y)}}var Zh={readContext:Lr,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},OD={readContext:Lr,useCallback:function(u,d){return ns().memoizedState=[u,d===void 0?null:d],u},useContext:Lr,useEffect:D0,useImperativeHandle:function(u,d,y){return y=y!=null?y.concat([u]):null,Yh(4194308,4,nC.bind(null,d,u),y)},useLayoutEffect:function(u,d){return Yh(4194308,4,u,d)},useInsertionEffect:function(u,d){return Yh(4,2,u,d)},useMemo:function(u,d){var y=ns();return d=d===void 0?null:d,u=u(),y.memoizedState=[u,d],u},useReducer:function(u,d,y){var w=ns();return d=y!==void 0?y(d):d,w.memoizedState=w.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},w.queue=u,u=u.dispatch=DD.bind(null,Dn,u),[w.memoizedState,u]},useRef:function(u){var d=ns();return u={current:u},d.memoizedState=u},useState:L0,useDebugValue:U0,useDeferredValue:function(u){var d=L0(u),y=d[0],w=d[1];return D0(function(){var E=kr.transition;kr.transition={};try{w(u)}finally{kr.transition=E}},[u]),y},useTransition:function(){var u=L0(!1),d=u[0];return u=LD.bind(null,u[1]),ns().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,y){var w=Dn,E=ns();if(Cn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=d(),Wn===null)throw Error(s(349));ec&30||Kw(w,d,y)}E.memoizedState=y;var P={value:y,getSnapshot:d};return E.queue=P,D0(Qw.bind(null,w,P,u),[u]),w.flags|=2048,td(9,Yw.bind(null,w,P,y,d),void 0,null),y},useId:function(){var u=ns(),d=Wn.identifierPrefix;if(Cn){var y=ts,w=es;y=(w&~(1<<32-hn(w)-1)).toString(32)+y,d=":"+d+"R"+y,y=ed++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=BD++,d=":"+d+"r"+y.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},kD={readContext:Lr,useCallback:rC,useContext:Lr,useEffect:nd,useImperativeHandle:iC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:aC,useReducer:qh,useRef:$w,useState:function(){return qh(Oo)},useDebugValue:U0,useDeferredValue:function(u){var d=qh(Oo),y=d[0],w=d[1];return nd(function(){var E=kr.transition;kr.transition={};try{w(u)}finally{kr.transition=E}},[u]),y},useTransition:function(){var u=qh(Oo)[0],d=Ra().memoizedState;return[u,d]},useMutableSource:Jw,useSyncExternalStore:qw,useId:sC,unstable_isNewReconciler:!1},ND={readContext:Lr,useCallback:rC,useContext:Lr,useEffect:nd,useImperativeHandle:iC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:aC,useReducer:Kh,useRef:$w,useState:function(){return Kh(Oo)},useDebugValue:U0,useDeferredValue:function(u){var d=Kh(Oo),y=d[0],w=d[1];return nd(function(){var E=kr.transition;kr.transition={};try{w(u)}finally{kr.transition=E}},[u]),y},useTransition:function(){var u=Kh(Oo)[0],d=Ra().memoizedState;return[u,d]},useMutableSource:Jw,useSyncExternalStore:qw,useId:sC,unstable_isNewReconciler:!1};function O0(u,d){try{var y="",w=d;do y+=FD(w),w=w.return;while(w);var E=y}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:d,stack:E}}function k0(u,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var zD=typeof WeakMap=="function"?WeakMap:Map;function dC(u,d,y){y=$a(-1,y),y.tag=3,y.payload={element:null};var w=d.value;return y.callback=function(){pp||(pp=!0,ny=w),k0(u,d)},y}function fC(u,d,y){y=$a(-1,y),y.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var E=d.value;y.payload=function(){return w(E)},y.callback=function(){k0(u,d)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(y.callback=function(){k0(u,d),typeof w!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})}),y}function hC(u,d,y){var w=u.pingCache;if(w===null){w=u.pingCache=new zD;var E=new Set;w.set(d,E)}else E=w.get(d),E===void 0&&(E=new Set,w.set(d,E));E.has(y)||(E.add(y),u=eU.bind(null,u,d,y),d.then(u,u))}function pC(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function mC(u,d,y,w,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=$a(-1,1),d.tag=2,Rs(y,d))),y.lanes|=1),u)}function Ia(u){u.flags|=4}function gC(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var id,rd,$h,ep;if(dt)id=function(u,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)fe(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},rd=function(){},$h=function(u,d,y,w,E){if(u=u.memoizedProps,u!==w){var P=d.stateNode,H=Pa(Or.current);y=_e(P,y,u,w,E,H),(d.updateQueue=y)&&Ia(d)}},ep=function(u,d,y,w){y!==w&&Ia(d)};else if(J){id=function(u,d,y,w){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;y&&w&&(P=Tn(P,E.type,E.memoizedProps,E)),fe(u,P)}else if(E.tag===6)P=E.stateNode,y&&w&&(P=Hn(P,E.memoizedProps,E)),fe(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),id(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var vC=function(u,d,y,w){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;y&&w&&(P=Tn(P,E.type,E.memoizedProps,E)),gt(u,P)}else if(E.tag===6)P=E.stateNode,y&&w&&(P=Hn(P,E.memoizedProps,E)),gt(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),vC(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};rd=function(u,d){var y=d.stateNode;if(!gC(u,d)){u=y.containerInfo;var w=At(u);vC(w,d,!1,!1),y.pendingChildren=w,Ia(d),rn(u,w)}},$h=function(u,d,y,w,E){var P=u.stateNode,H=u.memoizedProps;if((u=gC(u,d))&&H===w)d.stateNode=P;else{var $=d.stateNode,ye=Pa(Or.current),Ne=null;H!==w&&(Ne=_e($,y,H,w,E,ye)),u&&Ne===null?d.stateNode=P:(P=qe(P,Ne,y,H,w,d,u,$),ae(P,y,w,E,ye)&&Ia(d),d.stateNode=P,u?Ia(d):id(P,d,!1,!1))}},ep=function(u,d,y,w){y!==w?(u=Pa(Zl.current),y=Pa(Or.current),d.stateNode=Ie(w,u,y,d),Ia(d)):d.stateNode=u.stateNode}}else rd=function(){},$h=function(){},ep=function(){};function ad(u,d){if(!Cn)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var w=null;y!==null;)y.alternate!==null&&(w=y),y=y.sibling;w===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function Ai(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,w=0;if(d)for(var E=u.child;E!==null;)y|=E.lanes|E.childLanes,w|=E.subtreeFlags&14680064,w|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)y|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=w,u.childLanes=y,d}function VD(u,d,y){var w=d.pendingProps;switch(w0(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ai(d),null;case 1:return wn(d.type)&&qt(),Ai(d),null;case 3:return w=d.stateNode,$l(),tt(Et),tt(wt),R0(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(Ku(d)?Ia(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,oa!==null&&(ay(oa),oa=null))),rd(u,d),Ai(d),null;case 5:b0(d),y=Pa(Zl.current);var E=d.type;if(u!==null&&d.stateNode!=null)$h(u,d,E,w,y),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(s(166));return Ai(d),null}if(u=Pa(Or.current),Ku(d)){if(!Fe)throw Error(s(175));u=B(d.stateNode,d.type,d.memoizedProps,y,u,d,!qu),d.updateQueue=u,u!==null&&Ia(d)}else{var P=de(E,w,y,u,d);id(P,d,!1,!1),d.stateNode=P,ae(P,E,w,y,u)&&Ia(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ai(d),null;case 6:if(u&&d.stateNode!=null)ep(u,d,u.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(s(166));if(u=Pa(Zl.current),y=Pa(Or.current),Ku(d)){if(!Fe)throw Error(s(176));if(u=d.stateNode,w=d.memoizedProps,(y=U(u,w,d,!qu))&&(E=pr,E!==null))switch(P=(E.mode&1)!==0,E.tag){case 3:pe(E.stateNode.containerInfo,u,w,P);break;case 5:ve(E.type,E.memoizedProps,E.stateNode,u,w,P)}y&&Ia(d)}else d.stateNode=Ie(w,u,y,d)}return Ai(d),null;case 13:if(tt(Pn),w=d.memoizedState,Cn&&mr!==null&&d.mode&1&&!(d.flags&128)){for(u=mr;u;)u=Zi(u);return Yl(),d.flags|=98560,d}if(w!==null&&w.dehydrated!==null){if(w=Ku(d),u===null){if(!w)throw Error(s(318));if(!Fe)throw Error(s(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));K(u,d)}else Yl(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Ai(d),null}return oa!==null&&(ay(oa),oa=null),d.flags&128?(d.lanes=y,d):(w=w!==null,y=!1,u===null?Ku(d):y=u.memoizedState!==null,w&&!y&&(d.child.flags|=8192,d.mode&1&&(u===null||Pn.current&1?Zn===0&&(Zn=3):oy())),d.updateQueue!==null&&(d.flags|=4),Ai(d),null);case 4:return $l(),rd(u,d),u===null&&De(d.stateNode.containerInfo),Ai(d),null;case 10:return v0(d.type._context),Ai(d),null;case 17:return wn(d.type)&&qt(),Ai(d),null;case 19:if(tt(Pn),E=d.memoizedState,E===null)return Ai(d),null;if(w=(d.flags&128)!==0,P=E.rendering,P===null)if(w)ad(E,!1);else{if(Zn!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(P=Xh(u),P!==null){for(d.flags|=128,ad(E,!1),u=P.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=y,w=d.child;w!==null;)y=w,E=u,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,E=P.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w=w.sibling;return Ge(Pn,Pn.current&1|2),d.child}u=u.sibling}E.tail!==null&&si()>ty&&(d.flags|=128,w=!0,ad(E,!1),d.lanes=4194304)}else{if(!w)if(u=Xh(P),u!==null){if(d.flags|=128,w=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),ad(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!Cn)return Ai(d),null}else 2*si()-E.renderingStartTime>ty&&y!==1073741824&&(d.flags|=128,w=!0,ad(E,!1),d.lanes=4194304);E.isBackwards?(P.sibling=d.child,d.child=P):(u=E.last,u!==null?u.sibling=P:d.child=P,E.last=P)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=si(),d.sibling=null,u=Pn.current,Ge(Pn,w?u&1|2:u&1),d):(Ai(d),null);case 22:case 23:return sy(),w=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?vr&1073741824&&(Ai(d),dt&&d.subtreeFlags&6&&(d.flags|=8192)):Ai(d),null;case 24:return null;case 25:return null}throw Error(s(156,d.tag))}var GD=o.ReactCurrentOwner,gr=!1;function ki(u,d,y,w){d.child=u===null?Xw(d,null,y,w):Ql(d,u.child,y,w)}function yC(u,d,y,w,E){y=y.render;var P=d.ref;return Jl(d,E),w=F0(u,d,y,w,P,E),y=B0(),u!==null&&!gr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,is(u,d,E)):(Cn&&y&&S0(d),d.flags|=1,ki(u,d,w,E),d.child)}function _C(u,d,y,w,E){if(u===null){var P=y.type;return typeof P=="function"&&!ly(P)&&P.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=P,xC(u,d,P,w,E)):(u=Ap(y.type,null,w,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(P=u.child,!(u.lanes&E)){var H=P.memoizedProps;if(y=y.compare,y=y!==null?y:Uh,y(H,w)&&u.ref===d.ref)return is(u,d,E)}return d.flags|=1,u=Ds(P,w),u.ref=d.ref,u.return=d,d.child=u}function xC(u,d,y,w,E){if(u!==null&&Uh(u.memoizedProps,w)&&u.ref===d.ref)if(gr=!1,(u.lanes&E)!==0)u.flags&131072&&(gr=!0);else return d.lanes=u.lanes,is(u,d,E);return N0(u,d,y,w,E)}function AC(u,d,y){var w=d.pendingProps,E=w.children,P=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Ge(tc,vr),vr|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},w=P!==null?P.baseLanes:y,Ge(tc,vr),vr|=w;else return u=P!==null?P.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,Ge(tc,vr),vr|=u,null;else P!==null?(w=P.baseLanes|y,d.memoizedState=null):w=y,Ge(tc,vr),vr|=w;return ki(u,d,E,y),d.child}function SC(u,d){var y=d.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function N0(u,d,y,w,E){var P=wn(y)?on:wt.current;return P=Ln(d,P),Jl(d,E),y=F0(u,d,y,w,P,E),w=B0(),u!==null&&!gr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,is(u,d,E)):(Cn&&w&&S0(d),d.flags|=1,ki(u,d,y,E),d.child)}function wC(u,d,y,w,E){if(wn(y)){var P=!0;Dt(d)}else P=!1;if(Jl(d,E),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),Ow(d,y,w),A0(d,y,w,E),w=!0;else if(u===null){var H=d.stateNode,$=d.memoizedProps;H.props=$;var ye=H.context,Ne=y.contextType;typeof Ne=="object"&&Ne!==null?Ne=Lr(Ne):(Ne=wn(y)?on:wt.current,Ne=Ln(d,Ne));var st=y.getDerivedStateFromProps,Rt=typeof st=="function"||typeof H.getSnapshotBeforeUpdate=="function";Rt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||($!==w||ye!==Ne)&&kw(d,H,w,Ne),Ps=!1;var _t=d.memoizedState;H.state=_t,zh(d,w,H,E),ye=d.memoizedState,$!==w||_t!==ye||Et.current||Ps?(typeof st=="function"&&(x0(d,y,st,w),ye=d.memoizedState),($=Ps||Uw(d,y,$,w,_t,ye,Ne))?(Rt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(d.flags|=4194308)):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ye),H.props=w,H.state=ye,H.context=Ne,w=$):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{H=d.stateNode,Fw(u,d),$=d.memoizedProps,Ne=d.type===d.elementType?$:sa(d.type,$),H.props=Ne,Rt=d.pendingProps,_t=H.context,ye=y.contextType,typeof ye=="object"&&ye!==null?ye=Lr(ye):(ye=wn(y)?on:wt.current,ye=Ln(d,ye));var dn=y.getDerivedStateFromProps;(st=typeof dn=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||($!==Rt||_t!==ye)&&kw(d,H,w,ye),Ps=!1,_t=d.memoizedState,H.state=_t,zh(d,w,H,E);var pt=d.memoizedState;$!==Rt||_t!==pt||Et.current||Ps?(typeof dn=="function"&&(x0(d,y,dn,w),pt=d.memoizedState),(Ne=Ps||Uw(d,y,Ne,w,_t,pt,ye)||!1)?(st||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(w,pt,ye),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(w,pt,ye)),typeof H.componentDidUpdate=="function"&&(d.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof H.componentDidUpdate!="function"||$===u.memoizedProps&&_t===u.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&_t===u.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=pt),H.props=w,H.state=pt,H.context=ye,w=Ne):(typeof H.componentDidUpdate!="function"||$===u.memoizedProps&&_t===u.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&_t===u.memoizedState||(d.flags|=1024),w=!1)}return z0(u,d,y,w,P,E)}function z0(u,d,y,w,E,P){SC(u,d);var H=(d.flags&128)!==0;if(!w&&!H)return E&&Xt(d,y,!1),is(u,d,P);w=d.stateNode,GD.current=d;var $=H&&typeof y.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,u!==null&&H?(d.child=Ql(d,u.child,null,P),d.child=Ql(d,null,$,P)):ki(u,d,$,P),d.memoizedState=w.state,E&&Xt(d,y,!0),d.child}function CC(u){var d=u.stateNode;d.pendingContext?Wt(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Wt(u,d.context,!1),T0(u,d.containerInfo)}function EC(u,d,y,w,E){return Yl(),M0(E),d.flags|=256,ki(u,d,y,w),d.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(u){return{baseLanes:u,cachePool:null}}function MC(u,d,y){var w=d.pendingProps,E=Pn.current,P=!1,H=(d.flags&128)!==0,$;if(($=H)||($=u!==null&&u.memoizedState===null?!1:(E&2)!==0),$?(P=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Ge(Pn,E&1),u===null)return E0(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?Bo(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(E=w.children,u=w.fallback,P?(w=d.mode,P=d.child,E={mode:"hidden",children:E},!(w&1)&&P!==null?(P.childLanes=0,P.pendingProps=E):P=Sp(E,w,0,null),u=Ho(u,w,y,null),P.return=d,u.return=d,P.sibling=u,d.child=P,d.child.memoizedState=np(y),d.memoizedState=tp,u):V0(d,E));if(E=u.memoizedState,E!==null){if($=E.dehydrated,$!==null){if(H)return d.flags&256?(d.flags&=-257,ip(u,d,y,Error(s(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(P=w.fallback,E=d.mode,w=Sp({mode:"visible",children:w.children},E,0,null),P=Ho(P,E,y,null),P.flags|=2,w.return=d,P.return=d,w.sibling=P,d.child=w,d.mode&1&&Ql(d,u.child,null,y),d.child.memoizedState=np(y),d.memoizedState=tp,P);if(!(d.mode&1))d=ip(u,d,y,null);else if(Bo($))d=ip(u,d,y,Error(s(419)));else if(w=(y&u.childLanes)!==0,gr||w){if(w=Wn,w!==null){switch(y&-y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}w=P&(w.suspendedLanes|y)?0:P,w!==0&&w!==E.retryLane&&(E.retryLane=w,Nr(u,w,-1))}oy(),d=ip(u,d,y,Error(s(421)))}else wa($)?(d.flags|=128,d.child=u.child,d=tU.bind(null,u),Fr($,d),d=null):(y=E.treeContext,Fe&&(mr=Xl($),pr=d,Cn=!0,oa=null,qu=!1,y!==null&&(Dr[Ur++]=es,Dr[Ur++]=ts,Dr[Ur++]=Do,es=y.id,ts=y.overflow,Do=d)),d=V0(d,d.pendingProps.children),d.flags|=4096);return d}return P?(w=bC(u,d,w.children,w.fallback,y),P=d.child,E=u.child.memoizedState,P.memoizedState=E===null?np(y):{baseLanes:E.baseLanes|y,cachePool:null},P.childLanes=u.childLanes&~y,d.memoizedState=tp,w):(y=TC(u,d,w.children,y),d.memoizedState=null,y)}return P?(w=bC(u,d,w.children,w.fallback,y),P=d.child,E=u.child.memoizedState,P.memoizedState=E===null?np(y):{baseLanes:E.baseLanes|y,cachePool:null},P.childLanes=u.childLanes&~y,d.memoizedState=tp,w):(y=TC(u,d,w.children,y),d.memoizedState=null,y)}function V0(u,d){return d=Sp({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function TC(u,d,y,w){var E=u.child;return u=E.sibling,y=Ds(E,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=w),y.return=d,y.sibling=null,u!==null&&(w=d.deletions,w===null?(d.deletions=[u],d.flags|=16):w.push(u)),d.child=y}function bC(u,d,y,w,E){var P=d.mode;u=u.child;var H=u.sibling,$={mode:"hidden",children:y};return!(P&1)&&d.child!==u?(y=d.child,y.childLanes=0,y.pendingProps=$,d.deletions=null):(y=Ds(u,$),y.subtreeFlags=u.subtreeFlags&14680064),H!==null?w=Ds(H,w):(w=Ho(w,P,E,null),w.flags|=2),w.return=d,y.return=d,y.sibling=w,d.child=y,w}function ip(u,d,y,w){return w!==null&&M0(w),Ql(d,u.child,null,y),u=V0(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function PC(u,d,y){u.lanes|=d;var w=u.alternate;w!==null&&(w.lanes|=d),y0(u.return,d,y)}function G0(u,d,y,w,E){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:y,tailMode:E}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=y,P.tailMode=E)}function RC(u,d,y){var w=d.pendingProps,E=w.revealOrder,P=w.tail;if(ki(u,d,w.children,y),w=Pn.current,w&2)w=w&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&PC(u,y,d);else if(u.tag===19)PC(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(Ge(Pn,w),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(y=d.child,E=null;y!==null;)u=y.alternate,u!==null&&Xh(u)===null&&(E=y),y=y.sibling;y=E,y===null?(E=d.child,d.child=null):(E=y.sibling,y.sibling=null),G0(d,!1,E,y,P);break;case"backwards":for(y=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&Xh(u)===null){d.child=E;break}u=E.sibling,E.sibling=y,y=E,E=u}G0(d,!0,y,null,P);break;case"together":G0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function is(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),nc|=d.lanes,!(y&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(s(153));if(d.child!==null){for(u=d.child,y=Ds(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=Ds(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function HD(u,d,y){switch(d.tag){case 3:CC(d),Yl();break;case 5:jw(d);break;case 1:wn(d.type)&&Dt(d);break;case 4:T0(d,d.stateNode.containerInfo);break;case 10:Iw(d,d.type._context,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(Ge(Pn,Pn.current&1),d.flags|=128,null):y&d.child.childLanes?MC(u,d,y):(Ge(Pn,Pn.current&1),u=is(u,d,y),u!==null?u.sibling:null);Ge(Pn,Pn.current&1);break;case 19:if(w=(y&d.childLanes)!==0,u.flags&128){if(w)return RC(u,d,y);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ge(Pn,Pn.current),w)break;return null;case 22:case 23:return d.lanes=0,AC(u,d,y)}return is(u,d,y)}function WD(u,d){switch(w0(d),d.tag){case 1:return wn(d.type)&&qt(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return $l(),tt(Et),tt(wt),R0(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return b0(d),null;case 13:if(tt(Pn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(s(340));Yl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return tt(Pn),null;case 4:return $l(),null;case 10:return v0(d.type._context),null;case 22:case 23:return sy(),null;case 24:return null;default:return null}}var rp=!1,ko=!1,XD=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function ap(u,d){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(w){tr(u,d,w)}else y.current=null}function H0(u,d,y){try{y()}catch(w){tr(u,d,w)}}var IC=!1;function jD(u,d){for(re(u.containerInfo),Ke=d;Ke!==null;)if(u=Ke,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,E=y.memoizedState,P=u.stateNode,H=P.getSnapshotBeforeUpdate(u.elementType===u.type?w:sa(u.type,w),E);P.__reactInternalSnapshotBeforeUpdate=H}break;case 3:dt&&Je(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch($){tr(u,u.return,$)}if(d=u.sibling,d!==null){d.return=u.return,Ke=d;break}Ke=u.return}return y=IC,IC=!1,y}function No(u,d,y){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&u)===u){var P=E.destroy;E.destroy=void 0,P!==void 0&&H0(d,y,P)}E=E.next}while(E!==w)}}function sd(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&u)===u){var w=y.create;y.destroy=w()}y=y.next}while(y!==d)}}function W0(u){var d=u.ref;if(d!==null){var y=u.stateNode;switch(u.tag){case 5:u=ie(y);break;default:u=y}typeof d=="function"?d(u):d.current=u}}function FC(u,d,y){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(Lh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var w=u=u.next;do{var E=w,P=E.destroy;E=E.tag,P!==void 0&&(E&2||E&4)&&H0(d,y,P),w=w.next}while(w!==u)}break;case 1:if(ap(d,y),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(H){tr(d,y,H)}break;case 5:ap(d,y);break;case 4:dt?kC(u,d,y):J&&J&&(d=d.stateNode.containerInfo,y=At(d),nn(d,y))}}function BC(u,d,y){for(var w=d;;)if(FC(u,w,y),w.child===null||dt&&w.tag===4){if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function LC(u){var d=u.alternate;d!==null&&(u.alternate=null,LC(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&ot(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function DC(u){return u.tag===5||u.tag===3||u.tag===4}function UC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||DC(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function OC(u){if(dt){e:{for(var d=u.return;d!==null;){if(DC(d))break e;d=d.return}throw Error(s(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(Tt(d),y.flags&=-33),y=UC(u),j0(u,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=UC(u),X0(u,y,d);break;default:throw Error(s(161))}}}function X0(u,d,y){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?Qe(y,u,d):ht(y,u);else if(w!==4&&(u=u.child,u!==null))for(X0(u,d,y),u=u.sibling;u!==null;)X0(u,d,y),u=u.sibling}function j0(u,d,y){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?lt(y,u,d):Ve(y,u);else if(w!==4&&(u=u.child,u!==null))for(j0(u,d,y),u=u.sibling;u!==null;)j0(u,d,y),u=u.sibling}function kC(u,d,y){for(var w=d,E=!1,P,H;;){if(!E){E=w.return;e:for(;;){if(E===null)throw Error(s(160));switch(P=E.stateNode,E.tag){case 5:H=!1;break e;case 3:P=P.containerInfo,H=!0;break e;case 4:P=P.containerInfo,H=!0;break e}E=E.return}E=!0}if(w.tag===5||w.tag===6)BC(u,w,y),H?Ct(P,w.stateNode):$e(P,w.stateNode);else if(w.tag===18)H?j(P,w.stateNode):q(P,w.stateNode);else if(w.tag===4){if(w.child!==null){P=w.stateNode.containerInfo,H=!0,w.child.return=w,w=w.child;continue}}else if(FC(u,w,y),w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return,w.tag===4&&(E=!1)}w.sibling.return=w.return,w=w.sibling}}function J0(u,d){if(dt){switch(d.tag){case 0:case 11:case 14:case 15:No(3,d,d.return),sd(3,d),No(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var w=d.memoizedProps;u=u!==null?u.memoizedProps:w;var E=d.type,P=d.updateQueue;d.updateQueue=null,P!==null&&ze(y,P,E,u,w,d)}return;case 6:if(d.stateNode===null)throw Error(s(162));y=d.memoizedProps,Ce(d.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:Fe&&u!==null&&u.memoizedState.isDehydrated&&V(d.stateNode.containerInfo);return;case 12:return;case 13:sp(d);return;case 19:sp(d);return;case 17:return}throw Error(s(163))}switch(d.tag){case 0:case 11:case 14:case 15:No(3,d,d.return),sd(3,d),No(5,d,d.return);return;case 12:return;case 13:sp(d);return;case 19:sp(d);return;case 3:Fe&&u!==null&&u.memoizedState.isDehydrated&&V(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(J){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,nn(d.containerInfo,d.pendingChildren);break e}throw Error(s(163))}}function sp(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new XD),d.forEach(function(w){var E=nU.bind(null,u,w);y.has(w)||(y.add(w),w.then(E,E))})}}function JD(u,d){for(Ke=d;Ke!==null;){d=Ke;var y=d.deletions;if(y!==null)for(var w=0;w<y.length;w++){var E=y[w];try{var P=u;dt?kC(P,E,d):BC(P,E,d);var H=E.alternate;H!==null&&(H.return=null),E.return=null}catch(ft){tr(E,d,ft)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Ke=y;else for(;Ke!==null;){d=Ke;try{var $=d.flags;if($&32&&dt&&Tt(d.stateNode),$&512){var ye=d.alternate;if(ye!==null){var Ne=ye.ref;Ne!==null&&(typeof Ne=="function"?Ne(null):Ne.current=null)}}if($&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var st=d.alternate;(st===null||st.memoizedState===null)&&(ey=si())}break;case 22:var Rt=d.memoizedState!==null,_t=d.alternate,dn=_t!==null&&_t.memoizedState!==null;if(y=d,dt){e:if(w=y,E=Rt,P=null,dt)for(var pt=w;;){if(pt.tag===5){if(P===null){P=pt;var Si=pt.stateNode;E?Ut(Si):ce(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(P===null){var Vr=pt.stateNode;E?Bt(Vr):Q(Vr,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===w)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===w)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===w)break e;P===pt&&(P=null),pt=pt.return}P===pt&&(P=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(Rt&&!dn&&y.mode&1){Ke=y;for(var oe=y.child;oe!==null;){for(y=Ke=oe;Ke!==null;){w=Ke;var ee=w.child;switch(w.tag){case 0:case 11:case 14:case 15:No(4,w,w.return);break;case 1:ap(w,w.return);var me=w.stateNode;if(typeof me.componentWillUnmount=="function"){var Ze=w.return;try{me.props=w.memoizedProps,me.state=w.memoizedState,me.componentWillUnmount()}catch(ft){tr(w,Ze,ft)}}break;case 5:ap(w,w.return);break;case 22:if(w.memoizedState!==null){VC(y);continue}}ee!==null?(ee.return=w,Ke=ee):VC(y)}oe=oe.sibling}}}switch($&4102){case 2:OC(d),d.flags&=-3;break;case 6:OC(d),d.flags&=-3,J0(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,J0(d.alternate,d);break;case 4:J0(d.alternate,d)}}catch(ft){tr(d,d.return,ft)}if(y=d.sibling,y!==null){y.return=d.return,Ke=y;break}Ke=d.return}}}function qD(u,d,y){Ke=u,NC(u)}function NC(u,d,y){for(var w=(u.mode&1)!==0;Ke!==null;){var E=Ke,P=E.child;if(E.tag===22&&w){var H=E.memoizedState!==null||rp;if(!H){var $=E.alternate,ye=$!==null&&$.memoizedState!==null||ko;$=rp;var Ne=ko;if(rp=H,(ko=ye)&&!Ne)for(Ke=E;Ke!==null;)H=Ke,ye=H.child,H.tag===22&&H.memoizedState!==null?GC(E):ye!==null?(ye.return=H,Ke=ye):GC(E);for(;P!==null;)Ke=P,NC(P),P=P.sibling;Ke=E,rp=$,ko=Ne}zC(u)}else E.subtreeFlags&8772&&P!==null?(P.return=E,Ke=P):zC(u)}}function zC(u){for(;Ke!==null;){var d=Ke;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ko||sd(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!ko)if(y===null)w.componentDidMount();else{var E=d.elementType===d.type?y.memoizedProps:sa(d.type,y.memoizedProps);w.componentDidUpdate(E,y.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var P=d.updateQueue;P!==null&&Lw(d,P,w);break;case 3:var H=d.updateQueue;if(H!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=ie(d.child.stateNode);break;case 1:y=d.child.stateNode}Lw(d,H,y)}break;case 5:var $=d.stateNode;y===null&&d.flags&4&&it($,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&d.memoizedState===null){var ye=d.alternate;if(ye!==null){var Ne=ye.memoizedState;if(Ne!==null){var st=Ne.dehydrated;st!==null&&G(st)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}ko||d.flags&512&&W0(d)}catch(Rt){tr(d,d.return,Rt)}}if(d===u){Ke=null;break}if(y=d.sibling,y!==null){y.return=d.return,Ke=y;break}Ke=d.return}}function VC(u){for(;Ke!==null;){var d=Ke;if(d===u){Ke=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Ke=y;break}Ke=d.return}}function GC(u){for(;Ke!==null;){var d=Ke;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{sd(4,d)}catch(ye){tr(d,y,ye)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var E=d.return;try{w.componentDidMount()}catch(ye){tr(d,E,ye)}}var P=d.return;try{W0(d)}catch(ye){tr(d,P,ye)}break;case 5:var H=d.return;try{W0(d)}catch(ye){tr(d,H,ye)}}}catch(ye){tr(d,d.return,ye)}if(d===u){Ke=null;break}var $=d.sibling;if($!==null){$.return=d.return,Ke=$;break}Ke=d.return}}var op=0,lp=1,cp=2,up=3,dp=4;if(typeof Symbol=="function"&&Symbol.for){var od=Symbol.for;op=od("selector.component"),lp=od("selector.has_pseudo_class"),cp=od("selector.role"),up=od("selector.test_id"),dp=od("selector.text")}function q0(u){var d=xe(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(u=se(u),u===null)throw Error(s(362));return u.stateNode.current}function K0(u,d){switch(d.$$typeof){case op:if(u.type===d.value)return!0;break;case lp:e:{d=d.value,u=[u,0];for(var y=0;y<u.length;){var w=u[y++],E=u[y++],P=d[E];if(w.tag!==5||!we(w)){for(;P!=null&&K0(w,P);)E++,P=d[E];if(E===d.length){d=!0;break e}else for(w=w.child;w!==null;)u.push(w,E),w=w.sibling}}d=!1}return d;case cp:if(u.tag===5&&Be(u.stateNode,d.value))return!0;break;case dp:if((u.tag===5||u.tag===6)&&(u=Te(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case up:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Y0(u){switch(u.$$typeof){case op:return"<"+(b(u.value)||"Unknown")+">";case lp:return":has("+(Y0(u)||"")+")";case cp:return'[role="'+u.value+'"]';case dp:return'"'+u.value+'"';case up:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function HC(u,d){var y=[];u=[u,0];for(var w=0;w<u.length;){var E=u[w++],P=u[w++],H=d[P];if(E.tag!==5||!we(E)){for(;H!=null&&K0(E,H);)P++,H=d[P];if(P===d.length)y.push(E);else for(E=E.child;E!==null;)u.push(E,P),E=E.sibling}}return y}function Q0(u,d){if(!D)throw Error(s(363));u=q0(u),u=HC(u,d),d=[],u=Array.from(u);for(var y=0;y<u.length;){var w=u[y++];if(w.tag===5)we(w)||d.push(w.stateNode);else for(w=w.child;w!==null;)u.push(w),w=w.sibling}return d}var KD=Math.ceil,fp=o.ReactCurrentDispatcher,Z0=o.ReactCurrentOwner,zn=o.ReactCurrentBatchConfig,Ht=0,Wn=null,Xn=null,pi=0,vr=0,tc=bt(0),Zn=0,ld=null,nc=0,hp=0,$0=0,cd=null,$i=null,ey=0,ty=1/0;function ic(){ty=si()+500}var pp=!1,ny=null,Is=null,mp=!1,Fs=null,gp=0,ud=0,iy=null,vp=-1,yp=0;function Ni(){return Ht&6?si():vp!==-1?vp:vp=si()}function Bs(u){return u.mode&1?Ht&2&&pi!==0?pi&-pi:ID.transition!==null?(yp===0&&(u=Ih,Ih<<=1,!(Ih&4194240)&&(Ih=64),yp=u),yp):(u=$t,u!==0?u:Ae()):1}function Nr(u,d,y){if(50<ud)throw ud=0,iy=null,Error(s(185));var w=_p(u,d);return w===null?null:(Ju(w,d,y),(!(Ht&2)||w!==Wn)&&(w===Wn&&(!(Ht&2)&&(hp|=d),Zn===4&&Ls(w,pi)),er(w,y),d===1&&Ht===0&&!(u.mode&1)&&(ic(),Dh&&Ta())),w)}function _p(u,d){u.lanes|=d;var y=u.alternate;for(y!==null&&(y.lanes|=d),y=u,u=u.return;u!==null;)u.childLanes|=d,y=u.alternate,y!==null&&(y.childLanes|=d),y=u,u=u.return;return y.tag===3?y.stateNode:null}function er(u,d){var y=u.callbackNode;SD(u,d);var w=Bh(u,u===Wn?pi:0);if(w===0)y!==null&&Pw(y),u.callbackNode=null,u.callbackPriority=0;else if(d=w&-w,u.callbackPriority!==d){if(y!=null&&Pw(y),d===1)u.tag===0?RD(XC.bind(null,u)):Rw(XC.bind(null,u)),je?N(function(){Ht===0&&Ta()}):d0(f0,Ta),y=null;else{switch(bw(w)){case 1:y=f0;break;case 4:y=MD;break;case 16:y=h0;break;case 536870912:y=TD;break;default:y=h0}y=eE(y,WC.bind(null,u))}u.callbackPriority=d,u.callbackNode=y}}function WC(u,d){if(vp=-1,yp=0,Ht&6)throw Error(s(327));var y=u.callbackNode;if(Go()&&u.callbackNode!==y)return null;var w=Bh(u,u===Wn?pi:0);if(w===0)return null;if(w&30||w&u.expiredLanes||d)d=xp(u,w);else{d=w;var E=Ht;Ht|=2;var P=qC();(Wn!==u||pi!==d)&&(ic(),zo(u,d));do try{ZD();break}catch($){JC(u,$)}while(!0);g0(),fp.current=P,Ht=E,Xn!==null?d=0:(Wn=null,pi=0,d=Zn)}if(d!==0){if(d===2&&(E=l0(u),E!==0&&(w=E,d=ry(u,E))),d===1)throw y=ld,zo(u,0),Ls(u,w),er(u,si()),y;if(d===6)Ls(u,w);else{if(E=u.current.alternate,!(w&30)&&!YD(E)&&(d=xp(u,w),d===2&&(P=l0(u),P!==0&&(w=P,d=ry(u,P))),d===1))throw y=ld,zo(u,0),Ls(u,w),er(u,si()),y;switch(u.finishedWork=E,u.finishedLanes=w,d){case 0:case 1:throw Error(s(345));case 2:Vo(u,$i);break;case 3:if(Ls(u,w),(w&130023424)===w&&(d=ey+500-si(),10<d)){if(Bh(u,0)!==0)break;if(E=u.suspendedLanes,(E&w)!==w){Ni(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=ke(Vo.bind(null,u,$i),d);break}Vo(u,$i);break;case 4:if(Ls(u,w),(w&4194240)===w)break;for(d=u.eventTimes,E=-1;0<w;){var H=31-hn(w);P=1<<H,H=d[H],H>E&&(E=H),w&=~P}if(w=E,w=si()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*KD(w/1960))-w,10<w){u.timeoutHandle=ke(Vo.bind(null,u,$i),w);break}Vo(u,$i);break;case 5:Vo(u,$i);break;default:throw Error(s(329))}}}return er(u,si()),u.callbackNode===y?WC.bind(null,u):null}function ry(u,d){var y=cd;return u.current.memoizedState.isDehydrated&&(zo(u,d).flags|=256),u=xp(u,d),u!==2&&(d=$i,$i=y,d!==null&&ay(d)),u}function ay(u){$i===null?$i=u:$i.push.apply($i,u)}function YD(u){for(var d=u;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var w=0;w<y.length;w++){var E=y[w],P=E.getSnapshot;E=E.value;try{if(!Ma(P(),E))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ls(u,d){for(d&=~$0,d&=~hp,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var y=31-hn(d),w=1<<y;u[y]=-1,d&=~w}}function XC(u){if(Ht&6)throw Error(s(327));Go();var d=Bh(u,0);if(!(d&1))return er(u,si()),null;var y=xp(u,d);if(u.tag!==0&&y===2){var w=l0(u);w!==0&&(d=w,y=ry(u,w))}if(y===1)throw y=ld,zo(u,0),Ls(u,d),er(u,si()),y;if(y===6)throw Error(s(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Vo(u,$i),er(u,si()),null}function jC(u){Fs!==null&&Fs.tag===0&&!(Ht&6)&&Go();var d=Ht;Ht|=1;var y=zn.transition,w=$t;try{if(zn.transition=null,$t=1,u)return u()}finally{$t=w,zn.transition=y,Ht=d,!(Ht&6)&&Ta()}}function sy(){vr=tc.current,tt(tc)}function zo(u,d){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==xt&&(u.timeoutHandle=xt,ct(y)),Xn!==null)for(y=Xn.return;y!==null;){var w=y;switch(w0(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&qt();break;case 3:$l(),tt(Et),tt(wt),R0();break;case 5:b0(w);break;case 4:$l();break;case 13:tt(Pn);break;case 19:tt(Pn);break;case 10:v0(w.type._context);break;case 22:case 23:sy()}y=y.return}if(Wn=u,Xn=u=Ds(u.current,null),pi=vr=d,Zn=0,ld=null,$0=hp=nc=0,$i=cd=null,ba!==null){for(d=0;d<ba.length;d++)if(y=ba[d],w=y.interleaved,w!==null){y.interleaved=null;var E=w.next,P=y.pending;if(P!==null){var H=P.next;P.next=E,w.next=H}y.pending=w}ba=null}return u}function JC(u,d){do{var y=Xn;try{if(g0(),jh.current=Zh,Jh){for(var w=Dn.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}Jh=!1}if(ec=0,oi=_i=Dn=null,$u=!1,ed=0,Z0.current=null,y===null||y.return===null){Zn=1,ld=d,Xn=null;break}e:{var P=u,H=y.return,$=y,ye=d;if(d=pi,$.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ne=ye,st=$,Rt=st.tag;if(!(st.mode&1)&&(Rt===0||Rt===11||Rt===15)){var _t=st.alternate;_t?(st.updateQueue=_t.updateQueue,st.memoizedState=_t.memoizedState,st.lanes=_t.lanes):(st.updateQueue=null,st.memoizedState=null)}var dn=pC(H);if(dn!==null){dn.flags&=-257,mC(dn,H,$,P,d),dn.mode&1&&hC(P,Ne,d),d=dn,ye=Ne;var pt=d.updateQueue;if(pt===null){var Si=new Set;Si.add(ye),d.updateQueue=Si}else pt.add(ye);break e}else{if(!(d&1)){hC(P,Ne,d),oy();break e}ye=Error(s(426))}}else if(Cn&&$.mode&1){var Vr=pC(H);if(Vr!==null){!(Vr.flags&65536)&&(Vr.flags|=256),mC(Vr,H,$,P,d),M0(ye);break e}}P=ye,Zn!==4&&(Zn=2),cd===null?cd=[P]:cd.push(P),ye=O0(ye,$),$=H;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var oe=dC($,ye,d);Bw($,oe);break e;case 1:P=ye;var ee=$.type,me=$.stateNode;if(!($.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(Is===null||!Is.has(me)))){$.flags|=65536,d&=-d,$.lanes|=d;var Ze=fC($,P,d);Bw($,Ze);break e}}$=$.return}while($!==null)}YC(y)}catch(ft){d=ft,Xn===y&&y!==null&&(Xn=y=y.return);continue}break}while(!0)}function qC(){var u=fp.current;return fp.current=Zh,u===null?Zh:u}function oy(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),Wn===null||!(nc&268435455)&&!(hp&268435455)||Ls(Wn,pi)}function xp(u,d){var y=Ht;Ht|=2;var w=qC();Wn===u&&pi===d||zo(u,d);do try{QD();break}catch(E){JC(u,E)}while(!0);if(g0(),Ht=y,fp.current=w,Xn!==null)throw Error(s(261));return Wn=null,pi=0,Zn}function QD(){for(;Xn!==null;)KC(Xn)}function ZD(){for(;Xn!==null&&!CD();)KC(Xn)}function KC(u){var d=$C(u.alternate,u,vr);u.memoizedProps=u.pendingProps,d===null?YC(u):Xn=d,Z0.current=null}function YC(u){var d=u;do{var y=d.alternate;if(u=d.return,d.flags&32768){if(y=WD(y,d),y!==null){y.flags&=32767,Xn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Zn=6,Xn=null;return}}else if(y=VD(y,d,vr),y!==null){Xn=y;return}if(d=d.sibling,d!==null){Xn=d;return}Xn=d=u}while(d!==null);Zn===0&&(Zn=5)}function Vo(u,d){var y=$t,w=zn.transition;try{zn.transition=null,$t=1,$D(u,d,y)}finally{zn.transition=w,$t=y}return null}function $D(u,d,y){do Go();while(Fs!==null);if(Ht&6)throw Error(s(327));var w=u.finishedWork,E=u.finishedLanes;if(w===null)return null;if(u.finishedWork=null,u.finishedLanes=0,w===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0;var P=w.lanes|w.childLanes;if(wD(u,P),u===Wn&&(Xn=Wn=null,pi=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||mp||(mp=!0,eE(h0,function(){return Go(),null})),P=(w.flags&15990)!==0,w.subtreeFlags&15990||P){P=zn.transition,zn.transition=null;var H=$t;$t=1;var $=Ht;Ht|=4,Z0.current=null,jD(u,w),JD(u,w),te(u.containerInfo),u.current=w,qD(w),ED(),Ht=$,$t=H,zn.transition=P}else u.current=w;if(mp&&(mp=!1,Fs=u,gp=E),P=u.pendingLanes,P===0&&(Is=null),bD(w.stateNode),er(u,si()),d!==null)for(y=u.onRecoverableError,w=0;w<d.length;w++)y(d[w]);if(pp)throw pp=!1,u=ny,ny=null,u;return gp&1&&u.tag!==0&&Go(),P=u.pendingLanes,P&1?u===iy?ud++:(ud=0,iy=u):ud=0,Ta(),null}function Go(){if(Fs!==null){var u=bw(gp),d=zn.transition,y=$t;try{if(zn.transition=null,$t=16>u?16:u,Fs===null)var w=!1;else{if(u=Fs,Fs=null,gp=0,Ht&6)throw Error(s(331));var E=Ht;for(Ht|=4,Ke=u.current;Ke!==null;){var P=Ke,H=P.child;if(Ke.flags&16){var $=P.deletions;if($!==null){for(var ye=0;ye<$.length;ye++){var Ne=$[ye];for(Ke=Ne;Ke!==null;){var st=Ke;switch(st.tag){case 0:case 11:case 15:No(8,st,P)}var Rt=st.child;if(Rt!==null)Rt.return=st,Ke=Rt;else for(;Ke!==null;){st=Ke;var _t=st.sibling,dn=st.return;if(LC(st),st===Ne){Ke=null;break}if(_t!==null){_t.return=dn,Ke=_t;break}Ke=dn}}}var pt=P.alternate;if(pt!==null){var Si=pt.child;if(Si!==null){pt.child=null;do{var Vr=Si.sibling;Si.sibling=null,Si=Vr}while(Si!==null)}}Ke=P}}if(P.subtreeFlags&2064&&H!==null)H.return=P,Ke=H;else e:for(;Ke!==null;){if(P=Ke,P.flags&2048)switch(P.tag){case 0:case 11:case 15:No(9,P,P.return)}var oe=P.sibling;if(oe!==null){oe.return=P.return,Ke=oe;break e}Ke=P.return}}var ee=u.current;for(Ke=ee;Ke!==null;){H=Ke;var me=H.child;if(H.subtreeFlags&2064&&me!==null)me.return=H,Ke=me;else e:for(H=ee;Ke!==null;){if($=Ke,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:sd(9,$)}}catch(ft){tr($,$.return,ft)}if($===H){Ke=null;break e}var Ze=$.sibling;if(Ze!==null){Ze.return=$.return,Ke=Ze;break e}Ke=$.return}}if(Ht=E,Ta(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(Lh,u)}catch{}w=!0}return w}finally{$t=y,zn.transition=d}}return!1}function QC(u,d,y){d=O0(y,d),d=dC(u,d,1),Rs(u,d),d=Ni(),u=_p(u,1),u!==null&&(Ju(u,1,d),er(u,d))}function tr(u,d,y){if(u.tag===3)QC(u,u,y);else for(;d!==null;){if(d.tag===3){QC(d,u,y);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Is===null||!Is.has(w))){u=O0(y,u),u=fC(d,u,1),Rs(d,u),u=Ni(),d=_p(d,1),d!==null&&(Ju(d,1,u),er(d,u));break}}d=d.return}}function eU(u,d,y){var w=u.pingCache;w!==null&&w.delete(d),d=Ni(),u.pingedLanes|=u.suspendedLanes&y,Wn===u&&(pi&y)===y&&(Zn===4||Zn===3&&(pi&130023424)===pi&&500>si()-ey?zo(u,0):$0|=y),er(u,d)}function ZC(u,d){d===0&&(u.mode&1?(d=Fh,Fh<<=1,!(Fh&130023424)&&(Fh=4194304)):d=1);var y=Ni();u=_p(u,d),u!==null&&(Ju(u,d,y),er(u,y))}function tU(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),ZC(u,y)}function nU(u,d){var y=0;switch(u.tag){case 13:var w=u.stateNode,E=u.memoizedState;E!==null&&(y=E.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(s(314))}w!==null&&w.delete(d),ZC(u,y)}var $C;$C=function(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps||Et.current)gr=!0;else{if(!(u.lanes&y)&&!(d.flags&128))return gr=!1,HD(u,d,y);gr=!!(u.flags&131072)}else gr=!1,Cn&&d.flags&1048576&&Nw(d,Hh,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var E=Ln(d,wt.current);Jl(d,y),E=F0(null,d,w,u,E,y);var P=B0();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,wn(w)?(P=!0,Dt(d)):P=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,_0(d),E.updater=Vh,d.stateNode=E,E._reactInternals=d,A0(d,w,u,y),d=z0(null,d,w,!0,P,y)):(d.tag=0,Cn&&P&&S0(d),ki(null,d,E,y),d=d.child),d;case 16:w=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,E=w._init,w=E(w._payload),d.type=w,E=d.tag=rU(w),u=sa(w,u),E){case 0:d=N0(null,d,w,u,y);break e;case 1:d=wC(null,d,w,u,y);break e;case 11:d=yC(null,d,w,u,y);break e;case 14:d=_C(null,d,w,sa(w.type,u),y);break e}throw Error(s(306,w,""))}return d;case 0:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:sa(w,E),N0(u,d,w,E,y);case 1:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:sa(w,E),wC(u,d,w,E,y);case 3:e:{if(CC(d),u===null)throw Error(s(387));w=d.pendingProps,P=d.memoizedState,E=P.element,Fw(u,d),zh(d,w,null,y);var H=d.memoizedState;if(w=H.element,Fe&&P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:H.cache,transitions:H.transitions},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){E=Error(s(423)),d=EC(u,d,w,y,E);break e}else if(w!==E){E=Error(s(424)),d=EC(u,d,w,y,E);break e}else for(Fe&&(mr=Lo(d.stateNode.containerInfo),pr=d,Cn=!0,oa=null,qu=!1),y=Xw(d,null,w,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Yl(),w===E){d=is(u,d,y);break e}ki(u,d,w,y)}d=d.child}return d;case 5:return jw(d),u===null&&E0(d),w=d.type,E=d.pendingProps,P=u!==null?u.memoizedProps:null,H=E.children,Pe(w,E)?H=null:P!==null&&Pe(w,P)&&(d.flags|=32),SC(u,d),ki(u,d,H,y),d.child;case 6:return u===null&&E0(d),null;case 13:return MC(u,d,y);case 4:return T0(d,d.stateNode.containerInfo),w=d.pendingProps,u===null?d.child=Ql(d,null,w,y):ki(u,d,w,y),d.child;case 11:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:sa(w,E),yC(u,d,w,E,y);case 7:return ki(u,d,d.pendingProps,y),d.child;case 8:return ki(u,d,d.pendingProps.children,y),d.child;case 12:return ki(u,d,d.pendingProps.children,y),d.child;case 10:e:{if(w=d.type._context,E=d.pendingProps,P=d.memoizedProps,H=E.value,Iw(d,w,H),P!==null)if(Ma(P.value,H)){if(P.children===E.children&&!Et.current){d=is(u,d,y);break e}}else for(P=d.child,P!==null&&(P.return=d);P!==null;){var $=P.dependencies;if($!==null){H=P.child;for(var ye=$.firstContext;ye!==null;){if(ye.context===w){if(P.tag===1){ye=$a(-1,y&-y),ye.tag=2;var Ne=P.updateQueue;if(Ne!==null){Ne=Ne.shared;var st=Ne.pending;st===null?ye.next=ye:(ye.next=st.next,st.next=ye),Ne.pending=ye}}P.lanes|=y,ye=P.alternate,ye!==null&&(ye.lanes|=y),y0(P.return,y,d),$.lanes|=y;break}ye=ye.next}}else if(P.tag===10)H=P.type===d.type?null:P.child;else if(P.tag===18){if(H=P.return,H===null)throw Error(s(341));H.lanes|=y,$=H.alternate,$!==null&&($.lanes|=y),y0(H,y,d),H=P.sibling}else H=P.child;if(H!==null)H.return=P;else for(H=P;H!==null;){if(H===d){H=null;break}if(P=H.sibling,P!==null){P.return=H.return,H=P;break}H=H.return}P=H}ki(u,d,E.children,y),d=d.child}return d;case 9:return E=d.type,w=d.pendingProps.children,Jl(d,y),E=Lr(E),w=w(E),d.flags|=1,ki(u,d,w,y),d.child;case 14:return w=d.type,E=sa(w,d.pendingProps),E=sa(w.type,E),_C(u,d,w,E,y);case 15:return xC(u,d,d.type,d.pendingProps,y);case 17:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:sa(w,E),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,wn(w)?(u=!0,Dt(d)):u=!1,Jl(d,y),Ow(d,w,E),A0(d,w,E,y),z0(null,d,w,!0,u,y);case 19:return RC(u,d,y);case 22:return AC(u,d,y)}throw Error(s(156,d.tag))};function eE(u,d){return d0(u,d)}function iU(u,d,y,w){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(u,d,y,w){return new iU(u,d,y,w)}function ly(u){return u=u.prototype,!(!u||!u.isReactComponent)}function rU(u){if(typeof u=="function")return ly(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===A)return 14}return 2}function Ds(u,d){var y=u.alternate;return y===null?(y=zr(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function Ap(u,d,y,w,E,P){var H=2;if(w=u,typeof u=="function")ly(u)&&(H=1);else if(typeof u=="string")H=5;else e:switch(u){case f:return Ho(y.children,E,P,d);case p:H=8,E|=8;break;case h:return u=zr(12,y,d,E|2),u.elementType=h,u.lanes=P,u;case _:return u=zr(13,y,d,E),u.elementType=_,u.lanes=P,u;case g:return u=zr(19,y,d,E),u.elementType=g,u.lanes=P,u;case C:return Sp(y,E,P,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:H=10;break e;case v:H=9;break e;case x:H=11;break e;case A:H=14;break e;case S:H=16,w=null;break e}throw Error(s(130,u==null?u:typeof u,""))}return d=zr(H,y,d,E),d.elementType=u,d.type=w,d.lanes=P,d}function Ho(u,d,y,w){return u=zr(7,u,w,d),u.lanes=y,u}function Sp(u,d,y,w){return u=zr(22,u,w,d),u.elementType=C,u.lanes=y,u.stateNode={},u}function cy(u,d,y){return u=zr(6,u,null,d),u.lanes=y,u}function uy(u,d,y){return d=zr(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function aU(u,d,y,w,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c0(0),this.expirationTimes=c0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c0(0),this.identifierPrefix=w,this.onRecoverableError=E,Fe&&(this.mutableSourceEagerHydrationData=null)}function tE(u,d,y,w,E,P,H,$,ye){return u=new aU(u,d,y,$,ye),d===1?(d=1,P===!0&&(d|=8)):d=0,P=zr(3,null,null,d),u.current=P,P.stateNode=u,P.memoizedState={element:w,isDehydrated:y,cache:null,transitions:null},_0(P),u}function nE(u){if(!u)return Gt;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(s(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(wn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(s(171))}if(u.tag===1){var y=u.type;if(wn(y))return bn(u,y,d)}return d}function iE(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=X(d),u===null?null:u.stateNode}function rE(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function dy(u,d){rE(u,d),(u=u.alternate)&&rE(u,d)}function sU(u){return u=X(u),u===null?null:u.stateNode}function oU(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Ni();Nr(u,134217728,d),dy(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Ni(),y=Bs(u);Nr(u,y,d),dy(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var y=ju(d.pendingLanes);y!==0&&(u0(d,y|1),er(d,si()),!(Ht&6)&&(ic(),Ta()))}break;case 13:var w=Ni();jC(function(){return Nr(u,1,w)}),dy(u,1)}},t.batchedUpdates=function(u,d){var y=Ht;Ht|=1;try{return u(d)}finally{Ht=y,Ht===0&&(ic(),Dh&&Ta())}},t.createComponentSelector=function(u){return{$$typeof:op,value:u}},t.createContainer=function(u,d,y,w,E,P,H){return tE(u,d,!1,null,y,w,E,P,H)},t.createHasPseudoClassSelector=function(u){return{$$typeof:lp,value:u}},t.createHydrationContainer=function(u,d,y,w,E,P,H,$,ye){return u=tE(y,w,!0,u,E,P,H,$,ye),u.context=nE(null),y=u.current,w=Ni(),E=Bs(y),P=$a(w,E),P.callback=d??null,Rs(y,P),u.current.lanes=E,Ju(u,E,w),er(u,w),u},t.createPortal=function(u,d,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:u,containerInfo:d,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:cp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:up,value:u}},t.createTextSelector=function(u){return{$$typeof:dp,value:u}},t.deferredUpdates=function(u){var d=$t,y=zn.transition;try{return zn.transition=null,$t=16,u()}finally{$t=d,zn.transition=y}},t.discreteUpdates=function(u,d,y,w,E){var P=$t,H=zn.transition;try{return zn.transition=null,$t=1,u(d,y,w,E)}finally{$t=P,zn.transition=H,Ht===0&&ic()}},t.findAllNodes=Q0,t.findBoundingRects=function(u,d){if(!D)throw Error(s(363));d=Q0(u,d),u=[];for(var y=0;y<d.length;y++)u.push(Se(d[y]));for(d=u.length-1;0<d;d--){y=u[d];for(var w=y.x,E=w+y.width,P=y.y,H=P+y.height,$=d-1;0<=$;$--)if(d!==$){var ye=u[$],Ne=ye.x,st=Ne+ye.width,Rt=ye.y,_t=Rt+ye.height;if(w>=Ne&&P>=Rt&&E<=st&&H<=_t){u.splice(d,1);break}else if(w!==Ne||y.width!==ye.width||_t<P||Rt>H){if(!(P!==Rt||y.height!==ye.height||st<w||Ne>E)){Ne>w&&(ye.width+=Ne-w,ye.x=w),st<E&&(ye.width=E-Ne),u.splice(d,1);break}}else{Rt>P&&(ye.height+=Rt-P,ye.y=P),_t<H&&(ye.height=H-Rt),u.splice(d,1);break}}}return u},t.findHostInstance=iE,t.findHostInstanceWithNoPortals=function(u){return u=O(u),u=u!==null?W(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return iE(u)},t.flushControlled=function(u){var d=Ht;Ht|=1;var y=zn.transition,w=$t;try{zn.transition=null,$t=1,u()}finally{$t=w,zn.transition=y,Ht=d,Ht===0&&(ic(),Ta())}},t.flushPassiveEffects=Go,t.flushSync=jC,t.focusWithin=function(u,d){if(!D)throw Error(s(363));for(u=q0(u),d=HC(u,d),d=Array.from(d),u=0;u<d.length;){var y=d[u++];if(!we(y)){if(y.tag===5&&be(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return $t},t.getFindAllNodesFailureDescription=function(u,d){if(!D)throw Error(s(363));var y=0,w=[];u=[q0(u),0];for(var E=0;E<u.length;){var P=u[E++],H=u[E++],$=d[H];if((P.tag!==5||!we(P))&&(K0(P,$)&&(w.push(Y0($)),H++,H>y&&(y=H)),H<d.length))for(P=P.child;P!==null;)u.push(P,H),P=P.sibling}if(y<d.length){for(u=[];y<d.length;y++)u.push(Y0(d[y]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ie(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:sU,findFiberByHostInstance:u.findFiberByHostInstance||oU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{Lh=d.inject(u),Ea=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,y,w){if(!D)throw Error(s(363));u=Q0(u,d);var E=Ee(u,y,w).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,d){var y=d._getVersion;y=y(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,y]:u.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(u,d){var y=$t;try{return $t=u,d()}finally{$t=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,y,w){var E=d.current,P=Ni(),H=Bs(E);return y=nE(y),d.context===null?d.context=y:d.pendingContext=y,d=$a(P,H),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),Rs(E,d),u=Nr(E,H,P),u!==null&&Nh(u,E,H),H},t};LR.exports=x4;var A4=LR.exports;const S4=YA(A4),w4=n=>typeof n=="object"&&typeof n.then=="function",hl=[];function OR(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function kR(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const a of hl)if(OR(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!t)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=hl.indexOf(i);a!==-1&&hl.splice(a,1)},promise:(w4(n)?n:n(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(hl.push(i),!t)throw i.promise}const C4=(n,e,t)=>kR(n,e,!1,t),E4=(n,e,t)=>void kR(n,e,!0,t),M4=n=>{if(n===void 0||n.length===0)hl.splice(0,hl.length);else{const e=hl.find(t=>OR(n,t.keys,t.equal));e&&e.remove()}},ZS={},$S=n=>void Object.assign(ZS,n);function T4(n,e){function t(f,{args:p=[],attach:h,...m},v){let x=`${f[0].toUpperCase()}${f.slice(1)}`,_;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Fc(g,{type:f,root:v,attach:h,primitive:!0})}else{const g=ZS[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");_=Fc(new g(...p),{type:f,root:v,attach:h,memoizedProps:{args:p}})}return _.__r3f.attach===void 0&&(_ instanceof Ft?_.__r3f.attach="geometry":_ instanceof Kn&&(_.__r3f.attach="material")),x!=="inject"&&Zy(_,m),_}function r(f,p){let h=!1;if(p){var m,v;(m=p.__r3f)!=null&&m.attach?Qy(f,p,p.__r3f.attach):p.isObject3D&&f.isObject3D&&(f.add(p),h=!0),h||(v=f.__r3f)==null||v.objects.push(p),p.__r3f||Fc(p,{}),p.__r3f.parent=f,Fx(p),Bc(p)}}function i(f,p,h){let m=!1;if(p){var v,x;if((v=p.__r3f)!=null&&v.attach)Qy(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){p.parent=f,p.dispatchEvent({type:"added"});const _=f.children.filter(A=>A!==p),g=_.indexOf(h);f.children=[..._.slice(0,g),p,..._.slice(g)],m=!0}m||(x=f.__r3f)==null||x.objects.push(p),p.__r3f||Fc(p,{}),p.__r3f.parent=f,Fx(p),Bc(p)}}function a(f,p,h=!1){f&&[...f].forEach(m=>s(p,m,h))}function s(f,p,h){if(p){var m,v,x;if(p.__r3f&&(p.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(C=>C!==p)),(v=p.__r3f)!=null&&v.attach)GM(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){var _;f.remove(p),(_=p.__r3f)!=null&&_.root&&D4(Zm(p),p)}const A=(x=p.__r3f)==null?void 0:x.primitive,S=!A&&(h===void 0?p.dispose!==null:h);if(!A){var g;a((g=p.__r3f)==null?void 0:g.objects,p,S),a(p.children,p,S)}if(delete p.__r3f,S&&p.dispose&&p.type!=="Scene"){const C=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vg.unstable_scheduleCallback(vg.unstable_IdlePriority,C):C()}Bc(f)}}function o(f,p,h,m){var v;const x=(v=f.__r3f)==null?void 0:v.parent;if(!x)return;const _=t(p,h,f.__r3f.root);if(f.children){for(const g of f.children)g.__r3f&&r(_,g);f.children=f.children.filter(g=>!g.__r3f)}f.__r3f.objects.forEach(g=>r(_,g)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||s(x,f),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(x,_),_.raycast&&_.__r3f.eventCount&&Zm(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:S4({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,p)=>{if(!p)return;const h=f.getState().scene;h.__r3f&&(h.__r3f.root=f,r(h,p))},removeChildFromContainer:(f,p)=>{p&&s(f.getState().scene,p)},insertInContainerBefore:(f,p,h)=>{if(!p||!h)return;const m=f.getState().scene;m.__r3f&&i(m,p,h)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var p;return!!((p=f==null?void 0:f.__r3f)!=null?p:{}).handlers},prepareUpdate(f,p,h,m){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==f)return[!0];{const{args:_=[],children:g,...A}=m,{args:S=[],children:C,...T}=h;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((b,L)=>b!==S[L]))return[!0];const M=XR(f,A,T,!0);return M.changes.length?[!1,M]:null}},commitUpdate(f,[p,h],m,v,x,_){p?o(f,m,x,_):Zy(f,h)},commitMount(f,p,h,m){var v;const x=(v=f.__r3f)!=null?v:{};f.raycast&&x.handlers&&x.eventCount&&Zm(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Fc(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var p;const{attach:h,parent:m}=(p=f.__r3f)!=null?p:{};h&&m&&GM(m,f,h),f.isObject3D&&(f.visible=!1),Bc(f)},unhideInstance(f,p){var h;const{attach:m,parent:v}=(h=f.__r3f)!=null?h:{};m&&v&&Qy(v,f,m),(f.isObject3D&&p.visible==null||p.visible)&&(f.visible=!0),Bc(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():kc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&yn.fun(performance.now)?performance.now:yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Zy}}var kM,NM;const Yy=n=>"colorSpace"in n||"outputColorSpace"in n,NR=()=>{var n;return(n=ZS.ColorManagement)!=null?n:null},zR=n=>n&&n.isOrthographicCamera,b4=n=>n&&n.hasOwnProperty("current"),fh=typeof window<"u"&&((kM=window.document)!=null&&kM.createElement||((NM=window.navigator)==null?void 0:NM.product)==="ReactNative")?k.useLayoutEffect:k.useEffect;function VR(n){const e=k.useRef(n);return fh(()=>void(e.current=n),[n]),e}function P4({set:n}){return fh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class GR extends k.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}GR.getDerivedStateFromError=()=>({error:!0});const HR="__default",zM=new Map,R4=n=>n&&!!n.memoized&&!!n.changes;function WR(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Sd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Zm(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const yn={obj:n=>n===Object(n)&&!yn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(yn.str(n)||yn.num(n))return n===e;const a=yn.obj(n);if(a&&r==="reference")return n===e;const s=yn.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!yn.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(yn.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function I4(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function F4(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Fc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Ix(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((a,s)=>a[s],n),{target:t,key:i}}else return{target:t,key:e}}const VM=/-\d+$/;function Qy(n,e,t){if(yn.str(t)){if(VM.test(t)){const a=t.replace(VM,""),{target:s,key:o}=Ix(n,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=Ix(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function GM(n,e,t){var r,i;if(yn.str(t)){const{target:a,key:s}=Ix(n,t),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function XR(n,{children:e,key:t,ref:r,...i},{children:a,key:s,ref:o,...l}={},c=!1){var f;const p=(f=n==null?void 0:n.__r3f)!=null?f:{},h=Object.entries(i),m=[];if(c){const x=Object.keys(l);for(let _=0;_<x.length;_++)i.hasOwnProperty(x[_])||h.unshift([x[_],HR+"remove"])}h.forEach(([x,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&x==="object"||yn.equ(_,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,_,!0,[]]);let A=[];x.includes("-")&&(A=x.split("-")),m.push([x,_,!1,A]);for(const S in i){const C=i[S];S.startsWith(`${x}-`)&&m.push([S,C,!1,S.split("-")])}});const v={...i};return p.memoizedProps&&p.memoizedProps.args&&(v.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(v.attach=p.memoizedProps.attach),{memoized:v,changes:m}}const B4=typeof process<"u"&&!1;function Zy(n,e){var t,r,i;const a=(t=n.__r3f)!=null?t:{},s=a.root,o=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:l,changes:c}=R4(e)?e:XR(n,e),f=a.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[m,v,x,_]=c[h];if(Yy(n)){const C="srgb",T="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?C:T):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?C:T)}let g=n,A=g[m];if(_.length&&(A=_.reduce((S,C)=>S[C],n),!(A&&A.set))){const[S,...C]=_.reverse();g=C.reverse().reduce((T,M)=>T[M],n),m=S}if(v===HR+"remove")if(g.constructor){let S=zM.get(g.constructor);S||(S=new g.constructor,zM.set(g.constructor,S)),v=S[m]}else v=0;if(x)v?a.handlers[m]=v:delete a.handlers[m],a.eventCount=Object.keys(a.handlers).length;else if(A&&A.set&&(A.copy||A instanceof xl)){if(Array.isArray(v))A.fromArray?A.fromArray(v):A.set(...v);else if(A.copy&&v&&v.constructor&&(B4?A.constructor.name===v.constructor.name:A.constructor===v.constructor))A.copy(v);else if(v!==void 0){const S=A instanceof Oe;!S&&A.setScalar?A.setScalar(v):A instanceof xl&&v instanceof xl?A.mask=v.mask:A.set(v),!NR()&&!o.linear&&S&&A.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof Sn&&g[m].format===Ri&&g[m].type===Na){const S=g[m];Yy(S)&&Yy(o.gl)?S.colorSpace=o.gl.outputColorSpace:S.encoding=o.gl.outputEncoding}Bc(n)}if(a.parent&&n.raycast&&f!==a.eventCount){const h=Zm(n).getState().internal,m=h.interaction.indexOf(n);m>-1&&h.interaction.splice(m,1),a.eventCount&&h.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&Fx(n),n}function Bc(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Fx(n){n.onUpdate==null||n.onUpdate(n)}function jR(n,e){n.manual||(zR(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function gm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function L4(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return kc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return kc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return kc.ContinuousEventPriority;default:return kc.DefaultEventPriority}}function JR(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function D4(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{JR(t.capturedMap,e,r,i)})}function U4(n){function e(l){const{internal:c}=n.getState(),f=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(f*f+p*p))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(f=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+f]}))}function r(l,c){const f=n.getState(),p=new Set,h=[],m=c?c(f.internal.interaction):f.internal.interaction;for(let g=0;g<m.length;g++){const A=Sd(m[g]);A&&(A.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(g){const A=Sd(g);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,A)=>{const S=Sd(g.object),C=Sd(A.object);return!S||!C?g.distance-A.distance:C.events.priority-S.events.priority||g.distance-A.distance}).filter(g=>{const A=gm(g);return p.has(A)?!1:(p.add(A),!0)});f.events.filter&&(x=f.events.filter(x,f));for(const g of x){let A=g.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&h.push({...g,eventObject:A}),A=A.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let g of f.internal.capturedMap.get(l.pointerId).values())p.has(gm(g.intersection))||h.push(g.intersection);return h}function i(l,c,f,p){const h=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=Sd(v.object)||h,{raycaster:_,pointer:g,camera:A,internal:S}=x,C=new z(g.x,g.y,0).unproject(A),T=F=>{var O,X;return(O=(X=S.capturedMap.get(F))==null?void 0:X.has(v.eventObject))!=null?O:!1},M=F=>{const O={intersection:v,target:c.target};S.capturedMap.has(F)?S.capturedMap.get(F).set(v.eventObject,O):S.capturedMap.set(F,new Map([[v.eventObject,O]])),c.target.setPointerCapture(F)},b=F=>{const O=S.capturedMap.get(F);O&&JR(S.capturedMap,v.eventObject,O,F)};let L={};for(let F in c){let O=c[F];typeof O!="function"&&(L[F]=O)}let R={...v,...L,pointer:g,intersections:l,stopped:m.stopped,delta:f,unprojectedPoint:C,ray:_.ray,camera:A,stopPropagation(){const F="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!F||F.has(v.eventObject))&&(R.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));a([...O,v])}},target:{hasPointerCapture:T,setPointerCapture:M,releasePointerCapture:b},currentTarget:{hasPointerCapture:T,setPointerCapture:M,releasePointerCapture:b},nativeEvent:c};if(p(R),m.stopped===!0)break}}return l}function a(l){const{internal:c}=n.getState();for(const f of c.hovered.values())if(!l.length||!l.find(p=>p.object===f.object&&p.index===f.index&&p.instanceId===f.instanceId)){const h=f.eventObject.__r3f,m=h==null?void 0:h.handlers;if(c.hovered.delete(gm(f)),h!=null&&h.eventCount){const v={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function s(l,c){for(let f=0;f<c.length;f++){const p=c[f].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return c=>{const{internal:f}=n.getState();"pointerId"in c&&f.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(c.pointerId)&&(f.capturedMap.delete(c.pointerId),a([]))})}}return function(f){const{onPointerMissed:p,internal:h}=n.getState();h.lastEvent.current=f;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(f,m?t:void 0),g=v?e(f):0;l==="onPointerDown"&&(h.initialClick=[f.offsetX,f.offsetY],h.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(s(f,h.interaction),p&&p(f)),m&&a(_);function A(S){const C=S.eventObject,T=C.__r3f,M=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const b=gm(S),L=h.hovered.get(b);L?L.stopped&&S.stopPropagation():(h.hovered.set(b,S),M.onPointerOver==null||M.onPointerOver(S),M.onPointerEnter==null||M.onPointerEnter(S))}M.onPointerMove==null||M.onPointerMove(S)}else{const b=M[l];b?(!v||h.initialHits.includes(C))&&(s(f,h.interaction.filter(L=>!h.initialHits.includes(L))),b(S)):v&&h.initialHits.includes(C)&&s(f,h.interaction.filter(L=>!h.initialHits.includes(L)))}}i(_,f,g,A)}}return{handlePointer:o}}const O4=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],qR=n=>!!(n!=null&&n.render),e1=k.createContext(null),k4=(n,e)=>{const t=BR((o,l)=>{const c=new z,f=new z,p=new z;function h(g=l().camera,A=f,S=l().size){const{width:C,height:T,top:M,left:b}=S,L=C/T;A instanceof z?p.copy(A):p.set(...A);const R=g.getWorldPosition(c).distanceTo(p);if(zR(g))return{width:C/g.zoom,height:T/g.zoom,top:M,left:b,factor:1,distance:R,aspect:L};{const F=g.fov*Math.PI/180,O=2*Math.tan(F/2)*R,X=O*(C/T);return{width:X,height:O,top:M,left:b,factor:C/X,distance:R,aspect:L}}}let m;const v=g=>o(A=>({performance:{...A.performance,current:g}})),x=new Me;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,A)=>e(g,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new JS,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:g=>o(A=>({...A,events:{...A.events,...g}})),setSize:(g,A,S,C,T)=>{const M=l().camera,b={width:g,height:A,top:C||0,left:T||0,updateStyle:S};o(L=>({size:b,viewport:{...L.viewport,...h(M,f,b)}}))},setDpr:g=>o(A=>{const S=WR(g);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,g!=="never"&&(A.start(),A.elapsedTime=0),o(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:k.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,A,S)=>{const C=l().internal;return C.priority=C.priority+(A>0?1:0),C.subscribers.push({ref:g,priority:A,store:S}),C.subscribers=C.subscribers.sort((T,M)=>T.priority-M.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(A>0?1:0),T.subscribers=T.subscribers.filter(M=>M.ref!==g))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:f,set:p}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==a){var h;i=l,a=c.dpr,jR(o,l),f.setPixelRatio(c.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,m)}o!==s&&(s=o,p(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function N4(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let vm,KR=new Set,z4=new Set,V4=new Set;const G4=n=>N4(n,KR);function $y(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function wd(n,e){switch(n){case"before":return $y(KR,e);case"after":return $y(z4,e);case"tail":return $y(V4,e)}}let e_,t_;function n_(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),e_=e.internal.subscribers,vm=0;vm<e_.length;vm++)t_=e_[vm],t_.ref.current(t_.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function H4(n){let e=!1,t,r,i;function a(l){r=requestAnimationFrame(a),e=!0,t=0,wd("before",l);for(const f of n.values()){var c;i=f.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=n_(l,i))}if(wd("after",l),t===0)return wd("tail",l),e=!1,cancelAnimationFrame(r)}function s(l,c=1){var f;if(!l)return n.forEach(p=>s(p.store.getState()),c);(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(a)))}function o(l,c=!0,f,p){if(c&&wd("before",l),f)n_(l,f,p);else for(const h of n.values())n_(l,h.store.getState());c&&wd("after",l)}return{loop:a,invalidate:s,advance:o}}function t1(){const n=k.useContext(e1);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Wi(n=t=>t,e){return t1()(n,e)}function Bv(n,e=0){const t=t1(),r=t.getState().internal.subscribe,i=VR(n);return fh(()=>r(i,e,t),[e,r,t]),null}const HM=new WeakMap;function YR(n,e){return function(t,...r){let i=HM.get(t);return i||(i=new t,HM.set(t,i)),n&&n(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,l=>{l.scene&&Object.assign(l,I4(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function zu(n,e,t,r){const i=Array.isArray(e)?e:[e],a=C4(YR(t,r),[n,...i],{equal:yn.equ});return Array.isArray(e)?a:a[0]}zu.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return E4(YR(t),[n,...r])};zu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return M4([n,...t])};const yu=new Map,{invalidate:WM,advance:XM}=H4(yu),{reconciler:Ef,applyProps:il}=T4(yu,L4),Ec={objects:"shallow",strict:!1},W4=(n,e)=>{const t=typeof n=="function"?n(e):n;return qR(t)?t:new CS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function X4(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=t}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function j4(n){const e=yu.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||k4(WM,XM),s=t||Ef.createContainer(a,kc.ConcurrentRoot,null,!1,null,"",i,null);e||yu.set(n,{fiber:s,store:a});let o,l=!1,c;return{configure(f={}){let{gl:p,size:h,scene:m,events:v,onCreated:x,shadows:_=!1,linear:g=!1,flat:A=!1,legacy:S=!1,orthographic:C=!1,frameloop:T="always",dpr:M=[1,2],performance:b,raycaster:L,camera:R,onPointerMissed:F}=f,O=a.getState(),X=O.gl;O.gl||O.set({gl:X=W4(p,n)});let ne=O.raycaster;ne||O.set({raycaster:ne=new QS});const{params:W,...Z}=L||{};if(yn.equ(Z,ne,Ec)||il(ne,{...Z}),yn.equ(W,ne.params,Ec)||il(ne,{params:{...ne.params,...W}}),!O.camera||O.camera===c&&!yn.equ(c,R,Ec)){c=R;const fe=R instanceof nh,ae=fe?R:C?new Uu(0,0,0,0,.1,1e3):new ei(75,0,.1,1e3);fe||(ae.position.z=5,R&&il(ae,R),!O.camera&&!(R!=null&&R.rotation)&&ae.lookAt(0,0,0)),O.set({camera:ae}),ne.camera=ae}if(!O.scene){let fe;m instanceof _f?fe=m:(fe=new _f,m&&il(fe,m)),O.set({scene:Fc(fe)})}if(!O.xr){var ie;const fe=(Pe,Ie)=>{const ke=a.getState();ke.frameloop!=="never"&&XM(Pe,!0,ke,Ie)},ae=()=>{const Pe=a.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?fe:null),Pe.gl.xr.isPresenting||WM(Pe)},_e={connect(){const Pe=a.getState().gl;Pe.xr.addEventListener("sessionstart",ae),Pe.xr.addEventListener("sessionend",ae)},disconnect(){const Pe=a.getState().gl;Pe.xr.removeEventListener("sessionstart",ae),Pe.xr.removeEventListener("sessionend",ae)}};typeof((ie=X.xr)==null?void 0:ie.addEventListener)=="function"&&_e.connect(),O.set({xr:_e})}if(X.shadowMap){const fe=X.shadowMap.enabled,ae=X.shadowMap.type;if(X.shadowMap.enabled=!!_,yn.boo(_))X.shadowMap.type=Xd;else if(yn.str(_)){var he;const _e={basic:RP,percentage:av,soft:Xd,variance:fa};X.shadowMap.type=(he=_e[_])!=null?he:Xd}else yn.obj(_)&&Object.assign(X.shadowMap,_);(fe!==X.shadowMap.enabled||ae!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const Y=NR();Y&&("enabled"in Y?Y.enabled=!S:"legacyMode"in Y&&(Y.legacyMode=S)),il(X,{outputEncoding:g?3e3:3001,toneMapping:A?ka:tS}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==A&&O.set(()=>({flat:A})),p&&!yn.fun(p)&&!qR(p)&&!yn.equ(p,X,Ec)&&il(X,p),v&&!O.events.handlers&&O.set({events:v(a)});const de=X4(n,h);return yn.equ(de,O.size,Ec)||O.setSize(de.width,de.height,de.updateStyle,de.top,de.left),M&&O.viewport.dpr!==WR(M)&&O.setDpr(M),O.frameloop!==T&&O.setFrameloop(T),O.onPointerMissed||O.set({onPointerMissed:F}),b&&!yn.equ(b,O.performance,Ec)&&O.set(fe=>({performance:{...fe.performance,...b}})),o=x,l=!0,this},render(f){return l||this.configure(),Ef.updateContainer(k.createElement(J4,{store:a,children:f,onCreated:o,rootElement:n}),s,null,()=>{}),a},unmount(){QR(n)}}}function J4({store:n,children:e,onCreated:t,rootElement:r}){return fh(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),k.createElement(e1.Provider,{value:n},e)}function QR(n,e){const t=yu.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Ef.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),F4(i),yu.delete(n),e&&e(n)}catch{}},500)})}}function q4(n,e,t){return k.createElement(K4,{key:e.uuid,children:n,container:e,state:t})}function K4({state:n={},children:e,container:t}){const{events:r,size:i,...a}=n,s=t1(),[o]=k.useState(()=>new QS),[l]=k.useState(()=>new Me),c=k.useCallback((p,h)=>{const m={...p};Object.keys(p).forEach(x=>{(O4.includes(x)||p[x]!==h[x]&&h[x])&&delete m[x]});let v;if(h&&i){const x=h.camera;v=p.viewport.getCurrentViewport(x,new z,i),x!==p.camera&&jR(x,i)}return{...m,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...p.events,...h==null?void 0:h.events,...r},size:{...p.size,...i},viewport:{...p.viewport,...v},...a}},[n]),[f]=k.useState(()=>{const p=s.getState();return BR((m,v)=>({...p,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...p.events,...r},size:{...p.size,...i},...a,set:m,get:v,setEvents:x=>m(_=>({..._,events:{..._.events,...x}}))}))});return k.useEffect(()=>{const p=s.subscribe(h=>f.setState(m=>c(h,m)));return()=>{p(),f.destroy()}},[]),k.useEffect(()=>{f.setState(p=>c(s.getState(),p))},[c]),k.createElement(k.Fragment,null,Ef.createPortal(k.createElement(e1.Provider,{value:f},e),f,null))}Ef.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:k.version});function wr(){return wr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wr.apply(this,arguments)}function Bx(n,e,t){var r,i,a,s,o;e==null&&(e=100);function l(){var f=Date.now()-s;f<e&&f>=0?r=setTimeout(l,e-f):(r=null,t||(o=n.apply(a,i),a=i=null))}var c=function(){a=this,i=arguments,s=Date.now();var f=t&&!r;return r||(r=setTimeout(l,e)),f&&(o=n.apply(a,i),a=i=null),o};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(o=n.apply(a,i),a=i=null,clearTimeout(r),r=null)},c}Bx.debounce=Bx;var Y4=Bx;const jM=YA(Y4);function Q4(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=k.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=k.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),c=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,p=k.useRef(!1);k.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[h,m,v]=k.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:S,top:C,width:T,height:M,bottom:b,right:L,x:R,y:F}=l.current.element.getBoundingClientRect(),O={left:S,top:C,width:T,height:M,bottom:b,right:L,x:R,y:F};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),p.current&&!tH(l.current.lastBounds,O)&&o(l.current.lastBounds=O)};return[A,f?jM(A,f):A,c?jM(A,c):A]},[o,i,c,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new a(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=A=>{!A||A===l.current.element||(x(),l.current.element=A,l.current.scrollContainers=ZR(A),_())};return $4(v,!!t),Z4(m),k.useEffect(()=>{x(),_()},[t,v,m]),k.useEffect(()=>x,[]),[g,s,h]}function Z4(n){k.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function $4(n,e){k.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function ZR(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...ZR(n.parentElement)]}const eH=["x","y","top","bottom","left","right","width","height"],tH=(n,e)=>eH.every(t=>n[t]===e[t]);var nH=Object.defineProperty,iH=Object.defineProperties,rH=Object.getOwnPropertyDescriptors,JM=Object.getOwnPropertySymbols,aH=Object.prototype.hasOwnProperty,sH=Object.prototype.propertyIsEnumerable,qM=(n,e,t)=>e in n?nH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KM=(n,e)=>{for(var t in e||(e={}))aH.call(e,t)&&qM(n,t,e[t]);if(JM)for(var t of JM(e))sH.call(e,t)&&qM(n,t,e[t]);return n},oH=(n,e)=>iH(n,rH(e));function $R(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=$R(r,e,t);if(i)return i;r=e?null:r.sibling}}function eI(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const n1=eI(k.createContext(null));class tI extends k.Component{render(){return k.createElement(n1.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:YM,ReactCurrentDispatcher:QM}=k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function lH(){const n=k.useContext(n1);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=k.useId();return k.useMemo(()=>{for(const r of[YM==null?void 0:YM.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=$R(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function cH(){var n,e;const t=lH(),[r]=k.useState(()=>new Map);r.clear();let i=t;for(;i;){const a=(n=i.type)==null?void 0:n._context;a&&a!==n1&&!r.has(a)&&r.set(a,(e=QM==null?void 0:QM.current)==null?void 0:e.readContext(eI(a))),i=i.return}return r}function uH(){const n=cH();return k.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>k.createElement(e,null,k.createElement(t.Provider,oH(KM({},r),{value:n.get(t)}))),e=>k.createElement(tI,KM({},e))),[n])}const i_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function dH(n){const{handlePointer:e}=U4(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(i_).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:a}=n.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[l,c]=i_[s];t.addEventListener(l,o,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=i_[a];r.connected.removeEventListener(o,s)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}const fH=k.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:a,events:s=dH,eventSource:o,eventPrefix:l,shadows:c,linear:f,flat:p,legacy:h,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:A,scene:S,onPointerMissed:C,onCreated:T,...M},b){k.useMemo(()=>$S(IR),[]);const L=uH(),[R,F]=Q4({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=k.useRef(null),X=k.useRef(null);k.useImperativeHandle(b,()=>O.current);const ne=VR(C),[W,Z]=k.useState(!1),[ie,he]=k.useState(!1);if(W)throw W;if(ie)throw ie;const Y=k.useRef(null);fh(()=>{const te=O.current;F.width>0&&F.height>0&&te&&(Y.current||(Y.current=j4(te)),Y.current.configure({gl:a,events:s,shadows:c,linear:f,flat:p,legacy:h,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:A,scene:S,size:F,onPointerMissed:(...de)=>ne.current==null?void 0:ne.current(...de),onCreated:de=>{de.events.connect==null||de.events.connect(o?b4(o)?o.current:o:X.current),l&&de.setEvents({compute:(fe,ae)=>{const _e=fe[l+"X"],Pe=fe[l+"Y"];ae.pointer.set(_e/ae.size.width*2-1,-(Pe/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),T==null||T(de)}}),Y.current.render(k.createElement(L,null,k.createElement(GR,{set:he},k.createElement(k.Suspense,{fallback:k.createElement(P4,{set:Z})},e)))))}),k.useEffect(()=>{const te=O.current;if(te)return()=>QR(te)},[]);const re=o?"none":"auto";return k.createElement("div",wr({ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...i}},M),k.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},k.createElement("canvas",{ref:O,style:{display:"block"}},t)))}),nI=k.forwardRef(function(e,t){return k.createElement(tI,null,k.createElement(fH,wr({},e,{ref:t})))});var iI={exports:{}},Pr={};/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=k,br=vg;function Ue(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aI=new Set,Mf={};function Gl(n,e){_u(n,e),_u(n+"Capture",e)}function _u(n,e){for(Mf[n]=e,n=0;n<e.length;n++)aI.add(e[n])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lx=Object.prototype.hasOwnProperty,hH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZM={},$M={};function pH(n){return Lx.call($M,n)?!0:Lx.call(ZM,n)?!1:hH.test(n)?$M[n]=!0:(ZM[n]=!0,!1)}function mH(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gH(n,e,t,r){if(e===null||typeof e>"u"||mH(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ki(n,e,t,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yi[n]=new Ki(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yi[e]=new Ki(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yi[n]=new Ki(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yi[n]=new Ki(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yi[n]=new Ki(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yi[n]=new Ki(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yi[n]=new Ki(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yi[n]=new Ki(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yi[n]=new Ki(n,5,!1,n.toLowerCase(),null,!1,!1)});var i1=/[\-:]([a-z])/g;function r1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(i1,r1);yi[e]=new Ki(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(i1,r1);yi[e]=new Ki(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(i1,r1);yi[e]=new Ki(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!1,!1)});yi.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!0,!0)});function a1(n,e,t,r){var i=yi.hasOwnProperty(e)?yi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gH(e,t,i,r)&&(t=null),r||i===null?pH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var bs=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ym=Symbol.for("react.element"),Nc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),s1=Symbol.for("react.strict_mode"),Dx=Symbol.for("react.profiler"),sI=Symbol.for("react.provider"),oI=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),l1=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),lI=Symbol.for("react.offscreen"),eT=Symbol.iterator;function Cd(n){return n===null||typeof n!="object"?null:(n=eT&&n[eT]||n["@@iterator"],typeof n=="function"?n:null)}var Bn=Object.assign,r_;function Nd(n){if(r_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);r_=e&&e[1]||""}return`
`+r_+n}var a_=!1;function s_(n,e){if(!n||a_)return"";a_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=o);break}}}finally{a_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Nd(n):""}function vH(n){switch(n.tag){case 5:return Nd(n.type);case 16:return Nd("Lazy");case 13:return Nd("Suspense");case 19:return Nd("SuspenseList");case 0:case 2:case 15:return n=s_(n.type,!1),n;case 11:return n=s_(n.type.render,!1),n;case 1:return n=s_(n.type,!0),n;default:return""}}function kx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zc:return"Fragment";case Nc:return"Portal";case Dx:return"Profiler";case s1:return"StrictMode";case Ux:return"Suspense";case Ox:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oI:return(n.displayName||"Context")+".Consumer";case sI:return(n._context.displayName||"Context")+".Provider";case o1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case l1:return e=n.displayName||null,e!==null?e:kx(n.type)||"Memo";case qs:e=n._payload,n=n._init;try{return kx(n(e))}catch{}}return null}function yH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kx(e);case 8:return e===s1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _H(n){var e=cI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _m(n){n._valueTracker||(n._valueTracker=_H(n))}function uI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=cI(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function yg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Nx(n,e){var t=e.checked;return Bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function tT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=xo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dI(n,e){e=e.checked,e!=null&&a1(n,"checked",e,!1)}function zx(n,e){dI(n,e);var t=xo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Vx(n,e.type,t):e.hasOwnProperty("defaultValue")&&Vx(n,e.type,xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function nT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Vx(n,e,t){(e!=="number"||yg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var zd=Array.isArray;function Zc(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+xo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Gx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Bn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function iT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ue(92));if(zd(t)){if(1<t.length)throw Error(Ue(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xo(t)}}function fI(n,e){var t=xo(e.value),r=xo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function rT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hx(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xm,pI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Tf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xH=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(n){xH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yd[e]=Yd[n]})});function mI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yd.hasOwnProperty(n)&&Yd[n]?(""+e).trim():e+"px"}function gI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=mI(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var AH=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wx(n,e){if(e){if(AH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ue(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ue(62))}}function Xx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jx=null;function c1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jx=null,$c=null,eu=null;function aT(n){if(n=mh(n)){if(typeof Jx!="function")throw Error(Ue(280));var e=n.stateNode;e&&(e=kv(e),Jx(n.stateNode,n.type,e))}}function vI(n){$c?eu?eu.push(n):eu=[n]:$c=n}function yI(){if($c){var n=$c,e=eu;if(eu=$c=null,aT(n),e)for(n=0;n<e.length;n++)aT(e[n])}}function _I(n,e){return n(e)}function xI(){}var o_=!1;function AI(n,e,t){if(o_)return n(e,t);o_=!0;try{return _I(n,e,t)}finally{o_=!1,($c!==null||eu!==null)&&(xI(),yI())}}function bf(n,e){var t=n.stateNode;if(t===null)return null;var r=kv(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ue(231,e,typeof t));return t}var qx=!1;if(ws)try{var Ed={};Object.defineProperty(Ed,"passive",{get:function(){qx=!0}}),window.addEventListener("test",Ed,Ed),window.removeEventListener("test",Ed,Ed)}catch{qx=!1}function SH(n,e,t,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(f){this.onError(f)}}var Qd=!1,_g=null,xg=!1,Kx=null,wH={onError:function(n){Qd=!0,_g=n}};function CH(n,e,t,r,i,a,s,o,l){Qd=!1,_g=null,SH.apply(wH,arguments)}function EH(n,e,t,r,i,a,s,o,l){if(CH.apply(this,arguments),Qd){if(Qd){var c=_g;Qd=!1,_g=null}else throw Error(Ue(198));xg||(xg=!0,Kx=c)}}function Hl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function SI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function sT(n){if(Hl(n)!==n)throw Error(Ue(188))}function MH(n){var e=n.alternate;if(!e){if(e=Hl(n),e===null)throw Error(Ue(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return sT(i),n;if(a===r)return sT(i),e;a=a.sibling}throw Error(Ue(188))}if(t.return!==r.return)t=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===t){s=!0,t=i,r=a;break}if(o===r){s=!0,r=i,t=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===t){s=!0,t=a,r=i;break}if(o===r){s=!0,r=a,t=i;break}o=o.sibling}if(!s)throw Error(Ue(189))}}if(t.alternate!==r)throw Error(Ue(190))}if(t.tag!==3)throw Error(Ue(188));return t.stateNode.current===t?n:e}function wI(n){return n=MH(n),n!==null?CI(n):null}function CI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=CI(n);if(e!==null)return e;n=n.sibling}return null}var EI=br.unstable_scheduleCallback,oT=br.unstable_cancelCallback,TH=br.unstable_shouldYield,bH=br.unstable_requestPaint,Gn=br.unstable_now,PH=br.unstable_getCurrentPriorityLevel,u1=br.unstable_ImmediatePriority,MI=br.unstable_UserBlockingPriority,Ag=br.unstable_NormalPriority,RH=br.unstable_LowPriority,TI=br.unstable_IdlePriority,Lv=null,Ga=null;function IH(n){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(Lv,n,void 0,(n.current.flags&128)===128)}catch{}}var _a=Math.clz32?Math.clz32:LH,FH=Math.log,BH=Math.LN2;function LH(n){return n>>>=0,n===0?32:31-(FH(n)/BH|0)|0}var Am=64,Sm=4194304;function Vd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Sg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,s=t&268435455;if(s!==0){var o=s&~i;o!==0?r=Vd(o):(a&=s,a!==0&&(r=Vd(a)))}else s=t&~i,s!==0?r=Vd(s):a!==0&&(r=Vd(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-_a(e),i=1<<t,r|=n[t],e&=~i;return r}function DH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UH(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var s=31-_a(a),o=1<<s,l=i[s];l===-1?(!(o&t)||o&r)&&(i[s]=DH(o,e)):l<=e&&(n.expiredLanes|=o),a&=~o}}function Yx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function l_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function hh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-_a(e),n[e]=t}function OH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-_a(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function d1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-_a(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var un=0;function bI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var PI,f1,RI,II,FI,Qx=!1,wm=[],lo=null,co=null,uo=null,Pf=new Map,Rf=new Map,Zs=[],kH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lT(n,e){switch(n){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Pf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rf.delete(e.pointerId)}}function Md(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=mh(e),e!==null&&f1(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function NH(n,e,t,r,i){switch(e){case"focusin":return lo=Md(lo,n,e,t,r,i),!0;case"dragenter":return co=Md(co,n,e,t,r,i),!0;case"mouseover":return uo=Md(uo,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return Pf.set(a,Md(Pf.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rf.set(a,Md(Rf.get(a)||null,n,e,t,r,i)),!0}return!1}function BI(n){var e=pl(n.target);if(e!==null){var t=Hl(e);if(t!==null){if(e=t.tag,e===13){if(e=SI(t),e!==null){n.blockedOn=e,FI(n.priority,function(){RI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $m(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Zx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);jx=r,t.target.dispatchEvent(r),jx=null}else return e=mh(t),e!==null&&f1(e),n.blockedOn=t,!1;e.shift()}return!0}function cT(n,e,t){$m(n)&&t.delete(e)}function zH(){Qx=!1,lo!==null&&$m(lo)&&(lo=null),co!==null&&$m(co)&&(co=null),uo!==null&&$m(uo)&&(uo=null),Pf.forEach(cT),Rf.forEach(cT)}function Td(n,e){n.blockedOn===e&&(n.blockedOn=null,Qx||(Qx=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,zH)))}function If(n){function e(i){return Td(i,n)}if(0<wm.length){Td(wm[0],n);for(var t=1;t<wm.length;t++){var r=wm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(lo!==null&&Td(lo,n),co!==null&&Td(co,n),uo!==null&&Td(uo,n),Pf.forEach(e),Rf.forEach(e),t=0;t<Zs.length;t++)r=Zs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Zs.length&&(t=Zs[0],t.blockedOn===null);)BI(t),t.blockedOn===null&&Zs.shift()}var tu=bs.ReactCurrentBatchConfig;function VH(n,e,t,r){var i=un,a=tu.transition;tu.transition=null;try{un=1,h1(n,e,t,r)}finally{un=i,tu.transition=a}}function GH(n,e,t,r){var i=un,a=tu.transition;tu.transition=null;try{un=4,h1(n,e,t,r)}finally{un=i,tu.transition=a}}function h1(n,e,t,r){var i=Zx(n,e,t,r);if(i===null)y_(n,e,r,wg,t),lT(n,r);else if(NH(i,n,e,t,r))r.stopPropagation();else if(lT(n,r),e&4&&-1<kH.indexOf(n)){for(;i!==null;){var a=mh(i);if(a!==null&&PI(a),a=Zx(n,e,t,r),a===null&&y_(n,e,r,wg,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else y_(n,e,r,null,t)}var wg=null;function Zx(n,e,t,r){if(wg=null,n=c1(r),n=pl(n),n!==null)if(e=Hl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=SI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return wg=n,null}function LI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PH()){case u1:return 1;case MI:return 4;case Ag:case RH:return 16;case TI:return 536870912;default:return 16}default:return 16}}var eo=null,p1=null,eg=null;function DI(){if(eg)return eg;var n,e=p1,t=e.length,r,i="value"in eo?eo.value:eo.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[a-r];r++);return eg=i.slice(n,1<r?1-r:void 0)}function tg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Cm(){return!0}function uT(){return!1}function Rr(n){function e(t,r,i,a,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cm:uT,this.isPropagationStopped=uT,this}return Bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Cm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Cm)},persist:function(){},isPersistent:Cm}),e}var Vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m1=Rr(Vu),ph=Bn({},Vu,{view:0,detail:0}),HH=Rr(ph),c_,u_,bd,Dv=Bn({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bd&&(bd&&n.type==="mousemove"?(c_=n.screenX-bd.screenX,u_=n.screenY-bd.screenY):u_=c_=0,bd=n),c_)},movementY:function(n){return"movementY"in n?n.movementY:u_}}),dT=Rr(Dv),WH=Bn({},Dv,{dataTransfer:0}),XH=Rr(WH),jH=Bn({},ph,{relatedTarget:0}),d_=Rr(jH),JH=Bn({},Vu,{animationName:0,elapsedTime:0,pseudoElement:0}),qH=Rr(JH),KH=Bn({},Vu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YH=Rr(KH),QH=Bn({},Vu,{data:0}),fT=Rr(QH),ZH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=e5[n])?!!e[n]:!1}function g1(){return t5}var n5=Bn({},ph,{key:function(n){if(n.key){var e=ZH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=tg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g1,charCode:function(n){return n.type==="keypress"?tg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?tg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i5=Rr(n5),r5=Bn({},Dv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hT=Rr(r5),a5=Bn({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g1}),s5=Rr(a5),o5=Bn({},Vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),l5=Rr(o5),c5=Bn({},Dv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u5=Rr(c5),d5=[9,13,27,32],v1=ws&&"CompositionEvent"in window,Zd=null;ws&&"documentMode"in document&&(Zd=document.documentMode);var f5=ws&&"TextEvent"in window&&!Zd,UI=ws&&(!v1||Zd&&8<Zd&&11>=Zd),pT=" ",mT=!1;function OI(n,e){switch(n){case"keyup":return d5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vc=!1;function h5(n,e){switch(n){case"compositionend":return kI(e);case"keypress":return e.which!==32?null:(mT=!0,pT);case"textInput":return n=e.data,n===pT&&mT?null:n;default:return null}}function p5(n,e){if(Vc)return n==="compositionend"||!v1&&OI(n,e)?(n=DI(),eg=p1=eo=null,Vc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UI&&e.locale!=="ko"?null:e.data;default:return null}}var m5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!m5[n.type]:e==="textarea"}function NI(n,e,t,r){vI(r),e=Cg(e,"onChange"),0<e.length&&(t=new m1("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var $d=null,Ff=null;function g5(n){YI(n,0)}function Uv(n){var e=Wc(n);if(uI(e))return n}function v5(n,e){if(n==="change")return e}var zI=!1;if(ws){var f_;if(ws){var h_="oninput"in document;if(!h_){var vT=document.createElement("div");vT.setAttribute("oninput","return;"),h_=typeof vT.oninput=="function"}f_=h_}else f_=!1;zI=f_&&(!document.documentMode||9<document.documentMode)}function yT(){$d&&($d.detachEvent("onpropertychange",VI),Ff=$d=null)}function VI(n){if(n.propertyName==="value"&&Uv(Ff)){var e=[];NI(e,Ff,n,c1(n)),AI(g5,e)}}function y5(n,e,t){n==="focusin"?(yT(),$d=e,Ff=t,$d.attachEvent("onpropertychange",VI)):n==="focusout"&&yT()}function _5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uv(Ff)}function x5(n,e){if(n==="click")return Uv(e)}function A5(n,e){if(n==="input"||n==="change")return Uv(e)}function S5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qa=typeof Object.is=="function"?Object.is:S5;function Bf(n,e){if(qa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Lx.call(e,i)||!qa(n[i],e[i]))return!1}return!0}function _T(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xT(n,e){var t=_T(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=_T(t)}}function GI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function HI(){for(var n=window,e=yg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=yg(n.document)}return e}function y1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function w5(n){var e=HI(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GI(t.ownerDocument.documentElement,t)){if(r!==null&&y1(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=xT(t,a);var s=xT(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var C5=ws&&"documentMode"in document&&11>=document.documentMode,Gc=null,$x=null,ef=null,eA=!1;function AT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;eA||Gc==null||Gc!==yg(r)||(r=Gc,"selectionStart"in r&&y1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ef&&Bf(ef,r)||(ef=r,r=Cg($x,"onSelect"),0<r.length&&(e=new m1("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Gc)))}function Em(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Hc={animationend:Em("Animation","AnimationEnd"),animationiteration:Em("Animation","AnimationIteration"),animationstart:Em("Animation","AnimationStart"),transitionend:Em("Transition","TransitionEnd")},p_={},WI={};ws&&(WI=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function Ov(n){if(p_[n])return p_[n];if(!Hc[n])return n;var e=Hc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in WI)return p_[n]=e[t];return n}var XI=Ov("animationend"),jI=Ov("animationiteration"),JI=Ov("animationstart"),qI=Ov("transitionend"),KI=new Map,ST="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(n,e){KI.set(n,e),Gl(e,[n])}for(var m_=0;m_<ST.length;m_++){var g_=ST[m_],E5=g_.toLowerCase(),M5=g_[0].toUpperCase()+g_.slice(1);To(E5,"on"+M5)}To(XI,"onAnimationEnd");To(jI,"onAnimationIteration");To(JI,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(qI,"onTransitionEnd");_u("onMouseEnter",["mouseout","mouseover"]);_u("onMouseLeave",["mouseout","mouseover"]);_u("onPointerEnter",["pointerout","pointerover"]);_u("onPointerLeave",["pointerout","pointerover"]);Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function wT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,EH(r,e,void 0,n),n.currentTarget=null}function YI(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;wT(i,o,c),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;wT(i,o,c),a=l}}}if(xg)throw n=Kx,xg=!1,Kx=null,n}function vn(n,e){var t=e[rA];t===void 0&&(t=e[rA]=new Set);var r=n+"__bubble";t.has(r)||(QI(e,n,2,!1),t.add(r))}function v_(n,e,t){var r=0;e&&(r|=4),QI(t,n,r,e)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function Lf(n){if(!n[Mm]){n[Mm]=!0,aI.forEach(function(t){t!=="selectionchange"&&(T5.has(t)||v_(t,!1,n),v_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Mm]||(e[Mm]=!0,v_("selectionchange",!1,e))}}function QI(n,e,t,r){switch(LI(e)){case 1:var i=VH;break;case 4:i=GH;break;default:i=h1}t=i.bind(null,e,t,n),i=void 0,!qx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function y_(n,e,t,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=pl(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}AI(function(){var c=a,f=c1(t),p=[];e:{var h=KI.get(n);if(h!==void 0){var m=m1,v=n;switch(n){case"keypress":if(tg(t)===0)break e;case"keydown":case"keyup":m=i5;break;case"focusin":v="focus",m=d_;break;case"focusout":v="blur",m=d_;break;case"beforeblur":case"afterblur":m=d_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=dT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=s5;break;case XI:case jI:case JI:m=qH;break;case qI:m=l5;break;case"scroll":m=HH;break;case"wheel":m=u5;break;case"copy":case"cut":case"paste":m=YH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=hT}var x=(e&4)!==0,_=!x&&n==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var A=c,S;A!==null;){S=A;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,g!==null&&(C=bf(A,g),C!=null&&x.push(Df(A,C,S)))),_)break;A=A.return}0<x.length&&(h=new m(h,v,null,t,f),p.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",h&&t!==jx&&(v=t.relatedTarget||t.fromElement)&&(pl(v)||v[Cs]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?pl(v):null,v!==null&&(_=Hl(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=dT,C="onMouseLeave",g="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(x=hT,C="onPointerLeave",g="onPointerEnter",A="pointer"),_=m==null?h:Wc(m),S=v==null?h:Wc(v),h=new x(C,A+"leave",m,t,f),h.target=_,h.relatedTarget=S,C=null,pl(f)===c&&(x=new x(g,A+"enter",v,t,f),x.target=S,x.relatedTarget=_,C=x),_=C,m&&v)t:{for(x=m,g=v,A=0,S=x;S;S=Mc(S))A++;for(S=0,C=g;C;C=Mc(C))S++;for(;0<A-S;)x=Mc(x),A--;for(;0<S-A;)g=Mc(g),S--;for(;A--;){if(x===g||g!==null&&x===g.alternate)break t;x=Mc(x),g=Mc(g)}x=null}else x=null;m!==null&&CT(p,h,m,x,!1),v!==null&&_!==null&&CT(p,_,v,x,!0)}}e:{if(h=c?Wc(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var T=v5;else if(gT(h))if(zI)T=A5;else{T=_5;var M=y5}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=x5);if(T&&(T=T(n,c))){NI(p,T,t,f);break e}M&&M(n,h,c),n==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&Vx(h,"number",h.value)}switch(M=c?Wc(c):window,n){case"focusin":(gT(M)||M.contentEditable==="true")&&(Gc=M,$x=c,ef=null);break;case"focusout":ef=$x=Gc=null;break;case"mousedown":eA=!0;break;case"contextmenu":case"mouseup":case"dragend":eA=!1,AT(p,t,f);break;case"selectionchange":if(C5)break;case"keydown":case"keyup":AT(p,t,f)}var b;if(v1)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Vc?OI(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(UI&&t.locale!=="ko"&&(Vc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Vc&&(b=DI()):(eo=f,p1="value"in eo?eo.value:eo.textContent,Vc=!0)),M=Cg(c,L),0<M.length&&(L=new fT(L,n,null,t,f),p.push({event:L,listeners:M}),b?L.data=b:(b=kI(t),b!==null&&(L.data=b)))),(b=f5?h5(n,t):p5(n,t))&&(c=Cg(c,"onBeforeInput"),0<c.length&&(f=new fT("onBeforeInput","beforeinput",null,t,f),p.push({event:f,listeners:c}),f.data=b))}YI(p,e)})}function Df(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Cg(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=bf(n,t),a!=null&&r.unshift(Df(n,a,i)),a=bf(n,e),a!=null&&r.push(Df(n,a,i))),n=n.return}return r}function Mc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function CT(n,e,t,r,i){for(var a=e._reactName,s=[];t!==null&&t!==r;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=bf(t,a),l!=null&&s.unshift(Df(t,l,o))):i||(l=bf(t,a),l!=null&&s.push(Df(t,l,o)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var b5=/\r\n?/g,P5=/\u0000|\uFFFD/g;function ET(n){return(typeof n=="string"?n:""+n).replace(b5,`
`).replace(P5,"")}function Tm(n,e,t){if(e=ET(e),ET(n)!==e&&t)throw Error(Ue(425))}function Eg(){}var tA=null;function nA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iA=typeof setTimeout=="function"?setTimeout:void 0,R5=typeof clearTimeout=="function"?clearTimeout:void 0,MT=typeof Promise=="function"?Promise:void 0,I5=typeof queueMicrotask=="function"?queueMicrotask:typeof MT<"u"?function(n){return MT.resolve(null).then(n).catch(F5)}:iA;function F5(n){setTimeout(function(){throw n})}function __(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),If(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);If(e)}function vs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function TT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gu=Math.random().toString(36).slice(2),La="__reactFiber$"+Gu,Uf="__reactProps$"+Gu,Cs="__reactContainer$"+Gu,rA="__reactEvents$"+Gu,B5="__reactListeners$"+Gu,L5="__reactHandles$"+Gu;function pl(n){var e=n[La];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Cs]||t[La]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=TT(n);n!==null;){if(t=n[La])return t;n=TT(n)}return e}n=t,t=n.parentNode}return null}function mh(n){return n=n[La]||n[Cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Wc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ue(33))}function kv(n){return n[Uf]||null}var aA=[],Xc=-1;function bo(n){return{current:n}}function xn(n){0>Xc||(n.current=aA[Xc],aA[Xc]=null,Xc--)}function mn(n,e){Xc++,aA[Xc]=n.current,n.current=e}var Ao={},Bi=bo(Ao),cr=bo(!1),Rl=Ao;function xu(n,e){var t=n.type.contextTypes;if(!t)return Ao;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ur(n){return n=n.childContextTypes,n!=null}function Mg(){xn(cr),xn(Bi)}function bT(n,e,t){if(Bi.current!==Ao)throw Error(Ue(168));mn(Bi,e),mn(cr,t)}function ZI(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ue(108,yH(n)||"Unknown",i));return Bn({},t,r)}function Tg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ao,Rl=Bi.current,mn(Bi,n),mn(cr,cr.current),!0}function PT(n,e,t){var r=n.stateNode;if(!r)throw Error(Ue(169));t?(n=ZI(n,e,Rl),r.__reactInternalMemoizedMergedChildContext=n,xn(cr),xn(Bi),mn(Bi,n)):xn(cr),mn(cr,t)}var fs=null,Nv=!1,x_=!1;function $I(n){fs===null?fs=[n]:fs.push(n)}function D5(n){Nv=!0,$I(n)}function Po(){if(!x_&&fs!==null){x_=!0;var n=0,e=un;try{var t=fs;for(un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}fs=null,Nv=!1}catch(i){throw fs!==null&&(fs=fs.slice(n+1)),EI(u1,Po),i}finally{un=e,x_=!1}}return null}var U5=bs.ReactCurrentBatchConfig;function ha(n,e){if(n&&n.defaultProps){e=Bn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var bg=bo(null),Pg=null,jc=null,_1=null;function x1(){_1=jc=Pg=null}function A1(n){var e=bg.current;xn(bg),n._currentValue=e}function sA(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function nu(n,e){Pg=n,_1=jc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Cr=!0),n.firstContext=null)}function ra(n){var e=n._currentValue;if(_1!==n)if(n={context:n,memoizedValue:e,next:null},jc===null){if(Pg===null)throw Error(Ue(308));jc=n,Pg.dependencies={lanes:0,firstContext:n}}else jc=jc.next=n;return e}var Oa=null,Ks=!1;function S1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function As(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function fo(n,e){var t=n.updateQueue;t!==null&&(t=t.shared,Yn!==null&&n.mode&1&&!(Yt&2)?(n=t.interleaved,n===null?(e.next=e,Oa===null?Oa=[t]:Oa.push(t)):(e.next=n.next,n.next=e),t.interleaved=e):(n=t.pending,n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e))}function ng(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,d1(n,t)}}function RT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=s:a=a.next=s,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Rg(n,e,t,r){var i=n.updateQueue;Ks=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var f=n.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==s&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=l))}if(a!==null){var p=i.baseState;s=0,f=c=l=null,o=a;do{var h=o.lane,m=o.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=n,x=o;switch(h=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){p=v.call(m,p,h);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(m,p,h):v,h==null)break e;p=Bn({},p,h);break e;case 2:Ks=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=m,l=p):f=f.next=m,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Eu|=s,n.lanes=s,n.memoizedState=p}}function IT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ue(191,i));i.call(r)}}}var tF=new rI.Component().refs;function oA(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Bn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var zv={isMounted:function(n){return(n=n._reactInternals)?Hl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ji(),i=po(n),a=As(r,i);a.payload=e,t!=null&&(a.callback=t),fo(n,a),e=ia(n,i,r),e!==null&&ng(e,n,i)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ji(),i=po(n),a=As(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),fo(n,a),e=ia(n,i,r),e!==null&&ng(e,n,i)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ji(),r=po(n),i=As(t,r);i.tag=2,e!=null&&(i.callback=e),fo(n,i),e=ia(n,r,t),e!==null&&ng(e,n,r)}};function FT(n,e,t,r,i,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Bf(t,r)||!Bf(i,a):!0}function nF(n,e,t){var r=!1,i=Ao,a=e.contextType;return typeof a=="object"&&a!==null?a=ra(a):(i=ur(e)?Rl:Bi.current,r=e.contextTypes,a=(r=r!=null)?xu(n,i):Ao),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zv,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function BT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&zv.enqueueReplaceState(e,e.state,null)}function lA(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=tF,S1(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=ra(a):(a=ur(e)?Rl:Bi.current,i.context=xu(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oA(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zv.enqueueReplaceState(i,i.state,null),Rg(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}var Jc=[],qc=0,Ig=null,Fg=0,Jr=[],qr=0,Il=null,ys=1,_s="";function rl(n,e){Jc[qc++]=Fg,Jc[qc++]=Ig,Ig=n,Fg=e}function iF(n,e,t){Jr[qr++]=ys,Jr[qr++]=_s,Jr[qr++]=Il,Il=n;var r=ys;n=_s;var i=32-_a(r)-1;r&=~(1<<i),t+=1;var a=32-_a(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ys=1<<32-_a(e)+i|t<<i|r,_s=a+n}else ys=1<<a|t<<i|r,_s=n}function w1(n){n.return!==null&&(rl(n,1),iF(n,1,0))}function C1(n){for(;n===Ig;)Ig=Jc[--qc],Jc[qc]=null,Fg=Jc[--qc],Jc[qc]=null;for(;n===Il;)Il=Jr[--qr],Jr[qr]=null,_s=Jr[--qr],Jr[qr]=null,ys=Jr[--qr],Jr[qr]=null}var Mr=null,or=null,Mn=!1,ma=null;function rF(n,e){var t=$r(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function LT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Mr=n,or=vs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Mr=n,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Il!==null?{id:ys,overflow:_s}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=$r(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Mr=n,or=null,!0):!1;default:return!1}}function cA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function uA(n){if(Mn){var e=or;if(e){var t=e;if(!LT(n,e)){if(cA(n))throw Error(Ue(418));e=vs(t.nextSibling);var r=Mr;e&&LT(n,e)?rF(r,t):(n.flags=n.flags&-4097|2,Mn=!1,Mr=n)}}else{if(cA(n))throw Error(Ue(418));n.flags=n.flags&-4097|2,Mn=!1,Mr=n}}}function DT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Mr=n}function Pd(n){if(n!==Mr)return!1;if(!Mn)return DT(n),Mn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!nA(n.type,n.memoizedProps)),e&&(e=or)){if(cA(n)){for(n=or;n;)n=vs(n.nextSibling);throw Error(Ue(418))}for(;e;)rF(n,e),e=vs(e.nextSibling)}if(DT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ue(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){or=vs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}or=null}}else or=Mr?vs(n.stateNode.nextSibling):null;return!0}function Au(){or=Mr=null,Mn=!1}function E1(n){ma===null?ma=[n]:ma.push(n)}function Rd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ue(309));var r=t.stateNode}if(!r)throw Error(Ue(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;o===tF&&(o=i.refs={}),s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof n!="string")throw Error(Ue(284));if(!t._owner)throw Error(Ue(290,n))}return n}function bm(n,e){throw n=Object.prototype.toString.call(e),Error(Ue(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function UT(n){var e=n._init;return e(n._payload)}function aF(n){function e(g,A){if(n){var S=g.deletions;S===null?(g.deletions=[A],g.flags|=16):S.push(A)}}function t(g,A){if(!n)return null;for(;A!==null;)e(g,A),A=A.sibling;return null}function r(g,A){for(g=new Map;A!==null;)A.key!==null?g.set(A.key,A):g.set(A.index,A),A=A.sibling;return g}function i(g,A){return g=So(g,A),g.index=0,g.sibling=null,g}function a(g,A,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<A?(g.flags|=2,A):S):(g.flags|=2,A)):(g.flags|=1048576,A)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,A,S,C){return A===null||A.tag!==6?(A=M_(S,g.mode,C),A.return=g,A):(A=i(A,S),A.return=g,A)}function l(g,A,S,C){var T=S.type;return T===zc?f(g,A,S.props.children,C,S.key):A!==null&&(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===qs&&UT(T)===A.type)?(C=i(A,S.props),C.ref=Rd(g,A,S),C.return=g,C):(C=og(S.type,S.key,S.props,null,g.mode,C),C.ref=Rd(g,A,S),C.return=g,C)}function c(g,A,S,C){return A===null||A.tag!==4||A.stateNode.containerInfo!==S.containerInfo||A.stateNode.implementation!==S.implementation?(A=T_(S,g.mode,C),A.return=g,A):(A=i(A,S.children||[]),A.return=g,A)}function f(g,A,S,C,T){return A===null||A.tag!==7?(A=El(S,g.mode,C,T),A.return=g,A):(A=i(A,S),A.return=g,A)}function p(g,A,S){if(typeof A=="string"&&A!==""||typeof A=="number")return A=M_(""+A,g.mode,S),A.return=g,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ym:return S=og(A.type,A.key,A.props,null,g.mode,S),S.ref=Rd(g,null,A),S.return=g,S;case Nc:return A=T_(A,g.mode,S),A.return=g,A;case qs:var C=A._init;return p(g,C(A._payload),S)}if(zd(A)||Cd(A))return A=El(A,g.mode,S,null),A.return=g,A;bm(g,A)}return null}function h(g,A,S,C){var T=A!==null?A.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:o(g,A,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ym:return S.key===T?l(g,A,S,C):null;case Nc:return S.key===T?c(g,A,S,C):null;case qs:return T=S._init,h(g,A,T(S._payload),C)}if(zd(S)||Cd(S))return T!==null?null:f(g,A,S,C,null);bm(g,S)}return null}function m(g,A,S,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(S)||null,o(A,g,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ym:return g=g.get(C.key===null?S:C.key)||null,l(A,g,C,T);case Nc:return g=g.get(C.key===null?S:C.key)||null,c(A,g,C,T);case qs:var M=C._init;return m(g,A,S,M(C._payload),T)}if(zd(C)||Cd(C))return g=g.get(S)||null,f(A,g,C,T,null);bm(A,C)}return null}function v(g,A,S,C){for(var T=null,M=null,b=A,L=A=0,R=null;b!==null&&L<S.length;L++){b.index>L?(R=b,b=null):R=b.sibling;var F=h(g,b,S[L],C);if(F===null){b===null&&(b=R);break}n&&b&&F.alternate===null&&e(g,b),A=a(F,A,L),M===null?T=F:M.sibling=F,M=F,b=R}if(L===S.length)return t(g,b),Mn&&rl(g,L),T;if(b===null){for(;L<S.length;L++)b=p(g,S[L],C),b!==null&&(A=a(b,A,L),M===null?T=b:M.sibling=b,M=b);return Mn&&rl(g,L),T}for(b=r(g,b);L<S.length;L++)R=m(b,g,L,S[L],C),R!==null&&(n&&R.alternate!==null&&b.delete(R.key===null?L:R.key),A=a(R,A,L),M===null?T=R:M.sibling=R,M=R);return n&&b.forEach(function(O){return e(g,O)}),Mn&&rl(g,L),T}function x(g,A,S,C){var T=Cd(S);if(typeof T!="function")throw Error(Ue(150));if(S=T.call(S),S==null)throw Error(Ue(151));for(var M=T=null,b=A,L=A=0,R=null,F=S.next();b!==null&&!F.done;L++,F=S.next()){b.index>L?(R=b,b=null):R=b.sibling;var O=h(g,b,F.value,C);if(O===null){b===null&&(b=R);break}n&&b&&O.alternate===null&&e(g,b),A=a(O,A,L),M===null?T=O:M.sibling=O,M=O,b=R}if(F.done)return t(g,b),Mn&&rl(g,L),T;if(b===null){for(;!F.done;L++,F=S.next())F=p(g,F.value,C),F!==null&&(A=a(F,A,L),M===null?T=F:M.sibling=F,M=F);return Mn&&rl(g,L),T}for(b=r(g,b);!F.done;L++,F=S.next())F=m(b,g,L,F.value,C),F!==null&&(n&&F.alternate!==null&&b.delete(F.key===null?L:F.key),A=a(F,A,L),M===null?T=F:M.sibling=F,M=F);return n&&b.forEach(function(X){return e(g,X)}),Mn&&rl(g,L),T}function _(g,A,S,C){if(typeof S=="object"&&S!==null&&S.type===zc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ym:e:{for(var T=S.key,M=A;M!==null;){if(M.key===T){if(T=S.type,T===zc){if(M.tag===7){t(g,M.sibling),A=i(M,S.props.children),A.return=g,g=A;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===qs&&UT(T)===M.type){t(g,M.sibling),A=i(M,S.props),A.ref=Rd(g,M,S),A.return=g,g=A;break e}t(g,M);break}else e(g,M);M=M.sibling}S.type===zc?(A=El(S.props.children,g.mode,C,S.key),A.return=g,g=A):(C=og(S.type,S.key,S.props,null,g.mode,C),C.ref=Rd(g,A,S),C.return=g,g=C)}return s(g);case Nc:e:{for(M=S.key;A!==null;){if(A.key===M)if(A.tag===4&&A.stateNode.containerInfo===S.containerInfo&&A.stateNode.implementation===S.implementation){t(g,A.sibling),A=i(A,S.children||[]),A.return=g,g=A;break e}else{t(g,A);break}else e(g,A);A=A.sibling}A=T_(S,g.mode,C),A.return=g,g=A}return s(g);case qs:return M=S._init,_(g,A,M(S._payload),C)}if(zd(S))return v(g,A,S,C);if(Cd(S))return x(g,A,S,C);bm(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,A!==null&&A.tag===6?(t(g,A.sibling),A=i(A,S),A.return=g,g=A):(t(g,A),A=M_(S,g.mode,C),A.return=g,g=A),s(g)):t(g,A)}return _}var Su=aF(!0),sF=aF(!1),gh={},Ha=bo(gh),Of=bo(gh),kf=bo(gh);function ml(n){if(n===gh)throw Error(Ue(174));return n}function M1(n,e){switch(mn(kf,e),mn(Of,n),mn(Ha,gh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hx(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Hx(e,n)}xn(Ha),mn(Ha,e)}function wu(){xn(Ha),xn(Of),xn(kf)}function oF(n){ml(kf.current);var e=ml(Ha.current),t=Hx(e,n.type);e!==t&&(mn(Of,n),mn(Ha,t))}function T1(n){Of.current===n&&(xn(Ha),xn(Of))}var Rn=bo(0);function Bg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var A_=[];function b1(){for(var n=0;n<A_.length;n++)A_[n]._workInProgressVersionPrimary=null;A_.length=0}var ig=bs.ReactCurrentDispatcher,ta=bs.ReactCurrentBatchConfig,Cu=0,Nn=null,bi=null,ui=null,Lg=!1,tf=!1,Nf=0,O5=0;function Mi(){throw Error(Ue(321))}function P1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!qa(n[t],e[t]))return!1;return!0}function R1(n,e,t,r,i,a){if(Cu=a,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ig.current=n===null||n.memoizedState===null?V5:G5,n=t(r,i),tf){a=0;do{if(tf=!1,Nf=0,25<=a)throw Error(Ue(301));a+=1,ui=bi=null,e.updateQueue=null,ig.current=H5,n=t(r,i)}while(tf)}if(ig.current=Dg,e=bi!==null&&bi.next!==null,Cu=0,ui=bi=Nn=null,Lg=!1,e)throw Error(Ue(300));return n}function I1(){var n=Nf!==0;return Nf=0,n}function us(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?Nn.memoizedState=ui=n:ui=ui.next=n,ui}function Qa(){if(bi===null){var n=Nn.alternate;n=n!==null?n.memoizedState:null}else n=bi.next;var e=ui===null?Nn.memoizedState:ui.next;if(e!==null)ui=e,bi=n;else{if(n===null)throw Error(Ue(310));bi=n,n={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},ui===null?Nn.memoizedState=ui=n:ui=ui.next=n}return ui}function wl(n,e){return typeof e=="function"?e(n):e}function Pm(n){var e=Qa(),t=e.queue;if(t===null)throw Error(Ue(311));t.lastRenderedReducer=n;var r=bi,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,c=a;do{var f=c.lane;if((Cu&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=p,s=r):l=l.next=p,Nn.lanes|=f,Eu|=f}c=c.next}while(c!==null&&c!==a);l===null?s=r:l.next=o,qa(r,e.memoizedState)||(Cr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,Nn.lanes|=a,Eu|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Rm(n){var e=Qa(),t=e.queue;if(t===null)throw Error(Ue(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do a=n(a,s.action),s=s.next;while(s!==i);qa(a,e.memoizedState)||(Cr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function lF(){}function cF(n,e){var t=Nn,r=Qa(),i=e(),a=!qa(r.memoizedState,i);if(a&&(r.memoizedState=i,Cr=!0),r=r.queue,Vf(fF.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||ui!==null&&ui.memoizedState.tag&1){if(t.flags|=2048,zf(9,dF.bind(null,t,r,i,e),void 0,null),Yn===null)throw Error(Ue(349));Cu&30||uF(t,e,i)}return i}function uF(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function dF(n,e,t,r){e.value=t,e.getSnapshot=r,hF(e)&&ia(n,1,-1)}function fF(n,e,t){return t(function(){hF(e)&&ia(n,1,-1)})}function hF(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qa(n,t)}catch{return!0}}function S_(n){var e=us();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:n},e.queue=n,n=n.dispatch=z5.bind(null,Nn,n),[e.memoizedState,n]}function zf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function pF(){return Qa().memoizedState}function rg(n,e,t,r){var i=us();Nn.flags|=n,i.memoizedState=zf(1|e,t,void 0,r===void 0?null:r)}function Vv(n,e,t,r){var i=Qa();r=r===void 0?null:r;var a=void 0;if(bi!==null){var s=bi.memoizedState;if(a=s.destroy,r!==null&&P1(r,s.deps)){i.memoizedState=zf(e,t,a,r);return}}Nn.flags|=n,i.memoizedState=zf(1|e,t,a,r)}function w_(n,e){return rg(8390656,8,n,e)}function Vf(n,e){return Vv(2048,8,n,e)}function mF(n,e){return Vv(4,2,n,e)}function gF(n,e){return Vv(4,4,n,e)}function vF(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function yF(n,e,t){return t=t!=null?t.concat([n]):null,Vv(4,4,vF.bind(null,e,n),t)}function F1(){}function _F(n,e){var t=Qa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&P1(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function xF(n,e){var t=Qa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&P1(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function k5(n,e){var t=un;un=t!==0&&4>t?t:4,n(!0);var r=ta.transition;ta.transition={};try{n(!1),e()}finally{un=t,ta.transition=r}}function AF(){return Qa().memoizedState}function N5(n,e,t){var r=po(n);t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},SF(n)?wF(e,t):(CF(n,e,t),t=ji(),n=ia(n,r,t),n!==null&&EF(n,e,r))}function z5(n,e,t){var r=po(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(SF(n))wF(e,i);else{CF(n,e,i);var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,t);if(i.hasEagerState=!0,i.eagerState=o,qa(o,s))return}catch{}finally{}t=ji(),n=ia(n,r,t),n!==null&&EF(n,e,r)}}function SF(n){var e=n.alternate;return n===Nn||e!==null&&e===Nn}function wF(n,e){tf=Lg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function CF(n,e,t){Yn!==null&&n.mode&1&&!(Yt&2)?(n=e.interleaved,n===null?(t.next=t,Oa===null?Oa=[e]:Oa.push(e)):(t.next=n.next,n.next=t),e.interleaved=t):(n=e.pending,n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t)}function EF(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,d1(n,t)}}var Dg={readContext:ra,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},V5={readContext:ra,useCallback:function(n,e){return us().memoizedState=[n,e===void 0?null:e],n},useContext:ra,useEffect:w_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,rg(4194308,4,vF.bind(null,e,n),t)},useLayoutEffect:function(n,e){return rg(4194308,4,n,e)},useInsertionEffect:function(n,e){return rg(4,2,n,e)},useMemo:function(n,e){var t=us();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=us();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=N5.bind(null,Nn,n),[r.memoizedState,n]},useRef:function(n){var e=us();return n={current:n},e.memoizedState=n},useState:S_,useDebugValue:F1,useDeferredValue:function(n){var e=S_(n),t=e[0],r=e[1];return w_(function(){var i=ta.transition;ta.transition={};try{r(n)}finally{ta.transition=i}},[n]),t},useTransition:function(){var n=S_(!1),e=n[0];return n=k5.bind(null,n[1]),us().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Nn,i=us();if(Mn){if(t===void 0)throw Error(Ue(407));t=t()}else{if(t=e(),Yn===null)throw Error(Ue(349));Cu&30||uF(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,w_(fF.bind(null,r,a,n),[n]),r.flags|=2048,zf(9,dF.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=us(),e=Yn.identifierPrefix;if(Mn){var t=_s,r=ys;t=(r&~(1<<32-_a(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},G5={readContext:ra,useCallback:_F,useContext:ra,useEffect:Vf,useImperativeHandle:yF,useInsertionEffect:mF,useLayoutEffect:gF,useMemo:xF,useReducer:Pm,useRef:pF,useState:function(){return Pm(wl)},useDebugValue:F1,useDeferredValue:function(n){var e=Pm(wl),t=e[0],r=e[1];return Vf(function(){var i=ta.transition;ta.transition={};try{r(n)}finally{ta.transition=i}},[n]),t},useTransition:function(){var n=Pm(wl)[0],e=Qa().memoizedState;return[n,e]},useMutableSource:lF,useSyncExternalStore:cF,useId:AF,unstable_isNewReconciler:!1},H5={readContext:ra,useCallback:_F,useContext:ra,useEffect:Vf,useImperativeHandle:yF,useInsertionEffect:mF,useLayoutEffect:gF,useMemo:xF,useReducer:Rm,useRef:pF,useState:function(){return Rm(wl)},useDebugValue:F1,useDeferredValue:function(n){var e=Rm(wl),t=e[0],r=e[1];return Vf(function(){var i=ta.transition;ta.transition={};try{r(n)}finally{ta.transition=i}},[n]),t},useTransition:function(){var n=Rm(wl)[0],e=Qa().memoizedState;return[n,e]},useMutableSource:lF,useSyncExternalStore:cF,useId:AF,unstable_isNewReconciler:!1};function B1(n,e){try{var t="",r=e;do t+=vH(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i}}function dA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var W5=typeof WeakMap=="function"?WeakMap:Map;function MF(n,e,t){t=As(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){kg||(kg=!0,xA=r),dA(n,e)},t}function TF(n,e,t){t=As(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){dA(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){dA(n,e),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function OT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new W5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=r9.bind(null,n,e,t),e.then(n,n))}function kT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function NT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=As(-1,1),e.tag=2,fo(t,e))),t.lanes|=1),n)}var bF,fA,PF,RF;bF=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fA=function(){};PF=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ml(Ha.current);var a=null;switch(t){case"input":i=Nx(n,i),r=Nx(n,r),a=[];break;case"select":i=Bn({},i,{value:void 0}),r=Bn({},r,{value:void 0}),a=[];break;case"textarea":i=Gx(n,i),r=Gx(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Eg)}Wx(t,r);var s;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mf.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(a||(a=[]),a.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vn("scroll",n),a||o===l||(a=[])):(a=a||[]).push(c,l))}t&&(a=a||[]).push("style",t);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};RF=function(n,e,t,r){t!==r&&(e.flags|=4)};function Id(n,e){if(!Mn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ti(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function X5(n,e,t){var r=e.pendingProps;switch(C1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(e),null;case 1:return ur(e.type)&&Mg(),Ti(e),null;case 3:return r=e.stateNode,wu(),xn(cr),xn(Bi),b1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Pd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ma!==null&&(wA(ma),ma=null))),fA(n,e),Ti(e),null;case 5:T1(e);var i=ml(kf.current);if(t=e.type,n!==null&&e.stateNode!=null)PF(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ue(166));return Ti(e),null}if(n=ml(Ha.current),Pd(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[La]=e,r[Uf]=a,n=(e.mode&1)!==0,t){case"dialog":vn("cancel",r),vn("close",r);break;case"iframe":case"object":case"embed":vn("load",r);break;case"video":case"audio":for(i=0;i<Gd.length;i++)vn(Gd[i],r);break;case"source":vn("error",r);break;case"img":case"image":case"link":vn("error",r),vn("load",r);break;case"details":vn("toggle",r);break;case"input":tT(r,a),vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},vn("invalid",r);break;case"textarea":iT(r,a),vn("invalid",r)}Wx(t,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(Tm(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(Tm(r.textContent,o,n),i=["children",""+o]):Mf.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&vn("scroll",r)}switch(t){case"input":_m(r),nT(r,a,!0);break;case"textarea":_m(r),rT(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Eg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[La]=e,n[Uf]=r,bF(n,e,!1,!1),e.stateNode=n;e:{switch(s=Xx(t,r),t){case"dialog":vn("cancel",n),vn("close",n),i=r;break;case"iframe":case"object":case"embed":vn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Gd.length;i++)vn(Gd[i],n);i=r;break;case"source":vn("error",n),i=r;break;case"img":case"image":case"link":vn("error",n),vn("load",n),i=r;break;case"details":vn("toggle",n),i=r;break;case"input":tT(n,r),i=Nx(n,r),vn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Bn({},r,{value:void 0}),vn("invalid",n);break;case"textarea":iT(n,r),i=Gx(n,r),vn("invalid",n);break;default:i=r}Wx(t,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?gI(n,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pI(n,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Tf(n,l):typeof l=="number"&&Tf(n,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Mf.hasOwnProperty(a)?l!=null&&a==="onScroll"&&vn("scroll",n):l!=null&&a1(n,a,l,s))}switch(t){case"input":_m(n),nT(n,r,!1);break;case"textarea":_m(n),rT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+xo(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?Zc(n,!!r.multiple,a,!1):r.defaultValue!=null&&Zc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Eg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ti(e),null;case 6:if(n&&e.stateNode!=null)RF(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ue(166));if(t=ml(kf.current),ml(Ha.current),Pd(e)){if(r=e.stateNode,t=e.memoizedProps,r[La]=e,(a=r.nodeValue!==t)&&(n=Mr,n!==null))switch(s=(n.mode&1)!==0,n.tag){case 3:Tm(r.nodeValue,t,s);break;case 5:n.memoizedProps[void 0]!==!0&&Tm(r.nodeValue,t,s)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[La]=e,e.stateNode=r}return Ti(e),null;case 13:if(xn(Rn),r=e.memoizedState,Mn&&or!==null&&e.mode&1&&!(e.flags&128)){for(r=or;r;)r=vs(r.nextSibling);return Au(),e.flags|=98560,e}if(r!==null&&r.dehydrated!==null){if(r=Pd(e),n===null){if(!r)throw Error(Ue(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ue(317));r[La]=e}else Au(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;return Ti(e),null}return ma!==null&&(wA(ma),ma=null),e.flags&128?(e.lanes=t,e):(r=r!==null,t=!1,n===null?Pd(e):t=n.memoizedState!==null,r&&!t&&(e.child.flags|=8192,e.mode&1&&(n===null||Rn.current&1?ti===0&&(ti=3):N1())),e.updateQueue!==null&&(e.flags|=4),Ti(e),null);case 4:return wu(),fA(n,e),n===null&&Lf(e.stateNode.containerInfo),Ti(e),null;case 10:return A1(e.type._context),Ti(e),null;case 17:return ur(e.type)&&Mg(),Ti(e),null;case 19:if(xn(Rn),a=e.memoizedState,a===null)return Ti(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)Id(a,!1);else{if(ti!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Bg(n),s!==null){for(e.flags|=128,Id(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,n=s.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return mn(Rn,Rn.current&1|2),e.child}n=n.sibling}a.tail!==null&&Gn()>Mu&&(e.flags|=128,r=!0,Id(a,!1),e.lanes=4194304)}else{if(!r)if(n=Bg(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Id(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Mn)return Ti(e),null}else 2*Gn()-a.renderingStartTime>Mu&&t!==1073741824&&(e.flags|=128,r=!0,Id(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(t=a.last,t!==null?t.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Gn(),e.sibling=null,t=Rn.current,mn(Rn,r?t&1|2:t&1),e):(Ti(e),null);case 22:case 23:return k1(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xr&1073741824&&(Ti(e),e.subtreeFlags&6&&(e.flags|=8192)):Ti(e),null;case 24:return null;case 25:return null}throw Error(Ue(156,e.tag))}var j5=bs.ReactCurrentOwner,Cr=!1;function Gi(n,e,t,r){e.child=n===null?sF(e,null,t,r):Su(e,n.child,t,r)}function zT(n,e,t,r,i){t=t.render;var a=e.ref;return nu(e,i),r=R1(n,e,t,r,a,i),t=I1(),n!==null&&!Cr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Es(n,e,i)):(Mn&&t&&w1(e),e.flags|=1,Gi(n,e,r,i),e.child)}function VT(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!z1(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,IF(n,e,a,r,i)):(n=og(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,!(n.lanes&i)){var s=a.memoizedProps;if(t=t.compare,t=t!==null?t:Bf,t(s,r)&&n.ref===e.ref)return Es(n,e,i)}return e.flags|=1,n=So(a,r),n.ref=e.ref,n.return=e,e.child=n}function IF(n,e,t,r,i){if(n!==null&&Bf(n.memoizedProps,r)&&n.ref===e.ref)if(Cr=!1,(n.lanes&i)!==0)n.flags&131072&&(Cr=!0);else return e.lanes=n.lanes,Es(n,e,i);return hA(n,e,t,r,i)}function FF(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null},mn(Kc,xr),xr|=t;else if(t&1073741824)e.memoizedState={baseLanes:0,cachePool:null},r=a!==null?a.baseLanes:t,mn(Kc,xr),xr|=r;else return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null},e.updateQueue=null,mn(Kc,xr),xr|=n,null;else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,mn(Kc,xr),xr|=r;return Gi(n,e,i,t),e.child}function BF(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function hA(n,e,t,r,i){var a=ur(t)?Rl:Bi.current;return a=xu(e,a),nu(e,i),t=R1(n,e,t,r,a,i),r=I1(),n!==null&&!Cr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Es(n,e,i)):(Mn&&r&&w1(e),e.flags|=1,Gi(n,e,t,i),e.child)}function GT(n,e,t,r,i){if(ur(t)){var a=!0;Tg(e)}else a=!1;if(nu(e,i),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),nF(e,t,r),lA(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,c=t.contextType;typeof c=="object"&&c!==null?c=ra(c):(c=ur(t)?Rl:Bi.current,c=xu(e,c));var f=t.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==c)&&BT(e,s,r,c),Ks=!1;var h=e.memoizedState;s.state=h,Rg(e,r,s,i),l=e.memoizedState,o!==r||h!==l||cr.current||Ks?(typeof f=="function"&&(oA(e,t,f,r),l=e.memoizedState),(o=Ks||FT(e,t,o,r,h,l,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,eF(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:ha(e.type,o),s.props=c,p=e.pendingProps,h=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=ra(l):(l=ur(t)?Rl:Bi.current,l=xu(e,l));var m=t.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==p||h!==l)&&BT(e,s,r,l),Ks=!1,h=e.memoizedState,s.state=h,Rg(e,r,s,i);var v=e.memoizedState;o!==p||h!==v||cr.current||Ks?(typeof m=="function"&&(oA(e,t,m,r),v=e.memoizedState),(c=Ks||FT(e,t,c,r,h,v,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return pA(n,e,t,r,a,i)}function pA(n,e,t,r,i,a){BF(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&PT(e,t,!1),Es(n,e,a);r=e.stateNode,j5.current=e;var o=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=Su(e,n.child,null,a),e.child=Su(e,null,o,a)):Gi(n,e,o,a),e.memoizedState=r.state,i&&PT(e,t,!0),e.child}function LF(n){var e=n.stateNode;e.pendingContext?bT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&bT(n,e.context,!1),M1(n,e.containerInfo)}function HT(n,e,t,r,i){return Au(),E1(i),e.flags|=256,Gi(n,e,t,r),e.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Fm(n){return{baseLanes:n,cachePool:null}}function DF(n,e,t){var r=e.pendingProps,i=Rn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),mn(Rn,i&1),n===null)return uA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,n=r.fallback,a?(r=e.mode,a=e.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Vg(i,r,0,null),n=El(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=Fm(t),e.memoizedState=Im,n):mA(e,i));if(i=n.memoizedState,i!==null){if(o=i.dehydrated,o!==null){if(s)return e.flags&256?(e.flags&=-257,Bm(n,e,t,Error(Ue(422)))):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Vg({mode:"visible",children:r.children},i,0,null),a=El(a,i,t,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Su(e,n.child,null,t),e.child.memoizedState=Fm(t),e.memoizedState=Im,a);if(!(e.mode&1))e=Bm(n,e,t,null);else if(o.data==="$!")e=Bm(n,e,t,Error(Ue(419)));else if(r=(t&n.childLanes)!==0,Cr||r){if(r=Yn,r!==null){switch(t&-t){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}r=a&(r.suspendedLanes|t)?0:a,r!==0&&r!==i.retryLane&&(i.retryLane=r,ia(n,r,-1))}N1(),e=Bm(n,e,t,Error(Ue(421)))}else o.data==="$?"?(e.flags|=128,e.child=n.child,e=a9.bind(null,n),o._reactRetry=e,e=null):(t=i.treeContext,or=vs(o.nextSibling),Mr=e,Mn=!0,ma=null,t!==null&&(Jr[qr++]=ys,Jr[qr++]=_s,Jr[qr++]=Il,ys=t.id,_s=t.overflow,Il=e),e=mA(e,e.pendingProps.children),e.flags|=4096);return e}return a?(r=XT(n,e,r.children,r.fallback,t),a=e.child,i=n.child.memoizedState,a.memoizedState=i===null?Fm(t):{baseLanes:i.baseLanes|t,cachePool:null},a.childLanes=n.childLanes&~t,e.memoizedState=Im,r):(t=WT(n,e,r.children,t),e.memoizedState=null,t)}return a?(r=XT(n,e,r.children,r.fallback,t),a=e.child,i=n.child.memoizedState,a.memoizedState=i===null?Fm(t):{baseLanes:i.baseLanes|t,cachePool:null},a.childLanes=n.childLanes&~t,e.memoizedState=Im,r):(t=WT(n,e,r.children,t),e.memoizedState=null,t)}function mA(n,e){return e=Vg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function WT(n,e,t,r){var i=n.child;return n=i.sibling,t=So(i,{mode:"visible",children:t}),!(e.mode&1)&&(t.lanes=r),t.return=e,t.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=t}function XT(n,e,t,r,i){var a=e.mode;n=n.child;var s=n.sibling,o={mode:"hidden",children:t};return!(a&1)&&e.child!==n?(t=e.child,t.childLanes=0,t.pendingProps=o,e.deletions=null):(t=So(n,o),t.subtreeFlags=n.subtreeFlags&14680064),s!==null?r=So(s,r):(r=El(r,a,i,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function Bm(n,e,t,r){return r!==null&&E1(r),Su(e,n.child,null,t),n=mA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function jT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),sA(n.return,e,t)}function C_(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function UF(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Gi(n,e,r.children,t),r=Rn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jT(n,t,e);else if(n.tag===19)jT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(mn(Rn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Bg(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),C_(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Bg(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}C_(e,!0,t,null,a);break;case"together":C_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Es(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Eu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ue(153));if(e.child!==null){for(n=e.child,t=So(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=So(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function J5(n,e,t){switch(e.tag){case 3:LF(e),Au();break;case 5:oF(e);break;case 1:ur(e.type)&&Tg(e);break;case 4:M1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;mn(bg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mn(Rn,Rn.current&1),e.flags|=128,null):t&e.child.childLanes?DF(n,e,t):(mn(Rn,Rn.current&1),n=Es(n,e,t),n!==null?n.sibling:null);mn(Rn,Rn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return UF(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mn(Rn,Rn.current),r)break;return null;case 22:case 23:return e.lanes=0,FF(n,e,t)}return Es(n,e,t)}function q5(n,e){switch(C1(e),e.tag){case 1:return ur(e.type)&&Mg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return wu(),xn(cr),xn(Bi),b1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return T1(e),null;case 13:if(xn(Rn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ue(340));Au()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return xn(Rn),null;case 4:return wu(),null;case 10:return A1(e.type._context),null;case 22:case 23:return k1(),null;case 24:return null;default:return null}}var Lm=!1,gl=!1,K5=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ug(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){lr(n,e,r)}else t.current=null}function gA(n,e,t){try{t()}catch(r){lr(n,e,r)}}var JT=!1;function Y5(n,e){if(n=HI(),y1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var s=0,o=-1,l=-1,c=0,f=0,p=n,h=null;t:for(;;){for(var m;p!==t||i!==0&&p.nodeType!==3||(o=s+i),p!==a||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===n)break t;if(h===t&&++c===i&&(o=s),h===a&&++f===r&&(l=s),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(tA={focusedElem:n,selectionRange:t},Ye=e;Ye!==null;)if(e=Ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ye=n;else for(;Ye!==null;){e=Ye;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,g=e.stateNode,A=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:ha(e.type,x),_);g.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var S=e.stateNode.containerInfo;if(S.nodeType===1)S.textContent="";else if(S.nodeType===9){var C=S.body;C!=null&&(C.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(T){lr(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}return v=JT,JT=!1,v}function Gf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&gA(e,t,a)}i=i.next}while(i!==r)}}function Gv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function vA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function qT(n,e,t){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(Lv,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var r=n=n.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&gA(e,t,a),r=r.next}while(r!==n)}break;case 1:if(Ug(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){lr(e,t,s)}break;case 5:Ug(e,t);break;case 4:NF(n,e,t)}}function OF(n){var e=n.alternate;e!==null&&(n.alternate=null,OF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[La],delete e[Uf],delete e[rA],delete e[B5],delete e[L5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kF(n){return n.tag===5||n.tag===3||n.tag===4}function KT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function YT(n){e:{for(var e=n.return;e!==null;){if(kF(e))break e;e=e.return}throw Error(Ue(160))}var t=e;switch(t.tag){case 5:e=t.stateNode,t.flags&32&&(Tf(e,""),t.flags&=-33),t=KT(n),_A(n,t,e);break;case 3:case 4:e=t.stateNode.containerInfo,t=KT(n),yA(n,t,e);break;default:throw Error(Ue(161))}}function yA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Eg));else if(r!==4&&(n=n.child,n!==null))for(yA(n,e,t),n=n.sibling;n!==null;)yA(n,e,t),n=n.sibling}function _A(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(_A(n,e,t),n=n.sibling;n!==null;)_A(n,e,t),n=n.sibling}function NF(n,e,t){for(var r=e,i=!1,a,s;;){if(!i){i=r.return;e:for(;;){if(i===null)throw Error(Ue(160));switch(a=i.stateNode,i.tag){case 5:s=!1;break e;case 3:a=a.containerInfo,s=!0;break e;case 4:a=a.containerInfo,s=!0;break e}i=i.return}i=!0}if(r.tag===5||r.tag===6){e:for(var o=n,l=r,c=t,f=l;;)if(qT(o,f,c),f.child!==null&&f.tag!==4)f.child.return=f,f=f.child;else{if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s?(o=a,l=r.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):a.removeChild(r.stateNode)}else if(r.tag===18)s?(o=a,l=r.stateNode,o.nodeType===8?__(o.parentNode,l):o.nodeType===1&&__(o,l),If(o)):__(a,r.stateNode);else if(r.tag===4){if(r.child!==null){a=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(qT(n,r,t),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function E_(n,e){switch(e.tag){case 0:case 11:case 14:case 15:Gf(3,e,e.return),Gv(3,e),Gf(5,e,e.return);return;case 1:return;case 5:var t=e.stateNode;if(t!=null){var r=e.memoizedProps,i=n!==null?n.memoizedProps:r;n=e.type;var a=e.updateQueue;if(e.updateQueue=null,a!==null){for(n==="input"&&r.type==="radio"&&r.name!=null&&dI(t,r),Xx(n,i),e=Xx(n,r),i=0;i<a.length;i+=2){var s=a[i],o=a[i+1];s==="style"?gI(t,o):s==="dangerouslySetInnerHTML"?pI(t,o):s==="children"?Tf(t,o):a1(t,s,o,e)}switch(n){case"input":zx(t,r);break;case"textarea":fI(t,r);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,a=r.value,a!=null?Zc(t,!!r.multiple,a,!1):n!==!!r.multiple&&(r.defaultValue!=null?Zc(t,!!r.multiple,r.defaultValue,!0):Zc(t,!!r.multiple,r.multiple?[]:"",!1))}t[Uf]=r}}return;case 6:if(e.stateNode===null)throw Error(Ue(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n!==null&&n.memoizedState.isDehydrated&&If(e.stateNode.containerInfo);return;case 12:return;case 13:QT(e);return;case 19:QT(e);return;case 17:return}throw Error(Ue(163))}function QT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new K5),e.forEach(function(r){var i=s9.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Q5(n,e){for(Ye=e;Ye!==null;){e=Ye;var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{NF(n,i,e);var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(L){lr(i,e,L)}}if(t=e.child,e.subtreeFlags&12854&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var s=e.flags;if(s&32&&Tf(e.stateNode,""),s&512){var o=e.alternate;if(o!==null){var l=o.ref;l!==null&&(typeof l=="function"?l(null):l.current=null)}}if(s&8192)switch(e.tag){case 13:if(e.memoizedState!==null){var c=e.alternate;(c===null||c.memoizedState===null)&&(U1=Gn())}break;case 22:var f=e.memoizedState!==null,p=e.alternate,h=p!==null&&p.memoizedState!==null;t=e;e:{r=t,i=f;for(var m=null,v=r;;){if(v.tag===5){if(m===null){m=v;var x=v.stateNode;if(i){var _=x.style;typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"}else{var g=v.stateNode,A=v.memoizedProps.style,S=A!=null&&A.hasOwnProperty("display")?A.display:null;g.style.display=mI("display",S)}}}else if(v.tag===6)m===null&&(v.stateNode.nodeValue=i?"":v.memoizedProps);else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===r)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}if(f&&!h&&t.mode&1){Ye=t;for(var C=t.child;C!==null;){for(t=Ye=C;Ye!==null;){r=Ye;var T=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Gf(4,r,r.return);break;case 1:Ug(r,r.return);var M=r.stateNode;if(typeof M.componentWillUnmount=="function"){var b=r.return;try{M.props=r.memoizedProps,M.state=r.memoizedState,M.componentWillUnmount()}catch(L){lr(r,b,L)}}break;case 5:Ug(r,r.return);break;case 22:if(r.memoizedState!==null){$T(t);continue}}T!==null?(T.return=r,Ye=T):$T(t)}C=C.sibling}}}switch(s&4102){case 2:YT(e),e.flags&=-3;break;case 6:YT(e),e.flags&=-3,E_(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,E_(e.alternate,e);break;case 4:E_(e.alternate,e)}}catch(L){lr(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}}function Z5(n,e,t){Ye=n,zF(n)}function zF(n,e,t){for(var r=(n.mode&1)!==0;Ye!==null;){var i=Ye,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Lm;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||gl;o=Lm;var c=gl;if(Lm=s,(gl=l)&&!c)for(Ye=i;Ye!==null;)s=Ye,l=s.child,s.tag===22&&s.memoizedState!==null?eb(i):l!==null?(l.return=s,Ye=l):eb(i);for(;a!==null;)Ye=a,zF(a),a=a.sibling;Ye=i,Lm=o,gl=c}ZT(n)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ye=a):ZT(n)}}function ZT(n){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gl||Gv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gl)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ha(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&IT(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IT(e,s,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&If(p)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ue(163))}gl||e.flags&512&&vA(e)}catch(h){lr(e,e.return,h)}}if(e===n){Ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function $T(n){for(;Ye!==null;){var e=Ye;if(e===n){Ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function eb(n){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Gv(4,e)}catch(l){lr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lr(e,i,l)}}var a=e.return;try{vA(e)}catch(l){lr(e,a,l)}break;case 5:var s=e.return;try{vA(e)}catch(l){lr(e,s,l)}}}catch(l){lr(e,e.return,l)}if(e===n){Ye=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ye=o;break}Ye=e.return}}var $5=Math.ceil,Og=bs.ReactCurrentDispatcher,L1=bs.ReactCurrentOwner,na=bs.ReactCurrentBatchConfig,Yt=0,Yn=null,qn=null,vi=0,xr=0,Kc=bo(0),ti=0,Hf=null,Eu=0,Hv=0,D1=0,nf=null,ar=null,U1=0,Mu=1/0,kg=!1,xA=null,ho=null,Dm=!1,to=null,Ng=0,rf=0,AA=null,ag=-1,sg=0;function ji(){return Yt&6?Gn():ag!==-1?ag:ag=Gn()}function po(n){return n.mode&1?Yt&2&&vi!==0?vi&-vi:U5.transition!==null?(sg===0&&(n=Am,Am<<=1,!(Am&4194240)&&(Am=64),sg=n),sg):(n=un,n!==0||(n=window.event,n=n===void 0?16:LI(n.type)),n):1}function ia(n,e,t){if(50<rf)throw rf=0,AA=null,Error(Ue(185));var r=Wv(n,e);return r===null?null:(hh(r,e,t),(!(Yt&2)||r!==Yn)&&(r===Yn&&(!(Yt&2)&&(Hv|=e),ti===4&&$s(r,vi)),dr(r,t),e===1&&Yt===0&&!(n.mode&1)&&(Mu=Gn()+500,Nv&&Po())),r)}function Wv(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function dr(n,e){var t=n.callbackNode;UH(n,e);var r=Sg(n,n===Yn?vi:0);if(r===0)t!==null&&oT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&oT(t),e===1)n.tag===0?D5(tb.bind(null,n)):$I(tb.bind(null,n)),I5(function(){Yt===0&&Po()}),t=null;else{switch(bI(r)){case 1:t=u1;break;case 4:t=MI;break;case 16:t=Ag;break;case 536870912:t=TI;break;default:t=Ag}t=qF(t,VF.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function VF(n,e){if(ag=-1,sg=0,Yt&6)throw Error(Ue(327));var t=n.callbackNode;if(iu()&&n.callbackNode!==t)return null;var r=Sg(n,n===Yn?vi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=zg(n,r);else{e=r;var i=Yt;Yt|=2;var a=HF();(Yn!==n||vi!==e)&&(Mu=Gn()+500,Cl(n,e));do try{n9();break}catch(o){GF(n,o)}while(!0);x1(),Og.current=a,Yt=i,qn!==null?e=0:(Yn=null,vi=0,e=ti)}if(e!==0){if(e===2&&(i=Yx(n),i!==0&&(r=i,e=SA(n,i))),e===1)throw t=Hf,Cl(n,0),$s(n,r),dr(n,Gn()),t;if(e===6)$s(n,r);else{if(i=n.current.alternate,!(r&30)&&!e9(i)&&(e=zg(n,r),e===2&&(a=Yx(n),a!==0&&(r=a,e=SA(n,a))),e===1))throw t=Hf,Cl(n,0),$s(n,r),dr(n,Gn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ue(345));case 2:al(n,ar);break;case 3:if($s(n,r),(r&130023424)===r&&(e=U1+500-Gn(),10<e)){if(Sg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ji(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=iA(al.bind(null,n,ar),e);break}al(n,ar);break;case 4:if($s(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-_a(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$5(r/1960))-r,10<r){n.timeoutHandle=iA(al.bind(null,n,ar),r);break}al(n,ar);break;case 5:al(n,ar);break;default:throw Error(Ue(329))}}}return dr(n,Gn()),n.callbackNode===t?VF.bind(null,n):null}function SA(n,e){var t=nf;return n.current.memoizedState.isDehydrated&&(Cl(n,e).flags|=256),n=zg(n,e),n!==2&&(e=ar,ar=t,e!==null&&wA(e)),n}function wA(n){ar===null?ar=n:ar.push.apply(ar,n)}function e9(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!qa(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $s(n,e){for(e&=~D1,e&=~Hv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-_a(e),r=1<<t;n[t]=-1,e&=~r}}function tb(n){if(Yt&6)throw Error(Ue(327));iu();var e=Sg(n,0);if(!(e&1))return dr(n,Gn()),null;var t=zg(n,e);if(n.tag!==0&&t===2){var r=Yx(n);r!==0&&(e=r,t=SA(n,r))}if(t===1)throw t=Hf,Cl(n,0),$s(n,e),dr(n,Gn()),t;if(t===6)throw Error(Ue(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,al(n,ar),dr(n,Gn()),null}function O1(n,e){var t=Yt;Yt|=1;try{return n(e)}finally{Yt=t,Yt===0&&(Mu=Gn()+500,Nv&&Po())}}function Fl(n){to!==null&&to.tag===0&&!(Yt&6)&&iu();var e=Yt;Yt|=1;var t=na.transition,r=un;try{if(na.transition=null,un=1,n)return n()}finally{un=r,na.transition=t,Yt=e,!(Yt&6)&&Po()}}function k1(){xr=Kc.current,xn(Kc)}function Cl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,R5(t)),qn!==null)for(t=qn.return;t!==null;){var r=t;switch(C1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mg();break;case 3:wu(),xn(cr),xn(Bi),b1();break;case 5:T1(r);break;case 4:wu();break;case 13:xn(Rn);break;case 19:xn(Rn);break;case 10:A1(r.type._context);break;case 22:case 23:k1()}t=t.return}if(Yn=n,qn=n=So(n.current,null),vi=xr=e,ti=0,Hf=null,D1=Hv=Eu=0,ar=nf=null,Oa!==null){for(e=0;e<Oa.length;e++)if(t=Oa[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}t.pending=r}Oa=null}return n}function GF(n,e){do{var t=qn;try{if(x1(),ig.current=Dg,Lg){for(var r=Nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lg=!1}if(Cu=0,ui=bi=Nn=null,tf=!1,Nf=0,L1.current=null,t===null||t.return===null){ti=1,Hf=e,qn=null;break}e:{var a=n,s=t.return,o=t,l=e;if(e=vi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=o,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=kT(s);if(m!==null){m.flags&=-257,NT(m,s,o,a,e),m.mode&1&&OT(a,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){OT(a,c,e),N1();break e}l=Error(Ue(426))}}else if(Mn&&o.mode&1){var _=kT(s);if(_!==null){!(_.flags&65536)&&(_.flags|=256),NT(_,s,o,a,e),E1(l);break e}}a=l,ti!==4&&(ti=2),nf===null?nf=[a]:nf.push(a),l=B1(l,o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=MF(o,l,e);RT(o,g);break e;case 1:a=l;var A=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ho===null||!ho.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=TF(o,a,e);RT(o,C);break e}}o=o.return}while(o!==null)}XF(t)}catch(T){e=T,qn===t&&t!==null&&(qn=t=t.return);continue}break}while(!0)}function HF(){var n=Og.current;return Og.current=Dg,n===null?Dg:n}function N1(){(ti===0||ti===3||ti===2)&&(ti=4),Yn===null||!(Eu&268435455)&&!(Hv&268435455)||$s(Yn,vi)}function zg(n,e){var t=Yt;Yt|=2;var r=HF();Yn===n&&vi===e||Cl(n,e);do try{t9();break}catch(i){GF(n,i)}while(!0);if(x1(),Yt=t,Og.current=r,qn!==null)throw Error(Ue(261));return Yn=null,vi=0,ti}function t9(){for(;qn!==null;)WF(qn)}function n9(){for(;qn!==null&&!TH();)WF(qn)}function WF(n){var e=JF(n.alternate,n,xr);n.memoizedProps=n.pendingProps,e===null?XF(n):qn=e,L1.current=null}function XF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=q5(t,e),t!==null){t.flags&=32767,qn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ti=6,qn=null;return}}else if(t=X5(t,e,xr),t!==null){qn=t;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=n}while(e!==null);ti===0&&(ti=5)}function al(n,e){var t=un,r=na.transition;try{na.transition=null,un=1,i9(n,e,t)}finally{na.transition=r,un=t}return null}function i9(n,e,t){do iu();while(to!==null);if(Yt&6)throw Error(Ue(327));var r=n.finishedWork,i=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(Ue(177));n.callbackNode=null,n.callbackPriority=0;var a=r.lanes|r.childLanes;if(OH(n,a),n===Yn&&(qn=Yn=null,vi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dm||(Dm=!0,qF(Ag,function(){return iu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=na.transition,na.transition=null;var s=un;un=1;var o=Yt;Yt|=4,L1.current=null,Y5(n,r),Q5(n,r),w5(tA),tA=null,n.current=r,Z5(r),bH(),Yt=o,un=s,na.transition=a}else n.current=r;if(Dm&&(Dm=!1,to=n,Ng=i),a=n.pendingLanes,a===0&&(ho=null),IH(r.stateNode),dr(n,Gn()),e!==null)for(t=n.onRecoverableError,r=0;r<e.length;r++)t(e[r]);if(kg)throw kg=!1,n=xA,xA=null,n;return Ng&1&&n.tag!==0&&iu(),a=n.pendingLanes,a&1?n===AA?rf++:(rf=0,AA=n):rf=0,Po(),null}function iu(){if(to!==null){var n=bI(Ng),e=na.transition,t=un;try{if(na.transition=null,un=16>n?16:n,to===null)var r=!1;else{if(n=to,to=null,Ng=0,Yt&6)throw Error(Ue(331));var i=Yt;for(Yt|=4,Ye=n.current;Ye!==null;){var a=Ye,s=a.child;if(Ye.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ye=c;Ye!==null;){var f=Ye;switch(f.tag){case 0:case 11:case 15:Gf(8,f,a)}var p=f.child;if(p!==null)p.return=f,Ye=p;else for(;Ye!==null;){f=Ye;var h=f.sibling,m=f.return;if(OF(f),f===c){Ye=null;break}if(h!==null){h.return=m,Ye=h;break}Ye=m}}}var v=a.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Ye=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Ye=s;else e:for(;Ye!==null;){if(a=Ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gf(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Ye=g;break e}Ye=a.return}}var A=n.current;for(Ye=A;Ye!==null;){s=Ye;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Ye=S;else e:for(s=A;Ye!==null;){if(o=Ye,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Gv(9,o)}}catch(T){lr(o,o.return,T)}if(o===s){Ye=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Ye=C;break e}Ye=o.return}}if(Yt=i,Po(),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(Lv,n)}catch{}r=!0}return r}finally{un=t,na.transition=e}}return!1}function nb(n,e,t){e=B1(t,e),e=MF(n,e,1),fo(n,e),e=ji(),n=Wv(n,1),n!==null&&(hh(n,1,e),dr(n,e))}function lr(n,e,t){if(n.tag===3)nb(n,n,t);else for(;e!==null;){if(e.tag===3){nb(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){n=B1(t,n),n=TF(e,n,1),fo(e,n),n=ji(),e=Wv(e,1),e!==null&&(hh(e,1,n),dr(e,n));break}}e=e.return}}function r9(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ji(),n.pingedLanes|=n.suspendedLanes&t,Yn===n&&(vi&t)===t&&(ti===4||ti===3&&(vi&130023424)===vi&&500>Gn()-U1?Cl(n,0):D1|=t),dr(n,e)}function jF(n,e){e===0&&(n.mode&1?(e=Sm,Sm<<=1,!(Sm&130023424)&&(Sm=4194304)):e=1);var t=ji();n=Wv(n,e),n!==null&&(hh(n,e,t),dr(n,t))}function a9(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),jF(n,t)}function s9(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ue(314))}r!==null&&r.delete(e),jF(n,t)}var JF;JF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||cr.current)Cr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Cr=!1,J5(n,e,t);Cr=!!(n.flags&131072)}else Cr=!1,Mn&&e.flags&1048576&&iF(e,Fg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps;var i=xu(e,Bi.current);nu(e,t),i=R1(null,e,r,n,i,t);var a=I1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ur(r)?(a=!0,Tg(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,S1(e),i.updater=zv,e.stateNode=i,i._reactInternals=e,lA(e,r,n,t),e=pA(null,e,r,!0,a,t)):(e.tag=0,Mn&&a&&w1(e),Gi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l9(r),n=ha(r,n),i){case 0:e=hA(null,e,r,n,t);break e;case 1:e=GT(null,e,r,n,t);break e;case 11:e=zT(null,e,r,n,t);break e;case 14:e=VT(null,e,r,ha(r.type,n),t);break e}throw Error(Ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ha(r,i),hA(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ha(r,i),GT(n,e,r,i,t);case 3:e:{if(LF(e),n===null)throw Error(Ue(387));r=e.pendingProps,a=e.memoizedState,i=a.element,eF(n,e),Rg(e,r,null,t);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Error(Ue(423)),e=HT(n,e,r,t,i);break e}else if(r!==i){i=Error(Ue(424)),e=HT(n,e,r,t,i);break e}else for(or=vs(e.stateNode.containerInfo.firstChild),Mr=e,Mn=!0,ma=null,t=sF(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Au(),r===i){e=Es(n,e,t);break e}Gi(n,e,r,t)}e=e.child}return e;case 5:return oF(e),n===null&&uA(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,s=i.children,nA(r,i)?s=null:a!==null&&nA(r,a)&&(e.flags|=32),BF(n,e),Gi(n,e,s,t),e.child;case 6:return n===null&&uA(e),null;case 13:return DF(n,e,t);case 4:return M1(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Su(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ha(r,i),zT(n,e,r,i,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,mn(bg,r._currentValue),r._currentValue=s,a!==null)if(qa(a.value,s)){if(a.children===i.children&&!cr.current){e=Es(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=As(-1,t&-t),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),sA(a.return,t,e),o.lanes|=t;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Ue(341));s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),sA(s,t,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Gi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,nu(e,t),i=ra(i),r=r(i),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return r=e.type,i=ha(r,e.pendingProps),i=ha(r.type,i),VT(n,e,r,i,t);case 15:return IF(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ha(r,i),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,ur(r)?(n=!0,Tg(e)):n=!1,nu(e,t),nF(e,r,i),lA(e,r,i,t),pA(null,e,r,!0,n,t);case 19:return UF(n,e,t);case 22:return FF(n,e,t)}throw Error(Ue(156,e.tag))};function qF(n,e){return EI(n,e)}function o9(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,e,t,r){return new o9(n,e,t,r)}function z1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l9(n){if(typeof n=="function")return z1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===o1)return 11;if(n===l1)return 14}return 2}function So(n,e){var t=n.alternate;return t===null?(t=$r(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function og(n,e,t,r,i,a){var s=2;if(r=n,typeof n=="function")z1(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case zc:return El(t.children,i,a,e);case s1:s=8,i|=8;break;case Dx:return n=$r(12,t,e,i|2),n.elementType=Dx,n.lanes=a,n;case Ux:return n=$r(13,t,e,i),n.elementType=Ux,n.lanes=a,n;case Ox:return n=$r(19,t,e,i),n.elementType=Ox,n.lanes=a,n;case lI:return Vg(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case sI:s=10;break e;case oI:s=9;break e;case o1:s=11;break e;case l1:s=14;break e;case qs:s=16,r=null;break e}throw Error(Ue(130,n==null?n:typeof n,""))}return e=$r(s,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function El(n,e,t,r){return n=$r(7,n,r,e),n.lanes=t,n}function Vg(n,e,t,r){return n=$r(22,n,r,e),n.elementType=lI,n.lanes=t,n.stateNode={},n}function M_(n,e,t){return n=$r(6,n,null,e),n.lanes=t,n}function T_(n,e,t){return e=$r(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function c9(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l_(0),this.expirationTimes=l_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function V1(n,e,t,r,i,a,s,o,l){return n=new c9(n,e,t,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=$r(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null},S1(a),n}function u9(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function KF(n){if(!n)return Ao;n=n._reactInternals;e:{if(Hl(n)!==n||n.tag!==1)throw Error(Ue(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ur(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ue(171))}if(n.tag===1){var t=n.type;if(ur(t))return ZI(n,t,e)}return e}function YF(n,e,t,r,i,a,s,o,l){return n=V1(t,r,!0,n,i,a,s,o,l),n.context=KF(null),t=n.current,r=ji(),i=po(t),a=As(r,i),a.callback=e??null,fo(t,a),n.current.lanes=i,hh(n,i,r),dr(n,r),n}function Xv(n,e,t,r){var i=e.current,a=ji(),s=po(i);return t=KF(t),e.context===null?e.context=t:e.pendingContext=t,e=As(a,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),fo(i,e),n=ia(i,s,a),n!==null&&ng(n,i,s),s}function Gg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ib(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function G1(n,e){ib(n,e),(n=n.alternate)&&ib(n,e)}function d9(){return null}var QF=typeof reportError=="function"?reportError:function(n){console.error(n)};function H1(n){this._internalRoot=n}jv.prototype.render=H1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ue(409));Xv(n,e,null,null)};jv.prototype.unmount=H1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fl(function(){Xv(null,n,null,null)}),e[Cs]=null}};function jv(n){this._internalRoot=n}jv.prototype.unstable_scheduleHydration=function(n){if(n){var e=II();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Zs.length&&e!==0&&e<Zs[t].priority;t++);Zs.splice(t,0,n),t===0&&BI(n)}};function W1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Jv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rb(){}function f9(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=Gg(s);a.call(c)}}var s=YF(e,r,n,0,null,!1,!1,"",rb);return n._reactRootContainer=s,n[Cs]=s.current,Lf(n.nodeType===8?n.parentNode:n),Fl(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Gg(l);o.call(c)}}var l=V1(n,0,!1,null,null,!1,!1,"",rb);return n._reactRootContainer=l,n[Cs]=l.current,Lf(n.nodeType===8?n.parentNode:n),Fl(function(){Xv(e,l,t,r)}),l}function qv(n,e,t,r,i){var a=t._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Gg(s);o.call(l)}}Xv(e,s,n,i)}else s=f9(t,e,n,i,r);return Gg(s)}PI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vd(e.pendingLanes);t!==0&&(d1(e,t|1),dr(e,Gn()),!(Yt&6)&&(Mu=Gn()+500,Po()))}break;case 13:var r=ji();Fl(function(){return ia(n,1,r)}),G1(n,1)}};f1=function(n){if(n.tag===13){var e=ji();ia(n,134217728,e),G1(n,134217728)}};RI=function(n){if(n.tag===13){var e=ji(),t=po(n);ia(n,t,e),G1(n,t)}};II=function(){return un};FI=function(n,e){var t=un;try{return un=n,e()}finally{un=t}};Jx=function(n,e,t){switch(e){case"input":if(zx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=kv(r);if(!i)throw Error(Ue(90));uI(r),zx(r,i)}}}break;case"textarea":fI(n,t);break;case"select":e=t.value,e!=null&&Zc(n,!!t.multiple,e,!1)}};_I=O1;xI=Fl;var h9={usingClientEntryPoint:!1,Events:[mh,Wc,kv,vI,yI,O1]},Fd={findFiberByHostInstance:pl,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},p9={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wI(n),n===null?null:n.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||d9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Um.isDisabled&&Um.supportsFiber)try{Lv=Um.inject(p9),Ga=Um}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h9;Pr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!W1(e))throw Error(Ue(200));return u9(n,e,null,t)};Pr.createRoot=function(n,e){if(!W1(n))throw Error(Ue(299));var t=!1,r="",i=QF;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=V1(n,1,!1,null,null,t,!1,r,i),n[Cs]=e.current,Lf(n.nodeType===8?n.parentNode:n),new H1(e)};Pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ue(188)):(n=Object.keys(n).join(","),Error(Ue(268,n)));return n=wI(e),n=n===null?null:n.stateNode,n};Pr.flushSync=function(n){return Fl(n)};Pr.hydrate=function(n,e,t){if(!Jv(e))throw Error(Ue(200));return qv(null,n,e,!0,t)};Pr.hydrateRoot=function(n,e,t){if(!W1(n))throw Error(Ue(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",s=QF;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=YF(e,null,n,1,t??null,i,!1,a,s),n[Cs]=e.current,Lf(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new jv(e)};Pr.render=function(n,e,t){if(!Jv(e))throw Error(Ue(200));return qv(null,n,e,!1,t)};Pr.unmountComponentAtNode=function(n){if(!Jv(n))throw Error(Ue(40));return n._reactRootContainer?(Fl(function(){qv(null,null,n,!1,function(){n._reactRootContainer=null,n[Cs]=null})}),!0):!1};Pr.unstable_batchedUpdates=O1;Pr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Jv(t))throw Error(Ue(200));if(n==null||n._reactInternals===void 0)throw Error(Ue(38));return qv(n,e,t,!1,r)};Pr.version="18.0.0-fc46dba67-20220329";function ZF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZF)}catch(n){console.error(n)}}ZF(),iI.exports=Pr;var m9=iI.exports,$F,eB,ab=m9;eB=ab.createRoot,$F=ab.hydrateRoot;let X1=yh();const Pt=n=>vh(n,X1);let j1=yh();Pt.write=n=>vh(n,j1);let Kv=yh();Pt.onStart=n=>vh(n,Kv);let J1=yh();Pt.onFrame=n=>vh(n,J1);let q1=yh();Pt.onFinish=n=>vh(n,q1);let ru=[];Pt.setTimeout=(n,e)=>{let t=Pt.now()+e,r=()=>{let a=ru.findIndex(s=>s.cancel==r);~a&&ru.splice(a,1),io-=~a?1:0},i={time:t,handler:n,cancel:r};return ru.splice(tB(t),0,i),io+=1,nB(),i};let tB=n=>~(~ru.findIndex(e=>e.time>n)||~ru.length);Pt.cancel=n=>{Kv.delete(n),J1.delete(n),q1.delete(n),X1.delete(n),j1.delete(n)};Pt.sync=n=>{CA=!0,Pt.batchedUpdates(n),CA=!1};Pt.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,Pt.onStart(t)}return r.handler=n,r.cancel=()=>{Kv.delete(t),e=null},r};let K1=typeof window<"u"?window.requestAnimationFrame:()=>{};Pt.use=n=>K1=n;Pt.now=typeof performance<"u"?()=>performance.now():Date.now;Pt.batchedUpdates=n=>n();Pt.catch=console.error;Pt.frameLoop="always";Pt.advance=()=>{Pt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):rB()};let no=-1,io=0,CA=!1;function vh(n,e){CA?(e.delete(n),n(0)):(e.add(n),nB())}function nB(){no<0&&(no=0,Pt.frameLoop!=="demand"&&K1(iB))}function g9(){no=-1}function iB(){~no&&(K1(iB),Pt.batchedUpdates(rB))}function rB(){let n=no;no=Pt.now();let e=tB(no);if(e&&(aB(ru.splice(0,e),t=>t.handler()),io-=e),!io){g9();return}Kv.flush(),X1.flush(n?Math.min(64,no-n):16.667),J1.flush(),j1.flush(),q1.flush()}function yh(){let n=new Set,e=n;return{add(t){io+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return io-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,io-=e.size,aB(e,r=>r(t)&&n.add(r)),io+=n.size,e=n)}}}function aB(n,e){n.forEach(t=>{try{e(t)}catch(r){Pt.catch(r)}})}function EA(){}const v9=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Xe={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function ds(n,e){if(Xe.arr(n)){if(!Xe.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const sn=(n,e)=>n.forEach(e);function Ms(n,e,t){if(Xe.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}const ea=n=>Xe.und(n)?[]:Xe.arr(n)?n:[n];function af(n,e){if(n.size){const t=Array.from(n);n.clear(),sn(t,e)}}const Hd=(n,...e)=>af(n,t=>t(...e)),Y1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let Q1,sB,mo=null,oB=!1,Z1=EA;const y9=n=>{n.to&&(sB=n.to),n.now&&(Pt.now=n.now),n.colors!==void 0&&(mo=n.colors),n.skipAnimation!=null&&(oB=n.skipAnimation),n.createStringInterpolator&&(Q1=n.createStringInterpolator),n.requestAnimationFrame&&Pt.use(n.requestAnimationFrame),n.batchedUpdates&&(Pt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(Z1=n.willAdvance),n.frameLoop&&(Pt.frameLoop=n.frameLoop)};var Ka=Object.freeze({__proto__:null,get createStringInterpolator(){return Q1},get to(){return sB},get colors(){return mo},get skipAnimation(){return oB},get willAdvance(){return Z1},assign:y9});const sf=new Set;let Qr=[],b_=[],Hg=0;const Yv={get idle(){return!sf.size&&!Qr.length},start(n){Hg>n.priority?(sf.add(n),Pt.onStart(_9)):(lB(n),Pt(MA))},advance:MA,sort(n){if(Hg)Pt.onFrame(()=>Yv.sort(n));else{const e=Qr.indexOf(n);~e&&(Qr.splice(e,1),cB(n))}},clear(){Qr=[],sf.clear()}};function _9(){sf.forEach(lB),sf.clear(),Pt(MA)}function lB(n){Qr.includes(n)||cB(n)}function cB(n){Qr.splice(x9(Qr,e=>e.priority>n.priority),0,n)}function MA(n){const e=b_;for(let t=0;t<Qr.length;t++){const r=Qr[t];Hg=r.priority,r.idle||(Z1(r),r.advance(n),r.idle||e.push(r))}return Hg=0,b_=Qr,b_.length=0,Qr=e,Qr.length>0}function x9(n,e){const t=n.findIndex(e);return t<0?n.length:t}const A9=(n,e,t)=>Math.min(Math.max(t,n),e),S9={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ya="[-+]?\\d*\\.?\\d+",Wg=ya+"%";function Qv(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const w9=new RegExp("rgb"+Qv(ya,ya,ya)),C9=new RegExp("rgba"+Qv(ya,ya,ya,ya)),E9=new RegExp("hsl"+Qv(ya,Wg,Wg)),M9=new RegExp("hsla"+Qv(ya,Wg,Wg,ya)),T9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,b9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,P9=/^#([0-9a-fA-F]{6})$/,R9=/^#([0-9a-fA-F]{8})$/;function I9(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=P9.exec(n))?parseInt(e[1]+"ff",16)>>>0:mo&&mo[n]!==void 0?mo[n]:(e=w9.exec(n))?(Tc(e[1])<<24|Tc(e[2])<<16|Tc(e[3])<<8|255)>>>0:(e=C9.exec(n))?(Tc(e[1])<<24|Tc(e[2])<<16|Tc(e[3])<<8|lb(e[4]))>>>0:(e=T9.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=R9.exec(n))?parseInt(e[1],16)>>>0:(e=b9.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=E9.exec(n))?(sb(ob(e[1]),Om(e[2]),Om(e[3]))|255)>>>0:(e=M9.exec(n))?(sb(ob(e[1]),Om(e[2]),Om(e[3]))|lb(e[4]))>>>0:null}function P_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function sb(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,a=P_(i,r,n+1/3),s=P_(i,r,n),o=P_(i,r,n-1/3);return Math.round(a*255)<<24|Math.round(s*255)<<16|Math.round(o*255)<<8}function Tc(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function ob(n){return(parseFloat(n)%360+360)%360/360}function lb(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function Om(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function cb(n){let e=I9(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,a=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${a})`}const Wf=(n,e,t)=>{if(Xe.fun(n))return n;if(Xe.arr(n))return Wf({range:n,output:e,extrapolate:t});if(Xe.str(n.output[0]))return Q1(n);const r=n,i=r.output,a=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const f=B9(c,a);return F9(c,a[f],a[f+1],i[f],i[f+1],l,s,o,r.map)}};function F9(n,e,t,r,i,a,s,o,l){let c=l?l(n):n;if(c<e){if(s==="identity")return c;s==="clamp"&&(c=e)}if(c>t){if(o==="identity")return c;o==="clamp"&&(c=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=a(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function B9(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const L9=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const r=t*n,i=e==="end"?Math.floor(r):Math.ceil(r);return A9(0,1,i/n)},Xg=1.70158,km=Xg*1.525,ub=Xg+1,db=2*Math.PI/3,fb=2*Math.PI/4.5,Nm=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,D9={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>ub*n*n*n-Xg*n*n,easeOutBack:n=>1+ub*Math.pow(n-1,3)+Xg*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((km+1)*2*n-km)/2:(Math.pow(2*n-2,2)*((km+1)*(n*2-2)+km)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*db),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*db)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*fb))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*fb)/2+1,easeInBounce:n=>1-Nm(1-n),easeOutBounce:Nm,easeInOutBounce:n=>n<.5?(1-Nm(1-2*n))/2:(1+Nm(2*n-1))/2,steps:L9};function TA(){return TA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TA.apply(this,arguments)}const Tu=Symbol.for("FluidValue.get"),Bl=Symbol.for("FluidValue.observers"),Ba=n=>!!(n&&n[Tu]),jr=n=>n&&n[Tu]?n[Tu]():n,hb=n=>n[Bl]||null;function U9(n,e){n.eventObserved?n.eventObserved(e):n(e)}function jg(n,e){let t=n[Bl];t&&t.forEach(r=>{U9(r,e)})}class O9{constructor(e){if(this[Tu]=void 0,this[Bl]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");k9(this,e)}}const k9=(n,e)=>uB(n,Tu,e);function _h(n,e){if(n[Tu]){let t=n[Bl];t||uB(n,Bl,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function Jg(n,e){let t=n[Bl];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[Bl]=null,n.observerRemoved&&n.observerRemoved(r,e)}}const uB=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),lg=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,N9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,pb=new RegExp(`(${lg.source})(%|[a-z]+)`,"i"),z9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Zv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,dB=n=>{const[e,t]=V9(n);if(!e||Y1())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&Zv.test(t))return dB(t);if(t)return t}return n},V9=n=>{const e=Zv.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]};let R_;const G9=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,fB=n=>{R_||(R_=mo?new RegExp(`(${Object.keys(mo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(a=>jr(a).replace(Zv,dB).replace(N9,cb).replace(R_,cb)),t=e.map(a=>a.match(lg).map(Number)),i=t[0].map((a,s)=>t.map(o=>{if(!(s in o))throw Error('The arity of each "output" value must be equal');return o[s]})).map(a=>Wf(TA({},n,{output:a})));return a=>{var s;const o=!pb.test(e[0])&&((s=e.find(c=>pb.test(c)))==null?void 0:s.replace(lg,""));let l=0;return e[0].replace(lg,()=>`${i[l++](a)}${o||""}`).replace(z9,G9)}},$1="react-spring: ",hB=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${$1}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},H9=hB(console.warn);function W9(){H9(`${$1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const X9=hB(console.warn);function j9(){X9(`${$1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function $v(n){return Xe.str(n)&&(n[0]=="#"||/\d/.test(n)||!Y1()&&Zv.test(n)||n in(mo||{}))}const ew=Y1()?k.useEffect:k.useLayoutEffect,J9=()=>{const n=k.useRef(!1);return ew(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function pB(){const n=k.useState()[1],e=J9();return()=>{e.current&&n(Math.random())}}function q9(n,e){const[t]=k.useState(()=>({inputs:e,result:n()})),r=k.useRef(),i=r.current;let a=i;return a?e&&a.inputs&&K9(e,a.inputs)||(a={inputs:e,result:n()}):a=t,k.useEffect(()=>{r.current=a,i==t&&(t.inputs=t.result=void 0)},[a]),a.result}function K9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const mB=n=>k.useEffect(n,Y9),Y9=[];function mb(n){const e=k.useRef();return k.useEffect(()=>{e.current=n}),e.current}const Xf=Symbol.for("Animated:node"),Q9=n=>!!n&&n[Xf]===n,Fa=n=>n&&n[Xf],tw=(n,e)=>v9(n,Xf,e),e0=n=>n&&n[Xf]&&n[Xf].getPayload();class gB{constructor(){this.payload=void 0,tw(this,this)}getPayload(){return this.payload||[]}}class Hu extends gB{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Xe.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Hu(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Xe.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Xe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class bu extends Hu{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Wf({output:[e,e]})}static create(e){return new bu(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Xe.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Wf({output:[this.getValue(),e]})),this._value=0,super.reset()}}const qg={dependencies:null};class nw extends gB{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Ms(this.source,(r,i)=>{Q9(r)?t[i]=r.getValue(e):Ba(r)?t[i]=jr(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&sn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ms(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){qg.dependencies&&Ba(e)&&qg.dependencies.add(e);const t=e0(e);t&&sn(t,r=>this.add(r))}}class iw extends nw{constructor(e){super(e)}static create(e){return new iw(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(Z9)),!0)}}function Z9(n){return($v(n)?bu:Hu).create(n)}function bA(n){const e=Fa(n);return e?e.constructor:Xe.arr(n)?iw:$v(n)?bu:Hu}function Kg(){return Kg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kg.apply(this,arguments)}const gb=(n,e)=>{const t=!Xe.fun(n)||n.prototype&&n.prototype.isReactComponent;return k.forwardRef((r,i)=>{const a=k.useRef(null),s=t&&k.useCallback(v=>{a.current=t8(i,v)},[i]),[o,l]=e8(r,e),c=pB(),f=()=>{const v=a.current;if(t&&!v)return;(v?e.applyAnimatedValues(v,o.getValue(!0)):!1)===!1&&c()},p=new $9(f,l),h=k.useRef();ew(()=>(h.current=p,sn(l,v=>_h(v,p)),()=>{h.current&&(sn(h.current.deps,v=>Jg(v,h.current)),Pt.cancel(h.current.update))})),k.useEffect(f,[]),mB(()=>()=>{const v=h.current;sn(v.deps,x=>Jg(x,v))});const m=e.getComponentProps(o.getValue());return k.createElement(n,Kg({},m,{ref:s}))})};class $9{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Pt.write(this.update)}}function e8(n,e){const t=new Set;return qg.dependencies=t,n.style&&(n=Kg({},n,{style:e.createAnimatedStyle(n.style)})),n=new nw(n),qg.dependencies=null,[n,t]}function t8(n,e){return n&&(Xe.fun(n)?n(e):n.current=e),e}const vb=Symbol.for("AnimatedComponent"),n8=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new nw(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:r},a=s=>{const o=yb(s)||"Anonymous";return Xe.str(s)?s=a[s]||(a[s]=gb(s,i)):s=s[vb]||(s[vb]=gb(s,i)),s.displayName=`Animated(${o})`,s};return Ms(n,(s,o)=>{Xe.arr(n)&&(o=yb(s)),a[o]=a(s)}),{animated:a}},yb=n=>Xe.str(n)?n:n&&Xe.str(n.displayName)?n.displayName:Xe.fun(n)&&n.name||null;function di(){return di=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},di.apply(this,arguments)}function ol(n,...e){return Xe.fun(n)?n(...e):n}const of=(n,e)=>n===!0||!!(e&&n&&(Xe.fun(n)?n(e):ea(n).includes(e))),vB=(n,e)=>Xe.obj(n)?e&&n[e]:n,yB=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,i8=n=>n,rw=(n,e=i8)=>{let t=r8;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const r={};for(const i of t){const a=e(n[i],i);Xe.und(a)||(r[i]=a)}return r},r8=["config","onProps","onStart","onChange","onPause","onResume","onRest"],a8={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function s8(n){const e={};let t=0;if(Ms(n,(r,i)=>{a8[i]||(e[i]=r,t++)}),t)return e}function _B(n){const e=s8(n);if(e){const t={to:e};return Ms(n,(r,i)=>i in e||(t[i]=r)),t}return di({},n)}function jf(n){return n=jr(n),Xe.arr(n)?n.map(jf):$v(n)?Ka.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function o8(n){for(const e in n)return!0;return!1}function PA(n){return Xe.fun(n)||Xe.arr(n)&&Xe.obj(n[0])}function l8(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function c8(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const u8={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},RA=di({},u8.default,{mass:1,damping:1,easing:D9.linear,clamp:!1});class d8{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,RA)}}function f8(n,e,t){t&&(t=di({},t),_b(t,e),e=di({},t,e)),_b(n,e),Object.assign(n,e);for(const s in RA)n[s]==null&&(n[s]=RA[s]);let{mass:r,frequency:i,damping:a}=n;return Xe.und(i)||(i<.01&&(i=.01),a<0&&(a=0),n.tension=Math.pow(2*Math.PI/i,2)*r,n.friction=4*Math.PI*a*r/i),n}function _b(n,e){if(!Xe.und(e.decay))n.duration=void 0;else{const t=!Xe.und(e.tension)||!Xe.und(e.friction);(t||!Xe.und(e.frequency)||!Xe.und(e.damping)||!Xe.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const xb=[];class h8{constructor(){this.changed=!1,this.values=xb,this.toValues=null,this.fromValues=xb,this.to=void 0,this.from=void 0,this.config=new d8,this.immediate=!1}}function xB(n,{key:e,props:t,defaultProps:r,state:i,actions:a}){return new Promise((s,o)=>{var l;let c,f,p=of((l=t.cancel)!=null?l:r==null?void 0:r.cancel,e);if(p)v();else{Xe.und(t.pause)||(i.paused=of(t.pause,e));let x=r==null?void 0:r.pause;x!==!0&&(x=i.paused||of(x,e)),c=ol(t.delay||0,e),x?(i.resumeQueue.add(m),a.pause()):(a.resume(),m())}function h(){i.resumeQueue.add(m),i.timeouts.delete(f),f.cancel(),c=f.time-Pt.now()}function m(){c>0&&!Ka.skipAnimation?(i.delayed=!0,f=Pt.setTimeout(v,c),i.pauseQueue.add(h),i.timeouts.add(f)):v()}function v(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(f),n<=(i.cancelId||0)&&(p=!0);try{a.start(di({},t,{callId:n,cancel:p}),s)}catch(x){o(x)}}})}const aw=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?au(n.get()):e.every(t=>t.noop)?AB(n.get()):ga(n.get(),e.every(t=>t.finished)),AB=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ga=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),au=n=>({value:n,cancelled:!0,finished:!1});function SB(n,e,t,r){const{callId:i,parentId:a,onRest:s}=e,{asyncTo:o,promise:l}=t;return!a&&n===o&&!e.reset?l:t.promise=(async()=>{t.asyncId=i,t.asyncTo=n;const c=rw(e,(_,g)=>g==="onRest"?void 0:_);let f,p;const h=new Promise((_,g)=>(f=_,p=g)),m=_=>{const g=i<=(t.cancelId||0)&&au(r)||i!==t.asyncId&&ga(r,!1);if(g)throw _.result=g,p(_),_},v=(_,g)=>{const A=new Ab,S=new Sb;return(async()=>{if(Ka.skipAnimation)throw Jf(t),S.result=ga(r,!1),p(S),S;m(A);const C=Xe.obj(_)?di({},_):di({},g,{to:_});C.parentId=i,Ms(c,(M,b)=>{Xe.und(C[b])&&(C[b]=M)});const T=await r.start(C);return m(A),t.paused&&await new Promise(M=>{t.resumeQueue.add(M)}),T})()};let x;if(Ka.skipAnimation)return Jf(t),ga(r,!1);try{let _;Xe.arr(n)?_=(async g=>{for(const A of g)await v(A)})(n):_=Promise.resolve(n(v,r.stop.bind(r))),await Promise.all([_.then(f),h]),x=ga(r.get(),!0,!1)}catch(_){if(_ instanceof Ab)x=_.result;else if(_ instanceof Sb)x=_.result;else throw _}finally{i==t.asyncId&&(t.asyncId=a,t.asyncTo=a?o:void 0,t.promise=a?l:void 0)}return Xe.fun(s)&&Pt.batchedUpdates(()=>{s(x,r,r.item)}),x})()}function Jf(n,e){af(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class Ab extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class Sb extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const IA=n=>n instanceof sw;let p8=1;class sw extends O9{constructor(...e){super(...e),this.id=p8++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Fa(this);return e&&e.getValue()}to(...e){return Ka.to(this,e)}interpolate(...e){return W9(),Ka.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){jg(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Yv.sort(this),jg(this,{type:"priority",parent:this,priority:e})}}const Ll=Symbol.for("SpringPhase"),wB=1,FA=2,BA=4,I_=n=>(n[Ll]&wB)>0,Ws=n=>(n[Ll]&FA)>0,Bd=n=>(n[Ll]&BA)>0,wb=(n,e)=>e?n[Ll]|=FA|wB:n[Ll]&=~FA,Cb=(n,e)=>e?n[Ll]|=BA:n[Ll]&=~BA;class m8 extends sw{constructor(e,t){if(super(),this.key=void 0,this.animation=new h8,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Xe.und(e)||!Xe.und(t)){const r=Xe.obj(e)?di({},e):di({},t,{from:e});Xe.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Ws(this)||this._state.asyncTo)||Bd(this)}get goal(){return jr(this.animation.to)}get velocity(){const e=Fa(this);return e instanceof Hu?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return I_(this)}get isAnimating(){return Ws(this)}get isPaused(){return Bd(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const i=this.animation;let{config:a,toValues:s}=i;const o=e0(i.to);!o&&Ba(i.to)&&(s=ea(jr(i.to))),i.values.forEach((f,p)=>{if(f.done)return;const h=f.constructor==bu?1:o?o[p].lastPosition:s[p];let m=i.immediate,v=h;if(!m){if(v=f.lastPosition,a.tension<=0){f.done=!0;return}let x=f.elapsedTime+=e;const _=i.fromValues[p],g=f.v0!=null?f.v0:f.v0=Xe.arr(a.velocity)?a.velocity[p]:a.velocity;let A;const S=a.precision||(_==h?.005:Math.min(1,Math.abs(h-_)*.001));if(Xe.und(a.duration))if(a.decay){const C=a.decay===!0?.998:a.decay,T=Math.exp(-(1-C)*x);v=_+g/(1-C)*(1-T),m=Math.abs(f.lastPosition-v)<=S,A=g*T}else{A=f.lastVelocity==null?g:f.lastVelocity;const C=a.restVelocity||S/10,T=a.clamp?0:a.bounce,M=!Xe.und(T),b=_==h?f.v0>0:_<h;let L,R=!1;const F=1,O=Math.ceil(e/F);for(let X=0;X<O&&(L=Math.abs(A)>C,!(!L&&(m=Math.abs(h-v)<=S,m)));++X){M&&(R=v==h||v>h==b,R&&(A=-A*T,v=h));const ne=-a.tension*1e-6*(v-h),W=-a.friction*.001*A,Z=(ne+W)/a.mass;A=A+Z*F,v=v+A*F}}else{let C=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,f.durationProgress>0&&(f.elapsedTime=a.duration*f.durationProgress,x=f.elapsedTime+=e)),C=(a.progress||0)+x/this._memoizedDuration,C=C>1?1:C<0?0:C,f.durationProgress=C),v=_+a.easing(C)*(h-_),A=(v-f.lastPosition)/e,m=C==1}f.lastVelocity=A,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),m=!0)}o&&!o[p].done&&(m=!1),m?f.done=!0:t=!1,f.setValue(v,a.round)&&(r=!0)});const l=Fa(this),c=l.getValue();if(t){const f=jr(i.to);(c!==f||r)&&!a.decay?(l.setValue(f),this._onChange(f)):r&&a.decay&&this._onChange(c),this._stop()}else r&&this._onChange(c)}set(e){return Pt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ws(this)){const{to:e,config:t}=this.animation;Pt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return Xe.und(e)?(r=this.queue||[],this.queue=[]):r=[Xe.obj(e)?e:di({},t,{to:e})],Promise.all(r.map(i=>this._update(i))).then(i=>aw(this,i))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Jf(this._state,e&&this._lastCallId),Pt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:i}=e;r=Xe.obj(r)?r[t]:r,(r==null||PA(r))&&(r=void 0),i=Xe.obj(i)?i[t]:i,i==null&&(i=void 0);const a={to:r,from:i};return I_(this)||(e.reverse&&([r,i]=[i,r]),i=jr(i),Xe.und(i)?Fa(this)||this._set(r):this._set(i)),a}_update(e,t){let r=di({},e);const{key:i,defaultProps:a}=this;r.default&&Object.assign(a,rw(r,(l,c)=>/^on/.test(c)?vB(l,i):l)),Mb(this,r,"onProps"),Dd(this,"onProps",r,this);const s=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return xB(++this._lastCallId,{key:i,props:r,defaultProps:a,state:o,actions:{pause:()=>{Bd(this)||(Cb(this,!0),Hd(o.pauseQueue),Dd(this,"onPause",ga(this,Ld(this,this.animation.to)),this))},resume:()=>{Bd(this)&&(Cb(this,!1),Ws(this)&&this._resume(),Hd(o.resumeQueue),Dd(this,"onResume",ga(this,Ld(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(l=>{if(r.loop&&l.finished&&!(t&&l.noop)){const c=CB(r);if(c)return this._update(c,!0)}return l})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(au(this));const i=!Xe.und(e.to),a=!Xe.und(e.from);if(i||a)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(au(this));const{key:s,defaultProps:o,animation:l}=this,{to:c,from:f}=l;let{to:p=c,from:h=f}=e;a&&!i&&(!t.default||Xe.und(p))&&(p=h),t.reverse&&([p,h]=[h,p]);const m=!ds(h,f);m&&(l.from=h),h=jr(h);const v=!ds(p,c);v&&this._focus(p);const x=PA(t.to),{config:_}=l,{decay:g,velocity:A}=_;(i||a)&&(_.velocity=0),t.config&&!x&&f8(_,ol(t.config,s),t.config!==o.config?ol(o.config,s):void 0);let S=Fa(this);if(!S||Xe.und(p))return r(ga(this,!0));const C=Xe.und(t.reset)?a&&!t.default:!Xe.und(h)&&of(t.reset,s),T=C?h:this.get(),M=jf(p),b=Xe.num(M)||Xe.arr(M)||$v(M),L=!x&&(!b||of(o.immediate||t.immediate,s));if(v){const X=bA(p);if(X!==S.constructor)if(L)S=this._set(M);else throw Error(`Cannot animate between ${S.constructor.name} and ${X.name}, as the "to" prop suggests`)}const R=S.constructor;let F=Ba(p),O=!1;if(!F){const X=C||!I_(this)&&m;(v||X)&&(O=ds(jf(T),M),F=!O),(!ds(l.immediate,L)&&!L||!ds(_.decay,g)||!ds(_.velocity,A))&&(F=!0)}if(O&&Ws(this)&&(l.changed&&!C?F=!0:F||this._stop(c)),!x&&((F||Ba(c))&&(l.values=S.getPayload(),l.toValues=Ba(p)?null:R==bu?[1]:ea(M)),l.immediate!=L&&(l.immediate=L,!L&&!C&&this._set(c)),F)){const{onRest:X}=l;sn(v8,W=>Mb(this,t,W));const ne=ga(this,Ld(this,c));Hd(this._pendingCalls,ne),this._pendingCalls.add(r),l.changed&&Pt.batchedUpdates(()=>{l.changed=!C,X==null||X(ne,this),C?ol(o.onRest,ne):l.onStart==null||l.onStart(ne,this)})}C&&this._set(T),x?r(SB(t.to,t,this._state,this)):F?this._start():Ws(this)&&!v?this._pendingCalls.add(r):r(AB(T))}_focus(e){const t=this.animation;e!==t.to&&(hb(this)&&this._detach(),t.to=e,hb(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ba(t)&&(_h(t,this),IA(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ba(e)&&Jg(e,this)}_set(e,t=!0){const r=jr(e);if(!Xe.und(r)){const i=Fa(this);if(!i||!ds(r,i.getValue())){const a=bA(r);!i||i.constructor!=a?tw(this,a.create(r)):i.setValue(r),i&&Pt.batchedUpdates(()=>{this._onChange(r,t)})}}return Fa(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Dd(this,"onStart",ga(this,Ld(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ol(this.animation.onChange,e,this)),ol(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Fa(this).reset(jr(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ws(this)||(wb(this,!0),Bd(this)||this._resume())}_resume(){Ka.skipAnimation?this.finish():Yv.start(this)}_stop(e,t){if(Ws(this)){wb(this,!1);const r=this.animation;sn(r.values,a=>{a.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),jg(this,{type:"idle",parent:this});const i=t?au(this.get()):ga(this.get(),Ld(this,e??r.to));Hd(this._pendingCalls,i),r.changed&&(r.changed=!1,Dd(this,"onRest",i,this))}}}function Ld(n,e){const t=jf(e),r=jf(n.get());return ds(r,t)}function CB(n,e=n.loop,t=n.to){let r=ol(e);if(r){const i=r!==!0&&_B(r),a=(i||n).reverse,s=!i||i.reset;return qf(di({},n,{loop:e,default:!1,pause:void 0,to:!a||PA(t)?t:void 0,from:s?n.from:void 0,reset:s},i))}}function qf(n){const{to:e,from:t}=n=_B(n),r=new Set;return Xe.obj(e)&&Eb(e,r),Xe.obj(t)&&Eb(t,r),n.keys=r.size?Array.from(r):null,n}function g8(n){const e=qf(n);return Xe.und(e.default)&&(e.default=rw(e)),e}function Eb(n,e){Ms(n,(t,r)=>t!=null&&e.add(r))}const v8=["onStart","onRest","onChange","onPause","onResume"];function Mb(n,e,t){n.animation[t]=e[t]!==yB(e,t)?vB(e[t],n.key):void 0}function Dd(n,e,...t){var r,i,a,s;(r=(i=n.animation)[e])==null||r.call(i,...t),(a=(s=n.defaultProps)[e])==null||a.call(s,...t)}const y8=["onStart","onChange","onRest"];let _8=1,x8=class{constructor(e,t){this.id=_8++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(di({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];Xe.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(qf(e)),this}start(e){let{queue:t}=this;return e?t=ea(e).map(qf):this.queue=[],this._flush?this._flush(this,t):(PB(this,t),LA(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;sn(ea(t),i=>r[i].stop(!!e))}else Jf(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(Xe.und(e))this.start({pause:!0});else{const t=this.springs;sn(ea(e),r=>t[r].pause())}return this}resume(e){if(Xe.und(e))this.start({pause:!1});else{const t=this.springs;sn(ea(e),r=>t[r].resume())}return this}each(e){Ms(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,a=this._changed.size>0;(i&&!this._started||a&&!this._started)&&(this._started=!0,af(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const s=!i&&this._started,o=a||s&&r.size?this.get():null;a&&t.size&&af(t,([l,c])=>{c.value=o,l(c,this,this._item)}),s&&(this._started=!1,af(r,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Pt.onFrame(this._onFrame)}};function LA(n,e){return Promise.all(e.map(t=>EB(n,t))).then(t=>aw(n,t))}async function EB(n,e,t){const{keys:r,to:i,from:a,loop:s,onRest:o,onResolve:l}=e,c=Xe.obj(e.default)&&e.default;s&&(e.loop=!1),i===!1&&(e.to=null),a===!1&&(e.from=null);const f=Xe.arr(i)||Xe.fun(i)?i:void 0;f?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):sn(y8,x=>{const _=e[x];if(Xe.fun(_)){const g=n._events[x];e[x]=({finished:A,cancelled:S})=>{const C=g.get(_);C?(A||(C.finished=!1),S&&(C.cancelled=!0)):g.set(_,{value:null,finished:A||!1,cancelled:S||!1})},c&&(c[x]=e[x])}});const p=n._state;e.pause===!p.paused?(p.paused=e.pause,Hd(e.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(e.pause=!0);const h=(r||Object.keys(n.springs)).map(x=>n.springs[x].start(e)),m=e.cancel===!0||yB(e,"cancel")===!0;(f||m&&p.asyncId)&&h.push(xB(++n._lastAsyncId,{props:e,state:p,actions:{pause:EA,resume:EA,start(x,_){m?(Jf(p,n._lastAsyncId),_(au(n))):(x.onRest=o,_(SB(f,x,p,n)))}}})),p.paused&&await new Promise(x=>{p.resumeQueue.add(x)});const v=aw(n,await Promise.all(h));if(s&&v.finished&&!(t&&v.noop)){const x=CB(e,s,i);if(x)return PB(n,[x]),EB(n,x,!0)}return l&&Pt.batchedUpdates(()=>l(v,n,n.item)),v}function Tb(n,e){const t=di({},n.springs);return e&&sn(ea(e),r=>{Xe.und(r.keys)&&(r=qf(r)),Xe.obj(r.to)||(r=di({},r,{to:void 0})),bB(t,r,i=>TB(i))}),MB(n,t),t}function MB(n,e){Ms(e,(t,r)=>{n.springs[r]||(n.springs[r]=t,_h(t,n))})}function TB(n,e){const t=new m8;return t.key=n,e&&_h(t,e),t}function bB(n,e,t){e.keys&&sn(e.keys,r=>{(n[r]||(n[r]=t(r)))._prepareNode(e)})}function PB(n,e){sn(e,t=>{bB(n.springs,t,r=>TB(r,n))})}function A8(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}const S8=["children"],t0=n=>{let{children:e}=n,t=A8(n,S8);const r=k.useContext(Yg),i=t.pause||!!r.pause,a=t.immediate||!!r.immediate;t=q9(()=>({pause:i,immediate:a}),[i,a]);const{Provider:s}=Yg;return k.createElement(s,{value:t},e)},Yg=w8(t0,{});t0.Provider=Yg.Provider;t0.Consumer=Yg.Consumer;function w8(n,e){return Object.assign(n,k.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const C8=()=>{const n=[],e=function(i){j9();const a=[];return sn(n,(s,o)=>{if(Xe.und(i))a.push(s.start());else{const l=t(i,s,o);l&&a.push(s.start(l))}}),a};e.current=n,e.add=function(r){n.includes(r)||n.push(r)},e.delete=function(r){const i=n.indexOf(r);~i&&n.splice(i,1)},e.pause=function(){return sn(n,r=>r.pause(...arguments)),this},e.resume=function(){return sn(n,r=>r.resume(...arguments)),this},e.set=function(r){sn(n,i=>i.set(r))},e.start=function(r){const i=[];return sn(n,(a,s)=>{if(Xe.und(r))i.push(a.start());else{const o=this._getProps(r,a,s);o&&i.push(a.start(o))}}),i},e.stop=function(){return sn(n,r=>r.stop(...arguments)),this},e.update=function(r){return sn(n,(i,a)=>i.update(this._getProps(r,i,a))),this};const t=function(i,a,s){return Xe.fun(i)?i(s,a):i};return e._getProps=t,e};function E8(n,e,t){const r=Xe.fun(e)&&e;r&&!t&&(t=[]);const i=k.useMemo(()=>r||arguments.length==3?C8():void 0,[]),a=k.useRef(0),s=pB(),o=k.useMemo(()=>({ctrls:[],queue:[],flush(g,A){const S=Tb(g,A);return a.current>0&&!o.queue.length&&!Object.keys(S).some(T=>!g.springs[T])?LA(g,A):new Promise(T=>{MB(g,S),o.queue.push(()=>{T(LA(g,A))}),s()})}}),[]),l=k.useRef([...o.ctrls]),c=[],f=mb(n)||0;k.useMemo(()=>{sn(l.current.slice(n,f),g=>{l8(g,i),g.stop(!0)}),l.current.length=n,p(f,n)},[n]),k.useMemo(()=>{p(0,Math.min(f,n))},t);function p(g,A){for(let S=g;S<A;S++){const C=l.current[S]||(l.current[S]=new x8(null,o.flush)),T=r?r(S,C):e[S];T&&(c[S]=g8(T))}}const h=l.current.map((g,A)=>Tb(g,c[A])),m=k.useContext(t0),v=mb(m),x=m!==v&&o8(m);ew(()=>{a.current++,o.ctrls=l.current;const{queue:g}=o;g.length&&(o.queue=[],sn(g,A=>A())),sn(l.current,(A,S)=>{i==null||i.add(A),x&&A.start({default:m});const C=c[S];C&&(c8(A,C.ref),A.ref?A.queue.push(C):A.start(C))})}),mB(()=>()=>{sn(o.ctrls,g=>g.stop(!0))});const _=h.map(g=>di({},g));return i?[_,i]:_}function M8(n,e){const t=Xe.fun(n),[[r],i]=E8(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[r,i]:r}let bb;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(bb||(bb={}));class T8 extends sw{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Wf(...t);const r=this._get(),i=bA(r);tw(this,i.create(r))}advance(e){const t=this._get(),r=this.get();ds(t,r)||(Fa(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Pb(this._active)&&F_(this)}_get(){const e=Xe.arr(this.source)?this.source.map(jr):ea(jr(this.source));return this.calc(...e)}_start(){this.idle&&!Pb(this._active)&&(this.idle=!1,sn(e0(this),e=>{e.done=!1}),Ka.skipAnimation?(Pt.batchedUpdates(()=>this.advance()),F_(this)):Yv.start(this))}_attach(){let e=1;sn(ea(this.source),t=>{Ba(t)&&_h(t,this),IA(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){sn(ea(this.source),e=>{Ba(e)&&Jg(e,this)}),this._active.clear(),F_(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ea(this.source).reduce((t,r)=>Math.max(t,(IA(r)?r.priority:0)+1),0))}}function b8(n){return n.idle!==!1}function Pb(n){return!n.size||Array.from(n).every(b8)}function F_(n){n.idle||(n.idle=!0,sn(e0(n),e=>{e.done=!0}),jg(n,{type:"idle",parent:n}))}Ka.assign({createStringInterpolator:fB,to:(n,e)=>new T8(n,e)});const P8=["primitive"].concat(Object.keys(IR).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Ka.assign({createStringInterpolator:fB,colors:S9,frameLoop:"demand"});G4(()=>{Pt.advance()});const R8=n8(P8,{applyAnimatedValues:il}),I8=R8.animated;function F8(n,e,t){return Math.max(e,Math.min(n,t))}const An={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function Rb(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function Ib(n,e,t,r=.15){return r===0?F8(n,e,t):n<e?-Rb(e-n,t-e,r)+e:n>t?+Rb(n-t,t-e,r)+t:n}function B8(n,[e,t],[r,i]){const[[a,s],[o,l]]=n;return[Ib(e,a,s,r),Ib(t,o,l,i)]}function L8(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function D8(n){var e=L8(n,"string");return typeof e=="symbol"?e:String(e)}function Jn(n,e,t){return e=D8(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fb(Object(t),!0).forEach(function(r){Jn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const RB={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Bb(n){return n?n[0].toUpperCase()+n.slice(1):""}const U8=["enter","leave"];function O8(n=!1,e){return n&&!U8.includes(e)}function k8(n,e="",t=!1){const r=RB[n],i=r&&r[e]||e;return"on"+Bb(n)+Bb(i)+(O8(t,i)?"Capture":"")}const N8=["gotpointercapture","lostpointercapture"];function z8(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=N8.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function V8(n,e=""){const t=RB[n],r=t&&t[e]||e;return n+r}function n0(n){return"touches"in n}function IB(n){return n0(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function G8(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function H8(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function FB(n){return n0(n)?H8(n)[0]:n}function DA(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,i=(e.clientX+n.clientX)/2,a=(e.clientY+n.clientY)/2,s=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:s,origin:[i,a]}}catch{}return null}function W8(n){return G8(n).map(e=>e.identifier)}function Lb(n,e){const[t,r]=Array.from(n.touches).filter(i=>e.includes(i.identifier));return DA(t,r)}function B_(n){const e=FB(n);return n0(n)?e.identifier:e.pointerId}function Pu(n){const e=FB(n);return[e.clientX,e.clientY]}const Db=40,Ub=800;function BB(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=Db,t*=Db):r===2&&(e*=Ub,t*=Ub),[e,t]}function X8(n){var e,t;const{scrollX:r,scrollY:i,scrollLeft:a,scrollTop:s}=n.currentTarget;return[(e=r??a)!==null&&e!==void 0?e:0,(t=i??s)!==null&&t!==void 0?t:0]}function j8(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:a}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:a})}return e}function Qg(n,...e){return typeof n=="function"?n(...e):n}function J8(){}function q8(...n){return n.length===0?J8:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function Ob(n,e){return Object.assign({},e,n||{})}const K8=32;class LB{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Qg(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let a=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,j8(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const M=t._delta.map(Math.abs);An.addTo(t._distance,M)}this.axisIntent&&this.axisIntent(e);const[s,o]=t._movement,[l,c]=r.threshold,{_step:f,values:p}=t;if(r.hasCustomTransform?(f[0]===!1&&(f[0]=Math.abs(s)>=l&&p[0]),f[1]===!1&&(f[1]=Math.abs(o)>=c&&p[1])):(f[0]===!1&&(f[0]=Math.abs(s)>=l&&Math.sign(s)*l),f[1]===!1&&(f[1]=Math.abs(o)>=c&&Math.sign(o)*c)),t.intentional=f[0]!==!1||f[1]!==!1,!t.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[M,b]=p;h[0]=f[0]!==!1?M-f[0]:0,h[1]=f[1]!==!1?b-f[1]:0}else h[0]=f[0]!==!1?s-f[0]:0,h[1]=f[1]!==!1?o-f[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Qg(r.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[x,_]=t.offset,[[g,A],[S,C]]=t._bounds;t.overflow=[x<g?-1:x>A?1:0,_<S?-1:_>C?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const T=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=B8(t._bounds,t.offset,T),t.delta=An.sub(t.offset,m),this.computeMovement(),v&&(!t.last||a>K8)){t.delta=An.sub(t.offset,m);const M=t.delta.map(Math.abs);An.addTo(t.distance,M),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[M[0]/a,M[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Fn(Fn(Fn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Y8([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class xh extends LB{constructor(...e){super(...e),Jn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=An.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=An.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[IB(e)]:r.axisThreshold;t.axis=Y8(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Q8=n=>n,kb=.15,DB={enabled(n=!0){return n},eventOptions(n,e,t){return Fn(Fn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[kb,kb];case!1:return[0,0];default:return An.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return An.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||Q8},threshold(n){return An.toVector(n,0)}},Z8=0,Wl=Fn(Fn({},DB),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Z8){return n},bounds(n={}){if(typeof n=="function")return a=>Wl.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),Nb={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class $8 extends xh{constructor(...e){super(...e),Jn(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=Wl.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=B_(e),r._pointerActive=!0,this.computeValues(Pu(e)),this.computeInitial(),t.preventScrollAxis&&IB(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=B_(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const a=Pu(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=An.sub(a,t._values),this.computeValues(a)),An.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=B_(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,s]=t._distance;if(t.tap=a<=r.tapsThreshold&&s<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[o,l]=t._delta,[c,f]=t._movement,[p,h]=r.swipe.velocity,[m,v]=r.swipe.distance,x=r.swipe.duration;if(t.elapsedTime<x){const _=Math.abs(o/t.timeDelta),g=Math.abs(l/t.timeDelta);_>p&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(o)),g>h&&Math.abs(f)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,e6(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=Nb[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,An.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Nb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function e6(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Ah=typeof window<"u"&&window.document&&window.document.createElement;function UB(){return Ah&&"ontouchstart"in window}function t6(){return UB()||Ah&&window.navigator.maxTouchPoints>1}function n6(){return Ah&&"onpointerdown"in window}function i6(){return Ah&&"exitPointerLock"in window.document}function r6(){try{return"constructor"in GestureEvent}catch{return!1}}const Kr={isBrowser:Ah,gesture:r6(),touch:UB(),touchscreen:t6(),pointer:n6(),pointerLock:i6()},a6=250,s6=180,o6=.5,l6=50,c6=250,u6=10,zb={mouse:0,touch:0,pen:8},d6=Fn(Fn({},Wl),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Kr.pointerLock,Kr.touch&&t?"touch":this.pointerLock?"mouse":Kr.pointer&&!i?"pointer":Kr.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?a6:void 0,!(!Kr.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const a=An.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,a},swipe({velocity:n=o6,distance:e=l6,duration:t=c6}={}){return{velocity:this.transform(An.toVector(n)),distance:this.transform(An.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return s6;case!1:return 0;default:return n}},axisThreshold(n){return n?Fn(Fn({},zb),n):zb},keyboardDisplacement(n=u6){return n}});function OB(n){const[e,t]=n.overflow,[r,i]=n._delta,[a,s]=n._direction;(e<0&&r>0&&a<0||e>0&&r<0&&a>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&i>0&&s<0||t>0&&i<0&&s>0)&&(n._movement[1]=n._movementBound[1])}const f6=30,h6=100;class p6 extends LB{constructor(...e){super(...e),Jn(this,"ingKey","pinching"),Jn(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=An.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const i=Math.abs(t)*f6-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(a=>r.has(a))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const i=Lb(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(s=>i.has(s))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const a=DA(...Array.from(r.values()));a&&this.pinchStart(e,a)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=Lb(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=DA(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,i=r._values[1],a=t.angle-i;let s=0;Math.abs(a)>270&&(s+=Math.sign(a)),this.computeValues([t.distance,t.angle-360*s]),r.origin=t.origin,r.turns=s,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=An.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(r=>e[r]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-BB(e)[1]/h6*r.offset[0],0],An.addTo(r._movement,r._delta),OB(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const m6=Fn(Fn({},DB),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Kr.touch&&Kr.gesture)return"gesture";if(Kr.touch&&r)return"touch";if(Kr.touchscreen){if(Kr.pointer)return"pointer";if(Kr.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=s=>{const o=Ob(Qg(t,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=Ob(Qg(r,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof r!="function"?[i(),a()]:s=>[i(s),a(s)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",An.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class g6 extends xh{constructor(...e){super(...e),Jn(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Pu(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Pu(e),r=this.state;r._delta=An.sub(t,r._values),An.addTo(r._movement,r._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const v6=Fn(Fn({},Wl),{},{mouseOnly:(n=!0)=>n});class y6 extends xh{constructor(...e){super(...e),Jn(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,r=X8(e);t._delta=An.sub(r,t._values),An.addTo(t._movement,t._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const _6=Wl;class x6 extends xh{constructor(...e){super(...e),Jn(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=BB(e),An.addTo(t._movement,t._delta),OB(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const A6=Wl;class S6 extends xh{constructor(...e){super(...e),Jn(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Pu(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const r=Pu(e);t._movement=t._delta=An.sub(r,t._values),this.computeValues(r),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const w6=Fn(Fn({},Wl),{},{mouseOnly:(n=!0)=>n}),ow=new Map,UA=new Map;function C6(n){ow.set(n.key,n.engine),UA.set(n.key,n.resolver)}const E6={key:"drag",engine:$8,resolver:d6},M6={key:"hover",engine:S6,resolver:w6},T6={key:"move",engine:g6,resolver:v6},b6={key:"pinch",engine:p6,resolver:m6},P6={key:"scroll",engine:y6,resolver:_6},R6={key:"wheel",engine:x6,resolver:A6};function I6(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function F6(n,e){if(n==null)return{};var t=I6(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const B6={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Kr.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},L6=["target","eventOptions","window","enabled","transform"];function cg(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=cg(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function D6(n,e,t={}){const r=n,{target:i,eventOptions:a,window:s,enabled:o,transform:l}=r,c=F6(r,L6);if(t.shared=cg({target:i,eventOptions:a,window:s,enabled:o,transform:l},B6),e){const f=UA.get(e);t[e]=cg(Fn({shared:t.shared},c),f)}else for(const f in c){const p=UA.get(f);p&&(t[f]=cg(Fn({shared:t.shared},c[f]),p))}return t}class kB{constructor(e,t){Jn(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,a){const s=this._listeners,o=V8(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Fn(Fn({},l),a);e.addEventListener(o,i,c);const f=()=>{e.removeEventListener(o,i,c),s.delete(f)};return s.add(f),f}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class U6{constructor(){Jn(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class O6{constructor(e){Jn(this,"gestures",new Set),Jn(this,"_targetEventStore",new kB(this)),Jn(this,"gestureEventStores",{}),Jn(this,"gestureTimeoutStores",{}),Jn(this,"handlers",{}),Jn(this,"config",{}),Jn(this,"pointerIds",new Set),Jn(this,"touchIds",new Set),Jn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),k6(this,e)}setEventIds(e){if(n0(e))return this.touchIds=new Set(W8(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=D6(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const s of this.gestures){const o=this.config[s],l=Vb(r,o.eventOptions,!!i);if(o.enabled){const c=ow.get(s);new c(this,e,s).bind(l)}}const a=Vb(r,t.eventOptions,!!i);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](Fn(Fn({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in r)r[a]=q8(...r[a]);if(!i)return r;for(const a in r){const{device:s,capture:o,passive:l}=z8(a);this._targetEventStore.add(i,s,"",r[a],{capture:o,passive:l})}}}}function bc(n,e){n.gestures.add(e),n.gestureEventStores[e]=new kB(n,e),n.gestureTimeoutStores[e]=new U6}function k6(n,e){e.drag&&bc(n,"drag"),e.wheel&&bc(n,"wheel"),e.scroll&&bc(n,"scroll"),e.move&&bc(n,"move"),e.pinch&&bc(n,"pinch"),e.hover&&bc(n,"hover")}const Vb=(n,e,t)=>(r,i,a,s={},o=!1)=>{var l,c;const f=(l=s.capture)!==null&&l!==void 0?l:e.capture,p=(c=s.passive)!==null&&c!==void 0?c:e.passive;let h=o?r:k8(r,i,f);t&&p&&(h+="Passive"),n[h]=n[h]||[],n[h].push(a)},N6=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function z6(n){const e={},t={},r=new Set;for(let i in n)N6.test(i)?(r.add(RegExp.lastMatch),t[i]=n[i]):e[i]=n[i];return[t,e,r]}function Pc(n,e,t,r,i,a){if(!n.has(t)||!ow.has(r))return;const s=t+"Start",o=t+"End",l=c=>{let f;return c.first&&s in e&&e[s](c),t in e&&(f=e[t](c)),c.last&&o in e&&e[o](c),f};i[r]=l,a[r]=a[r]||{}}function V6(n,e){const[t,r,i]=z6(n),a={};return Pc(i,t,"onDrag","drag",a,e),Pc(i,t,"onWheel","wheel",a,e),Pc(i,t,"onScroll","scroll",a,e),Pc(i,t,"onPinch","pinch",a,e),Pc(i,t,"onMove","move",a,e),Pc(i,t,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:r}}function G6(n,e={},t,r){const i=Wd.useMemo(()=>new O6(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Wd.useEffect(i.effect.bind(i)),Wd.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function H6(n){return n.forEach(C6),function(t,r){const{handlers:i,nativeHandlers:a,config:s}=V6(t,r||{});return G6(i,s,void 0,a)}}function W6(n,e){return H6([E6,b6,P6,R6,T6,M6])(n,e||{})}function NB({enabled:n=!0,snap:e,global:t,domElement:r,cursor:i=!0,children:a,speed:s=1,rotation:o=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:f=[-1/0,1/0],config:p={mass:1,tension:170,friction:26}}){const h=Wi(M=>M.events),m=Wi(M=>M.gl),v=r||h.connected||m.domElement,{size:x}=Wi(),_=k.useMemo(()=>[o[0]+c[0],o[0]+c[1]],[o[0],c[0],c[1]]),g=k.useMemo(()=>[o[1]+f[0],o[1]+f[1]],[o[1],f[0],f[1]]),A=k.useMemo(()=>[Ua.clamp(o[0],..._),Ua.clamp(o[1],...g),o[2]],[o[0],o[1],o[2],_,g]),[S,C]=M8(()=>({scale:1,rotation:A,config:p}));k.useEffect(()=>void C.start({scale:1,rotation:A,config:p}),[A]),k.useEffect(()=>{if(t&&i&&n)return v.style.cursor="grab",m.domElement.style.cursor="",()=>{v.style.cursor="default",m.domElement.style.cursor="default"}},[t,i,v,n]);const T=W6({onHover:({last:M})=>{i&&!t&&n&&(v.style.cursor=M?"auto":"grab")},onDrag:({down:M,delta:[b,L],memo:[R,F]=S.rotation.animation.to||A})=>{if(!n)return[L,b];i&&(v.style.cursor=M?"grabbing":"grab"),b=Ua.clamp(F+b/x.width*Math.PI*s,...g),L=Ua.clamp(R+L/x.height*Math.PI*s,..._);const O=e&&!M&&typeof e!="boolean"?e:p;return C.start({scale:M&&L>_[1]/2?l:1,rotation:e&&!M?A:[L,b,0],config:X=>X==="scale"?{...O,friction:O.friction*3}:O}),[L,b]}},{target:t?v:void 0});return k.createElement(I8.group,wr({},T==null?void 0:T(),S),a)}function Gb(n,e){if(e===y2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===hg||e===dS){let t=n.getIndex();if(t===null){const s=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===hg)for(let s=1;s<=r;s++)i.push(t.getX(0)),i.push(t.getX(s)),i.push(t.getX(s+1));else for(let s=0;s<r;s++)s%2===0?(i.push(t.getX(s)),i.push(t.getX(s+1)),i.push(t.getX(s+2))):(i.push(t.getX(s+2)),i.push(t.getX(s+1)),i.push(t.getX(s)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(i),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const X6=parseInt(Ol.replace(/\D+/g,""));var Zr=Uint8Array,ro=Uint16Array,OA=Uint32Array,zB=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VB=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j6=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GB=function(n,e){for(var t=new ro(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new OA(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return[t,i]},HB=GB(zB,2),WB=HB[0],J6=HB[1];WB[28]=258,J6[258]=28;var q6=GB(VB,0),K6=q6[0],kA=new ro(32768);for(var _n=0;_n<32768;++_n){var Xs=(_n&43690)>>>1|(_n&21845)<<1;Xs=(Xs&52428)>>>2|(Xs&13107)<<2,Xs=(Xs&61680)>>>4|(Xs&3855)<<4,kA[_n]=((Xs&65280)>>>8|(Xs&255)<<8)>>>1}var lf=function(n,e,t){for(var r=n.length,i=0,a=new ro(e);i<r;++i)++a[n[i]-1];var s=new ro(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new ro(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],f=e-n[i],p=s[n[i]-1]++<<f,h=p|(1<<f)-1;p<=h;++p)o[kA[p]>>>l]=c}else for(o=new ro(r),i=0;i<r;++i)n[i]&&(o[i]=kA[s[n[i]-1]++]>>>15-n[i]);return o},Sh=new Zr(288);for(var _n=0;_n<144;++_n)Sh[_n]=8;for(var _n=144;_n<256;++_n)Sh[_n]=9;for(var _n=256;_n<280;++_n)Sh[_n]=7;for(var _n=280;_n<288;++_n)Sh[_n]=8;var XB=new Zr(32);for(var _n=0;_n<32;++_n)XB[_n]=5;var Y6=lf(Sh,9,1),Q6=lf(XB,5,1),L_=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},da=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},D_=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Z6=function(n){return(n/8|0)+(n&7&&1)},$6=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof ro?ro:n instanceof OA?OA:Zr)(t-e);return r.set(n.subarray(e,t)),r},eW=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Zr(0);var i=!e||t,a=!t||t.i;t||(t={}),e||(e=new Zr(r*3));var s=function(Ie){var ke=e.length;if(Ie>ke){var ct=new Zr(Math.max(ke*2,Ie));ct.set(e),e=ct}},o=t.f||0,l=t.p||0,c=t.b||0,f=t.l,p=t.d,h=t.m,m=t.n,v=r*8;do{if(!f){t.f=o=da(n,l,1);var x=da(n,l+1,3);if(l+=3,x)if(x==1)f=Y6,p=Q6,h=9,m=5;else if(x==2){var S=da(n,l,31)+257,C=da(n,l+10,15)+4,T=S+da(n,l+5,31)+1;l+=14;for(var M=new Zr(T),b=new Zr(19),L=0;L<C;++L)b[j6[L]]=da(n,l+L*3,7);l+=C*3;for(var R=L_(b),F=(1<<R)-1,O=lf(b,R,1),L=0;L<T;){var X=O[da(n,l,F)];l+=X&15;var _=X>>>4;if(_<16)M[L++]=_;else{var ne=0,W=0;for(_==16?(W=3+da(n,l,3),l+=2,ne=M[L-1]):_==17?(W=3+da(n,l,7),l+=3):_==18&&(W=11+da(n,l,127),l+=7);W--;)M[L++]=ne}}var Z=M.subarray(0,S),ie=M.subarray(S);h=L_(Z),m=L_(ie),f=lf(Z,h,1),p=lf(ie,m,1)}else throw"invalid block type";else{var _=Z6(l)+4,g=n[_-4]|n[_-3]<<8,A=_+g;if(A>r){if(a)throw"unexpected EOF";break}i&&s(c+g),e.set(n.subarray(_,A),c),t.b=c+=g,t.p=l=A*8;continue}if(l>v){if(a)throw"unexpected EOF";break}}i&&s(c+131072);for(var he=(1<<h)-1,Y=(1<<m)-1,re=l;;re=l){var ne=f[D_(n,l)&he],te=ne>>>4;if(l+=ne&15,l>v){if(a)throw"unexpected EOF";break}if(!ne)throw"invalid length/literal";if(te<256)e[c++]=te;else if(te==256){re=l,f=null;break}else{var de=te-254;if(te>264){var L=te-257,fe=zB[L];de=da(n,l,(1<<fe)-1)+WB[L],l+=fe}var ae=p[D_(n,l)&Y],_e=ae>>>4;if(!ae)throw"invalid distance";l+=ae&15;var ie=K6[_e];if(_e>3){var fe=VB[_e];ie+=D_(n,l)&(1<<fe)-1,l+=fe}if(l>v){if(a)throw"unexpected EOF";break}i&&s(c+131072);for(var Pe=c+de;c<Pe;c+=4)e[c]=e[c-ie],e[c+1]=e[c+1-ie],e[c+2]=e[c+2-ie],e[c+3]=e[c+3-ie];c=Pe}}t.l=f,t.p=re,t.b=c,f&&(o=1,t.m=h,t.d=p,t.n=m)}while(!o);return c==e.length?e:$6(e,0,c)},tW=new Zr(0),nW=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zm(n,e){return eW((nW(n),n.subarray(2,-4)),e)}var iW=typeof TextDecoder<"u"&&new TextDecoder,rW=0;try{iW.decode(tW,{stream:!0}),rW=1}catch{}const aW=n=>n&&n.isCubeTexture;class sW extends kn{constructor(e,t){var r,i;const a=aW(e),o=((i=a?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),f=3*Math.max(c,16*7),p=4*c,h=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/p}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Ol.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new lh(1,16),g=new fr({uniforms:x,fragmentShader:v,vertexShader:m,side:Yr});super(_,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class lw extends Di{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new dW(t)}),this.register(function(t){return new _W(t)}),this.register(function(t){return new xW(t)}),this.register(function(t){return new AW(t)}),this.register(function(t){return new hW(t)}),this.register(function(t){return new pW(t)}),this.register(function(t){return new mW(t)}),this.register(function(t){return new gW(t)}),this.register(function(t){return new uW(t)}),this.register(function(t){return new vW(t)}),this.register(function(t){return new fW(t)}),this.register(function(t){return new yW(t)}),this.register(function(t){return new lW(t)}),this.register(function(t){return new SW(t)}),this.register(function(t){return new wW(t)})}load(e,t,r,i){const a=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=Va.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),a.manager.itemError(e),a.manager.itemEnd(e)},l=new Tr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{a.parse(c,s,function(f){t(f),a.manager.itemEnd(e)},o)}catch(f){o(f)}},r,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let a;const s={},o={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Va.decodeText(new Uint8Array(e.slice(0,4)))===jB){try{s[Jt.KHR_BINARY_GLTF]=new CW(e)}catch(f){i&&i(f);return}a=JSON.parse(s[Jt.KHR_BINARY_GLTF].content)}else a=JSON.parse(Va.decodeText(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new OW(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const f=this.pluginCallbacks[c](l);o[f.name]=f,s[f.name]=!0}if(a.extensionsUsed)for(let c=0;c<a.extensionsUsed.length;++c){const f=a.extensionsUsed[c],p=a.extensionsRequired||[];switch(f){case Jt.KHR_MATERIALS_UNLIT:s[f]=new cW;break;case Jt.KHR_DRACO_MESH_COMPRESSION:s[f]=new EW(a,this.dracoLoader);break;case Jt.KHR_TEXTURE_TRANSFORM:s[f]=new MW;break;case Jt.KHR_MESH_QUANTIZATION:s[f]=new TW;break;default:p.indexOf(f)>=0&&o[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,a){r.parse(e,t,i,a)})}}function oW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class lW{constructor(e){this.parser=e,this.name=Jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const a=t[r];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const a=t.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let c;const f=new Oe(16777215);l.color!==void 0&&f.fromArray(l.color);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new XS(f),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new WS(f),c.distance=p;break;case"spot":c=new HS(f),c.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ys(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,a=r.json.nodes[e],o=(a.extensions&&a.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return r._getNodeRef(t.cache,o,l)})}}class cW{constructor(){this.name=Jt.KHR_MATERIALS_UNLIT}getMaterialType(){return Sr}extendParams(e,t,r){const i=[];e.color=new Oe(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const s=a.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}a.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",a.baseColorTexture,3001))}return Promise.all(i)}}class uW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class dW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(a.push(r.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const o=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Me(o,o)}return Promise.all(a)}}class fW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class hW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Oe(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&a.push(r.assignTexture(t,"sheenColorMap",s.sheenColorTexture,3001)),s.sheenRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class pW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&a.push(r.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class mW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&a.push(r.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=new Oe(o[0],o[1],o[2]),Promise.all(a)}}class gW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class vW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&a.push(r.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=new Oe(o[0],o[1],o[2]),s.specularColorTexture!==void 0&&a.push(r.assignTexture(t,"specularColorMap",s.specularColorTexture,3001)),Promise.all(a)}}class yW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&a.push(r.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(a)}}class _W{constructor(e){this.parser=e,this.name=Jt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const a=i.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,s)}}class xW{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],o=i.images[s.source];let l=r.textureLoader;if(o.uri){const c=r.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class AW{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],o=i.images[s.source];let l=r.textureLoader;if(o.uri){const c=r.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class SW{constructor(e){this.name=Jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],a=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,f=i.count,p=i.byteStride,h=new Uint8Array(o,l,c);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,p,h,i.mode,i.filter).then(function(m){return m.buffer}):s.ready.then(function(){const m=new ArrayBuffer(f*p);return s.decodeGltfBuffer(new Uint8Array(m),f,p,h,i.mode,i.filter),m})})}else return null}}class wW{constructor(e){this.name=Jt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Xr.TRIANGLES&&c.mode!==Xr.TRIANGLE_STRIP&&c.mode!==Xr.TRIANGLE_FAN&&c.mode!==void 0)return null;const s=r.extensions[this.name].attributes,o=[],l={};for(const c in s)o.push(this.parser.getDependency("accessor",s[c]).then(f=>(l[c]=f,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const f=c.pop(),p=f.isGroup?f.children:[f],h=c[0].count,m=[];for(const v of p){const x=new vt,_=new z,g=new ni,A=new z(1,1,1),S=new TS(v.geometry,v.material,h);for(let C=0;C<h;C++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,C),l.SCALE&&A.fromBufferAttribute(l.SCALE,C),S.setMatrixAt(C,x.compose(_,g,A));for(const C in l)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&v.geometry.setAttribute(C,l[C]);Qt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return f.isGroup?(f.clear(),f.add(...m),f):m[0]}))}}const jB="glTF",Ud=12,Hb={JSON:1313821514,BIN:5130562};class CW{constructor(e){this.name=Jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ud);if(this.header={magic:Va.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ud,i=new DataView(e,Ud);let a=0;for(;a<r;){const s=i.getUint32(a,!0);a+=4;const o=i.getUint32(a,!0);if(a+=4,o===Hb.JSON){const l=new Uint8Array(e,Ud+a,s);this.content=Va.decodeText(l)}else if(o===Hb.BIN){const l=Ud+a;this.body=e.slice(l,l+s)}a+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class EW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},l={},c={};for(const f in s){const p=NA[f]||f.toLowerCase();o[p]=s[f]}for(const f in e.attributes){const p=NA[f]||f.toLowerCase();if(s[f]!==void 0){const h=r.accessors[e.attributes[f]],m=su[h.componentType];c[p]=m.name,l[p]=h.normalized===!0}}return t.getDependency("bufferView",a).then(function(f){return new Promise(function(p){i.decodeDracoFile(f,function(h){for(const m in h.attributes){const v=h.attributes[m],x=l[m];x!==void 0&&(v.normalized=x)}p(h)},o,c)})})}}class MW{constructor(){this.name=Jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class TW{constructor(){this.name=Jt.KHR_MESH_QUANTIZATION}}class JB extends Nu{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let s=0;s!==i;s++)t[s]=r[a+s];return t}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,f=i-t,p=(r-t)/f,h=p*p,m=h*p,v=e*c,x=v-c,_=-2*m+3*h,g=m-h,A=1-_,S=g-h+p;for(let C=0;C!==o;C++){const T=s[x+C+o],M=s[x+C+l]*f,b=s[v+C+o],L=s[v+C]*f;a[C]=A*T+S*M+_*b+g*L}return a}}const bW=new ni;class PW extends JB{interpolate_(e,t,r,i){const a=super.interpolate_(e,t,r,i);return bW.fromArray(a).normalize().toArray(a),a}}const Xr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},su={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Wb={9728:En,9729:fn,9984:ff,9985:ov,9986:Yc,9987:ja},Xb={33071:mi,33648:cu,10497:vo},U_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},NA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...X6>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},js={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},RW={CUBICSPLINE:void 0,LINEAR:bl,STEP:uu},O_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function IW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new dh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Wa})),n.DefaultMaterial}function el(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ys(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function FW(n,e,t){let r=!1,i=!1,a=!1;for(let c=0,f=e.length;c<f;c++){const p=e[c];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(i=!0),p.COLOR_0!==void 0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(n);const s=[],o=[],l=[];for(let c=0,f=e.length;c<f;c++){const p=e[c];if(r){const h=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):n.attributes.position;s.push(h)}if(i){const h=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):n.attributes.normal;o.push(h)}if(a){const h=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(c){const f=c[0],p=c[1],h=c[2];return r&&(n.morphAttributes.position=f),i&&(n.morphAttributes.normal=p),a&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function BW(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function LW(n){let e;const t=n.extensions&&n.extensions[Jt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+k_(t.attributes):e=n.indices+":"+k_(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+k_(n.targets[r]);return e}function k_(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function zA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function DW(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const UW=new vt;class OW{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new oW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,a=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&a<98?this.textureLoader=new yR(this.options.manager):this.textureLoader=new MR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(s){const o={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:r,userData:{}};el(a,o,i),Ys(o,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,a=t.length;i<a;i++){const s=t[i].joints;for(let o=0,l=s.length;o<l;o++)e[s[o]].isBone=!0}for(let i=0,a=e.length;i<a;i++){const s=e[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(r[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),a=(s,o)=>{const l=this.associations.get(s);l!=null&&this.associations.set(o,l);for(const[c,f]of s.children.entries())a(f,o.children[c])};return a(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const a=e(t[i]);a&&r.push(a)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":i=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(a,s){return r.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Jt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(a,s){r.load(Va.resolveURL(t.uri,i.path),a,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,a=t.byteOffset||0;return r.slice(a,a+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const s=U_[i.type],o=su[i.componentType],l=i.normalized===!0,c=new o(i.count*s);return Promise.resolve(new Zt(c,s,l))}const a=[];return i.bufferView!==void 0?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),i.sparse!==void 0&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(s){const o=s[0],l=U_[i.type],c=su[i.componentType],f=c.BYTES_PER_ELEMENT,p=f*l,h=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let x,_;if(m&&m!==p){const g=Math.floor(h/m),A="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let S=t.cache.get(A);S||(x=new c(o,g*m,i.count*m/f),S=new ah(x,m/f),t.cache.add(A,S)),_=new yo(S,l,h%m/f,v)}else o===null?x=new c(i.count*l):x=new c(o,h,i.count*l),_=new Zt(x,l,v);if(i.sparse!==void 0){const g=U_.SCALAR,A=su[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,T=new A(s[1],S,i.sparse.count*g),M=new c(s[2],C,i.sparse.count*l);o!==null&&(_=new Zt(_.array.slice(),_.itemSize,_.normalized));for(let b=0,L=T.length;b<L;b++){const R=T[b];if(_.setX(R,M[b*l]),l>=2&&_.setY(R,M[b*l+1]),l>=3&&_.setZ(R,M[b*l+2]),l>=4&&_.setW(R,M[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,a=t.textures[e].source,s=t.images[a];let o=this.textureLoader;if(s.uri){const l=r.manager.getHandler(s.uri);l!==null&&(o=l)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,t,r){const i=this,a=this.json,s=a.textures[e],o=a.images[t],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(f){f.flipY=!1,f.name=s.name||o.name||"",f.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(f.name=o.uri);const h=(a.samplers||{})[s.sampler]||{};return f.magFilter=Wb[h.magFilter]||fn,f.minFilter=Wb[h.minFilter]||ja,f.wrapS=Xb[h.wrapS]||vo,f.wrapT=Xb[h.wrapT]||vo,i.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const s=i.images[e],o=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(s.bufferView!==void 0)l=r.getDependency("bufferView",s.bufferView).then(function(p){c=!0;const h=new Blob([p],{type:s.mimeType});return l=o.createObjectURL(h),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(p){return new Promise(function(h,m){let v=h;t.isImageBitmapLoader===!0&&(v=function(x){const _=new Sn(x);_.needsUpdate=!0,h(_)}),t.load(Va.resolveURL(p,a.path),v,void 0,m)})}).then(function(p){return c===!0&&o.revokeObjectURL(l),p.userData.mimeType=s.mimeType||DW(s.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[e]=f,f}assignTexture(e,t,r,i){const a=this;return this.getDependency("texture",r.index).then(function(s){if(!s)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(s=s.clone(),s.channel=r.texCoord),a.extensions[Jt.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[Jt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=a.associations.get(s);s=a.extensions[Jt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),a.associations.set(s,l)}}return i!==void 0&&("colorSpace"in s?s.colorSpace=i===3001?"srgb":"srgb-linear":s.encoding=i),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new vv,Kn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(o,l)),r=l}else if(e.isLine){const o="LineBasicMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new Li,Kn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(o,l)),r=l}if(i||a||s){let o="ClonedMaterial:"+r.uuid+":";i&&(o+="derivative-tangents:"),a&&(o+="vertex-colors:"),s&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=r.clone(),a&&(l.vertexColors=!0),s&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return dh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,a=r.materials[e];let s;const o={},l=a.extensions||{},c=[];if(l[Jt.KHR_MATERIALS_UNLIT]){const p=i[Jt.KHR_MATERIALS_UNLIT];s=p.getMaterialType(),c.push(p.extendParams(o,a,t))}else{const p=a.pbrMetallicRoughness||{};if(o.color=new Oe(1,1,1),o.opacity=1,Array.isArray(p.baseColorFactor)){const h=p.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}p.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",p.baseColorTexture,3001)),o.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,o.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",p.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",p.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}a.doubleSided===!0&&(o.side=Yr);const f=a.alphaMode||O_.OPAQUE;if(f===O_.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,f===O_.MASK&&(o.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&s!==Sr&&(c.push(t.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new Me(1,1),a.normalTexture.scale!==void 0)){const p=a.normalTexture.scale;o.normalScale.set(p,p)}return a.occlusionTexture!==void 0&&s!==Sr&&(c.push(t.assignTexture(o,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&s!==Sr&&(o.emissive=new Oe().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&s!==Sr&&c.push(t.assignTexture(o,"emissiveMap",a.emissiveTexture,3001)),Promise.all(c).then(function(){const p=new s(o);return a.name&&(p.name=a.name),Ys(p,a),t.associations.set(p,{materials:e}),a.extensions&&el(i,p,a),p})}createUniqueName(e){const t=Kt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function a(o){return r[Jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return jb(l,o,t)})}const s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],f=LW(c),p=i[f];if(p)s.push(p.promise);else{let h;c.extensions&&c.extensions[Jt.KHR_DRACO_MESH_COMPRESSION]?h=a(c):h=jb(new Ft,c,t),i[f]={primitive:c,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){const t=this,r=this.json,i=this.extensions,a=r.meshes[e],s=a.primitives,o=[];for(let l=0,c=s.length;l<c;l++){const f=s[l].material===void 0?IW(this.cache):this.getDependency("material",s[l].material);o.push(f)}return o.push(t.loadGeometries(s)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),f=l[l.length-1],p=[];for(let m=0,v=f.length;m<v;m++){const x=f[m],_=s[m];let g;const A=c[m];if(_.mode===Xr.TRIANGLES||_.mode===Xr.TRIANGLE_STRIP||_.mode===Xr.TRIANGLE_FAN||_.mode===void 0)g=a.isSkinnedMesh===!0?new MS(x,A):new kn(x,A),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===Xr.TRIANGLE_STRIP?g.geometry=Gb(g.geometry,dS):_.mode===Xr.TRIANGLE_FAN&&(g.geometry=Gb(g.geometry,hg));else if(_.mode===Xr.LINES)g=new xa(x,A);else if(_.mode===Xr.LINE_STRIP)g=new Ss(x,A);else if(_.mode===Xr.LINE_LOOP)g=new bS(x,A);else if(_.mode===Xr.POINTS)g=new PS(x,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&BW(g,a),g.name=t.createUniqueName(a.name||"mesh_"+e),Ys(g,a),_.extensions&&el(i,g,_),t.assignFinalMaterial(g),p.push(g)}for(let m=0,v=p.length;m<v;m++)t.associations.set(p[m],{meshes:e,primitives:m});if(p.length===1)return a.extensions&&el(i,p[0],a),p[0];const h=new ms;a.extensions&&el(i,h,a),t.associations.set(h,{meshes:e});for(let m=0,v=p.length;m<v;m++)h.add(p[m]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ei(Ua.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Uu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ys(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,a=t.joints.length;i<a;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const a=i.pop(),s=i,o=[],l=[];for(let c=0,f=s.length;c<f;c++){const p=s[c];if(p){o.push(p);const h=new vt;a!==null&&h.fromArray(a.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new sh(o,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,a=[],s=[],o=[],l=[],c=[];for(let f=0,p=r.channels.length;f<p;f++){const h=r.channels[f],m=r.samplers[h.sampler],v=h.target,x=v.node,_=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(a.push(this.getDependency("node",x)),s.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(f){const p=f[0],h=f[1],m=f[2],v=f[3],x=f[4],_=[];for(let g=0,A=p.length;g<A;g++){const S=p[g],C=h[g],T=m[g],M=v[g],b=x[g];if(S===void 0)continue;S.updateMatrix();let L;switch(js[b.path]){case js.weights:L=mu;break;case js.rotation:L=_o;break;case js.position:case js.scale:default:L=gu;break}const R=S.name?S.name:S.uuid,F=M.interpolation!==void 0?RW[M.interpolation]:bl,O=[];js[b.path]===js.weights?S.traverse(function(ne){ne.morphTargetInfluences&&O.push(ne.name?ne.name:ne.uuid)}):O.push(R);let X=T.array;if(T.normalized){const ne=zA(X.constructor),W=new Float32Array(X.length);for(let Z=0,ie=X.length;Z<ie;Z++)W[Z]=X[Z]*ne;X=W}for(let ne=0,W=O.length;ne<W;ne++){const Z=new L(O[ne]+"."+js[b.path],C.array,X,F);M.interpolation==="CUBICSPLINE"&&(Z.createInterpolant=function(he){const Y=this instanceof _o?PW:JB;return new Y(this.times,this.values,this.getValueSize()/3,he)},Z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(Z)}}return new vu(i,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(a){const s=r._getNodeRef(r.meshCache,i.mesh,a);return i.weights!==void 0&&s.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),s})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],a=r._loadNodeShallow(e),s=[],o=i.children||[];for(let c=0,f=o.length;c<f;c++)s.push(r.getDependency("node",o[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([a,Promise.all(s),l]).then(function(c){const f=c[0],p=c[1],h=c[2];h!==null&&f.traverse(function(m){m.isSkinnedMesh&&m.bind(h,UW)});for(let m=0,v=p.length;m<v;m++)f.add(p[m]);return f})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],s=a.name?i.createUniqueName(a.name):"",o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),a.camera!==void 0&&o.push(i.getDependency("camera",a.camera).then(function(c){return i._getNodeRef(i.cameraCache,a.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let f;if(a.isBone===!0?f=new gv:c.length>1?f=new ms:c.length===1?f=c[0]:f=new Qt,f!==c[0])for(let p=0,h=c.length;p<h;p++)f.add(c[p]);if(a.name&&(f.userData.name=a.name,f.name=s),Ys(f,a),a.extensions&&el(r,f,a),a.matrix!==void 0){const p=new vt;p.fromArray(a.matrix),f.applyMatrix4(p)}else a.translation!==void 0&&f.position.fromArray(a.translation),a.rotation!==void 0&&f.quaternion.fromArray(a.rotation),a.scale!==void 0&&f.scale.fromArray(a.scale);return i.associations.has(f)||i.associations.set(f,{}),i.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,a=new ms;r.name&&(a.name=i.createUniqueName(r.name)),Ys(a,r),r.extensions&&el(t,a,r);const s=r.nodes||[],o=[];for(let l=0,c=s.length;l<c;l++)o.push(i.getDependency("node",s[l]));return Promise.all(o).then(function(l){for(let f=0,p=l.length;f<p;f++)a.add(l[f]);const c=f=>{const p=new Map;for(const[h,m]of i.associations)(h instanceof Kn||h instanceof Sn)&&p.set(h,m);return f.traverse(h=>{const m=i.associations.get(h);m!=null&&p.set(h,m)}),p};return i.associations=c(a),a})}}function kW(n,e,t){const r=e.attributes,i=new fi;if(r.POSITION!==void 0){const o=t.json.accessors[r.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new z(l[0],l[1],l[2]),new z(c[0],c[1],c[2])),o.normalized){const f=zA(su[o.componentType]);i.min.multiplyScalar(f),i.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const o=new z,l=new z;for(let c=0,f=a.length;c<f;c++){const p=a[c];if(p.POSITION!==void 0){const h=t.json.accessors[p.POSITION],m=h.min,v=h.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),h.normalized){const x=zA(su[h.componentType]);l.multiplyScalar(x)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}n.boundingBox=i;const s=new hi;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=s}function jb(n,e,t){const r=e.attributes,i=[];function a(s,o){return t.getDependency("accessor",s).then(function(l){n.setAttribute(o,l)})}for(const s in r){const o=NA[s]||s.toLowerCase();o in n.attributes||i.push(a(r[s],o))}if(e.indices!==void 0&&!n.index){const s=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});i.push(s)}return Ys(n,e),kW(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?FW(n,e.targets,t):n})}const NW={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},zW={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class VW extends VS{constructor(e){super(e),this.type=Ii}parse(e){const o=function(S,C){switch(S){case 1:console.error("THREE.RGBELoader Read Error: "+(C||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(C||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(C||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(C||""))}return-1},p=`
`,h=function(S,C,T){C=C||1024;let b=S.pos,L=-1,R=0,F="",O=String.fromCharCode.apply(null,new Uint16Array(S.subarray(b,b+128)));for(;0>(L=O.indexOf(p))&&R<C&&b<S.byteLength;)F+=O,R+=O.length,b+=128,O+=String.fromCharCode.apply(null,new Uint16Array(S.subarray(b,b+128)));return-1<L?(T!==!1&&(S.pos+=R+L+1),F+O.slice(0,L)):!1},m=function(S){const C=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*FORMAT=(\S+)\s*$/,L=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,R={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,O;if(S.pos>=S.byteLength||!(F=h(S)))return o(1,"no header found");if(!(O=F.match(C)))return o(3,"bad initial token");for(R.valid|=1,R.programtype=O[1],R.string+=F+`
`;F=h(S),F!==!1;){if(R.string+=F+`
`,F.charAt(0)==="#"){R.comments+=F+`
`;continue}if((O=F.match(T))&&(R.gamma=parseFloat(O[1])),(O=F.match(M))&&(R.exposure=parseFloat(O[1])),(O=F.match(b))&&(R.valid|=2,R.format=O[1]),(O=F.match(L))&&(R.valid|=4,R.height=parseInt(O[1],10),R.width=parseInt(O[2],10)),R.valid&2&&R.valid&4)break}return R.valid&2?R.valid&4?R:o(3,"missing image size specifier"):o(3,"missing format specifier")},v=function(S,C,T){const M=C;if(M<8||M>32767||S[0]!==2||S[1]!==2||S[2]&128)return new Uint8Array(S);if(M!==(S[2]<<8|S[3]))return o(3,"wrong scanline width");const b=new Uint8Array(4*C*T);if(!b.length)return o(4,"unable to allocate buffer space");let L=0,R=0;const F=4*M,O=new Uint8Array(4),X=new Uint8Array(F);let ne=T;for(;ne>0&&R<S.byteLength;){if(R+4>S.byteLength)return o(1);if(O[0]=S[R++],O[1]=S[R++],O[2]=S[R++],O[3]=S[R++],O[0]!=2||O[1]!=2||(O[2]<<8|O[3])!=M)return o(3,"bad rgbe scanline format");let W=0,Z;for(;W<F&&R<S.byteLength;){Z=S[R++];const he=Z>128;if(he&&(Z-=128),Z===0||W+Z>F)return o(3,"bad scanline data");if(he){const Y=S[R++];for(let re=0;re<Z;re++)X[W++]=Y}else X.set(S.subarray(R,R+Z),W),W+=Z,R+=Z}const ie=M;for(let he=0;he<ie;he++){let Y=0;b[L]=X[he+Y],Y+=M,b[L+1]=X[he+Y],Y+=M,b[L+2]=X[he+Y],Y+=M,b[L+3]=X[he+Y],L+=4}ne--}return b},x=function(S,C,T,M){const b=S[C+3],L=Math.pow(2,b-128)/255;T[M+0]=S[C+0]*L,T[M+1]=S[C+1]*L,T[M+2]=S[C+2]*L,T[M+3]=1},_=function(S,C,T,M){const b=S[C+3],L=Math.pow(2,b-128)/255;T[M+0]=dl.toHalfFloat(Math.min(S[C+0]*L,65504)),T[M+1]=dl.toHalfFloat(Math.min(S[C+1]*L,65504)),T[M+2]=dl.toHalfFloat(Math.min(S[C+2]*L,65504)),T[M+3]=dl.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const A=m(g);if(A!==-1){const S=A.width,C=A.height,T=v(g.subarray(g.pos),S,C);if(T!==-1){let M,b,L;switch(this.type){case gi:L=T.length/4;const R=new Float32Array(L*4);for(let O=0;O<L;O++)x(T,O*4,R,O*4);M=R,b=gi;break;case Ii:L=T.length/4;const F=new Uint16Array(L*4);for(let O=0;O<L;O++)_(T,O*4,F,O*4);M=F,b=Ii;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:S,height:C,data:M,header:A.string,gamma:A.gamma,exposure:A.exposure,type:b}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){switch(s.type){case gi:case Ii:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=fn,s.magFilter=fn,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,o)}return super.load(e,a,r,i)}}const Od="colorSpace"in new Sn;class GW extends VS{constructor(e){super(e),this.type=Ii}parse(e){const R=Math.pow(2.7182818,2.2);function F(B,U){for(var K=0,I=0;I<65536;++I)(I==0||B[I>>3]&1<<(I&7))&&(U[K++]=I);for(var V=K-1;K<65536;)U[K++]=0;return V}function O(B){for(var U=0;U<16384;U++)B[U]={},B[U].len=0,B[U].lit=0,B[U].p=null}const X={l:0,c:0,lc:0};function ne(B,U,K,I,V){for(;K<B;)U=U<<8|$e(I,V),K+=8;K-=B,X.l=U>>K&(1<<B)-1,X.c=U,X.lc=K}const W=new Array(59);function Z(B){for(var U=0;U<=58;++U)W[U]=0;for(var U=0;U<65537;++U)W[B[U]]+=1;for(var K=0,U=58;U>0;--U){var I=K+W[U]>>1;W[U]=K,K=I}for(var U=0;U<65537;++U){var V=B[U];V>0&&(B[U]=V|W[V]++<<6)}}function ie(B,U,K,I,V,G,q){for(var j=K,le=0,pe=0;V<=G;V++){if(j.value-K.value>I)return!1;ne(6,le,pe,B,j);var ve=X.l;if(le=X.c,pe=X.lc,q[V]=ve,ve==63){if(j.value-K.value>I)throw"Something wrong with hufUnpackEncTable";ne(8,le,pe,B,j);var ge=X.l+6;if(le=X.c,pe=X.lc,V+ge>G+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)q[V++]=0;V--}else if(ve>=59){var ge=ve-59+2;if(V+ge>G+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)q[V++]=0;V--}}Z(q)}function he(B){return B&63}function Y(B){return B>>6}function re(B,U,K,I){for(;U<=K;U++){var V=Y(B[U]),G=he(B[U]);if(V>>G)throw"Invalid table entry";if(G>14){var q=I[V>>G-14];if(q.len)throw"Invalid table entry";if(q.lit++,q.p){var j=q.p;q.p=new Array(q.lit);for(var le=0;le<q.lit-1;++le)q.p[le]=j[le]}else q.p=new Array(1);q.p[q.lit-1]=U}else if(G)for(var pe=0,le=1<<14-G;le>0;le--){var q=I[(V<<14-G)+pe];if(q.len||q.p)throw"Invalid table entry";q.len=G,q.lit=U,pe++}}return!0}const te={c:0,lc:0};function de(B,U,K,I){B=B<<8|$e(K,I),U+=8,te.c=B,te.lc=U}const fe={c:0,lc:0};function ae(B,U,K,I,V,G,q,j,le,pe){if(B==U){I<8&&(de(K,I,V,q),K=te.c,I=te.lc),I-=8;var ve=K>>I,ve=new Uint8Array([ve])[0];if(le.value+ve>pe)return!1;for(var ge=j[le.value-1];ve-- >0;)j[le.value++]=ge}else if(le.value<pe)j[le.value++]=B;else return!1;fe.c=K,fe.lc=I}function _e(B){return B&65535}function Pe(B){var U=_e(B);return U>32767?U-65536:U}const Ie={a:0,b:0};function ke(B,U){var K=Pe(B),I=Pe(U),V=I,G=K+(V&1)+(V>>1),q=G,j=G-V;Ie.a=q,Ie.b=j}function ct(B,U){var K=_e(B),I=_e(U),V=K-(I>>1)&65535,G=I+V-32768&65535;Ie.a=G,Ie.b=V}function xt(B,U,K,I,V,G,q){for(var j=q<16384,le=K>V?V:K,pe=1,ve;pe<=le;)pe<<=1;for(pe>>=1,ve=pe,pe>>=1;pe>=1;){for(var ge=0,et=ge+G*(V-ve),Re=G*pe,Le=G*ve,rt=I*pe,mt=I*ve,yt,bt,tt,Ge;ge<=et;ge+=Le){for(var Gt=ge,wt=ge+I*(K-ve);Gt<=wt;Gt+=mt){var Et=Gt+rt,on=Gt+Re,Ln=on+rt;j?(ke(B[Gt+U],B[on+U]),yt=Ie.a,tt=Ie.b,ke(B[Et+U],B[Ln+U]),bt=Ie.a,Ge=Ie.b,ke(yt,bt),B[Gt+U]=Ie.a,B[Et+U]=Ie.b,ke(tt,Ge),B[on+U]=Ie.a,B[Ln+U]=Ie.b):(ct(B[Gt+U],B[on+U]),yt=Ie.a,tt=Ie.b,ct(B[Et+U],B[Ln+U]),bt=Ie.a,Ge=Ie.b,ct(yt,bt),B[Gt+U]=Ie.a,B[Et+U]=Ie.b,ct(tt,Ge),B[on+U]=Ie.a,B[Ln+U]=Ie.b)}if(K&pe){var on=Gt+Re;j?ke(B[Gt+U],B[on+U]):ct(B[Gt+U],B[on+U]),yt=Ie.a,B[on+U]=Ie.b,B[Gt+U]=yt}}if(V&pe)for(var Gt=ge,wt=ge+I*(K-ve);Gt<=wt;Gt+=mt){var Et=Gt+rt;j?ke(B[Gt+U],B[Et+U]):ct(B[Gt+U],B[Et+U]),yt=Ie.a,B[Et+U]=Ie.b,B[Gt+U]=yt}ve=pe,pe>>=1}return ge}function nt(B,U,K,I,V,G,q,j,le,pe){for(var ve=0,ge=0,et=j,Re=Math.trunc(V.value+(G+7)/8);V.value<Re;)for(de(ve,ge,K,V),ve=te.c,ge=te.lc;ge>=14;){var Le=ve>>ge-14&16383,rt=U[Le];if(rt.len)ge-=rt.len,ae(rt.lit,q,ve,ge,K,I,V,le,pe,et),ve=fe.c,ge=fe.lc;else{if(!rt.p)throw"hufDecode issues";var mt;for(mt=0;mt<rt.lit;mt++){for(var yt=he(B[rt.p[mt]]);ge<yt&&V.value<Re;)de(ve,ge,K,V),ve=te.c,ge=te.lc;if(ge>=yt&&Y(B[rt.p[mt]])==(ve>>ge-yt&(1<<yt)-1)){ge-=yt,ae(rt.p[mt],q,ve,ge,K,I,V,le,pe,et),ve=fe.c,ge=fe.lc;break}}if(mt==rt.lit)throw"hufDecode issues"}}var bt=8-G&7;for(ve>>=bt,ge-=bt;ge>0;){var rt=U[ve<<14-ge&16383];if(rt.len)ge-=rt.len,ae(rt.lit,q,ve,ge,K,I,V,le,pe,et),ve=fe.c,ge=fe.lc;else throw"hufDecode issues"}return!0}function dt(B,U,K,I,V,G){var q={value:0},j=K.value,le=Qe(U,K),pe=Qe(U,K);K.value+=4;var ve=Qe(U,K);if(K.value+=4,le<0||le>=65537||pe<0||pe>=65537)throw"Something wrong with HUF_ENCSIZE";var ge=new Array(65537),et=new Array(16384);O(et);var Re=I-(K.value-j);if(ie(B,U,K,Re,le,pe,ge),ve>8*(I-(K.value-j)))throw"Something wrong with hufUncompress";re(ge,le,pe,et),nt(ge,et,B,U,K,ve,pe,G,V,q)}function J(B,U,K){for(var I=0;I<K;++I)U[I]=B[U[I]]}function Fe(B){for(var U=1;U<B.length;U++){var K=B[U-1]+B[U]-128;B[U]=K}}function xe(B,U){for(var K=0,I=Math.floor((B.length+1)/2),V=0,G=B.length-1;!(V>G||(U[V++]=B[K++],V>G));)U[V++]=B[I++]}function De(B){for(var U=B.byteLength,K=new Array,I=0,V=new DataView(B);U>0;){var G=V.getInt8(I++);if(G<0){var q=-G;U-=q+1;for(var j=0;j<q;j++)K.push(V.getUint8(I++))}else{var q=G;U-=2;for(var le=V.getUint8(I++),j=0;j<q+1;j++)K.push(le)}}return K}function Ae(B,U,K,I,V,G){var Et=new DataView(G.buffer),q=K[B.idx[0]].width,j=K[B.idx[0]].height,le=3,pe=Math.floor(q/8),ve=Math.ceil(q/8),ge=Math.ceil(j/8),et=q-(ve-1)*8,Re=j-(ge-1)*8,Le={value:0},rt=new Array(le),mt=new Array(le),yt=new Array(le),bt=new Array(le),tt=new Array(le);for(let Wt=0;Wt<le;++Wt)tt[Wt]=U[B.idx[Wt]],rt[Wt]=Wt<1?0:rt[Wt-1]+ve*ge,mt[Wt]=new Float32Array(64),yt[Wt]=new Uint16Array(64),bt[Wt]=new Uint16Array(ve*64);for(let Wt=0;Wt<ge;++Wt){var Ge=8;Wt==ge-1&&(Ge=Re);var Gt=8;for(let Dt=0;Dt<ve;++Dt){Dt==ve-1&&(Gt=et);for(let Xt=0;Xt<le;++Xt)yt[Xt].fill(0),yt[Xt][0]=V[rt[Xt]++],ot(Le,I,yt[Xt]),je(yt[Xt],mt[Xt]),N(mt[Xt]);D(mt);for(let Xt=0;Xt<le;++Xt)se(mt[Xt],bt[Xt],Dt*64)}let bn=0;for(let Dt=0;Dt<le;++Dt){const Xt=K[B.idx[Dt]].type;for(let hn=8*Wt;hn<8*Wt+Ge;++hn){bn=tt[Dt][hn];for(let Br=0;Br<pe;++Br){const Oi=Br*64+(hn&7)*8;Et.setUint16(bn+0*2*Xt,bt[Dt][Oi+0],!0),Et.setUint16(bn+1*2*Xt,bt[Dt][Oi+1],!0),Et.setUint16(bn+2*2*Xt,bt[Dt][Oi+2],!0),Et.setUint16(bn+3*2*Xt,bt[Dt][Oi+3],!0),Et.setUint16(bn+4*2*Xt,bt[Dt][Oi+4],!0),Et.setUint16(bn+5*2*Xt,bt[Dt][Oi+5],!0),Et.setUint16(bn+6*2*Xt,bt[Dt][Oi+6],!0),Et.setUint16(bn+7*2*Xt,bt[Dt][Oi+7],!0),bn+=8*2*Xt}}if(pe!=ve)for(let hn=8*Wt;hn<8*Wt+Ge;++hn){const Br=tt[Dt][hn]+8*pe*2*Xt,Oi=pe*64+(hn&7)*8;for(let Ca=0;Ca<Gt;++Ca)Et.setUint16(Br+Ca*2*Xt,bt[Dt][Oi+Ca],!0)}}}for(var wt=new Uint16Array(q),Et=new DataView(G.buffer),on=0;on<le;++on){K[B.idx[on]].decoded=!0;var Ln=K[B.idx[on]].type;if(K[on].type==2)for(var wn=0;wn<j;++wn){const Wt=tt[on][wn];for(var qt=0;qt<q;++qt)wt[qt]=Et.getUint16(Wt+qt*2*Ln,!0);for(var qt=0;qt<q;++qt)Et.setFloat32(Wt+qt*2*Ln,ce(wt[qt]),!0)}}}function ot(B,U,K){for(var I,V=1;V<64;)I=U[B.value],I==65280?V=64:I>>8==255?V+=I&255:(K[V]=I,V++),B.value++}function je(B,U){U[0]=ce(B[0]),U[1]=ce(B[1]),U[2]=ce(B[5]),U[3]=ce(B[6]),U[4]=ce(B[14]),U[5]=ce(B[15]),U[6]=ce(B[27]),U[7]=ce(B[28]),U[8]=ce(B[2]),U[9]=ce(B[4]),U[10]=ce(B[7]),U[11]=ce(B[13]),U[12]=ce(B[16]),U[13]=ce(B[26]),U[14]=ce(B[29]),U[15]=ce(B[42]),U[16]=ce(B[3]),U[17]=ce(B[8]),U[18]=ce(B[12]),U[19]=ce(B[17]),U[20]=ce(B[25]),U[21]=ce(B[30]),U[22]=ce(B[41]),U[23]=ce(B[43]),U[24]=ce(B[9]),U[25]=ce(B[11]),U[26]=ce(B[18]),U[27]=ce(B[24]),U[28]=ce(B[31]),U[29]=ce(B[40]),U[30]=ce(B[44]),U[31]=ce(B[53]),U[32]=ce(B[10]),U[33]=ce(B[19]),U[34]=ce(B[23]),U[35]=ce(B[32]),U[36]=ce(B[39]),U[37]=ce(B[45]),U[38]=ce(B[52]),U[39]=ce(B[54]),U[40]=ce(B[20]),U[41]=ce(B[22]),U[42]=ce(B[33]),U[43]=ce(B[38]),U[44]=ce(B[46]),U[45]=ce(B[51]),U[46]=ce(B[55]),U[47]=ce(B[60]),U[48]=ce(B[21]),U[49]=ce(B[34]),U[50]=ce(B[37]),U[51]=ce(B[47]),U[52]=ce(B[50]),U[53]=ce(B[56]),U[54]=ce(B[59]),U[55]=ce(B[61]),U[56]=ce(B[35]),U[57]=ce(B[36]),U[58]=ce(B[48]),U[59]=ce(B[49]),U[60]=ce(B[57]),U[61]=ce(B[58]),U[62]=ce(B[62]),U[63]=ce(B[63])}function N(B){const U=.5*Math.cos(.7853975),K=.5*Math.cos(3.14159/16),I=.5*Math.cos(3.14159/8),V=.5*Math.cos(3*3.14159/16),G=.5*Math.cos(5*3.14159/16),q=.5*Math.cos(3*3.14159/8),j=.5*Math.cos(7*3.14159/16);for(var le=new Array(4),pe=new Array(4),ve=new Array(4),ge=new Array(4),et=0;et<8;++et){var Re=et*8;le[0]=I*B[Re+2],le[1]=q*B[Re+2],le[2]=I*B[Re+6],le[3]=q*B[Re+6],pe[0]=K*B[Re+1]+V*B[Re+3]+G*B[Re+5]+j*B[Re+7],pe[1]=V*B[Re+1]-j*B[Re+3]-K*B[Re+5]-G*B[Re+7],pe[2]=G*B[Re+1]-K*B[Re+3]+j*B[Re+5]+V*B[Re+7],pe[3]=j*B[Re+1]-G*B[Re+3]+V*B[Re+5]-K*B[Re+7],ve[0]=U*(B[Re+0]+B[Re+4]),ve[3]=U*(B[Re+0]-B[Re+4]),ve[1]=le[0]+le[3],ve[2]=le[1]-le[2],ge[0]=ve[0]+ve[1],ge[1]=ve[3]+ve[2],ge[2]=ve[3]-ve[2],ge[3]=ve[0]-ve[1],B[Re+0]=ge[0]+pe[0],B[Re+1]=ge[1]+pe[1],B[Re+2]=ge[2]+pe[2],B[Re+3]=ge[3]+pe[3],B[Re+4]=ge[3]-pe[3],B[Re+5]=ge[2]-pe[2],B[Re+6]=ge[1]-pe[1],B[Re+7]=ge[0]-pe[0]}for(var Le=0;Le<8;++Le)le[0]=I*B[16+Le],le[1]=q*B[16+Le],le[2]=I*B[48+Le],le[3]=q*B[48+Le],pe[0]=K*B[8+Le]+V*B[24+Le]+G*B[40+Le]+j*B[56+Le],pe[1]=V*B[8+Le]-j*B[24+Le]-K*B[40+Le]-G*B[56+Le],pe[2]=G*B[8+Le]-K*B[24+Le]+j*B[40+Le]+V*B[56+Le],pe[3]=j*B[8+Le]-G*B[24+Le]+V*B[40+Le]-K*B[56+Le],ve[0]=U*(B[Le]+B[32+Le]),ve[3]=U*(B[Le]-B[32+Le]),ve[1]=le[0]+le[3],ve[2]=le[1]-le[2],ge[0]=ve[0]+ve[1],ge[1]=ve[3]+ve[2],ge[2]=ve[3]-ve[2],ge[3]=ve[0]-ve[1],B[0+Le]=ge[0]+pe[0],B[8+Le]=ge[1]+pe[1],B[16+Le]=ge[2]+pe[2],B[24+Le]=ge[3]+pe[3],B[32+Le]=ge[3]-pe[3],B[40+Le]=ge[2]-pe[2],B[48+Le]=ge[1]-pe[1],B[56+Le]=ge[0]-pe[0]}function D(B){for(var U=0;U<64;++U){var K=B[0][U],I=B[1][U],V=B[2][U];B[0][U]=K+1.5747*V,B[1][U]=K-.1873*I-.4682*V,B[2][U]=K+1.8556*I}}function se(B,U,K){for(var I=0;I<64;++I)U[K+I]=dl.toHalfFloat(Se(B[I]))}function Se(B){return B<=1?Math.sign(B)*Math.pow(Math.abs(B),2.2):Math.sign(B)*Math.pow(R,Math.abs(B)-1)}function Te(B){return new DataView(B.array.buffer,B.offset.value,B.size)}function we(B){var U=B.viewer.buffer.slice(B.offset.value,B.offset.value+B.size),K=new Uint8Array(De(U)),I=new Uint8Array(K.length);return Fe(K),xe(K,I),new DataView(I.buffer)}function Be(B){var U=B.array.slice(B.offset.value,B.offset.value+B.size),K=zm(U),I=new Uint8Array(K.length);return Fe(K),xe(K,I),new DataView(I.buffer)}function be(B){for(var U=B.viewer,K={value:B.offset.value},I=new Uint16Array(B.width*B.scanlineBlockSize*(B.channels*B.type)),V=new Uint8Array(8192),G=0,q=new Array(B.channels),j=0;j<B.channels;j++)q[j]={},q[j].start=G,q[j].end=q[j].start,q[j].nx=B.width,q[j].ny=B.lines,q[j].size=B.type,G+=q[j].nx*q[j].ny*q[j].size;var le=Q(U,K),pe=Q(U,K);if(pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(le<=pe)for(var j=0;j<pe-le+1;j++)V[j+le]=Ct(U,K);var ve=new Uint16Array(65536),ge=F(V,ve),et=Qe(U,K);dt(B.array,U,K,et,I,G);for(var j=0;j<B.channels;++j)for(var Re=q[j],Le=0;Le<q[j].size;++Le)xt(I,Re.start+Le,Re.nx,Re.size,Re.ny,Re.nx*Re.size,ge);J(ve,I,G);for(var rt=0,mt=new Uint8Array(I.buffer.byteLength),yt=0;yt<B.lines;yt++)for(var bt=0;bt<B.channels;bt++){var Re=q[bt],tt=Re.nx*Re.size,Ge=new Uint8Array(I.buffer,Re.end*2,tt*2);mt.set(Ge,rt),rt+=tt*2,Re.end+=tt}return new DataView(mt.buffer)}function Ee(B){var U=B.array.slice(B.offset.value,B.offset.value+B.size),K=zm(U);const I=B.lines*B.channels*B.width,V=B.type==1?new Uint16Array(I):new Uint32Array(I);let G=0,q=0;const j=new Array(4);for(let le=0;le<B.lines;le++)for(let pe=0;pe<B.channels;pe++){let ve=0;switch(B.type){case 1:j[0]=G,j[1]=j[0]+B.width,G=j[1]+B.width;for(let ge=0;ge<B.width;++ge){const et=K[j[0]++]<<8|K[j[1]++];ve+=et,V[q]=ve,q++}break;case 2:j[0]=G,j[1]=j[0]+B.width,j[2]=j[1]+B.width,G=j[2]+B.width;for(let ge=0;ge<B.width;++ge){const et=K[j[0]++]<<24|K[j[1]++]<<16|K[j[2]++]<<8;ve+=et,V[q]=ve,q++}break}}return new DataView(V.buffer)}function Ve(B){var U=B.viewer,K={value:B.offset.value},I=new Uint8Array(B.width*B.lines*(B.channels*B.type*2)),V={version:Tt(U,K),unknownUncompressedSize:Tt(U,K),unknownCompressedSize:Tt(U,K),acCompressedSize:Tt(U,K),dcCompressedSize:Tt(U,K),rleCompressedSize:Tt(U,K),rleUncompressedSize:Tt(U,K),rleRawSize:Tt(U,K),totalAcUncompressedCount:Tt(U,K),totalDcUncompressedCount:Tt(U,K),acCompression:Tt(U,K)};if(V.version<2)throw"EXRLoader.parse: "+Zi.compression+" version "+V.version+" is unsupported";for(var G=new Array,q=Q(U,K)-2;q>0;){var j=ht(U.buffer,K),le=Ct(U,K),pe=le>>2&3,ve=(le>>4)-1,ge=new Int8Array([ve])[0],et=Ct(U,K);G.push({name:j,index:ge,type:et,compression:pe}),q-=j.length+3}for(var Re=Zi.channels,Le=new Array(B.channels),rt=0;rt<B.channels;++rt){var mt=Le[rt]={},yt=Re[rt];mt.name=yt.name,mt.compression=0,mt.decoded=!1,mt.type=yt.pixelType,mt.pLinear=yt.pLinear,mt.width=B.width,mt.height=B.lines}for(var bt={idx:new Array(3)},tt=0;tt<B.channels;++tt)for(var mt=Le[tt],rt=0;rt<G.length;++rt){var Ge=G[rt];mt.name==Ge.name&&(mt.compression=Ge.compression,Ge.index>=0&&(bt.idx[Ge.index]=tt),mt.offset=tt)}if(V.acCompressedSize>0)switch(V.acCompression){case 0:var Et=new Uint16Array(V.totalAcUncompressedCount);dt(B.array,U,K,V.acCompressedSize,Et,V.totalAcUncompressedCount);break;case 1:var Gt=B.array.slice(K.value,K.value+V.totalAcUncompressedCount),wt=zm(Gt),Et=new Uint16Array(wt.buffer);K.value+=V.totalAcUncompressedCount;break}if(V.dcCompressedSize>0){var on={array:B.array,offset:K,size:V.dcCompressedSize},Ln=new Uint16Array(Be(on).buffer);K.value+=V.dcCompressedSize}if(V.rleRawSize>0){var Gt=B.array.slice(K.value,K.value+V.rleCompressedSize),wt=zm(Gt),wn=De(wt.buffer);K.value+=V.rleCompressedSize}for(var qt=0,Wt=new Array(Le.length),rt=0;rt<Wt.length;++rt)Wt[rt]=new Array;for(var bn=0;bn<B.lines;++bn)for(var Dt=0;Dt<Le.length;++Dt)Wt[Dt].push(qt),qt+=Le[Dt].width*B.type*2;Ae(bt,Wt,Le,Et,Ln,I);for(var rt=0;rt<Le.length;++rt){var mt=Le[rt];if(!mt.decoded)switch(mt.compression){case 2:for(var Xt=0,hn=0,bn=0;bn<B.lines;++bn){for(var Br=Wt[rt][Xt],Oi=0;Oi<mt.width;++Oi){for(var Ca=0;Ca<2*mt.type;++Ca)I[Br++]=wn[hn+Ca*mt.width*mt.height];hn++}Xt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(I.buffer)}function ht(B,U){for(var K=new Uint8Array(B),I=0;K[U.value+I]!=0;)I+=1;var V=new TextDecoder().decode(K.slice(U.value,U.value+I));return U.value=U.value+I+1,V}function Ce(B,U,K){var I=new TextDecoder().decode(new Uint8Array(B).slice(U.value,U.value+K));return U.value=U.value+K,I}function it(B,U){var K=lt(B,U),I=Qe(B,U);return[K,I]}function ze(B,U){var K=Qe(B,U),I=Qe(B,U);return[K,I]}function lt(B,U){var K=B.getInt32(U.value,!0);return U.value=U.value+4,K}function Qe(B,U){var K=B.getUint32(U.value,!0);return U.value=U.value+4,K}function $e(B,U){var K=B[U.value];return U.value=U.value+1,K}function Ct(B,U){var K=B.getUint8(U.value);return U.value=U.value+1,K}const Tt=function(B,U){let K;return"getBigInt64"in DataView.prototype?K=Number(B.getBigInt64(U.value,!0)):K=B.getUint32(U.value+4,!0)+Number(B.getUint32(U.value,!0)<<32),U.value+=8,K};function Ut(B,U){var K=B.getFloat32(U.value,!0);return U.value+=4,K}function Bt(B,U){return dl.toHalfFloat(Ut(B,U))}function ce(B){var U=(B&31744)>>10,K=B&1023;return(B>>15?-1:1)*(U?U===31?K?NaN:1/0:Math.pow(2,U-15)*(1+K/1024):6103515625e-14*(K/1024))}function Q(B,U){var K=B.getUint16(U.value,!0);return U.value+=2,K}function Je(B,U){return ce(Q(B,U))}function qe(B,U,K,I){for(var V=K.value,G=[];K.value<V+I-1;){var q=ht(U,K),j=lt(B,K),le=Ct(B,K);K.value+=3;var pe=lt(B,K),ve=lt(B,K);G.push({name:q,pixelType:j,pLinear:le,xSampling:pe,ySampling:ve})}return K.value+=1,G}function At(B,U){var K=Ut(B,U),I=Ut(B,U),V=Ut(B,U),G=Ut(B,U),q=Ut(B,U),j=Ut(B,U),le=Ut(B,U),pe=Ut(B,U);return{redX:K,redY:I,greenX:V,greenY:G,blueX:q,blueY:j,whiteX:le,whiteY:pe}}function gt(B,U){var K=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],I=Ct(B,U);return K[I]}function rn(B,U){var K=Qe(B,U),I=Qe(B,U),V=Qe(B,U),G=Qe(B,U);return{xMin:K,yMin:I,xMax:V,yMax:G}}function nn(B,U){var K=["INCREASING_Y"],I=Ct(B,U);return K[I]}function Tn(B,U){var K=Ut(B,U),I=Ut(B,U);return[K,I]}function Hn(B,U){var K=Ut(B,U),I=Ut(B,U),V=Ut(B,U);return[K,I,V]}function an(B,U,K,I,V){if(I==="string"||I==="stringvector"||I==="iccProfile")return Ce(U,K,V);if(I==="chlist")return qe(B,U,K,V);if(I==="chromaticities")return At(B,K);if(I==="compression")return gt(B,K);if(I==="box2i")return rn(B,K);if(I==="lineOrder")return nn(B,K);if(I==="float")return Ut(B,K);if(I==="v2f")return Tn(B,K);if(I==="v3f")return Hn(B,K);if(I==="int")return lt(B,K);if(I==="rational")return it(B,K);if(I==="timecode")return ze(B,K);if(I==="preview")return K.value+=V,"skipped";K.value+=V}function Qn(B,U,K){const I={};if(B.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";I.version=B.getUint8(4);const V=B.getUint8(5);I.spec={singleTile:!!(V&2),longName:!!(V&4),deepFormat:!!(V&8),multiPart:!!(V&16)},K.value=8;for(var G=!0;G;){var q=ht(U,K);if(q==0)G=!1;else{var j=ht(U,K),le=Qe(B,K),pe=an(B,U,K,j,le);pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${j}'.`):I[q]=pe}}if(V&-5)throw console.error("EXRHeader:",I),"THREE.EXRLoader: provided file is currently unsupported.";return I}function Qi(B,U,K,I,V){const G={size:0,viewer:U,array:K,offset:I,width:B.dataWindow.xMax-B.dataWindow.xMin+1,height:B.dataWindow.yMax-B.dataWindow.yMin+1,channels:B.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:B.channels[0].pixelType,uncompress:null,getter:null,format:null,[Od?"colorSpace":"encoding"]:null};switch(B.compression){case"NO_COMPRESSION":G.lines=1,G.uncompress=Te;break;case"RLE_COMPRESSION":G.lines=1,G.uncompress=we;break;case"ZIPS_COMPRESSION":G.lines=1,G.uncompress=Be;break;case"ZIP_COMPRESSION":G.lines=16,G.uncompress=Be;break;case"PIZ_COMPRESSION":G.lines=32,G.uncompress=be;break;case"PXR24_COMPRESSION":G.lines=16,G.uncompress=Ee;break;case"DWAA_COMPRESSION":G.lines=32,G.uncompress=Ve;break;case"DWAB_COMPRESSION":G.lines=256,G.uncompress=Ve;break;default:throw"EXRLoader.parse: "+B.compression+" is unsupported"}if(G.scanlineBlockSize=G.lines,G.type==1)switch(V){case gi:G.getter=Je,G.inputSize=2;break;case Ii:G.getter=Q,G.inputSize=2;break}else if(G.type==2)switch(V){case gi:G.getter=Ut,G.inputSize=4;break;case Ii:G.getter=Bt,G.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+G.type+" for "+B.compression+".";G.blockCount=(B.dataWindow.yMax+1)/G.scanlineBlockSize;for(var q=0;q<G.blockCount;q++)Tt(U,I);G.outputChannels=G.channels==3?4:G.channels;const j=G.width*G.height*G.outputChannels;switch(V){case gi:G.byteArray=new Float32Array(j),G.channels<G.outputChannels&&G.byteArray.fill(1,0,j);break;case Ii:G.byteArray=new Uint16Array(j),G.channels<G.outputChannels&&G.byteArray.fill(15360,0,j);break;default:console.error("THREE.EXRLoader: unsupported type: ",V);break}return G.bytesPerLine=G.width*G.inputSize*G.channels,G.outputChannels==4?G.format=Ri:G.format=aS,Od?G.colorSpace="srgb-linear":G.encoding=3e3,G}const wa=new DataView(e),Bo=new Uint8Array(e),Fr={value:0},Zi=Qn(wa,e,Fr),Lt=Qi(Zi,wa,Bo,Fr,this.type),Lo={value:0},Xl={R:0,G:1,B:2,A:3,Y:0};for(let B=0;B<Lt.height/Lt.scanlineBlockSize;B++){const U=Qe(wa,Fr);Lt.size=Qe(wa,Fr),Lt.lines=U+Lt.scanlineBlockSize>Lt.height?Lt.height-U:Lt.scanlineBlockSize;const I=Lt.size<Lt.lines*Lt.bytesPerLine?Lt.uncompress(Lt):Te(Lt);Fr.value+=Lt.size;for(let V=0;V<Lt.scanlineBlockSize;V++){const G=V+B*Lt.scanlineBlockSize;if(G>=Lt.height)break;for(let q=0;q<Lt.channels;q++){const j=Xl[Zi.channels[q].name];for(let le=0;le<Lt.width;le++){Lo.value=(V*(Lt.channels*Lt.width)+q*Lt.width+le)*Lt.inputSize;const pe=(Lt.height-1-G)*(Lt.width*Lt.outputChannels)+le*Lt.outputChannels+j;Lt.byteArray[pe]=Lt.getter(I,Lo)}}}}return{header:Zi,width:Lt.width,height:Lt.height,data:Lt.byteArray,format:Lt.format,[Od?"colorSpace":"encoding"]:Lt[Od?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){Od?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=fn,s.magFilter=fn,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,o)}return super.load(e,a,r,i)}}const N_=new WeakMap;class HW extends Di{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const a=new Tr(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,s=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const a={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(N_.has(e)){const l=N_.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const a=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(a,s).then(l=>(i=l,new Promise((c,f)=>{i._callbacks[a]={resolve:c,reject:f},i.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{i&&a&&this._releaseTask(i,a)}),N_.set(e,{key:r,promise:o}),o}_createGeometry(e){const t=new Ft;e.index&&t.setIndex(new Zt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],a=i.name,s=i.array,o=i.itemSize;t.setAttribute(a,new Zt(s,o))}return t}_loadLibrary(e,t){const r=new Tr(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,a)=>{r.load(e,i,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const a=WW.toString(),s=["/* draco decoder */",i,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(a){const s=a.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,a){return i._taskLoad>a._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function WW(){let n,e;onmessage=function(s){const o=s.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(f){n.onModuleLoaded=function(p){f({draco:p})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(f=>{const p=f.draco,h=new p.Decoder,m=new p.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(p,h,m,c),x=v.attributes.map(_=>_.array.buffer);v.index&&x.push(v.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:v},x)}catch(v){console.error(v),self.postMessage({type:"error",id:o.id,error:v.message})}finally{p.destroy(m),p.destroy(h)}});break}};function t(s,o,l,c){const f=c.attributeIDs,p=c.attributeTypes;let h,m;const v=o.GetEncodedGeometryType(l);if(v===s.TRIANGULAR_MESH)h=new s.Mesh,m=o.DecodeBufferToMesh(l,h);else if(v===s.POINT_CLOUD)h=new s.PointCloud,m=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const _ in f){const g=self[p[_]];let A,S;if(c.useUniqueIDs)S=f[_],A=o.GetAttributeByUniqueId(h,S);else{if(S=o.GetAttributeId(h,s[f[_]]),S===-1)continue;A=o.GetAttribute(h,S)}x.attributes.push(i(s,o,h,_,g,A))}return v===s.TRIANGULAR_MESH&&(x.index=r(s,o,h)),s.destroy(h),x}function r(s,o,l){const f=l.num_faces()*3,p=f*4,h=s._malloc(p);o.GetTrianglesUInt32Array(l,p,h);const m=new Uint32Array(s.HEAPF32.buffer,h,f).slice();return s._free(h),{array:m,itemSize:1}}function i(s,o,l,c,f,p){const h=p.num_components(),v=l.num_points()*h,x=v*f.BYTES_PER_ELEMENT,_=a(s,f),g=s._malloc(x);o.GetAttributeDataArrayForAllPoints(l,p,_,x,g);const A=new f(s.HEAPF32.buffer,g,v).slice();return s._free(g),{name:c,array:A,itemSize:h}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}let Vm;const z_=()=>{if(Vm)return Vm;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let a;const s=WebAssembly.instantiate(o(i),{}).then(p=>{a=p.instance,a.exports.__wasm_call_ctors()});function o(p){const h=new Uint8Array(p.length);for(let v=0;v<p.length;++v){const x=p.charCodeAt(v);h[v]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let v=0;v<p.length;++v)h[m++]=h[v]<60?r[h[v]]:(h[v]-60)*64+h[++v];return h.buffer.slice(0,m)}function l(p,h,m,v,x,_){const g=a.exports.sbrk,A=m+3&-4,S=g(A*v),C=g(x.length),T=new Uint8Array(a.exports.memory.buffer);T.set(x,C);const M=p(S,m,v,C,x.length);if(M===0&&_&&_(S,A,v),h.set(T.subarray(S,S+m*v)),g(S-g(0)),M!==0)throw new Error(`Malformed buffer data: ${M}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Vm={ready:s,supported:!0,decodeVertexBuffer(p,h,m,v,x){l(a.exports.meshopt_decodeVertexBuffer,p,h,m,v,a.exports[c[x]])},decodeIndexBuffer(p,h,m,v){l(a.exports.meshopt_decodeIndexBuffer,p,h,m,v)},decodeIndexSequence(p,h,m,v){l(a.exports.meshopt_decodeIndexSequence,p,h,m,v)},decodeGltfBuffer(p,h,m,v,x,_){l(a.exports[f[x]],p,h,m,v,a.exports[c[_]])}},Vm};function qB(n,e,t,r){const i=class extends fr{constructor(s={}){const o=Object.entries(n);super({uniforms:o.reduce((l,[c,f])=>{const p=_S.clone({[c]:{value:f}});return{...l,...p}},{}),vertexShader:e,fragmentShader:t}),this.key="",o.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,s),r&&r(this)}};return i.key=Ua.generateUUID(),i}const XW=()=>parseInt(Ol.replace(/\D+/g,"")),KB=XW();let Gm=null,YB="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function QB(n,e,t){return r=>{t&&t(r),n&&(Gm||(Gm=new HW),Gm.setDecoderPath(typeof n=="string"?n:YB),r.setDRACOLoader(Gm)),e&&r.setMeshoptDecoder(typeof z_=="function"?z_():z_)}}function wh(n,e=!0,t=!0,r){return zu(lw,n,QB(e,t,r))}wh.preload=(n,e=!0,t=!0,r)=>zu.preload(lw,n,QB(e,t,r));wh.clear=n=>zu.clear(lw,n);wh.setDecoderPath=n=>{YB=n};const jW=k.forwardRef(function({children:e,disable:t,disableX:r,disableY:i,disableZ:a,left:s,right:o,top:l,bottom:c,front:f,back:p,onCentered:h,precise:m=!0,cacheKey:v=0,...x},_){const g=k.useRef(null),A=k.useRef(null),S=k.useRef(null);return k.useLayoutEffect(()=>{A.current.matrixWorld.identity();const C=new fi().setFromObject(S.current,m),T=new z,M=new hi,b=C.max.x-C.min.x,L=C.max.y-C.min.y,R=C.max.z-C.min.z;C.getCenter(T),C.getBoundingSphere(M);const F=l?L/2:c?-L/2:0,O=s?-b/2:o?b/2:0,X=f?R/2:p?-R/2:0;A.current.position.set(t||r?0:-T.x+O,t||i?0:-T.y+F,t||a?0:-T.z+X),typeof h<"u"&&h({parent:g.current.parent,container:g.current,width:b,height:L,depth:R,boundingBox:C,boundingSphere:M,center:T,verticalAlignment:F,horizontalAlignment:O,depthAlignment:X})},[v,h,l,s,f,t,r,i,a,m,o,c,p]),k.useImperativeHandle(_,()=>g.current,[]),k.createElement("group",wr({ref:g},x),k.createElement("group",{ref:A},k.createElement("group",{ref:S},e)))}),JW=qB({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var Wr=function(n){return n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.ACTIVE=2]="ACTIVE",n}(Wr||{});const Rc=n=>n&&n.isOrthographicCamera,qW=n=>n&&n.isBox3,KW=n=>1-Math.exp(-5*n)+.007*n,ZB=k.createContext(null);function YW({children:n,maxDuration:e=1,margin:t=1.2,observe:r,fit:i,clip:a,interpolateFunc:s=KW,onFit:o}){const l=k.useRef(null),{camera:c,size:f,invalidate:p}=Wi(),h=Wi(T=>T.controls),m=k.useRef(o);m.current=o;const v=k.useRef({camPos:new z,camRot:new ni,camZoom:1}),x=k.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),_=k.useRef(Wr.NONE),g=k.useRef(0),[A]=k.useState(()=>new fi),S=k.useMemo(()=>{function T(){const M=A.getSize(new z),b=A.getCenter(new z),L=Math.max(M.x,M.y,M.z),R=Rc(c)?L*4:L/(2*Math.atan(Math.PI*c.fov/360)),F=Rc(c)?L*4:R/c.aspect,O=t*Math.max(R,F);return{box:A,size:M,center:b,distance:O}}return{getSize:T,refresh(M){if(qW(M))A.copy(M);else{const b=M||l.current;if(!b)return this;b.updateWorldMatrix(!0,!0),A.setFromObject(b)}if(A.isEmpty()){const b=c.position.length()||10;A.setFromCenterAndSize(new z,new z(b,b,b))}return v.current.camPos.copy(c.position),v.current.camRot.copy(c.quaternion),Rc(c)&&(v.current.camZoom=c.zoom),x.current.camPos=void 0,x.current.camRot=void 0,x.current.camZoom=void 0,x.current.camUp=void 0,x.current.target=void 0,this},reset(){const{center:M,distance:b}=T(),L=c.position.clone().sub(M).normalize();x.current.camPos=M.clone().addScaledVector(L,b),x.current.target=M.clone();const R=new vt().lookAt(x.current.camPos,x.current.target,c.up);return x.current.camRot=new ni().setFromRotationMatrix(R),_.current=Wr.START,g.current=0,this},moveTo(M){return x.current.camPos=Array.isArray(M)?new z(...M):M.clone(),_.current=Wr.START,g.current=0,this},lookAt({target:M,up:b}){x.current.target=Array.isArray(M)?new z(...M):M.clone(),b?x.current.camUp=Array.isArray(b)?new z(...b):b.clone():x.current.camUp=c.up.clone();const L=new vt().lookAt(x.current.camPos||c.position,x.current.target,x.current.camUp);return x.current.camRot=new ni().setFromRotationMatrix(L),_.current=Wr.START,g.current=0,this},to({position:M,target:b}){return this.moveTo(M).lookAt({target:b})},fit(){if(!Rc(c))return this.reset();let M=0,b=0;const L=[new z(A.min.x,A.min.y,A.min.z),new z(A.min.x,A.max.y,A.min.z),new z(A.min.x,A.min.y,A.max.z),new z(A.min.x,A.max.y,A.max.z),new z(A.max.x,A.max.y,A.max.z),new z(A.max.x,A.max.y,A.min.z),new z(A.max.x,A.min.y,A.max.z),new z(A.max.x,A.min.y,A.min.z)],R=x.current.camPos||c.position,F=x.current.target||(h==null?void 0:h.target),O=x.current.camUp||c.up,X=F?new vt().lookAt(R,F,O).setPosition(R).invert():c.matrixWorldInverse;for(const Z of L)Z.applyMatrix4(X),M=Math.max(M,Math.abs(Z.y)),b=Math.max(b,Math.abs(Z.x));M*=2,b*=2;const ne=(c.top-c.bottom)/M,W=(c.right-c.left)/b;return x.current.camZoom=Math.min(ne,W)/t,_.current=Wr.START,g.current=0,m.current&&m.current(this.getSize()),this},clip(){const{distance:M}=T();return c.near=M/100,c.far=M*100,c.updateProjectionMatrix(),h&&(h.maxDistance=M*10,h.update()),p(),this}}},[A,c,h,t,p]);k.useLayoutEffect(()=>{if(h){const T=()=>{if(h&&x.current.target&&_.current!==Wr.NONE){const M=new z().setFromMatrixColumn(c.matrix,2),b=v.current.camPos.distanceTo(h.target),L=(x.current.camPos||v.current.camPos).distanceTo(x.current.target),R=(1-g.current)*b+g.current*L;h.target.copy(c.position).addScaledVector(M,-R),h.update()}_.current=Wr.NONE};return h.addEventListener("start",T),()=>h.removeEventListener("start",T)}},[h]);const C=k.useRef(0);return k.useLayoutEffect(()=>{(r||C.current++===0)&&(S.refresh(),i&&S.reset().fit(),a&&S.clip())},[f,a,i,r,c,h]),Bv((T,M)=>{if(_.current===Wr.START)_.current=Wr.ACTIVE,p();else if(_.current===Wr.ACTIVE){if(g.current+=M/e,g.current>=1)x.current.camPos&&c.position.copy(x.current.camPos),x.current.camRot&&c.quaternion.copy(x.current.camRot),x.current.camUp&&c.up.copy(x.current.camUp),x.current.camZoom&&Rc(c)&&(c.zoom=x.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),h&&x.current.target&&(h.target.copy(x.current.target),h.update()),_.current=Wr.NONE;else{const b=s(g.current);x.current.camPos&&c.position.lerpVectors(v.current.camPos,x.current.camPos,b),x.current.camRot&&c.quaternion.slerpQuaternions(v.current.camRot,x.current.camRot,b),x.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),x.current.camZoom&&Rc(c)&&(c.zoom=(1-b)*v.current.camZoom+b*x.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}p()}}),k.createElement("group",{ref:l},k.createElement(ZB.Provider,{value:S},n))}function QW(){return k.useContext(ZB)}const V_={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ZW="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Jb=n=>Array.isArray(n);function $B({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var a;let s=null,o=!1,l;if(t){if(!(t in V_))throw new Error("Preset must be one of: "+Object.keys(V_).join(", "));n=V_[t],e=ZW}if(o=Jb(n),l=Jb(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(a=n.split(".").pop())==null||(a=a.split("?"))==null||(a=a.shift())==null?void 0:a.toLowerCase(),s=o?vR:l==="hdr"?VW:l==="exr"?GW:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=zu(s,o?[n]:n,m=>{m.setPath==null||m.setPath(e),i&&i(m)}),f=o?c[0]:c;f.mapping=o?Xa:lu;const p=3001,h=3e3;return"colorSpace"in f?f.colorSpace=r??o?"srgb":"srgb-linear":f.encoding=r??o?p:h,f}const $W=n=>n.current&&n.current.isScene,e7=n=>$W(n)?n.current:n;function cw(n,e,t,r,i=0){const a=e7(e||t),s=a.background,o=a.environment,l=a.backgroundBlurriness||0;return n!=="only"&&(a.environment=r),n&&(a.background=r),n&&a.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=i),()=>{n!=="only"&&(a.environment=o),n&&(a.background=s),n&&a.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=l)}}function uw({scene:n,background:e=!1,blur:t,map:r}){const i=Wi(a=>a.scene);return k.useLayoutEffect(()=>{if(r)return cw(e,n,i,r,t)},[i,n,r,e,t]),null}function eL({background:n=!1,scene:e,blur:t,...r}){const i=$B(r),a=Wi(s=>s.scene);return k.useLayoutEffect(()=>cw(n,e,a,i,t),[i,n,e,a,t]),null}function t7({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,scene:l,files:c,path:f,preset:p=void 0,extensions:h}){const m=Wi(S=>S.gl),v=Wi(S=>S.scene),x=k.useRef(null),[_]=k.useState(()=>new _f),g=k.useMemo(()=>{const S=new xS(r);return S.texture.type=Ii,S},[r]);k.useLayoutEffect(()=>(i===1&&x.current.update(m,_),cw(s,l,v,g.texture,o)),[n,_,g.texture,l,v,s,i,m]);let A=1;return Bv(()=>{(i===1/0||A<i)&&(x.current.update(m,_),A++)}),k.createElement(k.Fragment,null,q4(k.createElement(k.Fragment,null,n,k.createElement("cubeCamera",{ref:x,args:[e,t,g]}),c||p?k.createElement(eL,{background:!0,files:c,preset:p,path:f,extensions:h}):a?k.createElement(uw,{background:!0,map:a,extensions:h}):null),_))}function n7(n){var e,t,r,i;const a=$B(n),s=n.map||a;k.useMemo(()=>$S({GroundProjectedEnvImpl:sW}),[]);const o=k.useMemo(()=>[s],[s]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,f=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return k.createElement(k.Fragment,null,k.createElement(uw,wr({},n,{map:s})),k.createElement("groundProjectedEnvImpl",{args:o,scale:f,height:l,radius:c}))}function dw(n){return n.ground?k.createElement(n7,n):n.map?k.createElement(uw,n):n.children?k.createElement(t7,n):k.createElement(eL,n)}const i7=k.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:r=1,height:i=1,blur:a=1,near:s=0,far:o=10,resolution:l=512,smooth:c=!0,color:f="#000000",depthWrite:p=!1,renderOrder:h,...m},v)=>{const x=k.useRef(null),_=Wi(W=>W.scene),g=Wi(W=>W.gl),A=k.useRef(null);r=r*(Array.isArray(n)?n[0]:n||1),i=i*(Array.isArray(n)?n[1]:n||1);const[S,C,T,M,b,L,R]=k.useMemo(()=>{const W=new Ji(l,l),Z=new Ji(l,l);Z.texture.generateMipmaps=W.texture.generateMipmaps=!1;const ie=new Du(r,i).rotateX(Math.PI/2),he=new kn(ie),Y=new hv;Y.depthTest=Y.depthWrite=!1,Y.onBeforeCompile=de=>{de.uniforms={...de.uniforms,ucolor:{value:new Oe(f)}},de.fragmentShader=de.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),de.fragmentShader=de.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const re=new fr(NW),te=new fr(zW);return te.depthTest=re.depthTest=!1,[W,ie,Y,he,re,te,Z]},[l,r,i,n,f]),F=W=>{M.visible=!0,M.material=b,b.uniforms.tDiffuse.value=S.texture,b.uniforms.h.value=W*1/256,g.setRenderTarget(R),g.render(M,A.current),M.material=L,L.uniforms.tDiffuse.value=R.texture,L.uniforms.v.value=W*1/256,g.setRenderTarget(S),g.render(M,A.current),M.visible=!1};let O=0,X,ne;return Bv(()=>{A.current&&(e===1/0||O<e)&&(O++,X=_.background,ne=_.overrideMaterial,x.current.visible=!1,_.background=null,_.overrideMaterial=T,g.setRenderTarget(S),g.render(_,A.current),F(a),c&&F(a*.4),g.setRenderTarget(null),x.current.visible=!0,_.overrideMaterial=ne,_.background=X)}),k.useImperativeHandle(v,()=>x.current,[]),k.createElement("group",wr({"rotation-x":Math.PI/2},m,{ref:x}),k.createElement("mesh",{renderOrder:h,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},k.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:t,depthWrite:p})),k.createElement("orthographicCamera",{ref:A,args:[-r/2,r/2,i/2,-i/2,s,o]}))});function r7(n){return n.isLight}function a7(n){return!!n.geometry}const tL=k.createContext(null),s7=qB({color:new Oe,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${KB>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),o7=k.forwardRef(({children:n,temporal:e,frames:t=40,limit:r=1/0,blend:i=20,scale:a=10,opacity:s=1,alphaTest:o=.75,color:l="black",colorBlend:c=2,resolution:f=1024,toneMapped:p=!0,...h},m)=>{$S({SoftShadowMaterial:s7});const v=Wi(M=>M.gl),x=Wi(M=>M.scene),_=Wi(M=>M.camera),g=Wi(M=>M.invalidate),A=k.useRef(null),S=k.useRef(null),[C]=k.useState(()=>new c7(v,x,f));k.useLayoutEffect(()=>{C.configure(A.current)},[]);const T=k.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?i:t),count:0,getMesh:()=>A.current,reset:()=>{C.clear();const M=A.current.material;M.opacity=0,M.alphaTest=0,T.count=0},update:(M=1)=>{const b=A.current.material;T.temporal?(b.opacity=Math.min(s,b.opacity+s/T.blend),b.alphaTest=Math.min(o,b.alphaTest+o/T.blend)):(b.opacity=s,b.alphaTest=o),S.current.visible=!0,C.prepare();for(let L=0;L<M;L++)T.lights.forEach(R=>R.update()),C.update(_,T.blend);S.current.visible=!1,C.finish()}}),[C,_,x,e,t,i,s,o]);return k.useLayoutEffect(()=>{T.reset(),!T.temporal&&T.frames!==1/0&&T.update(T.blend)}),k.useImperativeHandle(m,()=>T,[T]),Bv(()=>{(T.temporal||T.frames===1/0)&&T.count<T.frames&&T.count<r&&(g(),T.update(),T.count++)}),k.createElement("group",h,k.createElement("group",{traverse:()=>null,ref:S},k.createElement(tL.Provider,{value:T},n)),k.createElement("mesh",{receiveShadow:!0,ref:A,scale:a,rotation:[-Math.PI/2,0,0]},k.createElement("planeGeometry",null),k.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:p,color:l,blend:c,map:C.progressiveLightMap2.texture})))}),l7=k.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:r=5,near:i=.5,far:a=500,frames:s=1,position:o=[0,0,0],radius:l=1,amount:c=8,intensity:f=KB>=155?Math.PI:1,ambient:p=.5,...h},m)=>{const v=k.useRef(null),x=new z(...o).length(),_=k.useContext(tL),g=k.useCallback(()=>{let S;if(v.current)for(let C=0;C<v.current.children.length;C++)if(S=v.current.children[C],Math.random()>p)S.position.set(o[0]+Ua.randFloatSpread(l),o[1]+Ua.randFloatSpread(l),o[2]+Ua.randFloatSpread(l));else{let T=Math.acos(2*Math.random()-1)-Math.PI/2,M=2*Math.PI*Math.random();S.position.set(Math.cos(T)*Math.cos(M)*x,Math.abs(Math.cos(T)*Math.sin(M)*x),Math.sin(T)*x)}},[l,p,x,...o]),A=k.useMemo(()=>({update:g}),[g]);return k.useImperativeHandle(m,()=>A,[A]),k.useLayoutEffect(()=>{var S;const C=v.current;return _&&((S=_.lights)==null||S.set(C.uuid,A)),()=>{var T;return void(_==null||(T=_.lights)==null?void 0:T.delete(C.uuid))}},[_,A]),k.createElement("group",wr({ref:v},h),Array.from({length:c},(S,C)=>k.createElement("directionalLight",{key:C,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:f/c},k.createElement("orthographicCamera",{attach:"shadow-camera",args:[-r,r,r,-r,i,a]}))))});class c7{constructor(e,t,r=1024){this.renderer=e,this.res=r,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Oe,this.clearAlpha=0;const i={type:Ii,magFilter:En,minFilter:En};this.progressiveLightMap1=new Ji(this.res,this.res,i),this.progressiveLightMap2=new Ji(this.res,this.res,i),this.discardMat=new JW,this.targetMat=new US({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=a=>{a.vertexShader=`varying vec2 vUv;
`+a.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const s=a.fragmentShader.indexOf("void main() {");a.fragmentShader=`varying vec2 vUv;
`+a.fragmentShader.slice(0,s)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+a.fragmentShader.slice(s-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,a.uniforms.previousShadowMap=this.previousShadowMap,a.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{a7(e)?this.meshes.push({object:e,material:e.material}):r7(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const r=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,i=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,a=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(r),this.previousShadowMap.value=i.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=a}}const u7={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function d7({radius:n,adjustCamera:e}){const t=QW();return k.useEffect(()=>{e&&t.refresh().clip().fit()},[n,e]),null}function nL({children:n,center:e,adjustCamera:t=!0,intensity:r=.5,shadows:i="contact",environment:a="city",preset:s="rembrandt",...o}){var l,c,f,p,h,m,v,x;const _=typeof s=="string"?u7[s]:s,[{radius:g,height:A},S]=k.useState({radius:0,width:0,height:0,depth:0}),C=(l=i==null?void 0:i.bias)!==null&&l!==void 0?l:-1e-4,T=(c=i==null?void 0:i.normalBias)!==null&&c!==void 0?c:0,M=(f=i==null?void 0:i.size)!==null&&f!==void 0?f:1024,b=(p=i==null?void 0:i.offset)!==null&&p!==void 0?p:0,L=i==="contact"||(i==null?void 0:i.type)==="contact",R=i==="accumulative"||(i==null?void 0:i.type)==="accumulative",F={...typeof i=="object"?i:{}},O=a?typeof a=="string"?{preset:a}:a:null,X=k.useCallback(ne=>{const{width:W,height:Z,depth:ie,boundingSphere:he}=ne;S({radius:he.radius,width:W,height:Z,depth:ie}),e!=null&&e.onCentered&&e.onCentered(ne)},[]);return k.createElement(k.Fragment,null,k.createElement("ambientLight",{intensity:r/3}),k.createElement("spotLight",{penumbra:1,position:[_.main[0]*g,_.main[1]*g,_.main[2]*g],intensity:r*2,castShadow:!!i,"shadow-bias":C,"shadow-normalBias":T,"shadow-mapSize":M}),k.createElement("pointLight",{position:[_.fill[0]*g,_.fill[1]*g,_.fill[2]*g],intensity:r}),k.createElement(YW,wr({fit:!!t,clip:!!t,margin:Number(t),observe:!0},o),k.createElement(d7,{radius:g,adjustCamera:t}),k.createElement(jW,wr({},e,{position:[0,b/2,0],onCentered:X}),n)),k.createElement("group",{position:[0,-A/2-b/2,0]},L&&k.createElement(i7,wr({scale:g*4,far:g,blur:2},F)),R&&k.createElement(o7,wr({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:g*4},F),k.createElement(l7,{amount:(h=F.amount)!==null&&h!==void 0?h:8,radius:(m=F.radius)!==null&&m!==void 0?m:g,ambient:(v=F.ambient)!==null&&v!==void 0?v:.5,intensity:(x=F.intensity)!==null&&x!==void 0?x:1,position:[_.main[0]*g,_.main[1]*g,_.main[2]*g],size:g*4,bias:-C,mapSize:M}))),a&&k.createElement(dw,O))}const f7="https://pub-201533c97c3b4e169c75945e8e2f95fc.r2.dev",h7=(n,e)=>{const t=wh(`${f7}/${n.objectKey}.glb`),{scene:r,nodes:i,materials:a}=t,{selectedColor:s}=n;let o=[];return k.useEffect(()=>{switch(n.objectKey){case"crown-of-thorns":o[0]="Цилиндр018_Цилиндр094",o[1]="",Object.assign(i[o[0]].material,{color:new Oe("#020202")}),Object.assign(a[o[1]],{emissive:new Oe(s)});break;case"lambo":o[0]="wheel003_020_2_Chrome_0",o[1]="WhiteCar",Object.assign(i[o[0]].material,{color:new Oe("#020202")}),Object.assign(a[o[1]],{emissive:new Oe(s)});break;case"lambo-suede":o[0]="wheel003_020_2_Chrome_0",o[1]="Sage Blue Miracle soft Fabric",Object.assign(i[o[0]].material,{color:new Oe("#020202")}),Object.assign(a[o[1]],{emissive:new Oe(s)});break;case"trucker-hat":Object.assign(a.Sage_Blue_Miracle_soft_Fabric,{color:new Oe(s)}),Object.assign(i.NetFabric_pivot003.material,{opacity:.1}),Object.assign(i.lables_pivot003.material,{color:new Oe("#ff9999")}),Object.assign(i.ClaspL_pivot003.material,{color:new Oe(s)}),Object.assign(i.ClaspR_pivot003.material,{color:new Oe(s)}),Object.assign(i.Visor_pivot003.material,{...a.Sage_Blue_Miracle_soft_Fabric}),Object.assign(i.CapStripes_pivot003.material,{...a.Sage_Blue_Miracle_soft_Fabric});break}r.traverse(l=>l.type==="Mesh"&&(l.receiveShadow=l.castShadow=!0))},[r,i,a,s]),ue.jsx("primitive",{object:r,...n})},p7=nI,m7=k.Suspense,g7=Wd.forwardRef((n,e)=>h7(n)),v7=()=>{const[n,e]=k.useState(.9999),[t,r]=k.useState(0),i=k.useRef(null),a=[{label:"no.1",value:"#b6b5ac"},{label:"no.2",value:"#8b6245"},{label:"no.3",value:"#3d2019"},{label:"no.5",value:"#966b22"},{label:"no.6",value:"#6f797e"}];return k.useEffect(()=>{const s=o=>{const l=o.deltaY;e(c=>c+l*.002)};return window.addEventListener("wheel",s),()=>{window.removeEventListener("wheel",s)}},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
          .Three-js__container {
              width: 100%;
              height: 100%;
              display: flex;
              align-items: center;
              justify-content: center;

              background-color: #101010;
          }

          .Three-js__sceneContainer { 
              border: 1px solid #fff;
              width: 100%;
              height: 100%;
          }

          .Three-js__editorContainer {

              height: 100%;
              width: 400px;
              min-width: 400px;
              
              border-top: 1px solid #fff;
              border-right: 1px solid #fff;
              border-bottom: 1px solid #fff;
          }

          .Three-js__colorSelectorLabel {
              font-size: large;
              font-family: "Serif";
              font-weight: bold;
              display: flex;
              align-items: center;
              justify-content: flex-start;
              padding: 12px;
              padding-bottom: 0px;
              color: #fff;
          }

          .Three-js__colorSelectorRow {
              display: flex;
              gap: 10px;
              align-items: center;
              justify-content: flex-start;
              padding: 12px;
              border-bottom: 1px solid #fff;
          }

          .Three-js__selectorOption {
              width: 24px;
              height: 24px;
              min-width: 24px;
              min-height: 24px;

              border-radius: 100%;
              border: 1px solid #fff;

              cursor: pointer;
          }
        `}),ue.jsxs("div",{className:"Three-js__container",children:[ue.jsx("div",{className:"Three-js__sceneContainer",children:ue.jsxs(p7,{dpr:[1,2],shadows:!0,camera:{fov:45},children:[ue.jsx("color",{attach:"background",args:["#101010"]}),ue.jsx("fog",{attach:"fog",args:["#101010",10,20]}),ue.jsxs(m7,{fallback:null,children:[ue.jsx(dw,{path:"https://pub-201533c97c3b4e169c75945e8e2f95fc.r2.dev/cube"}),ue.jsx(NB,{speed:1.5,global:!0,zoom:.7,polar:[-.1,Math.PI/4],children:ue.jsx(nL,{environment:null,intensity:.5,shadows:!1,children:ue.jsx(g7,{objectKey:"trucker-hat",ref:i,scale:.01,rotation:[0,n,0],selectedColor:a[t].value})})})]})]})}),ue.jsxs("div",{className:"Three-js__editorContainer",children:[ue.jsx("div",{className:"Three-js__colorSelectorLabel",children:"Color"}),ue.jsx("div",{className:"Three-js__colorSelectorRow",children:a.map((s,o)=>ue.jsx("div",{className:"Three-js__selectorOption",style:{backgroundColor:s.value},onClick:()=>{r(o)}},`${s.value}-${o}`))})]})]})]})},zt={assetBaseUrl:"https://pub-201533c97c3b4e169c75945e8e2f95fc.r2.dev",headerHeight:92,scrollAnimationTimingMs:1500,scrollAnimationProductTimingMs:650},y7=nI,_7=k.Suspense,x7=n=>new Promise(e=>setTimeout(e,n)),G_=.85,qb=({scrollIndex:n,objectUrl:e,offset:t=0,index:r,isMobile:i})=>{const[a,s]=k.useState(.99),[o,l]=k.useState([0,0,0]),[c,f]=k.useState(a),p=k.useRef(null),[h,m]=k.useState(null),[v,x]=k.useState(null),[_,g]=k.useState(0),[A,S]=k.useState(G_),[C,T]=k.useState(-1),M=k.useRef(!1);k.useEffect(()=>{r===0?g(.04940697590113064):r===1?g(.050566103187266245):r===2&&g(.05336917361230629)},[]);const b=()=>{const{scene:X}=wh(e);m(X)};k.useMemo(()=>{b()},[]),k.useEffect(()=>{const X=setInterval(()=>{f(ne=>ne+.01)},20);return()=>clearInterval(X)},[i]),k.useEffect(()=>{f(a)},[a]);const L=async(X,ne=1)=>{const W=R(X,ne);l(W)},R=(X,ne)=>{switch(X){case 0:return[0,.001*ne,-.003*ne];case 1:return[0,.001*ne,-.003*ne];case 2:return[0,.001*ne,-.001*ne];default:return console.log("Invalid GLB index",X),[0,0,0]}},F=async()=>{for(let X=0;X<100;X++)await x7(10),O()};k.useEffect(()=>{n===1&&v===0&&window.scrollY===C?(x(n),M.current=!0,setTimeout(()=>{F()},zt.scrollAnimationTimingMs)):x(n),T(window.scrollY)},[n,C,window.scrollY]);const O=()=>{h&&p.current&&(M.current&&(M.current=!1,g(X=>X*G_),S(X=>X*1+(1-G_))),L(r,A),p.current.scale.set(_,_,_))};return k.useEffect(()=>{h&&h.traverse(X=>{X.type==="Mesh"&&(X.material.roughness=.5,r===2&&(X.material.roughness=1,X.material.color=new Oe(0),X.material.metalness=0))})},[h]),ue.jsx(ue.Fragment,{children:ue.jsx(y7,{dpr:[1,2],shadows:!0,camera:{fov:45,near:.1,far:900},children:ue.jsxs(_7,{fallback:null,children:[ue.jsx(dw,{path:`${zt.assetBaseUrl}/cube`}),ue.jsx(NB,{speed:1.5,global:!0,zoom:.7,polar:[-.1,Math.PI/4],children:ue.jsx(nL,{environment:null,intensity:.05,shadows:!1,children:h&&ue.jsx("primitive",{ref:p,object:h,position:o,rotation:[0,c+t,0],scale:i?.04:.05})})})]})})})},St={primary:"#000",secondary:"#000",accent:"#df2935",textColor:"#fff",gradientBg:"linear-gradient(225deg, rgba(36,36,36,1) 0%, rgba(0,0,0,1) 80%)"},ir={nav:{transparentLogoWhite:zt.assetBaseUrl+"/5rc/nav/transparent-icon-white.webp",cart:zt.assetBaseUrl+"/5rc/nav/cart.svg"},home:{desktopHeroImg:zt.assetBaseUrl+"/5rc/home/dt.webp",heroGif:zt.assetBaseUrl+"/5rc/home/example-hero.gif",mobileBgWebm:zt.assetBaseUrl+"/5rc/home/mobile.webm",mobileBgMp4:zt.assetBaseUrl+"/5rc/home/mobile.mp4"},terms:{version:"1.0",text:["Welcome to 5th Round Cardio, LLC. By accessing or using our products and services, you agree to be bound by the following terms and conditions. Please read them carefully.","","1. General","","  1.1 These Terms govern your use of our products (collectively, the “Product”), website, and any related services offered by 5th Round Cardio, LLC (the “Service”).","","  1.2 By accessing or using the Product and/or Service, you agree to be bound by these Terms. If you disagree with any part of the Terms, you may not access or use the Service.","","2. Content","","  2.1 The Service may contain content owned by us or licensed to us (the “Content”).","","  2.2 The Content is protected by copyright, trademark, and other intellectual property laws.","","  2.3 You agree not to modify, reproduce, distribute, or create derivative works of the Content without our express written permission.","","3. Disclaimer","","  3.1 The Product is provided 'as is' with a 90-day warranty, whether express or implied.","","  3.2 We disclaim all warranties past 90 days of initial purchase, including implied warranties of merchantability, fitness for a particular purpose, and non-infringement.","","  3.3 We do not warrant that the Product will be completely error-free.","","  3.4 We do not warrant that the results from the use of the Product or Service will be accurate or reliable.","","  3.5 You acknowledge that participation in physical activity carries inherent risks, and you agree to assume full responsibility for any and all risks associated with your use of the Service.","","4. Limitation of Liability","","  4.1 We will not be liable for any damages arising out of or related to your use of the Service.","","  4.2 This includes, but is not limited to, direct, indirect, incidental, consequential, punitive, and special damages.","","5. Indemnification","","  5.1 You agree to indemnify and hold harmless 5th Round Cardio, LLC, its officers, directors, employees, contractors, agents, and licensors from any claims, losses, damages, liabilities, including attorney's fees, arising out of or related to your use of the Service.","","6. Governing Law","","  6.1 These Terms shall be governed by and construed in accordance with the laws of the State of California.","","  6.2 5th Round Cardio adheres to all California governing business laws and practices.","","7. Dispute Resolution","","  7.1 Any dispute arising out of or relating to these Terms or your use of the Product shall be resolved in accordance with the rules of the American Arbitration Association ('AAA').","","  7.2 The arbitration shall be held in Long Beach, CA.","","  7.3 The arbitral award shall be binding and final and may be entered as a judgment in any court of competent jurisdiction.","","8. Entire Agreement","","  8.1 These Terms constitute the entire agreement between you and us regarding the use of the Service.","","9. Severability","","  9.1 If any provision of these Terms is held to be invalid or unenforceable, such provision shall be struck and the remaining provisions shall remain in full force and effect.","","10. Waiver","","  10.1 Our failure to enforce any provision of these Terms shall not be construed as a waiver of such provision or any other provision of these Terms.","","11. Notices","","  11.1 All notices and communications hereunder shall be in writing and deemed duly given when delivered personally, sent by certified or registered mail, or sent by overnight courier to 5th Round Cardio, LLC, 12551 E Carson Street, Hawaiian Gardens CA 90716.","","12. Contact Us","","  If you have any questions about these Terms, please contact us at 5throundcardio@gmail.com.","","5th Round Cardio Privacy Policy","","Effective Date: 6/26/24","","1. Information We Collect","","  1.1 We collect information you provide directly to us when you place an order, sign up for marketing, participate in communities, or contact customer support.","","2. Use of Information","","  2.1 We use the information to process orders, provide support, personalize your experience, send marketing communications (with your permission), and comply with legal obligations.","","3. Sharing of Information","","  3.1 We do not share, rent, lease, or sell your personal information to third parties for their independent use or benefit.","","  3.2 We may disclose your information as required by law to protect our rights, property, or the safety of others.","","4. Security","","  4.1 We take reasonable steps to protect your information using secure servers, encryption technology, and access controls.","","5. Your Choices","","  5.1 You can opt out of marketing communications or manage your preferences through your account settings.","","6. Children's Privacy","","  6.1 We do not knowingly collect personal information from children under 13.","","7. Changes to this Privacy Policy","","  7.1 We may update this Privacy Policy from time to time and notify you by posting the new policy on our website.","","8. Contact Us","","  If you have any questions about this Privacy Policy, please contact us at 5throundcardio@gmail.com."]},products:[{name:"The Middle Weight",description:["Experience the durability and performance of our Middleweight Treadmill, designed for intense workouts and heavy use. With a rugged design and an added resistance dial, this treadmill offers customizable intensity, making it perfect for universities/colleges, apartment complexes, and fitness centers.","The Middleweight Treadmill is engineered to withstand rigorous training sessions while providing a challenging workout experience. Its durable construction and versatility make it an ideal choice for facilities seeking reliable and high-performance cardio equipment."],cost:2250,glbUrl:zt.assetBaseUrl+"/5rc/treadmill-0/3d.glb",images:[{src:zt.assetBaseUrl+"/5rc/treadmill-0/img-0.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-0/img-1.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-0/img-2.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-0/img-3.webp"}]},{name:"The Executive",description:["The pinnacle of sophistication and functionality in the world of cardio equipment. Crafted with precision and engineered for excellence, this self-powered treadmill redefines your workout experience with its unique blend of style and innovation.",'Elevate your fitness routine with the seamless synergy of modern technology and timeless design. "The Executive" features stunning wooden accents that exude elegance and refinement, making it a statement piece in any home or commercial gym.'],cost:2e3,glbUrl:zt.assetBaseUrl+"/5rc/treadmill-1/3d.glb",images:[{src:zt.assetBaseUrl+"/5rc/treadmill-1/img-0.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-1/img-1.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-1/img-2.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-1/img-3.webp"}]},{name:"The Heavyweight",description:["th Round Cardio proudly presents ‘The Heavyweight’ treadmill. This powerhouse features a fixed 7-degree incline designed to push even the most advanced athletes to their limits. Athletes and trainers have hailed it as the ultimate masochistic training tool, ideal for elevating cardio endurance and overall work capacity."],cost:3e3,glbUrl:zt.assetBaseUrl+"/5rc/treadmill-2/3d.glb",images:[{src:zt.assetBaseUrl+"/5rc/treadmill-2/img-0.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-2/img-1.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-2/img-2.webp"},{src:zt.assetBaseUrl+"/5rc/treadmill-2/img-3.webp"}]}]};var at={},VA={exports:{}};(function(n,e){(function(t,r){var i="1.0.37",a="",s="?",o="function",l="undefined",c="object",f="string",p="major",h="model",m="name",v="type",x="vendor",_="version",g="architecture",A="console",S="mobile",C="tablet",T="smarttv",M="wearable",b="embedded",L=500,R="Amazon",F="Apple",O="ASUS",X="BlackBerry",ne="Browser",W="Chrome",Z="Edge",ie="Firefox",he="Google",Y="Huawei",re="LG",te="Microsoft",de="Motorola",fe="Opera",ae="Samsung",_e="Sharp",Pe="Sony",Ie="Xiaomi",ke="Zebra",ct="Facebook",xt="Chromium OS",nt="Mac OS",dt=function(Be,be){var Ee={};for(var Ve in Be)be[Ve]&&be[Ve].length%2===0?Ee[Ve]=be[Ve].concat(Be[Ve]):Ee[Ve]=Be[Ve];return Ee},J=function(Be){for(var be={},Ee=0;Ee<Be.length;Ee++)be[Be[Ee].toUpperCase()]=Be[Ee];return be},Fe=function(Be,be){return typeof Be===f?xe(be).indexOf(xe(Be))!==-1:!1},xe=function(Be){return Be.toLowerCase()},De=function(Be){return typeof Be===f?Be.replace(/[^\d\.]/g,a).split(".")[0]:r},Ae=function(Be,be){if(typeof Be===f)return Be=Be.replace(/^\s\s*/,a),typeof be===l?Be:Be.substring(0,L)},ot=function(Be,be){for(var Ee=0,Ve,ht,Ce,it,ze,lt;Ee<be.length&&!ze;){var Qe=be[Ee],$e=be[Ee+1];for(Ve=ht=0;Ve<Qe.length&&!ze&&Qe[Ve];)if(ze=Qe[Ve++].exec(Be),ze)for(Ce=0;Ce<$e.length;Ce++)lt=ze[++ht],it=$e[Ce],typeof it===c&&it.length>0?it.length===2?typeof it[1]==o?this[it[0]]=it[1].call(this,lt):this[it[0]]=it[1]:it.length===3?typeof it[1]===o&&!(it[1].exec&&it[1].test)?this[it[0]]=lt?it[1].call(this,lt,it[2]):r:this[it[0]]=lt?lt.replace(it[1],it[2]):r:it.length===4&&(this[it[0]]=lt?it[3].call(this,lt.replace(it[1],it[2])):r):this[it]=lt||r;Ee+=2}},je=function(Be,be){for(var Ee in be)if(typeof be[Ee]===c&&be[Ee].length>0){for(var Ve=0;Ve<be[Ee].length;Ve++)if(Fe(be[Ee][Ve],Be))return Ee===s?r:Ee}else if(Fe(be[Ee],Be))return Ee===s?r:Ee;return Be},N={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},D={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},se={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,_],[/opios[\/ ]+([\w\.]+)/i],[_,[m,fe+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[m,fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[m,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[m,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[m,"UC"+ne]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[m,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[m,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[m,"Smart Lenovo "+ne]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+ne],_],[/\bfocus\/([\w\.]+)/i],[_,[m,ie+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[m,fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[m,fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[m,"MIUI "+ne]],[/fxios\/([-\w\.]+)/i],[_,[m,ie]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+ne]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+ne],_],[/samsungbrowser\/([\w\.]+)/i],[_,[m,ae+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],_],[/metasr[\/ ]?([\d\.]+)/i],[_,[m,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[m,"Sogou Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[m,_],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,ct],_],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[m,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[m,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[m,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[m,W+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,W+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[m,"Android "+ne]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[_,je,N]],[/(webkit|khtml)\/([\w\.]+)/i],[m,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[m,ie+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[m,_],[/(cobalt)\/([\w\.]+)/i],[m,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,xe]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,a,xe]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,xe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[x,ae],[v,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[x,ae],[v,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[x,F],[v,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[x,F],[v,C]],[/(macintosh);/i],[h,[x,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[x,_e],[v,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[x,Y],[v,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[x,Y],[v,S]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[x,Ie],[v,S]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[x,Ie],[v,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[x,"OPPO"],[v,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[x,"Vivo"],[v,S]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[x,"Realme"],[v,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[x,de],[v,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[x,de],[v,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[x,re],[v,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[x,re],[v,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[x,"Lenovo"],[v,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[x,"Nokia"],[v,S]],[/(pixel c)\b/i],[h,[x,he],[v,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[x,he],[v,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[x,Pe],[v,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[x,Pe],[v,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[x,"OnePlus"],[v,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[x,R],[v,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[x,R],[v,S]],[/(playbook);[-\w\),; ]+(rim)/i],[h,x,[v,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[x,X],[v,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[x,O],[v,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[x,O],[v,S]],[/(nexus 9)/i],[h,[x,"HTC"],[v,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[h,/_/g," "],[v,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[x,"Acer"],[v,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[x,"Meizu"],[v,S]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[x,"Ulefone"],[v,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,h,[v,S]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,h,[v,C]],[/(surface duo)/i],[h,[x,te],[v,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[x,"Fairphone"],[v,S]],[/(u304aa)/i],[h,[x,"AT&T"],[v,S]],[/\bsie-(\w*)/i],[h,[x,"Siemens"],[v,S]],[/\b(rct\w+) b/i],[h,[x,"RCA"],[v,C]],[/\b(venue[\d ]{2,7}) b/i],[h,[x,"Dell"],[v,C]],[/\b(q(?:mv|ta)\w+) b/i],[h,[x,"Verizon"],[v,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[x,"Barnes & Noble"],[v,C]],[/\b(tm\d{3}\w+) b/i],[h,[x,"NuVision"],[v,C]],[/\b(k88) b/i],[h,[x,"ZTE"],[v,C]],[/\b(nx\d{3}j) b/i],[h,[x,"ZTE"],[v,S]],[/\b(gen\d{3}) b.+49h/i],[h,[x,"Swiss"],[v,S]],[/\b(zur\d{3}) b/i],[h,[x,"Swiss"],[v,C]],[/\b((zeki)?tb.*\b) b/i],[h,[x,"Zeki"],[v,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],h,[v,C]],[/\b(ns-?\w{0,9}) b/i],[h,[x,"Insignia"],[v,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[x,"NextBook"],[v,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],h,[v,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],h,[v,S]],[/\b(ph-1) /i],[h,[x,"Essential"],[v,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[x,"Envizen"],[v,C]],[/\b(trio[-\w\. ]+) b/i],[h,[x,"MachSpeed"],[v,C]],[/\btu_(1491) b/i],[h,[x,"Rotor"],[v,C]],[/(shield[\w ]+) b/i],[h,[x,"Nvidia"],[v,C]],[/(sprint) (\w+)/i],[x,h,[v,S]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[x,te],[v,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[x,ke],[v,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[x,ke],[v,S]],[/smart-tv.+(samsung)/i],[x,[v,T]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[x,ae],[v,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,re],[v,T]],[/(apple) ?tv/i],[x,[h,F+" TV"],[v,T]],[/crkey/i],[[h,W+"cast"],[x,he],[v,T]],[/droid.+aft(\w+)( bui|\))/i],[h,[x,R],[v,T]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[x,_e],[v,T]],[/(bravia[\w ]+)( bui|\))/i],[h,[x,Pe],[v,T]],[/(mitv-\w{5}) bui/i],[h,[x,Ie],[v,T]],[/Hbbtv.*(technisat) (.*);/i],[x,h,[v,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,Ae],[h,Ae],[v,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,h,[v,A]],[/droid.+; (shield) bui/i],[h,[x,"Nvidia"],[v,A]],[/(playstation [345portablevi]+)/i],[h,[x,Pe],[v,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[x,te],[v,A]],[/((pebble))app/i],[x,h,[v,M]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[x,F],[v,M]],[/droid.+; (glass) \d/i],[h,[x,he],[v,M]],[/droid.+; (wt63?0{2,3})\)/i],[h,[x,ke],[v,M]],[/(quest( 2| pro)?)/i],[h,[x,ct],[v,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[v,b]],[/(aeobc)\b/i],[h,[x,R],[v,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[v,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[v,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[v,S]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[m,Z+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[m,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[m,[_,je,D]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,je,D],[m,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,nt],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,_],[/\(bb(10);/i],[_,[m,X]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[m,ie+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[m,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[m,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[m,W+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[m,xt],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,_],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[m,_]]},Se=function(Be,be){if(typeof Be===c&&(be=Be,Be=r),!(this instanceof Se))return new Se(Be,be).getResult();var Ee=typeof t!==l&&t.navigator?t.navigator:r,Ve=Be||(Ee&&Ee.userAgent?Ee.userAgent:a),ht=Ee&&Ee.userAgentData?Ee.userAgentData:r,Ce=be?dt(se,be):se,it=Ee&&Ee.userAgent==Ve;return this.getBrowser=function(){var ze={};return ze[m]=r,ze[_]=r,ot.call(ze,Ve,Ce.browser),ze[p]=De(ze[_]),it&&Ee&&Ee.brave&&typeof Ee.brave.isBrave==o&&(ze[m]="Brave"),ze},this.getCPU=function(){var ze={};return ze[g]=r,ot.call(ze,Ve,Ce.cpu),ze},this.getDevice=function(){var ze={};return ze[x]=r,ze[h]=r,ze[v]=r,ot.call(ze,Ve,Ce.device),it&&!ze[v]&&ht&&ht.mobile&&(ze[v]=S),it&&ze[h]=="Macintosh"&&Ee&&typeof Ee.standalone!==l&&Ee.maxTouchPoints&&Ee.maxTouchPoints>2&&(ze[h]="iPad",ze[v]=C),ze},this.getEngine=function(){var ze={};return ze[m]=r,ze[_]=r,ot.call(ze,Ve,Ce.engine),ze},this.getOS=function(){var ze={};return ze[m]=r,ze[_]=r,ot.call(ze,Ve,Ce.os),it&&!ze[m]&&ht&&ht.platform!="Unknown"&&(ze[m]=ht.platform.replace(/chrome os/i,xt).replace(/macos/i,nt)),ze},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ve},this.setUA=function(ze){return Ve=typeof ze===f&&ze.length>L?Ae(ze,L):ze,this},this.setUA(Ve),this};Se.VERSION=i,Se.BROWSER=J([m,_,p]),Se.CPU=J([g]),Se.DEVICE=J([h,x,v,A,S,T,C,M,b]),Se.ENGINE=Se.OS=J([m,_]),n.exports&&(e=n.exports=Se),e.UAParser=Se;var Te=typeof t!==l&&(t.jQuery||t.Zepto);if(Te&&!Te.ua){var we=new Se;Te.ua=we.getResult(),Te.ua.get=function(){return we.getUA()},Te.ua.set=function(Be){we.setUA(Be);var be=we.getResult();for(var Ee in be)Te.ua[Ee]=be[Ee]}}})(typeof window=="object"?window:uU)})(VA,VA.exports);var A7=VA.exports;Object.defineProperty(at,"__esModule",{value:!0});function S7(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var Fi=k,gn=S7(Fi),iL=A7,Ro=new iL,Ui=Ro.getBrowser(),w7=Ro.getCPU(),Ir=Ro.getDevice(),fw=Ro.getEngine(),Io=Ro.getOS(),Ch=Ro.getUA(),rL=function(e){return Ro.setUA(e)},Eh=function(e){if(!e){console.error("No userAgent string was provided");return}var t=new iL(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(i){return t.setUA(i)}}},aL=Object.freeze({ClientUAInstance:Ro,browser:Ui,cpu:w7,device:Ir,engine:fw,os:Io,ua:Ch,setUa:rL,parseUserAgent:Eh});function Kb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function C7(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kb(Object(t),!0).forEach(function(r){T7(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cf(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cf=function(e){return typeof e}:cf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(n)}function E7(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Yb(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function M7(n,e,t){return e&&Yb(n.prototype,e),t&&Yb(n,t),n}function T7(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GA(){return GA=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},GA.apply(this,arguments)}function b7(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&WA(n,e)}function HA(n){return HA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},HA(n)}function WA(n,e){return WA=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},WA(n,e)}function P7(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function aa(n,e){if(n==null)return{};var t=P7(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ug(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function R7(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ug(n)}function I7(n,e){return F7(n)||B7(n,e)||L7(n,e)||D7()}function F7(n){if(Array.isArray(n))return n}function B7(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,a=!1,s,o;try{for(t=t.call(n);!(i=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw o}}return r}}function L7(n,e){if(n){if(typeof n=="string")return Qb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qb(n,e)}}function Qb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function D7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pi={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},hr={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},Wu={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},U7={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},O7=function(e){switch(e){case Pi.Mobile:return{isMobile:!0};case Pi.Tablet:return{isTablet:!0};case Pi.SmartTv:return{isSmartTV:!0};case Pi.Console:return{isConsole:!0};case Pi.Wearable:return{isWearable:!0};case Pi.Browser:return{isBrowser:!0};case Pi.Embedded:return{isEmbedded:!0};default:return U7}},k7=function(e){return rL(e)},Mt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||t},hw=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},pw=function(e){var t=hw();return t&&t.platform&&(t.platform.indexOf(e)!==-1||t.platform==="MacIntel"&&t.maxTouchPoints>1&&!window.MSStream)},N7=function(e,t,r,i,a){return{isBrowser:e,browserMajorVersion:Mt(t.major),browserFullVersion:Mt(t.version),browserName:Mt(t.name),engineName:Mt(r.name),engineVersion:Mt(r.version),osName:Mt(i.name),osVersion:Mt(i.version),userAgent:Mt(a)}},Zb=function(e,t,r,i){return C7({},e,{vendor:Mt(t.vendor),model:Mt(t.model),os:Mt(r.name),osVersion:Mt(r.version),ua:Mt(i)})},z7=function(e,t,r,i){return{isSmartTV:e,engineName:Mt(t.name),engineVersion:Mt(t.version),osName:Mt(r.name),osVersion:Mt(r.version),userAgent:Mt(i)}},V7=function(e,t,r,i){return{isConsole:e,engineName:Mt(t.name),engineVersion:Mt(t.version),osName:Mt(r.name),osVersion:Mt(r.version),userAgent:Mt(i)}},G7=function(e,t,r,i){return{isWearable:e,engineName:Mt(t.name),engineVersion:Mt(t.version),osName:Mt(r.name),osVersion:Mt(r.version),userAgent:Mt(i)}},H7=function(e,t,r,i,a){return{isEmbedded:e,vendor:Mt(t.vendor),model:Mt(t.model),engineName:Mt(r.name),engineVersion:Mt(r.version),osName:Mt(i.name),osVersion:Mt(i.version),userAgent:Mt(a)}};function W7(n){var e=n?Eh(n):aL,t=e.device,r=e.browser,i=e.engine,a=e.os,s=e.ua,o=O7(t.type),l=o.isBrowser,c=o.isMobile,f=o.isTablet,p=o.isSmartTV,h=o.isConsole,m=o.isWearable,v=o.isEmbedded;if(l)return N7(l,r,i,a,s);if(p)return z7(p,i,a,s);if(h)return V7(h,i,a,s);if(c||f)return Zb(o,t,a,s);if(m)return G7(m,i,a,s);if(v)return H7(v,t,i,a,s)}var sL=function(e){var t=e.type;return t===Pi.Mobile},oL=function(e){var t=e.type;return t===Pi.Tablet},lL=function(e){var t=e.type;return t===Pi.Mobile||t===Pi.Tablet},cL=function(e){var t=e.type;return t===Pi.SmartTv},Zg=function(e){var t=e.type;return t===Pi.Browser},uL=function(e){var t=e.type;return t===Pi.Wearable},dL=function(e){var t=e.type;return t===Pi.Console},fL=function(e){var t=e.type;return t===Pi.Embedded},hL=function(e){var t=e.vendor;return Mt(t)},pL=function(e){var t=e.model;return Mt(t)},mL=function(e){var t=e.type;return Mt(t,"browser")},gL=function(e){var t=e.name;return t===Wu.Android},vL=function(e){var t=e.name;return t===Wu.Windows},yL=function(e){var t=e.name;return t===Wu.MAC_OS},_L=function(e){var t=e.name;return t===Wu.WindowsPhone},xL=function(e){var t=e.name;return t===Wu.IOS},AL=function(e){var t=e.version;return Mt(t)},SL=function(e){var t=e.name;return Mt(t)},wL=function(e){var t=e.name;return t===hr.Chrome},CL=function(e){var t=e.name;return t===hr.Firefox},EL=function(e){var t=e.name;return t===hr.Chromium},$g=function(e){var t=e.name;return t===hr.Edge},ML=function(e){var t=e.name;return t===hr.Yandex},TL=function(e){var t=e.name;return t===hr.Safari||t===hr.MobileSafari},bL=function(e){var t=e.name;return t===hr.MobileSafari},PL=function(e){var t=e.name;return t===hr.Opera},RL=function(e){var t=e.name;return t===hr.InternetExplorer||t===hr.Ie},IL=function(e){var t=e.name;return t===hr.MIUI},FL=function(e){var t=e.name;return t===hr.SamsungBrowser},BL=function(e){var t=e.version;return Mt(t)},LL=function(e){var t=e.major;return Mt(t)},DL=function(e){var t=e.name;return Mt(t)},UL=function(e){var t=e.name;return Mt(t)},OL=function(e){var t=e.version;return Mt(t)},kL=function(){var e=hw(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof t=="string"?/electron/.test(t):!1},ou=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},NL=function(){var e=hw();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Da=function(){return pw("iPad")},zL=function(){return pw("iPhone")},VL=function(){return pw("iPod")},GL=function(e){return Mt(e)};function HL(n){var e=n||aL,t=e.device,r=e.browser,i=e.os,a=e.engine,s=e.ua;return{isSmartTV:cL(t),isConsole:dL(t),isWearable:uL(t),isEmbedded:fL(t),isMobileSafari:bL(r)||Da(),isChromium:EL(r),isMobile:lL(t)||Da(),isMobileOnly:sL(t),isTablet:oL(t)||Da(),isBrowser:Zg(t),isDesktop:Zg(t),isAndroid:gL(i),isWinPhone:_L(i),isIOS:xL(i)||Da(),isChrome:wL(r),isFirefox:CL(r),isSafari:TL(r),isOpera:PL(r),isIE:RL(r),osVersion:AL(i),osName:SL(i),fullBrowserVersion:BL(r),browserVersion:LL(r),browserName:DL(r),mobileVendor:hL(t),mobileModel:pL(t),engineName:UL(a),engineVersion:OL(a),getUA:GL(s),isEdge:$g(r)||ou(s),isYandex:ML(r),deviceType:mL(t),isIOS13:NL(),isIPad13:Da(),isIPhone13:zL(),isIPod13:VL(),isElectron:kL(),isEdgeChromium:ou(s),isLegacyEdge:$g(r)&&!ou(s),isWindows:vL(i),isMacOs:yL(i),isMIUI:IL(r),isSamsungBrowser:FL(r)}}var WL=cL(Ir),XL=dL(Ir),jL=uL(Ir),X7=fL(Ir),j7=bL(Ui)||Da(),J7=EL(Ui),i0=lL(Ir)||Da(),JL=sL(Ir),qL=oL(Ir)||Da(),KL=Zg(Ir),q7=Zg(Ir),YL=gL(Io),QL=_L(Io),ZL=xL(Io)||Da(),K7=wL(Ui),Y7=CL(Ui),Q7=TL(Ui),Z7=PL(Ui),$L=RL(Ui),$7=AL(Io),eX=SL(Io),tX=BL(Ui),nX=LL(Ui),iX=DL(Ui),rX=hL(Ir),aX=pL(Ir),sX=UL(fw),oX=OL(fw),lX=GL(Ch),cX=$g(Ui)||ou(Ch),uX=ML(Ui),dX=mL(Ir),fX=NL(),hX=Da(),pX=zL(),mX=VL(),gX=kL(),vX=ou(Ch),yX=$g(Ui)&&!ou(Ch),_X=vL(Io),xX=yL(Io),AX=IL(Ui),SX=FL(Ui),wX=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var t=Eh(e),r=t.device,i=t.browser,a=t.os,s=t.engine,o=t.ua;return HL({device:r,browser:i,os:a,engine:s,ua:o})},CX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return YL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},EX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return KL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},MX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return $L?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},TX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return ZL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},bX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return i0?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},PX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return qL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},RX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return QL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},IX=function(e){var t=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=aa(e,["renderWithFragment","children","viewClassName","style"]);return JL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},FX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return WL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},BX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return XL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},LX=function(e){var t=e.renderWithFragment,r=e.children,i=aa(e,["renderWithFragment","children"]);return jL?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",i,r):null},DX=function(e){var t=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=e.condition,a=aa(e,["renderWithFragment","children","viewClassName","style","condition"]);return i?t?gn.createElement(Fi.Fragment,null,r):gn.createElement("div",a,r):null};function UX(n){return function(e){b7(t,e);function t(r){var i;return E7(this,t),i=R7(this,HA(t).call(this,r)),i.isEventListenerAdded=!1,i.handleOrientationChange=i.handleOrientationChange.bind(ug(i)),i.onOrientationChange=i.onOrientationChange.bind(ug(i)),i.onPageLoad=i.onPageLoad.bind(ug(i)),i.state={isLandscape:!1,isPortrait:!1},i}return M7(t,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var i=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:i===0,isLandscape:i===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":cf(window))!==void 0&&i0&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return gn.createElement(n,GA({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),t}(gn.Component)}function OX(){var n=Fi.useState(function(){var a=window.innerWidth>window.innerHeight?90:0;return{isPortrait:a===0,isLandscape:a===90,orientation:a===0?"portrait":"landscape"}}),e=I7(n,2),t=e[0],r=e[1],i=Fi.useCallback(function(){var a=window.innerWidth>window.innerHeight?90:0,s={isPortrait:a===0,isLandscape:a===90,orientation:a===0?"portrait":"landscape"};t.orientation!==s.orientation&&r(s)},[t.orientation]);return Fi.useEffect(function(){return(typeof window>"u"?"undefined":cf(window))!==void 0&&i0&&(i(),window.addEventListener("load",i,!1),window.addEventListener("resize",i,!1)),function(){window.removeEventListener("resize",i,!1),window.removeEventListener("load",i,!1)}},[i]),t}function eD(n){var e=n||window.navigator.userAgent;return Eh(e)}function kX(n){var e=n||window.navigator.userAgent,t=eD(e),r=HL(t);return[r,t]}at.AndroidView=CX;at.BrowserTypes=hr;at.BrowserView=EX;at.ConsoleView=BX;at.CustomView=DX;at.IEView=MX;at.IOSView=TX;at.MobileOnlyView=IX;at.MobileView=bX;at.OsTypes=Wu;at.SmartTVView=FX;at.TabletView=PX;at.WearableView=LX;at.WinPhoneView=RX;at.browserName=iX;at.browserVersion=nX;at.deviceDetect=W7;at.deviceType=dX;at.engineName=sX;at.engineVersion=oX;at.fullBrowserVersion=tX;at.getSelectorsByUserAgent=wX;at.getUA=lX;at.isAndroid=YL;at.isBrowser=KL;at.isChrome=K7;at.isChromium=J7;at.isConsole=XL;at.isDesktop=q7;at.isEdge=cX;at.isEdgeChromium=vX;at.isElectron=gX;at.isEmbedded=X7;at.isFirefox=Y7;at.isIE=$L;at.isIOS=ZL;at.isIOS13=fX;at.isIPad13=hX;at.isIPhone13=pX;at.isIPod13=mX;at.isLegacyEdge=yX;at.isMIUI=AX;at.isMacOs=xX;var Kf=at.isMobile=i0;at.isMobileOnly=JL;at.isMobileSafari=j7;at.isOpera=Z7;var mw=at.isSafari=Q7;at.isSamsungBrowser=SX;at.isSmartTV=WL;at.isTablet=qL;at.isWearable=jL;at.isWinPhone=QL;at.isWindows=_X;at.isYandex=uX;at.mobileModel=aX;at.mobileVendor=rX;at.osName=eX;at.osVersion=$7;at.parseUserAgent=Eh;at.setUserAgent=k7;at.useDeviceData=eD;at.useDeviceSelectors=kX;at.useMobileOrientation=OX;at.withOrientationChange=UX;const NX=k.forwardRef(({scrollIndex:n,posX:e,posY:t,windowWidth:r,isMobile:i},a)=>{const[s,o]=k.useState(!0),[l,c]=k.useState([!1,!1,!1]),f=p=>{c(h=>h.map((m,v)=>v===p?!m:m))};return k.useEffect(()=>{r<1600?o(!1):o(!0)},[r]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
            @keyframes productsFadeInAnimation {
              0% {
                opacity: 0;
              }
              100% {
                opacity: 1;
              }
            }

            .productsFadeIn { 
              animation: productsFadeInAnimation 1s ease-in forwards;
            }
            
            .frc-landing__featured-product-section {
                margin-top: calc(100vh + 92px);
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 30px;
                padding-top: 122px;
                gap: 30px;
                width: 100%;
                z-index: 1;
                height: 100vh;
                max-height: 100vh;
            }
            .frc-landing__featured-row {
                position: relative;
                display: flex;
                height: 25vh;
                width: calc(100% - 40vw);
                padding-top: 15px;
                padding-bottom: 15px;
            }
            .frc-landing__product-display {
                position: relative;
                height: 28vh;
                width: 28vh;
                min-width: 28vh;
                min-height: 28vh;
            }
            .frc-landing__product-display-mobile {
              position: absolute;
              height: 28vh;
              width: 28vh;
              min-width: 28vh;
              min-height: 28vh;
            }
            .frc-landing__product-description {
              font-family: 'Oswald', sans-serif;
              font-weight: 400;
              color: ${St.textColor};
            }
            .frc-landing__product-button-wrapper {
              bottom: 0px;
              display: flex;
              align-items: center;
              width: 100%;
              height: 100%;
            }
            .no-animate {
              animation: none !important;
            }
            .frc-landing__product-cta-button {
              user-select: none;
              font-family: 'Oswald', sans-serif;
              font-weight: 400;
              color: ${St.textColor};
              letter-spacing: 0.7px;
              font-size: 18px;
              padding-top: 2px;

              padding-bottom: 1px;
              background-image: linear-gradient(#fff 0 0);
              background-position: 0 100%;
              background-size: 0% 1px;
              background-repeat: no-repeat;
              transition: background-size 0.3s, background-position 0s 0.3s;
              
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              z-index: 100;
            }
            .frc-landing__product-cta-button-wrapper:hover .frc-landing__product-cta-button {
                background-position: 100% 100%;
                background-size: 100% 1px;
            }
            .frc-landing__product-cta-button-wrapper {
                margin-top: 12px;
                width: 180px;
                height: 60px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                text-shadow: 
                -1px -1px 0 #000,
                1px -1px 0 #000,  
                -1px  1px 0 #000,  
                1px  1px 0 #000;  
            }
            .frc-landing__product-cta-button-wrapper-disabled {
              cursor: not-allowed;
            }

            .frc-landing__product-cta-button-wrapper-mobile {
              position: absolute;
              margin-top: 12px;
              width: 180px;
              height: 60px;
              background-color: transparent;
              border: none;
              cursor: pointer;
              text-shadow: 
              -1px -1px 0 #000,
              1px -1px 0 #000,  
              -1px  1px 0 #000,  
              1px  1px 0 #000;  
              z-index: 1;
            }
            .frc-landing__product-display-mobile:hover .frc-landing__product-cta-button {
              background-position: 100% 100%;
              background-size: 100% 1px;
            }
            .frc-landing__product-cta-button-wrapper-mobile:hover .frc-landing__product-cta-button {
              background-position: 100% 100%;
              background-size: 100% 1px;
            }
            .frc-landing__product-cta-button-disabled {
              text-shadow: 
              -1px -1px 0 #000,
              1px -1px 0 #000,  
              -1px  1px 0 #000,  
              1px  1px 0 #000;  
            }
            @media only screen and (max-width: 1600px) {
              .frc-landing__product-button-wrapper {
                flex-direction: column;
              }
              .frc-landing__featured-row {
                justify-content: center;
              }
            }
        `}),ue.jsx("div",{className:`frc-landing__featured-product-section ${n===1?"productsFadeIn":""}`,style:Kf&&mw?{marginTop:"92.5vh",gap:25}:Kf?{marginTop:"calc(100vh + 50px)"}:{},ref:a,children:ir.products.map((p,h)=>s?ue.jsx("div",{className:"frc-landing__featured-row",children:ue.jsxs("div",{className:"frc-landing__product-button-wrapper",style:{flexDirection:h%2!==0&&s?"row-reverse":"unset"},children:[ue.jsx("div",{className:"frc-landing__product-display",style:{marginTop:"-3vh"},children:ue.jsx(qb,{onMouseEnter:()=>f(h),onMouseLeave:()=>{f(h)},scrollIndex:n,posX:e,posY:t,index:h,objectUrl:p.glbUrl,offset:60*h,isMobile:i})}),ue.jsx("button",{className:`frc-landing__product-cta-button-wrapper ${h!==2?"":"frc-landing__product-cta-button-wrapper-disabled"}`,onClick:()=>{h!==2&&window.open(`/products/${h}`,"_self")},children:ue.jsx("span",{className:`frc-landing__product-cta-button ${h!==2?"":"frc-landing__product-cta-button-disabled"} ${l[h]&&"frc-landing__product-cta-button-hovered"}`,children:h!==2?"View Product":"Coming Soon"})})]})},`${p.name}-${h}`):ue.jsxs("div",{className:"frc-landing__featured-row",style:{alignItems:"center"},children:[ue.jsx("button",{className:`frc-landing__product-cta-button-wrapper-mobile ${h!==2?"":"frc-landing__product-cta-button-wrapper-disabled"}`,onClick:()=>{h!==2&&window.open(`/products/${h}`,"_self")},children:ue.jsx("span",{className:`frc-landing__product-cta-button ${h!==2?"":"frc-landing__product-cta-button-disabled"} ${l[h]&&"frc-landing__product-cta-button-hovered"}`,children:h!==2?"View Product":"Coming Soon"})}),ue.jsx("div",{className:"frc-landing__product-display-mobile",style:{marginTop:"-3vh"},children:ue.jsx(qb,{onMouseEnter:()=>f(h),onMouseLeave:()=>{f(h)},scrollIndex:n,posX:e,posY:t,index:h,objectUrl:p.glbUrl,offset:60*h,isMobile:i})})]},`${p.name}-${h}`))})]})}),ev=async n=>{let e=localStorage.getItem("checkoutId");return e||(e=(await n.shopifyClient.checkout.create()).id,localStorage.setItem("checkoutId",e)),e},zX=()=>{localStorage.getItem("checkoutId")&&localStorage.removeItem("checkoutId")},tD=async n=>{const e=await ev(n);try{return(await n.shopifyClient.checkout.fetch(e)).webUrl}catch{zX();const r=await ev(n);return(await n.shopifyClient.checkout.fetch(r)).webUrl}},VX=({stroke:n="#000",fill:e="#fff",height:t="36px",width:r="36px"})=>ue.jsx("svg",{stroke:n,fill:e,strokeWidth:"0.75",viewBox:"0 0 24 24",height:t,width:r,children:ue.jsx("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})}),GX=({stroke:n="#000",fill:e="#fff",height:t="60px",width:r="60px"})=>ue.jsx("svg",{viewBox:"0 0 795 369",strokeWidth:"17",width:r,height:t,stroke:n,fill:e,children:ue.jsx("path",{d:"m475 0.5c0 0.3 20.1 19.5 44.8 42.8 24.6 23.3 49.9 47.2 56.3 53.2 6.4 6.1 29.8 28.3 52 49.4l40.4 38.4c-62 59-105.6 100.4-136.8 129.9-31.2 29.6-56.7 54-56.7 54.3 0 0.3 28.5 0.5 63.3 0.5h63.2c149.6-141.9 193.1-183.6 193.3-184.3 0.2-0.7-43.1-42.5-96.2-92.9l-96.6-91.8c-98.4 0-127 0.2-127 0.5zm-131 40.7c-16.8 16-30.6 29.6-30.8 30.2-0.1 0.6 26.3 26.3 58.8 57.1l59.1 56c-3.6 3.3-44.4 41.9-93.1 88-48.7 46.1-91.4 86.6-95 90.1l-6.5 6.4h127.5c81.1-77.1 124.7-118.6 149.3-142 24.7-23.4 44.7-42.7 44.5-43-0.2-0.3-30.7-29.4-67.8-64.5-37.1-35.2-77.7-73.8-90.2-85.7-12.6-12-23.4-21.8-24.1-21.7-0.6 0-14.9 13.1-31.7 29.1zm-103 97.7c-8.5 8.1-66.1 62.8-128 121.5-61.9 58.7-112.6 107.2-112.8 107.7-0.1 0.5 24.6 0.9 62.8 0.9h63c44.6-42.3 88.2-83.7 125.8-119.3 37.5-35.6 68.2-65 68.2-65.4 0-0.5-14-14.1-31.1-30.3-17.1-16.2-31.4-29.6-31.7-29.7-0.4-0.1-7.7 6.4-16.2 14.6z"})}),HX=n=>{let e=0,t=0,r=0;n.length===4?(e=parseInt(n[1]+n[1],16),t=parseInt(n[2]+n[2],16),r=parseInt(n[3]+n[3],16)):n.length===7&&(e=parseInt(n[1]+n[2],16),t=parseInt(n[3]+n[4],16),r=parseInt(n[5]+n[6],16)),e/=255,t/=255,r/=255;const i=Math.max(e,t,r),a=Math.min(e,t,r);let s,o,l=(i+a)/2;if(i===a)s=o=0;else{const c=i-a;switch(o=l>.5?c/(2-i-a):c/(i+a),i){case e:s=(t-r)/c+(t<r?6:0);break;case t:s=(r-e)/c+2;break;case r:s=(e-t)/c+4;break}s/=6}return[s,o,l]},WX=(n,e,t)=>{const r=(o,l,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<.16666666666666666?o+(l-o)*6*c:c<.5?l:c<.6666666666666666?o+(l-o)*(.6666666666666666-c)*6:o);let i,a,s;if(e===0)i=a=s=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=r(l,o,n+1/3),a=r(l,o,n),s=r(l,o,n-1/3)}return"#"+Math.round(i*255).toString(16).padStart(2,"0")+Math.round(a*255).toString(16).padStart(2,"0")+Math.round(s*255).toString(16).padStart(2,"0")},$b=(n,e)=>{let[t,r,i]=HX(n);return i=i+e*(1-i),WX(t,r,Math.min(i,1))},nD=({store:n,setStore:e,top:t,scrollIndex:r})=>{const[i,a]=k.useState(0),[s,o]=k.useState("#fff"),[l,c]=k.useState("#fff");return k.useEffect(()=>{n.cartQuantity!==null&&i!==n.cartQuantity&&a(n.cartQuantity)},[n]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
            .frc-landing__header-container {
                position: fixed;
                z-index: 9999;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 40px;
                top: 0px;
                left: 0px;
                width: 100%;
                height: ${zt.headerHeight}px;
            }
            .frc-landing__header-home-icon {
                width: 80px;
                cursor: pointer;
            }
            .frc-landing__header-home-icon:hover {
                filter: brightness(90%);
            }
            .frc-landing__header-right-tray {
                display: flex;
            }
            .frc-landing__header-cart-icon {
                width: 35px;
                height: 35px;
                color: #fff;
            }
            .frc-header__cart-quantity {
              color: white;
              background: rgba(255, 0, 0, 0.6);
              border-radius: 50px;
              width: 23px;
              height: 23px;
              display: flex;
              align-items: center;
              justify-content: center;
              position: absolute;
              top: 22px;
              margin-left: 15px;
              font-family: 'Oswald', sans-serif;
              font-size: 15px;
              line-height: 23px;
            }
            .frc-header__icon-button {
              user-select: none;
              cursor: pointer;
            }
        `}),ue.jsxs("div",{className:"frc-landing__header-container",style:t?{position:"absolute"}:{},children:[ue.jsx("div",{className:"frc-header__icon-button",onMouseEnter:()=>{c($b(St.accent,.3)),Kf&&setInterval(()=>{c("#fff")},200)},onMouseLeave:()=>{c("#fff")},onClick:()=>{window.open("/","_self")},children:ue.jsx(GX,{stroke:"#000",fill:l})}),ue.jsx("div",{className:"frc-landing__header-right-tray",onClick:async()=>{let f=await tD(n);f=window.location.origin.includes("127.0.0.1")||window.location.origin.includes("localhost")?f:f.replace("https://5throundcardio.com",window.location.origin),window.open(f,"_self")},children:ue.jsxs("div",{className:"frc-header__icon-button",onMouseEnter:()=>{o($b(St.accent,.3)),Kf&&setInterval(()=>{o("#fff")},200)},onMouseLeave:()=>{o("#fff")},children:[ue.jsx(VX,{stroke:"#000",fill:s}),i>0&&ue.jsx("div",{className:"frc-header__cart-quantity",children:i})]})})]})]})},eP=(n,e)=>{const t=window.scrollY,r=n-t,i="now"in window.performance?performance.now():new Date().getTime(),a=(o,l,c,f)=>(o/=f/2,o<1?c/2*o*o+l:(o--,-c/2*(o*(o-2)-1)+l)),s=()=>{const l=("now"in window.performance?performance.now():new Date().getTime())-i,c=a(l,t,r,e);window.scrollTo(0,c),l<e?requestAnimationFrame(s):window.scrollTo(0,n)};requestAnimationFrame(s)},tv=(n,e)=>{n=n.replace(/^#/,"");let t,r,i;if(n.length===3)t=parseInt(n.charAt(0)+n.charAt(0),16),r=parseInt(n.charAt(1)+n.charAt(1),16),i=parseInt(n.charAt(2)+n.charAt(2),16);else if(n.length===6)t=parseInt(n.substring(0,2),16),r=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16);else throw new Error("Invalid HEX color.");return`rgba(${t}, ${r}, ${i}, ${e})`},XX=({scrollIndex:n,setScrollIndex:e,isMobile:t})=>{const r=k.useRef(null),i=k.useRef(null),a=k.useRef(null),[s,o]=k.useState(!1),[l,c]=k.useState(!0),[f,p]=k.useState(0);return k.useEffect(()=>{p(h=>h+1),f>1&&c(!1),n>0?o(!0):o(!1)},[n]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
            @keyframes fadeInLeft {
                0% {
                    opacity: 0;
                    transform: translateX(150px);
                }
                50% {
                    opacity: 0.3;
                }
                100% {
                    opacity: 1;
                    transform: translateX(0);
                }
            }        
            .frc-landing__hero-container {
                position: fixed;
                left: 0px;
                top: 0px;
                display: flex;
                width: 100%;
                height: 100%;
                background-size: cover !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
            
                display: flex;
                flex-direction: column;
                padding-left: 2rem;
                justify-content: center;
            }
            .frc-landing__hero-content-container {
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: flex-start;
              width: 100%;
              height: 100%;
              z-index: 4;
            }
            .frc-landing__hero-header-text {
                font-family: 'Oswald', sans-serif;
                color: ${St.textColor};
                text-transform: uppercase;
                font-size: 6rem;
                margin: 0;
                line-height: 6rem;
                margin-bottom: 1rem;
                animation: fadeInLeft 1s ease-out forwards;

                text-shadow: 
                -1px -1px 0 #000,
                1px -1px 0 #000,  
                -1px  1px 0 #000,  
                1px  1px 0 #000;  

                user-select: none;
            }
            .frc-landing__hero-subheader-text {
                font-family: 'Oswald', sans-serif;
                font-weight: 400;
                color: ${St.textColor};
                text-transform: uppercase;
                font-size: 1.2rem;
                animation: fadeInLeft 0.75s ease-out forwards;
                margin: 0;

                text-shadow: 
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px  1px 0 #000,
                1px  1px 0 #000;

                user-select: none;
            }

            .frc-landing__hero-cta-button-wrapper {
                margin-top: 12px;
                width: 180px;
                height: 60px;
                background-color: ${tv(St.accent,1)};
                border: none;
                cursor: pointer;
                animation: fadeInLeft 0.5s ease-out forwards;
                border: 3px solid ${tv(St.secondary,.3)};

                user-select: none;
            }
            .frc-landing__hero-cta-button {
                user-select: none;
                font-family: 'Oswald', sans-serif;
                font-weight: 400;
                color: ${St.textColor};
                letter-spacing: 0.7px;
                font-size: 18px;
                padding-top: 2px;

                padding-bottom: 1px;
                background-image: linear-gradient(#fff 0 0);
                background-position: 0 100%;
                background-size: 0% 1px;
                background-repeat: no-repeat;
                transition: background-size 0.3s, background-position 0s 0.3s;

                text-shadow: 
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px  1px 0 #000,
                1px  1px 0 #000;
            }
            .frc-landing__hero-cta-button-wrapper:hover .frc-landing__hero-cta-button {
                background-position: 100% 100%;
                background-size: 100% 1px;
            }

            @keyframes fadeOffScreenAnimation {
                from { 
                    opacity: 1; 
                }
                to { 
                    transform: translateX(-100vw);
                    opacity: 0;
                }
            }
            @keyframes fadeInScreenAnimation {
                from { 
                    transform: translateX(-60vw);
                    opacity: 0; 
                }
                to { 
                    opacity: 1;
                }
            }
            .fadeOffScreen {
                animation: fadeOffScreenAnimation ${zt.scrollAnimationTimingMs}ms ease-in forwards;
            }
            .fadeInScreen {
                animation: fadeInScreenAnimation ${zt.scrollAnimationTimingMs}ms ease-out forwards;
            }
            .frc-landing__hero-overlay {
              position: absolute;
              top: 0;
              right: 0;
              bottom: 0;
              left: 0;
              z-index: 3;
              overflow: hidden;
              transition: opacity ${zt.scrollAnimationTimingMs}ms linear;
              background: linear-gradient(225deg, rgba(200, 200, 200, 0) 0%, rgba(80, 80, 80, 0) 80%);
            }
            .frc-landing__hero-overlay::before {
              content: '';
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              transition: opacity ${zt.scrollAnimationTimingMs}ms linear;
              opacity: 0;
          }
          
          .darkenOverlay::before {
              opacity: 1;
              background: linear-gradient(225deg, rgba(200, 200, 200, 0.8) 0%, rgba(80, 80, 80, 0.8) 80%);
          }
          
          .lightenOverlay::before {
              background: linear-gradient(225deg, rgba(200, 200, 200, 0.8) 0%, rgba(80, 80, 80, 0.8) 80%);
              transition: opacity ${zt.scrollAnimationTimingMs}ms ease-in forwards;
          }

          .frc-landing__hero-container > *:not(.frc-landing__hero-overlay):not(.frc-landing__hero-content-container) {
            position: relative;
            z-index: 2;
          }

          @media only screen and (max-width: 800px) {
            .frc-landing__hero-header-text {
              font-size: 5rem;
            }
            .frc-landing__hero-subheader-text {
              font-size: 1.1rem;
            }
          }
        `}),ue.jsxs("div",{className:"frc-landing__hero-container",style:t?{}:{background:`url("${ir.home.desktopHeroImg}")`},children:[t&&ue.jsx("div",{style:{position:"fixed",left:"0px",width:"100vw",height:"100vh"},children:ue.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{position:"relative",width:"100%",height:"100%",objectFit:"cover"},children:[ue.jsx("source",{src:ir.home.mobileBgMp4}),ue.jsx("source",{src:ir.home.mobileBgWebm})]})}),ue.jsxs("div",{className:`frc-landing__hero-content-container  ${s?"fadeOffScreen":l?"":"fadeInScreen"}`,children:[ue.jsxs("h1",{className:"frc-landing__hero-header-text",ref:i,children:["Elite Cardio",ue.jsx("br",{}),"Equipment"]}),ue.jsx("h3",{className:"frc-landing__hero-subheader-text",ref:a,children:"Reach new heights with 5th Round Cardio"}),ue.jsx("button",{ref:r,className:"frc-landing__hero-cta-button-wrapper",onClick:()=>{e(1)},children:ue.jsx("span",{className:"frc-landing__hero-cta-button",children:"Shop Equipment"})})]}),ue.jsx("div",{className:`frc-landing__hero-overlay ${n>0?"darkenOverlay":l?"":"lightenOverlay"}`})]})]})},gw=()=>{const[n,e]=k.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0,y:typeof window<"u"?window.scrollY:0});return k.useEffect(()=>{e({width:window.innerWidth,height:window.innerHeight,y:window.scrollY})},[]),k.useEffect(()=>{const t=()=>{e({width:window.innerWidth,height:window.innerHeight,y:window.scrollY})};return window.addEventListener("resize",()=>t()),window.addEventListener("scroll",()=>t()),()=>{window.removeEventListener("resize",()=>t()),window.removeEventListener("scroll",()=>t())}},[]),{windowWidth:n.width,windowHeight:n.height,windowY:n.y}},jX=({posX:n,posY:e,store:t,setStore:r})=>{const i=k.useRef(null),a=k.useRef(0),s=k.useRef(0),[o,l]=k.useState(0),[c,f]=k.useState(!1),[p,h]=k.useState("init"),{windowWidth:m}=gw();k.useEffect(()=>{m<800?f(!0):f(!1)},[m]),k.useEffect(()=>{if(window)switch(o){case 0:eP(0,1250);break;case 1:eP(window.innerHeight+zt.headerHeight,1250);break}},[o]);const v=M=>{const b=Date.now();b-s.current>zt.scrollAnimationTimingMs&&(l(M),s.current=b)},x=M=>M==="increment"?a.current<1?a.current+1:1:a.current>0?a.current-1:0,_=M=>{M.preventDefault(),M.deltaY<0?a.current=x("decrement"):M.deltaY>0&&(a.current=x("increment")),v(a.current)},g=k.useRef(0),A=k.useRef(0),S=M=>{A.current=M.touches[0].clientY,g.current=M.touches[0].clientX},C=M=>{let b=M.changedTouches[0].clientX,L=M.changedTouches[0].clientY;const R=b-g.current,F=L-A.current;Math.abs(F)<10&&Math.abs(R)<10||(A.current>L?a.current=x("increment"):a.current=x("decrement"),v(a.current))},T=M=>{h("prevent"),M.preventDefault()};return k.useEffect(()=>(window.addEventListener("wheel",_,{passive:!1}),window.addEventListener("touchstart",S,{passive:!1}),window.addEventListener("touchend",C,{passive:!1}),window.addEventListener("touchmove",T,{passive:!1}),()=>{window.removeEventListener("wheel",_),window.removeEventListener("touchstart",S),window.removeEventListener("touchend",C),window.removeEventListener("touchmove",T)}),[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap');
         
          .footer-placeholder {
            width: 100%;
            height: 200px;
            background-color: ${St.primary};
          }
          .frc-landing__container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
          }
    
        `}),ue.jsxs("div",{className:"frc-landing__container",children:[ue.jsx(nD,{store:t,setStore:r,scrollIndex:o}),ue.jsx(XX,{scrollIndex:o,setScrollIndex:v,isMobile:c}),ue.jsx(NX,{ref:i,scrollIndex:o,posY:e,posX:n,windowWidth:m,isMobile:c}),ue.jsx("div",{className:"footer-placeholder"})]})]})};/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nv.apply(this,arguments)}var vl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(vl||(vl={}));const tP="popstate";function JX(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return XA("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:iD(i)}return KX(e,t,null,n)}function vw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qX(){return Math.random().toString(36).substr(2,8)}function nP(n,e){return{usr:n.state,key:n.key,idx:e}}function XA(n,e,t,r){return t===void 0&&(t=null),nv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?rD(e):e,{state:t,key:e&&e.key||r||qX()})}function iD(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rD(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function KX(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=vl.Pop,l=null,c=f();c==null&&(c=0,s.replaceState(nv({},s.state,{idx:c}),""));function f(){return(s.state||{idx:null}).idx}function p(){o=vl.Pop;let _=f(),g=_==null?null:_-c;c=_,l&&l({action:o,location:x.location,delta:g})}function h(_,g){o=vl.Push;let A=XA(x.location,_,g);t&&t(A,_),c=f()+1;let S=nP(A,c),C=x.createHref(A);try{s.pushState(S,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(C)}a&&l&&l({action:o,location:x.location,delta:1})}function m(_,g){o=vl.Replace;let A=XA(x.location,_,g);t&&t(A,_),c=f();let S=nP(A,c),C=x.createHref(A);s.replaceState(S,"",C),a&&l&&l({action:o,location:x.location,delta:0})}function v(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof _=="string"?_:iD(_);return vw(g,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,g)}let x={get action(){return o},get location(){return n(i,s)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tP,p),l=_,()=>{i.removeEventListener(tP,p),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:m,go(_){return s.go(_)}};return x}var iP;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iP||(iP={}));function YX(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const aD=["post","put","patch","delete"];new Set(aD);const QX=["get",...aD];new Set(QX);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jA(){return jA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jA.apply(this,arguments)}const ZX=k.createContext(null),yw=k.createContext(null);function sD(){return k.useContext(yw)!=null}function $X(){return sD()||vw(!1),k.useContext(yw).location}function ej(n){let{basename:e="/",children:t=null,location:r,navigationType:i=vl.Pop,navigator:a,static:s=!1,future:o}=n;sD()&&vw(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:a,static:s,future:jA({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=rD(r));let{pathname:f="/",search:p="",hash:h="",state:m=null,key:v="default"}=r,x=k.useMemo(()=>{let _=YX(f,l);return _==null?null:{location:{pathname:_,search:p,hash:h,state:m,key:v},navigationType:i}},[l,f,p,h,m,v,i]);return x==null?null:k.createElement(ZX.Provider,{value:c},k.createElement(yw.Provider,{children:t,value:x}))}new Promise(()=>{});/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tj="6";try{window.__reactRouterVersion=tj}catch{}const nj="startTransition",rP=MU[nj];function aP(n){let{basename:e,children:t,future:r,window:i}=n,a=k.useRef();a.current==null&&(a.current=JX({window:i,v5Compat:!0}));let s=a.current,[o,l]=k.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},f=k.useCallback(p=>{c&&rP?rP(()=>l(p)):l(p)},[l,c]);return k.useLayoutEffect(()=>s.listen(f),[s,f]),k.createElement(ej,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,future:r})}var sP;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(sP||(sP={}));var oP;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(oP||(oP={}));const ij=async(n,e)=>{const t=await n.product.fetchAll();for(const r of t)for(const i of r.variants)if(i.sku===e)return i.id},oD=async(n,e)=>{if(n.initialized){const r=(await n.shopifyClient.checkout.fetch(n.checkoutId)).lineItems.reduce((i,a)=>i+a.quantity,0);e(i=>({...i,cartQuantity:r,initialized:!0,loading:!1}))}else{const t=await ev(n),r=await tD(n),a=(await n.shopifyClient.checkout.fetch(t)).lineItems.reduce((s,o)=>s+o.quantity,0);e(s=>({...s,checkoutId:t,cartQuantity:a,checkoutUrl:r,initialized:!0,loading:!1}))}},rj=async(n,e,t,r)=>{e(o=>({...o,loading:!0}));const i=await ij(n.shopifyClient,t);if(!i){console.error("Variant not found for SKU:",t);return}const a=await ev(n),s=[{variantId:i,quantity:r}];try{await n.shopifyClient.checkout.addLineItems(a,s),await oD(n,e)}catch(o){console.error("Error adding item to cart:",o)}},aj=({quantity:n,setQuantity:e})=>{const t=(r,i)=>{let a=99,s=1;if(r>a)if(i){const o=r.toString();r=parseInt(o[o.length-1])}else r=a;else r<s&&(r=s);e(r)};return k.useEffect(()=>{Kf&&document.querySelectorAll(".frc-product__button-up, .frc-product__button-down").forEach(i=>{i.classList.add("frc-product__button-mobile")})},[]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
            .frc-product__amountContainer {
                display: flex;
                justify-content: flex-start;
                align-items: center;
            }
            .frc-product__button-down {
                display: flex;
                text-align: center;
                align-items: center;
                justify-content: center;
            
                width: 50px;
                height: 50px;
                border: 1px solid ${St.textColor};
                border-right: none;
            
                color: ${St.textColor};
                font-style: bold;
                font-size: 20px;
                font-family: 'Oswald', sans-serif;
            
                cursor: pointer;
                user-select: none;
            }
            .frc-product__button-up {
                display: flex;
                text-align: center;
                align-items: center;
                justify-content: center;

                width: 50px;
                height: 50px;
                
                border: 1px solid ${St.textColor};
                border-left: none;

                color: ${St.textColor};
                font-style: bold;
                font-size: 20px;
                font-family: 'Oswald', sans-serif;

                cursor: pointer;
                user-select: none;
                pointer-events: auto;
            }
                
            .frc-product__button-down:hover,
            .frc-product__button-up:hover {
                background-color: ${St.accent};
            }

            .frc-product__button-mobile:hover {
              background-color: unset;
            }
                
            .frc-product__button-down:active,
            .frc-product__button-up:active {
                background-color: ${St.accent};
            }

            
            .frc-product__amountInput[type="number"] {
                border-radius: 0;
                -moz-appearance: textfield;
            }
            .frc-product__amountInput::-webkit-outer-spin-button,
            .frc-product__amountInput::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            .frc-product__amountInput {
                outline: none;
                background-color: rgb(0, 0, 0, 0);
                border-top: 1px solid ${St.textColor};
                border-bottom: 1px solid ${St.textColor};
                border-left: none;
                border-right: none;
                text-align: center;
                font-size: 20px;
                font-family: 'Oswald', sans-serif;
            
                color: ${St.textColor};
            
                width: 50px;
                height: 50px;
                user-select: none;
            }

            @media only screen and (max-width: 500px) {
              .frc-product__amountContainer {
                width: 130px;
                height: 40px;
              }
              .frc-product__button-up {
                width: 40px;
                height: 40px;
              }
              .frc-product__button-down {
                width: 40px;
                height: 40px;
              }
              .frc-product__amountInput {
                width: 40px;
                height: 40px;
              }
            }
        `}),ue.jsxs("div",{className:"frc-product__amountContainer",children:[ue.jsx("span",{className:"frc-product__button-down",onClick:()=>{t(n-1,!1)},children:"-"}),ue.jsx("input",{className:"frc-product__amountInput",value:n,type:"number",onChange:r=>t(parseInt(r.target.value),!0)}),ue.jsx("span",{className:"frc-product__button-up",onClick:()=>{t(n+1,!1)},children:"+"})]})]})},sj=({active:n,setActive:e,content:t,isMobile:r,locked:i})=>{const[a,s]=k.useState(!0),o=k.useRef(0),l=k.useRef(0),[c,f]=k.useState(0),p=k.useRef(i),h=k.useRef(0),m=k.useRef(0),v=k.useRef(null),{windowWidth:x}=gw();k.useEffect(()=>{p.current=i},[i]),k.useEffect(()=>{const b=setTimeout(()=>{v.current&&f(v.current.offsetHeight+40)},100);return()=>clearTimeout(b)},[x,x,n]);const _=M=>M==="increment"?o.current<1?o.current+1:1:o.current>0?o.current-1:0;k.useEffect(()=>{n&&s(!1)},[n]);const g=M=>{M.preventDefault(),M.deltaY<0?o.current=_("decrement"):M.deltaY>0&&(o.current=_("increment")),A(o.current)},A=M=>{if(p.current)return;const b=Date.now();b-l.current>zt.scrollAnimationProductTimingMs&&(M>0?e(!0):e(!1),l.current=b)},S=M=>{m.current=M.touches[0].clientY,h.current=M.touches[0].clientX},C=M=>{let b=M.changedTouches[0].clientX,L=M.changedTouches[0].clientY;const R=b-h.current,F=L-m.current;Math.abs(F)<10&&Math.abs(R)<10||(m.current>L?o.current=_("increment"):o.current=_("decrement"),A(o.current))},T=M=>{M.preventDefault()};return k.useEffect(()=>{if(!p.current)return window.addEventListener("wheel",g,{passive:!1}),window.addEventListener("touchstart",S,{passive:!1}),window.addEventListener("touchend",C,{passive:!1}),window.addEventListener("touchmove",T,{passive:!1}),()=>{window.removeEventListener("wheel",g),window.removeEventListener("touchstart",S),window.removeEventListener("touchend",C),window.removeEventListener("touchmove",T)}},[i]),r&&ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
            .frc-layout__modal-container {
              text-transform: uppercase;
              color: ${St.textColor};
              background-color: ${St.primary};
              font-family: 'Oswald', sans-serif;
              border-top: 1px solid ${St.textColor};
              border-left: 1px solid ${St.textColor};
              border-right: 1px solid ${St.textColor};
              width: 90vw;
              height: 100%;
              border-radius: 4px 4px 0 0;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: flex-start;
            }
            .frc-layout__modal-header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              
              padding-left: 10px;
              padding-right: 10px;
              
              width: 100%;
              height: 40px;
              min-height: 40px;
            }
            .frc-layout__modal-price-display {
              font-size: 14px;
            }
            .frc-layout__modal-view-cta {
              font-size: 14px;
            }
            
            .frc-layout__modal-root-backdrop {
              z-index: 999999998;
              position: fixed;
              width: 100vw;
              height: 100vh;
              top: 0px;
              left: 0px;
              transition: background-color ${zt.scrollAnimationProductTimingMs}ms linear;
            }
            .frc-layout__modal-root-backdrop-active {
              background-color: rgb(0, 0, 0, 0.5);
            }

            @keyframes hide {
              0% {

              }
              100% {
                z-index: -1;
              }
            }
            .frc-layout__modal-root-backdrop-delayed-hide {
              animation-name: hide;
              animation-duration: 0ms;
              animation-delay: ${zt.scrollAnimationProductTimingMs+1}ms;
              animation-fill-mode: forwards;
            }
            .frc-layout__modal-root-backdrop-initial-hide {
              z-index: -1;
            }

            .frc-layout__modal-root-inactive {
              position: fixed;
              z-index: 999999999;
              top: calc(100vh - 40px);
              left: 0px;
              height: 40px;
              transition: top ${zt.scrollAnimationProductTimingMs}ms linear, 
                height ${zt.scrollAnimationProductTimingMs}ms linear,
                padding ${zt.scrollAnimationProductTimingMs}ms linear;
            }
            .frc-layout__modal-root-inactive-safari {
              top: calc(100vh - 120px);
            }
            .frc-layout__modal-root-active {
              position: fixed;
              z-index: 999999999;
              top: 0px;
              left: 0px;
              height: 100vh;
              transition: top ${zt.scrollAnimationProductTimingMs}ms linear, 
                height ${zt.scrollAnimationProductTimingMs}ms linear,
                padding ${zt.scrollAnimationProductTimingMs}ms linear;
            }
            .frc-layout__modal-root {
              width: 100vw;
              display: flex;
              flex-direction: column;
              align-items: center;
            }
            .frc-layout__modal-view-cta-wrapper {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 5px;
              height: 100%;
              user-select: none;
              
              cursor: pointer;
            }
            .frc-layout__modal-caret {
              font-size: 12px;
            }
            .frc-layout__modal-description-container {
              text-transform: initial;
              padding: 20px;
              
              font-family: 'Oswald', sans-serif;
              font-weight: 400;
              color: ${St.textColor};
            }
            .frc-layout__modal-backdrop-close-area {
              position: fixed;
              width: 100vw;
              top: 0px;
              left: 0px;
              z-index: 1000000000;
            }
        `}),ue.jsx("div",{className:`frc-layout__modal-root-backdrop ${n?"frc-layout__modal-root-backdrop-active":"frc-layout__modal-root-backdrop-delayed-hide"} ${a&&"frc-layout__modal-root-backdrop-initial-hide"}`}),n&&ue.jsx("div",{className:"frc-layout__modal-backdrop-close-area",style:c&&n?{height:`${window.innerHeight-c}px`}:{},onClick:()=>{e(!1)}}),ue.jsx("div",{style:c&&n?{paddingTop:`${window.innerHeight-c}px`}:{},className:`frc-layout__modal-root ${n?"frc-layout__modal-root-active":"frc-layout__modal-root-inactive"} ${!n&&mw&&"frc-layout__modal-root-inactive-safari"}`,children:ue.jsxs("div",{className:"frc-layout__modal-container",children:[ue.jsxs("div",{className:"frc-layout__modal-header",children:[t&&ue.jsxs("span",{className:"frc-layout__modal-price-display",children:["$: ",t.productCost]}),ue.jsxs("div",{className:"frc-layout__modal-view-cta-wrapper",onClick:()=>{e(M=>!M)},children:[ue.jsx("div",{className:"frc-layout__modal-view-cta",children:"description"}),ue.jsx("span",{className:"frc-layout__modal-caret",children:n?"▼":"▲"})]})]}),ue.jsx("div",{className:"frc-layout__modal-description-container",ref:v,children:t&&t.productDescription.map((M,b)=>b>0?ue.jsxs("span",{children:[ue.jsx("div",{className:"frc-product__product-description-break"}),ue.jsx("span",{children:M})]},`${M}-${b}`):ue.jsx("span",{children:M},`${M}-${b}`))})]})})]})},oj=(n,e,t)=>{const r=t?`; expires=${new Date(Date.now()+t*864e5).toUTCString()}`:"";document.cookie=`${n}=${encodeURIComponent(e||"")}${r}; path=/`},lj=n=>{const e=`${n}=`,t=document.cookie.split(";").map(r=>r.trim());for(const r of t)if(r.startsWith(e))return decodeURIComponent(r.substring(e.length));return null},cj=({active:n,setActive:e,children:t,requireCheckbox:r=!1})=>{const[i,a]=k.useState(!1),[s,o]=k.useState(!1),[l,c]=k.useState(!1),f=k.useRef(null),p=()=>new Promise(x=>{if(f.current){const _=f.current,g=()=>{_.scrollTop+_.clientHeight>=_.scrollHeight&&(_.removeEventListener("scroll",g),x())};_.addEventListener("scroll",g),_.scrollTo({top:_.scrollHeight,behavior:"smooth"}),setTimeout(()=>{_.removeEventListener("scroll",g),x()},1e3),g()}else x()});k.useEffect(()=>{const x=async _=>{_.target.classList.contains("modal-overlay")&&(r&&!i?(o(!0),await new Promise(A=>setTimeout(A,500)),o(!1),await p(),c(!0),setTimeout(()=>c(!1),500)):v())};return n&&document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}},[n,e,r,i]);const h=x=>{a(x.target.checked)},m=async()=>{r&&!i?(o(!0),await new Promise(x=>setTimeout(x,500)),o(!1),await p(),c(!0),setTimeout(()=>c(!1),500)):v()},v=()=>{e(!1),oj("accepted_terms",ir.terms.version,365)};return k.useEffect(()=>{if(lj("accepted_terms")!==ir.terms.version){const _=()=>{setTimeout(()=>{e(!0)},7e3)};return window.addEventListener("mousemove",_,{once:!0}),window.addEventListener("touchstart",_,{once:!0}),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("touchstart",_)}}},[e]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
          @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
          }
          .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999999999;
          }
          .modal-content {
            position: relative;
            background-color: ${St.primary};
            color: ${St.textColor};
            font-family: 'Oswald', sans-serif;
            border: 1px solid ${St.textColor};
            width: 100%;
            height: 100%;
            max-width: 50vw;
            max-height: 65vh;
            z-index: 10000000000;
            overflow-y: auto;
            padding: 0 20px 20px 20px;
            ${s?"animation: shake 0.5s;":""}
          }
          .modal-header {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: ${St.primary};
            color: ${St.textColor};
            display: flex;
            align-items: center;
            justify-content: flex-end;
            z-index: 1001;
          }
          .close-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: ${St.textColor};
            cursor: pointer;
          }
          .close-button:disabled {
            cursor: not-allowed;
            color: ${St.textColor};
          }
          .tos-checkbox label {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: ${l?`${St.accent}`:`${St.textColor}`};
            cursor: pointer;
          }
          .tos-checkbox input[type="checkbox"] {
            cursor: pointer;
          }
          .line-padding {
            width: 100%;
            height: 10px;
          }
          @media only screen and (max-width: 1200px) {
            .modal-content {
                max-width: 70vw;
            }
          }
          @media only screen and (max-width: 800px) {
            .modal-content {
                max-width: 80vw;
            }
          }
        `}),n&&ue.jsx("div",{className:"modal-overlay",children:ue.jsxs("div",{className:"modal-content",ref:f,children:[ue.jsx("div",{className:"modal-header",children:ue.jsx("button",{className:"close-button",onClick:m,children:"×"})}),ue.jsx("h2",{style:{textAlign:"center",color:`${St.textColor}`},children:"Terms and Conditions"}),t,ue.jsx("div",{className:"line-padding"}),r&&ue.jsx("div",{className:"tos-checkbox",children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:i,onChange:h}),"I agree to the terms and conditions"]})})]})})]})},uj=({store:n,setStore:e,drawerActive:t,setDrawerActive:r,modalActive:i,setModalActive:a})=>{let s=$X();const o=k.useRef(null),[l,c]=k.useState(""),[f,p]=k.useState(0),[h,m]=k.useState(void 0),[v,x]=k.useState(""),[_,g]=k.useState(0),[A,S]=k.useState([""]),[C,T]=k.useState(1),[M,b]=k.useState(null);k.useEffect(()=>{s&&s.pathname.includes("/products/")&&c(s.pathname.replace("/products/","").split("/")[0])},[s]),k.useEffect(()=>{l&&l!==""&&(m(ir.products[l].images),x(ir.products[l].name),g(ir.products[l].cost),S(ir.products[l].description),b({productDescription:ir.products[l].description,productName:ir.products[l].name,productCost:ir.products[l].cost}))},[l]);const{windowWidth:L}=gw(),[R,F]=k.useState(!1);return k.useEffect(()=>{L&&L>1200?F(!1):F(!0)},[L]),ue.jsxs(ue.Fragment,{children:[ue.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap');
         
          .frc-product__container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
          }
          
          .frc-product__content-container {
            position: relative;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            min-height: 100vh;
            background: ${St.primary};
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        
            display: flex;
            flex-direction: row;
            padding-left: 2rem;
            padding-right: 2rem;
            align-items: center;
            justify-content: center;

            border-top: 1px solid ${St.secondary};
            border-bottom: 1px solid ${St.secondary};
            padding-top: 92px;
            padding-bottom: 92px;
          }

          .frc-product__selected-image {
            border: 1px solid ${St.textColor};
            width: 700px;
            height: 700px;
            border-radius: 0px;
          }

          .frc-product__image-preview-col {
            display: flex;
            align-items: center;
            gap: 10px;
          }
          .frc-product__image-preview {
            width: 94px;
            height: 94px;
            box-sizing: border-box;
            border: 1px solid ${St.textColor};
            border-radius: 0px;

            cursor: pointer;
          }
          .frc-product__image-preview-selected {
            width: 94px;
            height: 94px;
            box-sizing: border-box;
            border: 2px solid ${St.accent};
            margin-top: -1px;
            margin-bottom: -1px;
          }
          .frc-product__carousel-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 15px;
          }
          .frc-product__product-specs {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding-left: 4rem;
            padding-right: 4rem;
            gap: 15px;

            max-width: 600px;
          }
          .frc-product__product-title {
            font-family: 'Oswald', sans-serif;
            color: ${St.textColor};
            text-transform: uppercase;
            text-align: right;
            font-size: 3rem;
            margin: 0;
            line-height: 4rem;

            text-shadow: 
            -1px -1px 0 #000,
            1px -1px 0 #000,  
            -1px  1px 0 #000,  
            1px  1px 0 #000;  

            user-select: none;
          }
          .frc-product__product-cost {
            font-family: 'Oswald', sans-serif;
            font-weight: 400;
            color: ${St.textColor};
            text-transform: uppercase;
            font-size: 1.2rem;
            margin: 0;

            text-shadow: 
            -1px -1px 0 #000,
            1px -1px 0 #000,
            -1px  1px 0 #000,
            1px  1px 0 #000;

            user-select: none;
          }
          .frc-product__product-description {
            font-family: 'Oswald', sans-serif;
            font-weight: 400;
            margin-top: 10px;
            color: ${St.textColor};
            border-top: 1px solid ${St.textColor};
            border-bottom: 1px solid ${St.textColor};
            padding-top: 20px;
            padding-bottom: 20px;
          }
          .frc-product__cta-button-wrapper {
            width: 150px;
            height: 50px;
            background-color: ${tv(St.accent,1)};
            border: none;
            cursor: pointer;
            animation: fadeInLeft 0.5s ease-out forwards;
            border: 2px solid ${tv(St.secondary,.3)};

            user-select: none;
          }
          .frc-product__cta-button {
              user-select: none;
              font-family: 'Oswald', sans-serif;
              font-weight: 400;
              color: ${St.textColor};
              letter-spacing: 0.7px;
              font-size: 18px;
              padding-top: 2px;

              padding-bottom: 1px;
              background-image: linear-gradient(#fff 0 0);
              background-position: 0 100%;
              background-size: 0% 1px;
              background-repeat: no-repeat;
              transition: background-size 0.3s, background-position 0s 0.3s;

              text-shadow: 
              -1px -1px 0 #000,
              1px -1px 0 #000,
              -1px  1px 0 #000,
              1px  1px 0 #000;
          }
          .frc-product__button-price-row {
            gap: 20px;
            display: flex;
            align-items: center;
          }
          .frc-product__button-col {
            display: flex;
            gap: 10px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }
          .frc-product__cta-button-wrapper:hover .frc-product__cta-button {
              background-position: 100% 100%;
              background-size: 100% 1px;
          }
          .frc-product__product-description-break {
            height: 20px;
            width: 100%;
          }
          .frc-product__product-header-row {
            display: flex;
            align-items: center;
            justify-content: space-around;
            text-align: center;
          }
          .frc-product__container-mobile {
            overflow: hidden;
          }

          @media only screen and (max-width: 1550px) {
            .frc-product__selected-image {
              width: 500px;
              height: 500px;
            }
            .frc-product__image-preview {
              width: 81px;
              height: 81px;
            }
          }

          @media only screen and (max-width: 1320px) {
            .frc-product__selected-image {
              width: 500px;
              height: 500px;
            }
            .frc-product__image-preview {
              width: 81px;
              height: 81px;
            }
          }

          @media only screen and (max-width: 1275px) {
            .frc-product__product-specs {
              width: 500px;
            }
          }

          @media only screen and (max-width: 1200px) {
            .frc-product__product-header-row {
              width: 414px;
            }
            .frc-product__button-price-row {
              width: 414px;
              justify-content: center;
            }
            .frc-product__product-title {
              text-align: center;
            }
            .frc-product__product-specs {
              align-items: center;
            }
            .frc-product__selected-image {
              width: 500px;
              height: 500px;
            }
            .frc-product__image-preview {
              width: 96px;
              height: 96px;
            }

            .frc-product__content-container {
              flex-direction: column;
            }

            .frc-product__image-preview-col {
              flex-direction: row;
            }
            .frc-product__content-container {
              gap: 10px;
              height: auto;
            }
          }
          
          @media only screen and (max-width: 800px) {
            .frc-product__product-header-row {
              width: 326px;
            }
            .frc-product__product-title {
              font-size: 2.2rem;
              line-height: 2.2rem;
            }
            .frc-product__content-container {
              padding-left: 1rem;
              padding-right: 1rem;
            }
            .frc-product__selected-image {
              width: 400px;
              height: 400px;
            }
            .frc-product__image-preview {
              width: 74px;
              height: 74px;
            }
          
          }
          @media only screen and (max-width: 550px) {
            .frc-product__selected-image {
              border-radius: 5px;
            }
  
            .frc-product__image-preview {
              border-radius: 5px;
            }
            .frc-product__content-container {
              padding-left: 0px;
              padding-right: 0px;
            }
          }
          @media only screen and (max-width: 500px) {
            .frc-product__cta-button-wrapper {
              width: 130px;
              height: 40px;
            }
            .frc-product__cta-button {
              font-size: 16px;
            }
            .frc-product__product-header-row {
              width: 274px;
            }
            .frc-product__product-title {
              font-size: 1.8rem;
              line-height: 1.8rem;
            }
            .frc-product__product-info-btn {
              color: ${St.textColor};
              font-family: 'Oswald', sans-serif;
              font-size: 1rem;
              border: 2px solid ${St.textColor};
              border-radius: 25px;
              width: 25px;
              height: 25px;
            }
            .frc-product__content-container {
              height: 100%;
            }
            .frc-product__selected-image {
              width: 270px;
              height: 270px;
            }
            .frc-product__image-preview {
              width: 61px;
              height: 61px;
            }
          }
          @media only screen and (max-width: 500px) and (max-height: 800px) {
            .frc-product__content-container {
              justify-content: flex-start;
              padding-top: 75px;
            }
            .frc-product__content-container-safari {
              padding-top: 120px;
            }
          }
        `}),ue.jsxs("div",{className:"frc-product__container",children:[ue.jsx(nD,{store:n,setStore:e,top:!0,scrollIndex:0}),ue.jsx(cj,{active:i,setActive:a,requireCheckbox:!0,children:ir.terms.text.map((O,X)=>ue.jsx("p",{children:O},`tos-${X}`))}),ue.jsx(sj,{active:t,setActive:r,content:M,isMobile:R,locked:i}),ue.jsxs("div",{className:`frc-product__content-container ${mw&&"frc-product__content-container-safari"}`,style:L<500?{maxWidth:L}:{},children:[L<=1200&&ue.jsx("div",{className:"frc-product__product-title",children:v}),ue.jsxs("div",{className:"frc-product__carousel-container",children:[ue.jsx("img",{className:"frc-product__selected-image",src:h&&h[f].src}),ue.jsx("div",{className:"frc-product__image-preview-col",children:h&&h.map(({src:O},X)=>ue.jsx("img",{className:`frc-product__image-preview ${X===f?"frc-product__image-preview-selected":""}`,src:O,onClick:()=>{p(X)}},`frc-product__image-preview-selected-${X}`))})]}),ue.jsxs("div",{className:"frc-product__product-specs",children:[L>1200&&ue.jsx("div",{className:"frc-product__product-title",children:v}),ue.jsxs("div",{className:"frc-product__button-price-row",children:[ue.jsx(aj,{quantity:C,setQuantity:T}),ue.jsx("button",{ref:o,className:"frc-product__cta-button-wrapper",onClick:()=>{rj(n,e,l,C)},children:ue.jsx("span",{className:"frc-product__cta-button",children:"Add to Cart"})}),L>1200&&ue.jsx("div",{className:"frc-product__product-cost",children:`$${_}`})]}),L>1200&&ue.jsx("div",{className:"frc-product__product-description",children:A.map((O,X)=>X>0?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"frc-product__product-description-break"},`${O}-${X}`),ue.jsx("span",{children:O})]}):ue.jsx("span",{children:O},`${O}-${X}`))})]})]}),ue.jsx("div",{className:"footer-placeholder"})]})]})};/*
@license
The MIT License (MIT)

Copyright (c) 2016 Shopify Inc.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/var _w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fo=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},wo=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Mh=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},Th=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n};function Xu(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.join(" ")}function r0(n){return!!n&&Object.prototype.toString.call(n.valueOf())==="[object Object]"}function iv(n,e){return n(e)?e:r0(e)?Object.freeze(Object.keys(e).reduce(function(t,r){return t[r]=iv(n,e[r]),t},{})):Array.isArray(e)?Object.freeze(e.map(function(t){return iv(n,t)})):e}function Ru(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=n.types[e];if(r)return r;if(t&&t.kind==="INTERFACE")return t;throw new Error("No type of "+e+" found in schema")}var ai=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Yi=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),lP=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a0=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t>"u"?"undefined":_w(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},s0=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t>"u"?"undefined":_w(t))==="object"||typeof t=="function")?t:e},Iu=function(){function n(e,t){var r=[],i=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Dl=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)},xw=function(){function n(e,t,r){ai(this,n),this.name=e,this.type=t,this.defaultValue=r,Object.freeze(this)}return Yi(n,[{key:"toInputValueString",value:function(){return"$"+this.name}},{key:"toString",value:function(){var t=this.defaultValue?" = "+ww(this.defaultValue):"";return"$"+this.name+":"+this.type+t}}]),n}();function Yf(n){return xw.prototype.isPrototypeOf(n)}function Aw(n,e,t){return new xw(n,e,t)}var Sw=function(){function n(e){ai(this,n),this.key=e}return Yi(n,[{key:"toString",value:function(){return this.key}},{key:"valueOf",value:function(){return this.key.valueOf()}}]),n}(),dj=function(e){return new Sw(e)},o0=function(){function n(e){ai(this,n),this.value=e}return Yi(n,[{key:"toString",value:function(){return this.value.toString()}},{key:"valueOf",value:function(){return this.value.valueOf()}},{key:"unwrapped",get:function(){return this.value}}]),n}();function ww(n){return xw.prototype.isPrototypeOf(n)?n.toInputValueString():Sw.prototype.isPrototypeOf(n)?String(n):o0.prototype.isPrototypeOf(n)?JSON.stringify(n.valueOf()):Array.isArray(n)?"["+Xu.apply(void 0,Dl(n.map(ww)))+"]":r0(n)?Cw(n,"{","}"):JSON.stringify(n)}function Cw(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",r=Object.keys(n).map(function(i){return i+": "+ww(n[i])});return""+e+Xu.apply(void 0,Dl(r))+t}function fj(n){return Object.keys(n).length?" ("+Cw(n)+")":""}function hj(n){if(!Object.keys(n).length)return"";var e=Object.keys(n).map(function(t){var r=n[t],i=r&&Object.keys(r).length?"("+Cw(r)+")":"";return"@"+t+i});return" "+Xu.apply(void 0,Dl(e))}var Qf=function(){},lD={trackTypeDependency:Qf,trackFieldDependency:Qf},pj=lD.trackTypeDependency,cP=lD.trackFieldDependency;function uP(n){var e=Qf,t={},r=null;if(n.length===2)if(typeof n[1]=="function"){var i=Iu(n,2);t=i[0],e=i[1]}else{var a=Iu(n,2);t=a[0],r=a[1]}else n.length===1&&(Ml.prototype.isPrototypeOf(n[0])?r=n[0]:typeof n[0]=="function"?e=n[0]:t=n[0]);return{options:t,selectionSet:r,callback:e}}var mj=Object.freeze({}),gj=Object.freeze({}),Ul=function(){function n(e,t,r){ai(this,n),this.name=e,this.alias=t.alias||null,this.responseKey=this.alias||this.name,this.args=t.args?iv(Yf,t.args):mj,this.directives=t.directives?iv(Yf,t.directives):gj,this.selectionSet=r,Object.freeze(this)}return Yi(n,[{key:"toString",value:function(){var t=this.alias?this.alias+": ":"";return""+t+this.name+fj(this.args)+hj(this.directives)+this.selectionSet}}]),n}(),bh=function n(){ai(this,n)},vj=function(n){a0(e,n);function e(t,r){ai(this,e);var i=s0(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.typeName=t,i.selectionSet=r,Object.freeze(i),i}return Yi(e,[{key:"toString",value:function(){return"... on "+this.typeName+this.selectionSet}}]),e}(bh),cD=function(n){a0(e,n);function e(t){ai(this,e);var r=s0(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name=t.name,r.selectionSet=t.selectionSet,Object.freeze(r),r}return Yi(e,[{key:"toString",value:function(){return"..."+this.name}},{key:"toDefinition",value:function(){return new JA(this.name,this.selectionSet.typeSchema.name,this.selectionSet)}}]),e}(bh),JA=function(){function n(e,t,r){ai(this,n),this.name=e,this.typeName=t,this.selectionSet=r,this.spread=new cD(this),Object.freeze(this)}return Yi(n,[{key:"toString",value:function(){return"fragment "+this.name+" on "+this.typeName+" "+this.selectionSet}}]),n}();function uD(n){return n.some(function(e){return Ul.prototype.isPrototypeOf(e)?e.name==="id":bh.prototype.isPrototypeOf(e)&&e.selectionSet.typeSchema.implementsNode?uD(e.selectionSet.selections):!1})}function dD(n){return n.some(function(e){return Ul.prototype.isPrototypeOf(e)?e.name==="__typename":bh.prototype.isPrototypeOf(e)&&e.selectionSet.typeSchema.implementsNode?dD(e.selectionSet.selections):!1})}function yj(n){function e(r,i,a){Array.isArray(r[i])?r[i].push(a):r[i]=[a]}var t=n.reduce(function(r,i){if(i.responseKey)e(r,i.responseKey,i);else{var a=Object.keys(i.selectionSet.selectionsByResponseKey);a.forEach(function(s){e(r,s,i)})}return r},{});return Object.keys(t).forEach(function(r){Object.freeze(t[r])}),Object.freeze(t)}var Ml=function(){function n(e,t,r){ai(this,n),typeof t=="string"?this.typeSchema=Ru(e,t):this.typeSchema=t,pj(this.typeSchema.name),this.typeBundle=e,this.selections=[],r&&r(new _j(this.typeBundle,this.typeSchema,this.selections)),(this.typeSchema.implementsNode||this.typeSchema.name==="Node")&&(uD(this.selections)||this.selections.unshift(new Ul("id",{},new n(e,"ID")))),this.typeSchema.kind==="INTERFACE"&&(dD(this.selections)||this.selections.unshift(new Ul("__typename",{},new n(e,"String")))),this.selectionsByResponseKey=yj(this.selections),Object.freeze(this.selections),Object.freeze(this)}return Yi(n,[{key:"toString",value:function(){return this.typeSchema.kind==="SCALAR"||this.typeSchema.kind==="ENUM"?"":" { "+Xu(this.selections)+" }"}}]),n}(),_j=function(){function n(e,t,r){ai(this,n),this.typeBundle=e,this.typeSchema=t,this.selections=r}return Yi(n,[{key:"hasSelectionWithResponseKey",value:function(t){return this.selections.some(function(r){return r.responseKey===t})}},{key:"add",value:function(t){var r=void 0;if(Object.prototype.toString.call(t)==="[object String]"){cP(this.typeSchema.name,t);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];r=this.field.apply(this,[t].concat(a))}else Ul.prototype.isPrototypeOf(t)&&cP(this.typeSchema.name,t.name),r=t;if(r.responseKey&&this.hasSelectionWithResponseKey(r.responseKey))throw new Error("The field name or alias '"+r.responseKey+"' has already been added.");this.selections.push(r)}},{key:"field",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var s=uP(i),o=s.options,l=s.callback,c=s.selectionSet;if(!c){if(!this.typeSchema.fieldBaseTypes[t])throw new Error('No field of name "'+t+'" found on type "'+this.typeSchema.name+'" in schema');var f=Ru(this.typeBundle,this.typeSchema.fieldBaseTypes[t]);c=new Ml(this.typeBundle,f,l)}return new Ul(t,o,c)}},{key:"inlineFragmentOn",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf,i=void 0;return Ml.prototype.isPrototypeOf(r)?i=r:i=new Ml(this.typeBundle,Ru(this.typeBundle,t),r),new vj(t,i)}},{key:"addField",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];this.add.apply(this,[t].concat(i))}},{key:"addConnection",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var s=uP(i),o=s.options,l=s.callback,c=s.selectionSet;this.add(t,o,function(f){f.add("pageInfo",{},function(p){p.add("hasNextPage"),p.add("hasPreviousPage")}),f.add("edges",{},function(p){p.add("cursor"),p.addField("node",{},c||l)})})}},{key:"addInlineFragmentOn",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf;this.add(this.inlineFragmentOn(t,r))}},{key:"addFragment",value:function(t){this.add(t)}}]),n}();function xj(n){var e=void 0,t=void 0,r=void 0;if(n.length===3){var i=Iu(n,3);e=i[0],t=i[1],r=i[2]}else n.length===2?(Object.prototype.toString.call(n[0])==="[object String]"?(e=n[0],t=null):Array.isArray(n[0])&&(t=n[0],e=null),r=n[1]):(r=n[0],e=null);return{name:e,variables:t,selectionSetCallback:r}}var Aj=function(){function n(e){ai(this,n),this.variableDefinitions=e?[].concat(Dl(e)):[],Object.freeze(this.variableDefinitions),Object.freeze(this)}return Yi(n,[{key:"toString",value:function(){return this.variableDefinitions.length===0?"":" ("+Xu(this.variableDefinitions)+") "}}]),n}(),Ph=function(){function n(e,t){ai(this,n);for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var s=xj(i),o=s.name,l=s.variables,c=s.selectionSetCallback;this.typeBundle=e,this.name=o,this.variableDefinitions=new Aj(l),this.operationType=t,t==="query"?(this.selectionSet=new Ml(e,e.queryType,c),this.typeSchema=Ru(e,e.queryType)):(this.selectionSet=new Ml(e,e.mutationType,c),this.typeSchema=Ru(e,e.mutationType)),Object.freeze(this)}return Yi(n,[{key:"toString",value:function(){var t=this.name?" "+this.name:"";return""+this.operationType+t+this.variableDefinitions+this.selectionSet}},{key:"isAnonymous",get:function(){return!this.name}}]),n}(),Ew=function(n){a0(e,n);function e(t){var r;ai(this,e);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return s0(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this,t,"query"].concat(a)))}return e}(Ph),fD=function(n){a0(e,n);function e(t){var r;ai(this,e);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return s0(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this,t,"mutation"].concat(a)))}return e}(Ph);function Sj(n){return n.isAnonymous}function wj(n){return n.some(Sj)}function Cj(n){var e=n.map(function(t){return t.name});return e.reduce(function(t,r,i){return t||e.indexOf(r)!==i},!1)}function Ej(n,e){for(var t=arguments.length,r=Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];return Ph.prototype.isPrototypeOf(r[0])?r[0]:e==="query"?new(Function.prototype.bind.apply(Ew,[null].concat([n],r))):new(Function.prototype.bind.apply(fD,[null].concat([n],r)))}function Mj(n){return n.length===1?!1:wj(n)||Cj(n)}function Tj(n,e){return n.some(function(t){return t.name===e})}var hD=function(){function n(e){ai(this,n),this.typeBundle=e,this.definitions=[]}return Yi(n,[{key:"toString",value:function(){return Xu(this.definitions)}},{key:"addOperation",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var s=Ej.apply(void 0,[this.typeBundle,t].concat(i));if(Mj(this.operations.concat(s)))throw new Error("All operations must be uniquely named on a multi-operation document");this.definitions.push(s)}},{key:"addQuery",value:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];this.addOperation.apply(this,["query"].concat(r))}},{key:"addMutation",value:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];this.addOperation.apply(this,["mutation"].concat(r))}},{key:"defineFragment",value:function(t,r,i){if(Tj(this.fragmentDefinitions,t))throw new Error("All fragments must be uniquely named on a multi-fragment document");var a=new Ml(this.typeBundle,r,i),s=new JA(t,r,a);return this.definitions.push(s),s.spread}},{key:"operations",get:function(){return this.definitions.filter(function(t){return Ph.prototype.isPrototypeOf(t)})}},{key:"fragmentDefinitions",get:function(){return this.definitions.filter(function(t){return JA.prototype.isPrototypeOf(t)})}}]),n}(),bj=function n(e){var t=this;ai(this,n),Object.defineProperty(this,"attrs",{value:e,enumerable:!1}),Object.keys(this.attrs).filter(function(r){return!(r in t)}).forEach(function(r){var i=void 0;e[r]===null?i={enumerable:!0,get:function(){return null}}:i={enumerable:!0,get:function(){return this.attrs[r].valueOf()}},Object.defineProperty(t,r,i)})},pD=function(){function n(){ai(this,n),this.classStore={}}return Yi(n,[{key:"registerClassForType",value:function(t,r){this.classStore[r]=t}},{key:"unregisterClassForType",value:function(t){delete this.classStore[t]}},{key:"classForType",value:function(t){return this.classStore[t]||bj}}]),n}();function Mw(n){return Object.prototype.toString.call(n)!=="[object Null]"&&Object.prototype.toString.call(n)!=="[object Undefined]"}function mD(n){return n.selection.selectionSet.typeSchema.implementsNode}function Pj(n){return n.selection.selectionSet.typeSchema.name.endsWith("Connection")}function gD(n){return n==null?null:mD(n)?n:gD(n.parent)}function vD(n){return n.parent?vD(n.parent).concat(n):[n]}function yD(n){return n.selection.selectionSet.typeSchema.implementsNode?[n]:yD(n.parent).concat(n)}function dP(n,e){var t=e[e.length-1],r=t.selection.args.first,i=Object.keys(t.selection.args).filter(function(o){return Yf(t.selection.args[o])}).map(function(o){return t.selection.args[o]}),a=i.find(function(o){return o.name==="first"});a||(Yf(r)?a=r:(a=Aw("first","Int",r),i.push(a)));var s=new hD(n.selection.selectionSet.typeBundle);return[s,i,a]}function qA(n,e,t,r){var i=e.shift();if(t.push(i.selection.responseKey),e.length)n.add(i.selection.name,{alias:i.selection.alias,args:i.selection.args},function(c){qA(c,e,t,r)});else{var a=i.selection.selectionSet.selections.find(function(c){return c.name==="edges"}),s=a.selectionSet.selections.find(function(c){return c.name==="node"}),o=void 0;Yf(i.selection.args.first)?o=i.selection.args.first:o=Aw("first","Int",i.selection.args.first);var l={alias:i.selection.alias,args:Object.assign({},i.selection.args,{after:r,first:o})};n.addConnection(i.selection.name,l,s.selectionSet)}}function KA(n){return n.reduce(function(e,t){return cD.prototype.isPrototypeOf(t)&&e.push(t.toDefinition()),e.push.apply(e,Dl(KA(t.selectionSet.selections))),e},[])}function Rj(n,e){var t=gD(n);return t?function(){var r,i=[],a=t.selection.selectionSet.typeSchema,s=t.responseData.id,o=yD(n),l=dP(n,o),c=Iu(l,2),f=c[0],p=c[1];f.addQuery(p,function(m){i.push("node"),m.add("node",{args:{id:s}},function(v){v.addInlineFragmentOn(a.name,function(x){qA(x,o.slice(1),i,e)})})});var h=KA(f.operations[0].selectionSet.selections);return(r=f.definitions).unshift.apply(r,Dl(h)),[f,i]}:function(){var r,i=[],a=vD(n),s=dP(n,a),o=Iu(s,2),l=o[0],c=o[1];l.addQuery(c,function(p){qA(p,a.slice(1),i,e)});var f=KA(l.operations[0].selectionSet.selections);return(r=l.definitions).unshift.apply(r,Dl(f)),[l,i]}}function Ij(n,e){return e!==n.edges[n.edges.length-1]?new o0(!0):n.pageInfo.hasNextPage}function Fj(n,e){return e!==n.edges[0]?new o0(!0):n.pageInfo.hasPreviousPage}function Bj(n){return function(e,t){if(Pj(e)){if(!(t.pageInfo&&t.pageInfo.hasOwnProperty("hasNextPage")&&t.pageInfo.hasOwnProperty("hasPreviousPage")))throw new Error('Connections must include the selections "pageInfo { hasNextPage, hasPreviousPage }".');return t.edges.map(function(r){return Object.assign(r.node,{nextPageQueryAndPath:Rj(e,r.cursor),hasNextPage:Ij(t,r),hasPreviousPage:Fj(t,r),variableValues:n})})}else return t}}var Lj=function(){function n(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;ai(this,n),this.selection=e,this.responseData=t,this.parent=r,Object.freeze(this)}return Yi(n,[{key:"contextForObjectProperty",value:function(t){var r=this.selection.selectionSet.selectionsByResponseKey[t],i=r&&r[0],a=void 0;if(bh.prototype.isPrototypeOf(i)?a=new n(i,this.responseData,this.parent):a=new n(i,this.responseData[t],this),!i)throw new Error('Unexpected response key "'+t+'", not found in selection set: '+this.selection.selectionSet);return Ul.prototype.isPrototypeOf(i)?a:a.contextForObjectProperty(t)}},{key:"contextForArrayItem",value:function(t){return new n(this.selection,t,this.parent)}}]),n}();function Dj(n,e){return n.responseData.map(function(t){return Tw(n.contextForArrayItem(t),e)})}function Uj(n,e){return Object.keys(n.responseData).reduce(function(t,r){return t[r]=Tw(n.contextForObjectProperty(r),e),t},{})}function Oj(n,e,t){return n.reduce(function(r,i){return i(e,r)},t)}function Tw(n,e){var t=n.responseData;return Array.isArray(t)?t=Dj(n,e):r0(t)&&(t=Uj(n,e)),Oj(e,n,t)}function kj(n,e){return Mw(e)&&mD(n)&&(e.refetchQuery=function(){return new Ew(n.selection.selectionSet.typeBundle,function(t){t.add("node",{args:{id:n.responseData.id}},function(r){r.addInlineFragmentOn(n.selection.selectionSet.typeSchema.name,n.selection.selectionSet)})})}),e}function Nj(n){return function(t,r){if(r0(r)){var i=n.classForType(t.selection.selectionSet.typeSchema.name);return new i(r)}else return r}}function zj(n,e){if(Mw(e)){if(n.selection.selectionSet.typeSchema.kind==="SCALAR")return new o0(e);if(n.selection.selectionSet.typeSchema.kind==="ENUM")return new Sw(e)}return e}function Vj(n,e){var t=n.selection.selectionSet,r=t.typeBundle,i=t.typeSchema;return Mw(e)&&(e.__typename?e.type=Ru(r,e.__typename,i):e.type=i),e}function Gj(n){var e=n.classRegistry,t=e===void 0?new pD:e,r=n.variableValues;return[zj,kj,Bj(r),Vj,Nj(t)]}function Hj(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.transformers||Gj(t),i=new Lj(n,e);return Tw(i,r)}function Wj(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r,i){return fetch(n,lP({body:JSON.stringify(r),method:"POST",mode:"cors"},e,{headers:lP({"Content-Type":"application/json",Accept:"application/json"},e.headers,i)})).then(function(a){var s=a.headers.get("content-type");return s.indexOf("application/json")>-1?a.json():a.text().then(function(o){return{text:o}})})}}function Xj(n){return n&&n.length&&n[n.length-1].hasNextPage}var fP=function(){function n(e,t){var r=t.url,i=t.fetcherOptions,a=t.fetcher,s=t.registry,o=s===void 0?new pD:s;if(ai(this,n),this.typeBundle=e,this.classRegistry=o,r&&a)throw new Error("Arguments not supported: supply either `url` and optional `fetcherOptions` OR use a `fetcher` function for further customization.");if(r)this.fetcher=Wj(r,i);else if(a){if(i)throw new Error("Arguments not supported: when specifying your own `fetcher`, set options through it and not with `fetcherOptions`");this.fetcher=a}else throw new Error("Invalid arguments: one of `url` or `fetcher` is needed.")}return Yi(n,[{key:"document",value:function(){return new hD(this.typeBundle)}},{key:"query",value:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return new(Function.prototype.bind.apply(Ew,[null].concat([this.typeBundle],r)))}},{key:"mutation",value:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return new(Function.prototype.bind.apply(fD,[null].concat([this.typeBundle],r)))}},{key:"send",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=void 0;Function.prototype.isPrototypeOf(t)?o=t(this):o=t;var l={query:o.toString()};r&&(l.variables=r),Object.assign(l,a);var c=void 0;if(Ph.prototype.isPrototypeOf(o))c=o;else{var f=o;if(f.operations.length===1)c=f.operations[0];else if(a.operationName)c=f.operations.find(function(p){return p.name===a.operationName});else throw new Error(`
          A document must contain exactly one operation, or an operationName
          must be specified. Example:

            client.send(document, null, {operationName: 'myFancyQuery'});
        `)}return this.fetcher(l,s).then(function(p){return p.data&&(p.model=Hj(c,p.data,{classRegistry:i.classRegistry,variableValues:r})),p})}},{key:"fetchNextPage",value:function(t,r){var i=void 0;Array.isArray(t)?i=t[t.length-1]:i=t;var a=i.nextPageQueryAndPath(),s=Iu(a,2),o=s[0],l=s[1],c=void 0;return(i.variableValues||r)&&(c=Object.assign({},i.variableValues,r)),this.send(o,c).then(function(f){return f.model=l.reduce(function(p,h){return p[h]},f.model),f})}},{key:"fetchAllPages",value:function(t,r){var i=this,a=r.pageSize;return Xj(t)?this.fetchNextPage(t,{first:a}).then(function(s){var o=s.model,l=t.concat(o);return i.fetchAllPages(l,{pageSize:a})}):Promise.resolve(t)}},{key:"refetch",value:function(t){if(t){if(!t.type.implementsNode)throw new Error("'client#refetch' must be called with a type that implements Node. Received "+t.type.name+".")}else throw new Error("'client#refetch' must be called with a non-null instance of a Node.");return this.send(t.refetchQuery()).then(function(r){var i=r.model;return i.node})}},{key:"variable",value:function(t,r,i){return Aw(t,r,i)}},{key:"enum",value:function(t){return dj(t)}}]),n}(),jj=function(){wo(n,[{key:"requiredProperties",get:function(){return["storefrontAccessToken","domain"]}},{key:"deprecatedProperties",get:function(){return{accessToken:"storefrontAccessToken",apiKey:"storefrontAccessToken"}}}]);function n(e){var t=this;Fo(this,n),Object.keys(this.deprecatedProperties).forEach(function(r){e.hasOwnProperty(r)&&(console.warn("[ShopifyBuy] Config property "+r+" is deprecated as of v1.0, please use "+t.deprecatedProperties[r]+" instead."),e[t.deprecatedProperties[r]]=e[r])}),this.requiredProperties.forEach(function(r){if(e.hasOwnProperty(r))t[r]=e[r];else throw new Error("new Config() requires the option '"+r+"'")}),e.hasOwnProperty("apiVersion")?this.apiVersion=e.apiVersion:this.apiVersion="2023-10",e.hasOwnProperty("source")&&(this.source=e.source),e.hasOwnProperty("language")&&(this.language=e.language)}return n}(),Rh=function n(e){Fo(this,n),this.graphQLClient=e},Jj=[{message:"an unknown error has occurred."}];function Hi(n){var e=n.split(".");return function(t){var r=t.model,i=t.errors;return new Promise(function(a,s){try{var o=e.reduce(function(l,c){return l[c]},r);a(o)}catch{s(i||Jj)}})}}function _D(n,e){var t=[].concat(n);return Promise.all(t.reduce(function(r,i){return i===null||(r.push(e.fetchAllPages(i.images,{pageSize:250}).then(function(a){i.attrs.images=a})),r.push(e.fetchAllPages(i.variants,{pageSize:250}).then(function(a){i.attrs.variants=a}))),r},[]))}function Ic(n){return function(e){return _D(e,n).then(function(){return e})}}function hP(n){return function(e){var t=[].concat(e);return Promise.all(t.reduce(function(r,i){return r.concat(_D(i.products,n))},[])).then(function(){return e})}}var qj={variantForOptions:function(e,t){return e.variants.find(function(r){return r.selectedOptions.every(function(i){return t[i.name]===i.value.valueOf()})})}};function Kj(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.id=n.variable("id","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.id],function(i){i.add("node",{args:{id:r.__defaultOperation__.id}},function(a){a.addFragment(t.ProductFragment)})}),e}function Yj(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.ids=n.variable("ids","[ID!]!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.ids],function(i){i.add("nodes",{args:{ids:r.__defaultOperation__.ids}},function(a){a.addFragment(t.ProductFragment)})}),e}function pP(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.first=n.variable("first","Int!"),r.__defaultOperation__.query=n.variable("query","String"),r.__defaultOperation__.sortKey=n.variable("sortKey","ProductSortKeys"),r.__defaultOperation__.reverse=n.variable("reverse","Boolean"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.first,r.__defaultOperation__.query,r.__defaultOperation__.sortKey,r.__defaultOperation__.reverse],function(i){i.add("products",{args:{first:r.__defaultOperation__.first,query:r.__defaultOperation__.query,sortKey:r.__defaultOperation__.sortKey,reverse:r.__defaultOperation__.reverse}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.ProductFragment)})})})}),e}function Qj(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.handle=n.variable("handle","String!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.handle],function(i){i.add("productByHandle",{args:{handle:r.__defaultOperation__.handle}},function(a){a.addFragment(t.ProductFragment)})}),e}function Zj(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.productId=n.variable("productId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.productId],function(i){i.add("productRecommendations",{args:{productId:r.__defaultOperation__.productId}},function(a){a.addFragment(t.ProductFragment)})}),e}var $j=function(n){Mh(e,n);function e(){return Fo(this,e),Th(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return wo(e,[{key:"fetchAll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20;return this.graphQLClient.send(pP,{first:r}).then(Hi("products")).then(Ic(this.graphQLClient))}},{key:"fetch",value:function(r){return this.graphQLClient.send(Kj,{id:r}).then(Hi("node")).then(Ic(this.graphQLClient))}},{key:"fetchMultiple",value:function(r){return this.graphQLClient.send(Yj,{ids:r}).then(Hi("nodes")).then(Ic(this.graphQLClient))}},{key:"fetchByHandle",value:function(r){return this.graphQLClient.send(Qj,{handle:r}).then(Hi("productByHandle")).then(Ic(this.graphQLClient))}},{key:"fetchQuery",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.first,a=i===void 0?20:i,s=r.sortKey,o=s===void 0?"ID":s,l=r.query,c=r.reverse;return this.graphQLClient.send(pP,{first:a,sortKey:o,query:l,reverse:c}).then(Hi("products")).then(Ic(this.graphQLClient))}},{key:"fetchRecommendations",value:function(r){return this.graphQLClient.send(Zj,{productId:r}).then(Hi("productRecommendations")).then(Ic(this.graphQLClient))}},{key:"helpers",get:function(){return qj}}]),e}(Rh);function eJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.id=n.variable("id","ID!"),t.CollectionFragment=e.defineFragment("CollectionFragment","Collection",function(i){i.add("id"),i.add("handle"),i.add("description"),i.add("descriptionHtml"),i.add("updatedAt"),i.add("title"),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText")})}),e.addQuery([r.__defaultOperation__.id],function(i){i.add("node",{args:{id:r.__defaultOperation__.id}},function(a){a.addFragment(t.CollectionFragment)})}),e}function tJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.id=n.variable("id","ID!"),r.__defaultOperation__.productsFirst=n.variable("productsFirst","Int!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.CollectionFragment=e.defineFragment("CollectionFragment","Collection",function(i){i.add("id"),i.add("handle"),i.add("description"),i.add("descriptionHtml"),i.add("updatedAt"),i.add("title"),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.id,r.__defaultOperation__.productsFirst],function(i){i.add("node",{args:{id:r.__defaultOperation__.id}},function(a){a.addFragment(t.CollectionFragment),a.addInlineFragmentOn("Collection",function(s){s.add("products",{args:{first:r.__defaultOperation__.productsFirst}},function(o){o.add("pageInfo",function(l){l.add("hasNextPage"),l.add("hasPreviousPage")}),o.add("edges",function(l){l.add("cursor"),l.add("node",function(c){c.addFragment(t.ProductFragment)})})})})})}),e}function mP(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.first=n.variable("first","Int!"),r.__defaultOperation__.query=n.variable("query","String"),r.__defaultOperation__.sortKey=n.variable("sortKey","CollectionSortKeys"),r.__defaultOperation__.reverse=n.variable("reverse","Boolean"),t.CollectionFragment=e.defineFragment("CollectionFragment","Collection",function(i){i.add("id"),i.add("handle"),i.add("description"),i.add("descriptionHtml"),i.add("updatedAt"),i.add("title"),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText")})}),e.addQuery([r.__defaultOperation__.first,r.__defaultOperation__.query,r.__defaultOperation__.sortKey,r.__defaultOperation__.reverse],function(i){i.add("collections",{args:{first:r.__defaultOperation__.first,query:r.__defaultOperation__.query,sortKey:r.__defaultOperation__.sortKey,reverse:r.__defaultOperation__.reverse}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.CollectionFragment)})})})}),e}function nJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.first=n.variable("first","Int!"),r.__defaultOperation__.query=n.variable("query","String"),r.__defaultOperation__.sortKey=n.variable("sortKey","CollectionSortKeys"),r.__defaultOperation__.reverse=n.variable("reverse","Boolean"),r.__defaultOperation__.productsFirst=n.variable("productsFirst","Int!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.CollectionFragment=e.defineFragment("CollectionFragment","Collection",function(i){i.add("id"),i.add("handle"),i.add("description"),i.add("descriptionHtml"),i.add("updatedAt"),i.add("title"),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),e.addQuery([r.__defaultOperation__.first,r.__defaultOperation__.query,r.__defaultOperation__.sortKey,r.__defaultOperation__.reverse,r.__defaultOperation__.productsFirst],function(i){i.add("collections",{args:{first:r.__defaultOperation__.first,query:r.__defaultOperation__.query,sortKey:r.__defaultOperation__.sortKey,reverse:r.__defaultOperation__.reverse}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.CollectionFragment),o.add("products",{args:{first:r.__defaultOperation__.productsFirst}},function(l){l.add("pageInfo",function(c){c.add("hasNextPage"),c.add("hasPreviousPage")}),l.add("edges",function(c){c.add("cursor"),c.add("node",function(f){f.addFragment(t.ProductFragment)})})})})})})}),e}function iJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.handle=n.variable("handle","String!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.ProductFragment=e.defineFragment("ProductFragment","Product",function(i){i.add("id"),i.add("availableForSale"),i.add("createdAt"),i.add("updatedAt"),i.add("descriptionHtml"),i.add("description"),i.add("handle"),i.add("productType"),i.add("title"),i.add("vendor"),i.add("publishedAt"),i.add("onlineStoreUrl"),i.add("options",function(a){a.add("name"),a.add("values")}),i.add("images",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("url",{alias:"src"}),o.add("altText"),o.add("width"),o.add("height")})})}),i.add("variants",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.VariantFragment)})})})}),t.CollectionFragment=e.defineFragment("CollectionFragment","Collection",function(i){i.add("id"),i.add("handle"),i.add("description"),i.add("descriptionHtml"),i.add("updatedAt"),i.add("title"),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText")})}),t.CollectionsProductsFragment=e.defineFragment("CollectionsProductsFragment","Collection",function(i){i.add("products",{args:{first:20}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.addFragment(t.ProductFragment)})})})}),e.addQuery([r.__defaultOperation__.handle],function(i){i.add("collectionByHandle",{args:{handle:r.__defaultOperation__.handle}},function(a){a.addFragment(t.CollectionFragment),a.addFragment(t.CollectionsProductsFragment)})}),e}var rJ=function(n){Mh(e,n);function e(){return Fo(this,e),Th(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return wo(e,[{key:"fetchAll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20;return this.graphQLClient.send(mP,{first:r}).then(Hi("collections"))}},{key:"fetchAllWithProducts",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.first,a=i===void 0?20:i,s=r.productsFirst,o=s===void 0?20:s;return this.graphQLClient.send(nJ,{first:a,productsFirst:o}).then(Hi("collections")).then(hP(this.graphQLClient))}},{key:"fetch",value:function(r){return this.graphQLClient.send(eJ,{id:r}).then(Hi("node"))}},{key:"fetchWithProducts",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.productsFirst,s=a===void 0?20:a;return this.graphQLClient.send(tJ,{id:r,productsFirst:s}).then(Hi("node")).then(hP(this.graphQLClient))}},{key:"fetchByHandle",value:function(r){return this.graphQLClient.send(iJ,{handle:r}).then(Hi("collectionByHandle"))}},{key:"fetchQuery",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.first,a=i===void 0?20:i,s=r.sortKey,o=s===void 0?"ID":s,l=r.query,c=r.reverse;return this.graphQLClient.send(mP,{first:a,sortKey:o,query:l,reverse:c}).then(Hi("collections"))}}]),e}(Rh);function aJ(n){var e=n.document();return e.addQuery(function(t){t.add("shop",function(r){r.add("paymentSettings",function(i){i.add("enabledPresentmentCurrencies")}),r.add("description"),r.add("moneyFormat"),r.add("name"),r.add("primaryDomain",function(i){i.add("host"),i.add("sslEnabled"),i.add("url")})})}),e}function sJ(n){var e=n.document(),t={};return t.PolicyFragment=e.defineFragment("PolicyFragment","ShopPolicy",function(r){r.add("id"),r.add("title"),r.add("url"),r.add("body")}),e.addQuery(function(r){r.add("shop",function(i){i.add("privacyPolicy",function(a){a.addFragment(t.PolicyFragment)}),i.add("termsOfService",function(a){a.addFragment(t.PolicyFragment)}),i.add("refundPolicy",function(a){a.addFragment(t.PolicyFragment)})})}),e}var oJ=function(n){Mh(e,n);function e(){return Fo(this,e),Th(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return wo(e,[{key:"fetchInfo",value:function(){return this.graphQLClient.send(aJ).then(Hi("shop"))}},{key:"fetchPolicies",value:function(){return this.graphQLClient.send(sJ).then(Hi("shop"))}}]),e}(Rh);function Hr(n,e){return function(t){var r=t.data,i=r===void 0?{}:r,a=t.errors,s=t.model,o=s===void 0?{}:s,l=i[n],c=o[n];return l&&l.checkout?e.fetchAllPages(c.checkout.lineItems,{pageSize:250}).then(function(f){return c.checkout.attrs.lineItems=f,c.checkout.errors=a,c.checkout.userErrors=c.userErrors,c.checkout}):a&&a.length?Promise.reject(new Error(JSON.stringify(a))):l&&l.checkoutUserErrors&&l.checkoutUserErrors.length?Promise.reject(new Error(JSON.stringify(l.checkoutUserErrors))):l&&l.userErrors&&l.userErrors.length?Promise.reject(new Error(JSON.stringify(l.userErrors))):Promise.reject(new Error("The "+n+" mutation failed due to an unknown error."))}}function lJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.id=n.variable("id","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addQuery([r.__defaultOperation__.id],function(i){i.add("node",{args:{id:r.__defaultOperation__.id}},function(a){a.addFragment(t.CheckoutFragment)})}),e}function cJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.input=n.variable("input","CheckoutCreateInput!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation([r.__defaultOperation__.input],function(i){i.add("checkoutCreate",{args:{input:r.__defaultOperation__.input}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function uJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.checkoutId=n.variable("checkoutId","ID!"),r.__defaultOperation__.lineItems=n.variable("lineItems","[CheckoutLineItemInput!]!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation([r.__defaultOperation__.checkoutId,r.__defaultOperation__.lineItems],function(i){i.add("checkoutLineItemsAdd",{args:{checkoutId:r.__defaultOperation__.checkoutId,lineItems:r.__defaultOperation__.lineItems}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function dJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.checkoutId=n.variable("checkoutId","ID!"),r.__defaultOperation__.lineItemIds=n.variable("lineItemIds","[ID!]!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation([r.__defaultOperation__.checkoutId,r.__defaultOperation__.lineItemIds],function(i){i.add("checkoutLineItemsRemove",{args:{checkoutId:r.__defaultOperation__.checkoutId,lineItemIds:r.__defaultOperation__.lineItemIds}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function fJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.checkoutId=n.variable("checkoutId","ID!"),r.__defaultOperation__.lineItems=n.variable("lineItems","[CheckoutLineItemInput!]!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation([r.__defaultOperation__.checkoutId,r.__defaultOperation__.lineItems],function(i){i.add("checkoutLineItemsReplace",{args:{checkoutId:r.__defaultOperation__.checkoutId,lineItems:r.__defaultOperation__.lineItems}},function(a){a.add("userErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function hJ(n){var e=n.document(),t={},r={};return r.__defaultOperation__={},r.__defaultOperation__.checkoutId=n.variable("checkoutId","ID!"),r.__defaultOperation__.lineItems=n.variable("lineItems","[CheckoutLineItemUpdateInput!]!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation([r.__defaultOperation__.checkoutId,r.__defaultOperation__.lineItems],function(i){i.add("checkoutLineItemsUpdate",{args:{checkoutId:r.__defaultOperation__.checkoutId,lineItems:r.__defaultOperation__.lineItems}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function pJ(n){var e=n.document(),t={},r={};return r.checkoutAttributesUpdateV2={},r.checkoutAttributesUpdateV2.checkoutId=n.variable("checkoutId","ID!"),r.checkoutAttributesUpdateV2.input=n.variable("input","CheckoutAttributesUpdateV2Input!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutAttributesUpdateV2",[r.checkoutAttributesUpdateV2.checkoutId,r.checkoutAttributesUpdateV2.input],function(i){i.add("checkoutAttributesUpdateV2",{args:{checkoutId:r.checkoutAttributesUpdateV2.checkoutId,input:r.checkoutAttributesUpdateV2.input}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function mJ(n){var e=n.document(),t={},r={};return r.checkoutDiscountCodeApplyV2={},r.checkoutDiscountCodeApplyV2.discountCode=n.variable("discountCode","String!"),r.checkoutDiscountCodeApplyV2.checkoutId=n.variable("checkoutId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutDiscountCodeApplyV2",[r.checkoutDiscountCodeApplyV2.discountCode,r.checkoutDiscountCodeApplyV2.checkoutId],function(i){i.add("checkoutDiscountCodeApplyV2",{args:{discountCode:r.checkoutDiscountCodeApplyV2.discountCode,checkoutId:r.checkoutDiscountCodeApplyV2.checkoutId}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function gJ(n){var e=n.document(),t={},r={};return r.checkoutDiscountCodeRemove={},r.checkoutDiscountCodeRemove.checkoutId=n.variable("checkoutId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutDiscountCodeRemove",[r.checkoutDiscountCodeRemove.checkoutId],function(i){i.add("checkoutDiscountCodeRemove",{args:{checkoutId:r.checkoutDiscountCodeRemove.checkoutId}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function vJ(n){var e=n.document(),t={},r={};return r.checkoutGiftCardsAppend={},r.checkoutGiftCardsAppend.giftCardCodes=n.variable("giftCardCodes","[String!]!"),r.checkoutGiftCardsAppend.checkoutId=n.variable("checkoutId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutGiftCardsAppend",[r.checkoutGiftCardsAppend.giftCardCodes,r.checkoutGiftCardsAppend.checkoutId],function(i){i.add("checkoutGiftCardsAppend",{args:{giftCardCodes:r.checkoutGiftCardsAppend.giftCardCodes,checkoutId:r.checkoutGiftCardsAppend.checkoutId}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function yJ(n){var e=n.document(),t={},r={};return r.checkoutGiftCardRemoveV2={},r.checkoutGiftCardRemoveV2.appliedGiftCardId=n.variable("appliedGiftCardId","ID!"),r.checkoutGiftCardRemoveV2.checkoutId=n.variable("checkoutId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutGiftCardRemoveV2",[r.checkoutGiftCardRemoveV2.appliedGiftCardId,r.checkoutGiftCardRemoveV2.checkoutId],function(i){i.add("checkoutGiftCardRemoveV2",{args:{appliedGiftCardId:r.checkoutGiftCardRemoveV2.appliedGiftCardId,checkoutId:r.checkoutGiftCardRemoveV2.checkoutId}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function _J(n){var e=n.document(),t={},r={};return r.checkoutEmailUpdateV2={},r.checkoutEmailUpdateV2.checkoutId=n.variable("checkoutId","ID!"),r.checkoutEmailUpdateV2.email=n.variable("email","String!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutEmailUpdateV2",[r.checkoutEmailUpdateV2.checkoutId,r.checkoutEmailUpdateV2.email],function(i){i.add("checkoutEmailUpdateV2",{args:{checkoutId:r.checkoutEmailUpdateV2.checkoutId,email:r.checkoutEmailUpdateV2.email}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}function xJ(n){var e=n.document(),t={},r={};return r.checkoutShippingAddressUpdateV2={},r.checkoutShippingAddressUpdateV2.shippingAddress=n.variable("shippingAddress","MailingAddressInput!"),r.checkoutShippingAddressUpdateV2.checkoutId=n.variable("checkoutId","ID!"),t.VariantFragment=e.defineFragment("VariantFragment","ProductVariant",function(i){i.add("id"),i.add("title"),i.add("price",function(a){a.add("amount"),a.add("currencyCode")}),i.add("price",{alias:"priceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("weight"),i.add("availableForSale",{alias:"available"}),i.add("sku"),i.add("compareAtPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("compareAtPrice",{alias:"compareAtPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("image",function(a){a.add("id"),a.add("url",{alias:"src"}),a.add("altText"),a.add("width"),a.add("height")}),i.add("selectedOptions",function(a){a.add("name"),a.add("value")}),i.add("unitPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("unitPriceMeasurement",function(a){a.add("measuredType"),a.add("quantityUnit"),a.add("quantityValue"),a.add("referenceUnit"),a.add("referenceValue")})}),t.DiscountApplicationFragment=e.defineFragment("DiscountApplicationFragment","DiscountApplication",function(i){i.add("targetSelection"),i.add("allocationMethod"),i.add("targetType"),i.add("value",function(a){a.addInlineFragmentOn("MoneyV2",function(s){s.add("amount"),s.add("currencyCode")}),a.addInlineFragmentOn("PricingPercentageValue",function(s){s.add("percentage")})}),i.addInlineFragmentOn("ManualDiscountApplication",function(a){a.add("title"),a.add("description")}),i.addInlineFragmentOn("DiscountCodeApplication",function(a){a.add("code"),a.add("applicable")}),i.addInlineFragmentOn("ScriptDiscountApplication",function(a){a.add("title")}),i.addInlineFragmentOn("AutomaticDiscountApplication",function(a){a.add("title")})}),t.AppliedGiftCardFragment=e.defineFragment("AppliedGiftCardFragment","AppliedGiftCard",function(i){i.add("amountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("amountUsed",{alias:"amountUsedV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",function(a){a.add("amount"),a.add("currencyCode")}),i.add("balance",{alias:"balanceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("presentmentAmountUsed",function(a){a.add("amount"),a.add("currencyCode")}),i.add("id"),i.add("lastCharacters")}),t.VariantWithProductFragment=e.defineFragment("VariantWithProductFragment","ProductVariant",function(i){i.addFragment(t.VariantFragment),i.add("product",function(a){a.add("id"),a.add("handle")})}),t.UserErrorFragment=e.defineFragment("UserErrorFragment","UserError",function(i){i.add("field"),i.add("message")}),t.CheckoutUserErrorFragment=e.defineFragment("CheckoutUserErrorFragment","CheckoutUserError",function(i){i.add("field"),i.add("message"),i.add("code")}),t.MailingAddressFragment=e.defineFragment("MailingAddressFragment","MailingAddress",function(i){i.add("id"),i.add("address1"),i.add("address2"),i.add("city"),i.add("company"),i.add("country"),i.add("firstName"),i.add("formatted"),i.add("lastName"),i.add("latitude"),i.add("longitude"),i.add("phone"),i.add("province"),i.add("zip"),i.add("name"),i.add("countryCodeV2",{alias:"countryCode"}),i.add("provinceCode")}),t.CheckoutFragment=e.defineFragment("CheckoutFragment","Checkout",function(i){i.add("id"),i.add("ready"),i.add("requiresShipping"),i.add("note"),i.add("paymentDue",function(a){a.add("amount"),a.add("currencyCode")}),i.add("paymentDue",{alias:"paymentDueV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("webUrl"),i.add("orderStatusUrl"),i.add("taxExempt"),i.add("taxesIncluded"),i.add("currencyCode"),i.add("totalTax",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalTax",{alias:"totalTaxV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("lineItemsSubtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("subtotalPrice",{alias:"subtotalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",function(a){a.add("amount"),a.add("currencyCode")}),i.add("totalPrice",{alias:"totalPriceV2"},function(a){a.add("amount"),a.add("currencyCode")}),i.add("completedAt"),i.add("createdAt"),i.add("updatedAt"),i.add("email"),i.add("discountApplications",{args:{first:10}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("node",function(o){o.addFragment(t.DiscountApplicationFragment)})})}),i.add("appliedGiftCards",function(a){a.addFragment(t.AppliedGiftCardFragment)}),i.add("shippingAddress",function(a){a.addFragment(t.MailingAddressFragment)}),i.add("shippingLine",function(a){a.add("handle"),a.add("price",function(s){s.add("amount"),s.add("currencyCode")}),a.add("price",{alias:"priceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("title")}),i.add("customAttributes",function(a){a.add("key"),a.add("value")}),i.add("order",function(a){a.add("id"),a.add("processedAt"),a.add("orderNumber"),a.add("subtotalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("subtotalPrice",{alias:"subtotalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalShippingPrice",{alias:"totalShippingPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalTax",{alias:"totalTaxV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalPrice",{alias:"totalPriceV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("currencyCode"),a.add("totalRefunded",function(s){s.add("amount"),s.add("currencyCode")}),a.add("totalRefunded",{alias:"totalRefundedV2"},function(s){s.add("amount"),s.add("currencyCode")}),a.add("customerUrl"),a.add("shippingAddress",function(s){s.addFragment(t.MailingAddressFragment)}),a.add("lineItems",{args:{first:250}},function(s){s.add("pageInfo",function(o){o.add("hasNextPage"),o.add("hasPreviousPage")}),s.add("edges",function(o){o.add("cursor"),o.add("node",function(l){l.add("title"),l.add("variant",function(c){c.addFragment(t.VariantWithProductFragment)}),l.add("quantity"),l.add("customAttributes",function(c){c.add("key"),c.add("value")})})})})}),i.add("lineItems",{args:{first:250}},function(a){a.add("pageInfo",function(s){s.add("hasNextPage"),s.add("hasPreviousPage")}),a.add("edges",function(s){s.add("cursor"),s.add("node",function(o){o.add("id"),o.add("title"),o.add("variant",function(l){l.addFragment(t.VariantWithProductFragment)}),o.add("quantity"),o.add("customAttributes",function(l){l.add("key"),l.add("value")}),o.add("discountAllocations",function(l){l.add("allocatedAmount",function(c){c.add("amount"),c.add("currencyCode")}),l.add("discountApplication",function(c){c.addFragment(t.DiscountApplicationFragment)})})})})})}),e.addMutation("checkoutShippingAddressUpdateV2",[r.checkoutShippingAddressUpdateV2.shippingAddress,r.checkoutShippingAddressUpdateV2.checkoutId],function(i){i.add("checkoutShippingAddressUpdateV2",{args:{shippingAddress:r.checkoutShippingAddressUpdateV2.shippingAddress,checkoutId:r.checkoutShippingAddressUpdateV2.checkoutId}},function(a){a.add("userErrors",function(s){s.addFragment(t.UserErrorFragment)}),a.add("checkoutUserErrors",function(s){s.addFragment(t.CheckoutUserErrorFragment)}),a.add("checkout",function(s){s.addFragment(t.CheckoutFragment)})})}),e}var AJ=function(n){Mh(e,n);function e(){return Fo(this,e),Th(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return wo(e,[{key:"fetch",value:function(r){var i=this;return this.graphQLClient.send(lJ,{id:r}).then(Hi("node")).then(function(a){return a?i.graphQLClient.fetchAllPages(a.lineItems,{pageSize:250}).then(function(s){return a.attrs.lineItems=s,a}):null})}},{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graphQLClient.send(cJ,{input:r}).then(Hr("checkoutCreate",this.graphQLClient))}},{key:"updateAttributes",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.graphQLClient.send(pJ,{checkoutId:r,input:i}).then(Hr("checkoutAttributesUpdateV2",this.graphQLClient))}},{key:"updateEmail",value:function(r,i){return this.graphQLClient.send(_J,{checkoutId:r,email:i}).then(Hr("checkoutEmailUpdateV2",this.graphQLClient))}},{key:"addLineItems",value:function(r,i){return this.graphQLClient.send(uJ,{checkoutId:r,lineItems:i}).then(Hr("checkoutLineItemsAdd",this.graphQLClient))}},{key:"addDiscount",value:function(r,i){return this.graphQLClient.send(mJ,{checkoutId:r,discountCode:i}).then(Hr("checkoutDiscountCodeApplyV2",this.graphQLClient))}},{key:"removeDiscount",value:function(r){return this.graphQLClient.send(gJ,{checkoutId:r}).then(Hr("checkoutDiscountCodeRemove",this.graphQLClient))}},{key:"addGiftCards",value:function(r,i){return this.graphQLClient.send(vJ,{checkoutId:r,giftCardCodes:i}).then(Hr("checkoutGiftCardsAppend",this.graphQLClient))}},{key:"removeGiftCard",value:function(r,i){return this.graphQLClient.send(yJ,{checkoutId:r,appliedGiftCardId:i}).then(Hr("checkoutGiftCardRemoveV2",this.graphQLClient))}},{key:"removeLineItems",value:function(r,i){return this.graphQLClient.send(dJ,{checkoutId:r,lineItemIds:i}).then(Hr("checkoutLineItemsRemove",this.graphQLClient))}},{key:"replaceLineItems",value:function(r,i){return this.graphQLClient.send(fJ,{checkoutId:r,lineItems:i}).then(Hr("checkoutLineItemsReplace",this.graphQLClient))}},{key:"updateLineItems",value:function(r,i){return this.graphQLClient.send(hJ,{checkoutId:r,lineItems:i}).then(Hr("checkoutLineItemsUpdate",this.graphQLClient))}},{key:"updateShippingAddress",value:function(r,i){return this.graphQLClient.send(xJ,{checkoutId:r,shippingAddress:i}).then(Hr("checkoutShippingAddressUpdateV2",this.graphQLClient))}}]),e}(Rh),SJ={imageForSize:function(e,t){var r=t.maxWidth,i=t.maxHeight,a=e.src.split("?"),s=a[0],o=a[1]?"?"+a[1]:"",l=s.split("."),c=l.length-2;return l[c]=l[c]+"_"+r+"x"+i,""+l.join(".")+o}},wJ=function(n){Mh(e,n);function e(){return Fo(this,e),Th(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return wo(e,[{key:"helpers",get:function(){return SJ}}]),e}(Rh),CJ="2.21.1",EJ={name:"AppliedGiftCard",kind:"OBJECT",fieldBaseTypes:{amountUsed:"MoneyV2",balance:"MoneyV2",id:"ID",lastCharacters:"String",presentmentAmountUsed:"MoneyV2"},implementsNode:!0},MJ={name:"Attribute",kind:"OBJECT",fieldBaseTypes:{key:"String",value:"String"},implementsNode:!1},TJ={name:"AutomaticDiscountApplication",kind:"OBJECT",fieldBaseTypes:{title:"String"},implementsNode:!1},bJ={name:"Boolean",kind:"SCALAR"},PJ={name:"Checkout",kind:"OBJECT",fieldBaseTypes:{appliedGiftCards:"AppliedGiftCard",completedAt:"DateTime",createdAt:"DateTime",currencyCode:"CurrencyCode",customAttributes:"Attribute",discountApplications:"DiscountApplicationConnection",email:"String",id:"ID",lineItems:"CheckoutLineItemConnection",lineItemsSubtotalPrice:"MoneyV2",note:"String",order:"Order",orderStatusUrl:"URL",paymentDue:"MoneyV2",ready:"Boolean",requiresShipping:"Boolean",shippingAddress:"MailingAddress",shippingLine:"ShippingRate",subtotalPrice:"MoneyV2",taxExempt:"Boolean",taxesIncluded:"Boolean",totalPrice:"MoneyV2",totalTax:"MoneyV2",updatedAt:"DateTime",webUrl:"URL"},implementsNode:!0},RJ={name:"CheckoutAttributesUpdateV2Payload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},IJ={name:"CheckoutCreatePayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},FJ={name:"CheckoutDiscountCodeApplyV2Payload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},BJ={name:"CheckoutDiscountCodeRemovePayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},LJ={name:"CheckoutEmailUpdateV2Payload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},DJ={name:"CheckoutErrorCode",kind:"ENUM"},UJ={name:"CheckoutGiftCardRemoveV2Payload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},OJ={name:"CheckoutGiftCardsAppendPayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},kJ={name:"CheckoutLineItem",kind:"OBJECT",fieldBaseTypes:{customAttributes:"Attribute",discountAllocations:"DiscountAllocation",id:"ID",quantity:"Int",title:"String",variant:"ProductVariant"},implementsNode:!0},NJ={name:"CheckoutLineItemConnection",kind:"OBJECT",fieldBaseTypes:{edges:"CheckoutLineItemEdge",pageInfo:"PageInfo"},implementsNode:!1},zJ={name:"CheckoutLineItemEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"CheckoutLineItem"},implementsNode:!1},VJ={name:"CheckoutLineItemsAddPayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},GJ={name:"CheckoutLineItemsRemovePayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},HJ={name:"CheckoutLineItemsReplacePayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",userErrors:"CheckoutUserError"},implementsNode:!1},WJ={name:"CheckoutLineItemsUpdatePayload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},XJ={name:"CheckoutShippingAddressUpdateV2Payload",kind:"OBJECT",fieldBaseTypes:{checkout:"Checkout",checkoutUserErrors:"CheckoutUserError",userErrors:"UserError"},implementsNode:!1},jJ={name:"CheckoutUserError",kind:"OBJECT",fieldBaseTypes:{code:"CheckoutErrorCode",field:"String",message:"String"},implementsNode:!1},JJ={name:"Collection",kind:"OBJECT",fieldBaseTypes:{description:"String",descriptionHtml:"HTML",handle:"String",id:"ID",image:"Image",products:"ProductConnection",title:"String",updatedAt:"DateTime"},implementsNode:!0},qJ={name:"CollectionConnection",kind:"OBJECT",fieldBaseTypes:{edges:"CollectionEdge",pageInfo:"PageInfo"},implementsNode:!1},KJ={name:"CollectionEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"Collection"},implementsNode:!1},YJ={name:"CountryCode",kind:"ENUM"},QJ={name:"CurrencyCode",kind:"ENUM"},ZJ={name:"DateTime",kind:"SCALAR"},$J={name:"Decimal",kind:"SCALAR"},eq={name:"DiscountAllocation",kind:"OBJECT",fieldBaseTypes:{allocatedAmount:"MoneyV2",discountApplication:"DiscountApplication"},implementsNode:!1},tq={name:"DiscountApplication",kind:"INTERFACE",fieldBaseTypes:{allocationMethod:"DiscountApplicationAllocationMethod",targetSelection:"DiscountApplicationTargetSelection",targetType:"DiscountApplicationTargetType",value:"PricingValue"},possibleTypes:["AutomaticDiscountApplication","DiscountCodeApplication","ManualDiscountApplication","ScriptDiscountApplication"]},nq={name:"DiscountApplicationAllocationMethod",kind:"ENUM"},iq={name:"DiscountApplicationConnection",kind:"OBJECT",fieldBaseTypes:{edges:"DiscountApplicationEdge",pageInfo:"PageInfo"},implementsNode:!1},rq={name:"DiscountApplicationEdge",kind:"OBJECT",fieldBaseTypes:{node:"DiscountApplication"},implementsNode:!1},aq={name:"DiscountApplicationTargetSelection",kind:"ENUM"},sq={name:"DiscountApplicationTargetType",kind:"ENUM"},oq={name:"DiscountCodeApplication",kind:"OBJECT",fieldBaseTypes:{applicable:"Boolean",code:"String"},implementsNode:!1},lq={name:"Domain",kind:"OBJECT",fieldBaseTypes:{host:"String",sslEnabled:"Boolean",url:"URL"},implementsNode:!1},cq={name:"Float",kind:"SCALAR"},uq={name:"HTML",kind:"SCALAR"},dq={name:"ID",kind:"SCALAR"},fq={name:"Image",kind:"OBJECT",fieldBaseTypes:{altText:"String",height:"Int",id:"ID",url:"URL",width:"Int"},implementsNode:!1},hq={name:"ImageConnection",kind:"OBJECT",fieldBaseTypes:{edges:"ImageEdge",pageInfo:"PageInfo"},implementsNode:!1},pq={name:"ImageEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"Image"},implementsNode:!1},mq={name:"Int",kind:"SCALAR"},gq={name:"MailingAddress",kind:"OBJECT",fieldBaseTypes:{address1:"String",address2:"String",city:"String",company:"String",country:"String",countryCodeV2:"CountryCode",firstName:"String",formatted:"String",id:"ID",lastName:"String",latitude:"Float",longitude:"Float",name:"String",phone:"String",province:"String",provinceCode:"String",zip:"String"},implementsNode:!0},vq={name:"ManualDiscountApplication",kind:"OBJECT",fieldBaseTypes:{description:"String",title:"String"},implementsNode:!1},yq={name:"MoneyV2",kind:"OBJECT",fieldBaseTypes:{amount:"Decimal",currencyCode:"CurrencyCode"},implementsNode:!1},_q={name:"Mutation",kind:"OBJECT",fieldBaseTypes:{checkoutAttributesUpdateV2:"CheckoutAttributesUpdateV2Payload",checkoutCreate:"CheckoutCreatePayload",checkoutDiscountCodeApplyV2:"CheckoutDiscountCodeApplyV2Payload",checkoutDiscountCodeRemove:"CheckoutDiscountCodeRemovePayload",checkoutEmailUpdateV2:"CheckoutEmailUpdateV2Payload",checkoutGiftCardRemoveV2:"CheckoutGiftCardRemoveV2Payload",checkoutGiftCardsAppend:"CheckoutGiftCardsAppendPayload",checkoutLineItemsAdd:"CheckoutLineItemsAddPayload",checkoutLineItemsRemove:"CheckoutLineItemsRemovePayload",checkoutLineItemsReplace:"CheckoutLineItemsReplacePayload",checkoutLineItemsUpdate:"CheckoutLineItemsUpdatePayload",checkoutShippingAddressUpdateV2:"CheckoutShippingAddressUpdateV2Payload"},implementsNode:!1,relayInputObjectBaseTypes:{cartCreate:"CartInput",cartMetafieldDelete:"CartMetafieldDeleteInput",checkoutAttributesUpdateV2:"CheckoutAttributesUpdateV2Input",checkoutCreate:"CheckoutCreateInput",customerAccessTokenCreate:"CustomerAccessTokenCreateInput",customerActivate:"CustomerActivateInput",customerCreate:"CustomerCreateInput",customerReset:"CustomerResetInput"}},xq={name:"Node",kind:"INTERFACE",fieldBaseTypes:{},possibleTypes:["AppliedGiftCard","Article","Blog","Cart","CartLine","Checkout","CheckoutLineItem","Collection","Comment","ComponentizableCartLine","ExternalVideo","GenericFile","Location","MailingAddress","Market","MediaImage","MediaPresentation","Menu","MenuItem","Metafield","Metaobject","Model3d","Order","Page","Payment","Product","ProductOption","ProductVariant","Shop","ShopPolicy","UrlRedirect","Video"]},Aq={name:"Order",kind:"OBJECT",fieldBaseTypes:{currencyCode:"CurrencyCode",customerUrl:"URL",id:"ID",lineItems:"OrderLineItemConnection",orderNumber:"Int",processedAt:"DateTime",shippingAddress:"MailingAddress",subtotalPrice:"MoneyV2",totalPrice:"MoneyV2",totalRefunded:"MoneyV2",totalShippingPrice:"MoneyV2",totalTax:"MoneyV2"},implementsNode:!0},Sq={name:"OrderLineItem",kind:"OBJECT",fieldBaseTypes:{customAttributes:"Attribute",quantity:"Int",title:"String",variant:"ProductVariant"},implementsNode:!1},wq={name:"OrderLineItemConnection",kind:"OBJECT",fieldBaseTypes:{edges:"OrderLineItemEdge",pageInfo:"PageInfo"},implementsNode:!1},Cq={name:"OrderLineItemEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"OrderLineItem"},implementsNode:!1},Eq={name:"PageInfo",kind:"OBJECT",fieldBaseTypes:{hasNextPage:"Boolean",hasPreviousPage:"Boolean"},implementsNode:!1},Mq={name:"PaymentSettings",kind:"OBJECT",fieldBaseTypes:{enabledPresentmentCurrencies:"CurrencyCode"},implementsNode:!1},Tq={name:"PricingPercentageValue",kind:"OBJECT",fieldBaseTypes:{percentage:"Float"},implementsNode:!1},bq={name:"PricingValue",kind:"UNION"},Pq={name:"Product",kind:"OBJECT",fieldBaseTypes:{availableForSale:"Boolean",createdAt:"DateTime",description:"String",descriptionHtml:"HTML",handle:"String",id:"ID",images:"ImageConnection",onlineStoreUrl:"URL",options:"ProductOption",productType:"String",publishedAt:"DateTime",title:"String",updatedAt:"DateTime",variants:"ProductVariantConnection",vendor:"String"},implementsNode:!0},Rq={name:"ProductConnection",kind:"OBJECT",fieldBaseTypes:{edges:"ProductEdge",pageInfo:"PageInfo"},implementsNode:!1},Iq={name:"ProductEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"Product"},implementsNode:!1},Fq={name:"ProductOption",kind:"OBJECT",fieldBaseTypes:{name:"String",values:"String"},implementsNode:!0},Bq={name:"ProductVariant",kind:"OBJECT",fieldBaseTypes:{availableForSale:"Boolean",compareAtPrice:"MoneyV2",id:"ID",image:"Image",price:"MoneyV2",product:"Product",selectedOptions:"SelectedOption",sku:"String",title:"String",unitPrice:"MoneyV2",unitPriceMeasurement:"UnitPriceMeasurement",weight:"Float"},implementsNode:!0},Lq={name:"ProductVariantConnection",kind:"OBJECT",fieldBaseTypes:{edges:"ProductVariantEdge",pageInfo:"PageInfo"},implementsNode:!1},Dq={name:"ProductVariantEdge",kind:"OBJECT",fieldBaseTypes:{cursor:"String",node:"ProductVariant"},implementsNode:!1},Uq={name:"QueryRoot",kind:"OBJECT",fieldBaseTypes:{collectionByHandle:"Collection",collections:"CollectionConnection",node:"Node",nodes:"Node",productByHandle:"Product",productRecommendations:"Product",products:"ProductConnection",shop:"Shop"},implementsNode:!1},Oq={name:"ScriptDiscountApplication",kind:"OBJECT",fieldBaseTypes:{title:"String"},implementsNode:!1},kq={name:"SelectedOption",kind:"OBJECT",fieldBaseTypes:{name:"String",value:"String"},implementsNode:!1},Nq={name:"ShippingRate",kind:"OBJECT",fieldBaseTypes:{handle:"String",price:"MoneyV2",title:"String"},implementsNode:!1},zq={name:"Shop",kind:"OBJECT",fieldBaseTypes:{description:"String",moneyFormat:"String",name:"String",paymentSettings:"PaymentSettings",primaryDomain:"Domain",privacyPolicy:"ShopPolicy",refundPolicy:"ShopPolicy",termsOfService:"ShopPolicy"},implementsNode:!0},Vq={name:"ShopPolicy",kind:"OBJECT",fieldBaseTypes:{body:"String",id:"ID",title:"String",url:"URL"},implementsNode:!0},Gq={name:"String",kind:"SCALAR"},Hq={name:"URL",kind:"SCALAR"},Wq={name:"UnitPriceMeasurement",kind:"OBJECT",fieldBaseTypes:{measuredType:"UnitPriceMeasurementMeasuredType",quantityUnit:"UnitPriceMeasurementMeasuredUnit",quantityValue:"Float",referenceUnit:"UnitPriceMeasurementMeasuredUnit",referenceValue:"Int"},implementsNode:!1},Xq={name:"UnitPriceMeasurementMeasuredType",kind:"ENUM"},jq={name:"UnitPriceMeasurementMeasuredUnit",kind:"ENUM"},Jq={name:"UserError",kind:"OBJECT",fieldBaseTypes:{field:"String",message:"String"},implementsNode:!1},He={types:{}};He.types.AppliedGiftCard=EJ;He.types.Attribute=MJ;He.types.AutomaticDiscountApplication=TJ;He.types.Boolean=bJ;He.types.Checkout=PJ;He.types.CheckoutAttributesUpdateV2Payload=RJ;He.types.CheckoutCreatePayload=IJ;He.types.CheckoutDiscountCodeApplyV2Payload=FJ;He.types.CheckoutDiscountCodeRemovePayload=BJ;He.types.CheckoutEmailUpdateV2Payload=LJ;He.types.CheckoutErrorCode=DJ;He.types.CheckoutGiftCardRemoveV2Payload=UJ;He.types.CheckoutGiftCardsAppendPayload=OJ;He.types.CheckoutLineItem=kJ;He.types.CheckoutLineItemConnection=NJ;He.types.CheckoutLineItemEdge=zJ;He.types.CheckoutLineItemsAddPayload=VJ;He.types.CheckoutLineItemsRemovePayload=GJ;He.types.CheckoutLineItemsReplacePayload=HJ;He.types.CheckoutLineItemsUpdatePayload=WJ;He.types.CheckoutShippingAddressUpdateV2Payload=XJ;He.types.CheckoutUserError=jJ;He.types.Collection=JJ;He.types.CollectionConnection=qJ;He.types.CollectionEdge=KJ;He.types.CountryCode=YJ;He.types.CurrencyCode=QJ;He.types.DateTime=ZJ;He.types.Decimal=$J;He.types.DiscountAllocation=eq;He.types.DiscountApplication=tq;He.types.DiscountApplicationAllocationMethod=nq;He.types.DiscountApplicationConnection=iq;He.types.DiscountApplicationEdge=rq;He.types.DiscountApplicationTargetSelection=aq;He.types.DiscountApplicationTargetType=sq;He.types.DiscountCodeApplication=oq;He.types.Domain=lq;He.types.Float=cq;He.types.HTML=uq;He.types.ID=dq;He.types.Image=fq;He.types.ImageConnection=hq;He.types.ImageEdge=pq;He.types.Int=mq;He.types.MailingAddress=gq;He.types.ManualDiscountApplication=vq;He.types.MoneyV2=yq;He.types.Mutation=_q;He.types.Node=xq;He.types.Order=Aq;He.types.OrderLineItem=Sq;He.types.OrderLineItemConnection=wq;He.types.OrderLineItemEdge=Cq;He.types.PageInfo=Eq;He.types.PaymentSettings=Mq;He.types.PricingPercentageValue=Tq;He.types.PricingValue=bq;He.types.Product=Pq;He.types.ProductConnection=Rq;He.types.ProductEdge=Iq;He.types.ProductOption=Fq;He.types.ProductVariant=Bq;He.types.ProductVariantConnection=Lq;He.types.ProductVariantEdge=Dq;He.types.QueryRoot=Uq;He.types.ScriptDiscountApplication=Oq;He.types.SelectedOption=kq;He.types.ShippingRate=Nq;He.types.Shop=zq;He.types.ShopPolicy=Vq;He.types.String=Gq;He.types.URL=Hq;He.types.UnitPriceMeasurement=Wq;He.types.UnitPriceMeasurementMeasuredType=Xq;He.types.UnitPriceMeasurementMeasuredUnit=jq;He.types.UserError=Jq;He.queryType="QueryRoot";He.mutationType="Mutation";He.subscriptionType=null;function xD(n){return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];t&&(typeof t>"u"?"undefined":_w(t))==="object"&&xD(t)}),Object.freeze(n),n}var gP=xD(He),qq=function(){wo(n,null,[{key:"buildClient",value:function(t,r){var i=new jj(t),a=new n(i,fP,r);return a.config=i,a}}]);function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fP,r=arguments[2];Fo(this,n);var i="https://"+e.domain+"/api/"+e.apiVersion+"/graphql",a={"X-SDK-Variant":"javascript","X-SDK-Version":CJ,"X-Shopify-Storefront-Access-Token":e.storefrontAccessToken};e.source&&(a["X-SDK-Variant-Source"]=e.source);var s=e.language?e.language:"*";a["Accept-Language"]=s,r?(a["Content-Type"]="application/json",a.Accept="application/json",this.graphQLClient=new t(gP,{fetcher:function(l){return r(i,{body:JSON.stringify(l),method:"POST",mode:"cors",headers:a}).then(function(c){return c.json()})}})):this.graphQLClient=new t(gP,{url:i,fetcherOptions:{headers:a}}),this.product=new $j(this.graphQLClient),this.collection=new rJ(this.graphQLClient),this.shop=new oJ(this.graphQLClient),this.checkout=new AJ(this.graphQLClient),this.image=new wJ(this.graphQLClient)}return wo(n,[{key:"fetchNextPage",value:function(t){return this.graphQLClient.fetchNextPage(t)}}]),n}();const Kq=()=>{const[n,e]=k.useState({x:0,y:0}),[t,r]=k.useState(!1);return k.useEffect(()=>{const i=s=>{e({x:s.clientX,y:s.clientY})},a=s=>{e({x:s.targetTouches[0].clientX,y:s.targetTouches[0].clientY})};return window.addEventListener("mousemove",s=>i(s)),window.addEventListener("touchmove",s=>a(s)),window.addEventListener("mouseup",()=>r(!0)),window.addEventListener("mousedown",()=>r(!1)),window.addEventListener("touchend",()=>r(!0)),window.addEventListener("touchstart",()=>r(!1)),()=>{window.removeEventListener("mousemove",s=>i(s)),window.removeEventListener("touchmove",s=>a(s)),window.removeEventListener("mouseup",()=>r(!0)),window.removeEventListener("mousedown",()=>r(!1)),window.removeEventListener("touchend",()=>r(!0)),window.removeEventListener("touchstart",()=>r(!1))}},[]),{posX:n.x,posY:n.y,mouseTouchUp:t}},vP=({section_id:n})=>{let e;const r={shopifyClient:qq.buildClient({storefrontAccessToken:"9c93da58e86d7071b6656a318ccd1d8f",domain:"266823-3.myshopify.com",apiVersion:""}),checkout:null,checkoutId:null,checkoutUrl:null,cartQuantity:null,initialized:!1,loading:!0},[i,a]=k.useState(r),[s,o]=k.useState(!1),[l,c]=k.useState(!1),{posX:f,posY:p}=Kq();switch(k.useEffect(()=>{oD(i,a)},[]),n){case"5rc-hero":e=jX;break;case"5rc-product":e=uj;break;case"three-js":e=v7;break;default:e=()=>ue.jsx("div",{});break}return ue.jsx(e,{store:i,setStore:a,posY:p,posX:f,drawerActive:s,setDrawerActive:o,modalActive:l,setModalActive:c})};window.initReactComponent=({section_id:n,shop_id:e,ssr:t="true"})=>{const r=document.getElementById(`${e}`);t==="true"?$F(r,ue.jsx(aP,{children:ue.jsx(vP,{section_id:n})})):eB(r).render(ue.jsx(aP,{children:ue.jsx(vP,{section_id:n})}))};
